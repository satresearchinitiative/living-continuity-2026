{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/OptimizedCanvas.jsx"],"sourcesContent":["'use client';\n\nimport { Canvas } from \"@react-three/fiber\";\nimport { useMemo } from \"react\";\n\nconst createCleanObject = (source) => {\n  if (!source || typeof source !== 'object' || Array.isArray(source)) {\n    return {};\n  }\n  const clean = {};\n  try {\n    for (const key in source) {\n      if (source.hasOwnProperty(key)) {\n        const value = source[key];\n        if (value !== undefined && value !== null) {\n          if (typeof value === 'object' && !Array.isArray(value)) {\n            clean[key] = createCleanObject(value);\n          } else if (typeof value !== 'object') {\n            clean[key] = value;\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn('[OptimizedCanvas] Error creating clean object:', e);\n  }\n  return clean;\n};\n\nexport default function OptimizedCanvas({ children, frameloop, style, camera, orthographic }) {\n  const glConfig = useMemo(() => {\n    try {\n      return {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n        stencil: false,\n        depth: true,\n        logarithmicDepthBuffer: false,\n        preserveDrawingBuffer: false,\n        failIfMajorPerformanceCaveat: false,\n      };\n    } catch (e) {\n      console.error('[OptimizedCanvas] Error creating glConfig:', e);\n      return {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n      };\n    }\n  }, []);\n\n  const canvasProps = useMemo(() => {\n    const builtProps = {\n      dpr: [1, 1.5],\n      frameloop: frameloop || 'demand',\n      gl: (glConfig && typeof glConfig === 'object' && !Array.isArray(glConfig)) ? glConfig : {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n      },\n    };\n    \n    if (orthographic !== undefined) {\n      builtProps.orthographic = orthographic;\n    }\n    \n    try {\n      if (style !== undefined && style !== null && typeof style === 'object' && !Array.isArray(style)) {\n        builtProps.style = createCleanObject(style);\n      }\n      \n      if (camera !== undefined && camera !== null && typeof camera === 'object' && !Array.isArray(camera)) {\n        builtProps.camera = createCleanObject(camera);\n      }\n    } catch (e) {\n      console.error('[OptimizedCanvas] Error building canvasProps:', e);\n    }\n    \n    return builtProps;\n  }, [frameloop, style, camera, glConfig, orthographic]);\n\n  if (!canvasProps || typeof canvasProps !== 'object' || Array.isArray(canvasProps)) {\n    console.error('[OptimizedCanvas] Invalid canvasProps, using defaults:', canvasProps);\n    return (\n      <Canvas dpr={[1, 1.5]} frameloop=\"demand\">\n        {children}\n      </Canvas>\n    );\n  }\n\n  if (!Canvas) {\n    console.error('[OptimizedCanvas] Canvas component not available');\n    return null;\n  }\n\n  const safeCanvasProps = useMemo(() => {\n    const clean = createCleanObject(canvasProps);\n    \n    if (!clean.dpr || !Array.isArray(clean.dpr)) {\n      clean.dpr = [1, 1.5];\n    }\n    if (!clean.frameloop || typeof clean.frameloop !== 'string') {\n      clean.frameloop = 'demand';\n    }\n    if (!clean.gl || typeof clean.gl !== 'object' || Array.isArray(clean.gl)) {\n      clean.gl = glConfig;\n    }\n    \n    return clean;\n  }, [canvasProps, glConfig]);\n\n  try {\n    return (\n      <Canvas {...safeCanvasProps}>\n        {children}\n      </Canvas>\n    );\n  } catch (e) {\n    console.error('[OptimizedCanvas] Error rendering Canvas:', e, 'safeCanvasProps:', safeCanvasProps);\n    return (\n      <Canvas dpr={[1, 1.5]} frameloop=\"demand\">\n        {children}\n      </Canvas>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/nodeConnections.js"],"sourcesContent":["export const ARTICLE_CONNECTIONS = {\n  \"A1\": [\n    \"G5\",\n    \"G8\",\n    \"G15\",\n    \"G28\",\n    \"G33\",\n    \"G45\",\n    \"G51\",\n    \"G54\"\n  ],\n  \"A2\": [\n    \"G2\",\n    \"G3\",\n    \"G23\",\n    \"G37\"\n  ],\n  \"A3\": [\n    \"G9\",\n    \"G11\",\n    \"G16\",\n    \"G18\",\n    \"G20\",\n    \"G40\"\n  ],\n  \"A4\": [\n    \"G4\",\n    \"G11\",\n    \"G15\",\n    \"G16\",\n    \"G17\",\n    \"G19\",\n    \"G29\",\n    \"G38\",\n    \"G53\"\n  ],\n  \"A5\": [\n    \"G8\",\n    \"G14\",\n    \"G15\",\n    \"G22\",\n    \"G24\",\n    \"G34\",\n    \"G51\",\n    \"G54\"\n  ],\n  \"A6\": [\n    \"G1\",\n    \"G6\",\n    \"G7\",\n    \"G14\",\n    \"G19\",\n    \"G21\",\n    \"G22\",\n    \"G24\",\n    \"G25\",\n    \"G27\",\n    \"G34\",\n    \"G35\",\n    \"G50\",\n    \"G52\"\n  ],\n  \"A7\": [\n    \"G2\",\n    \"G5\",\n    \"G10\",\n    \"G14\",\n    \"G16\",\n    \"G26\"\n  ],\n  \"A8\": [\n    \"G2\",\n    \"G8\",\n    \"G20\",\n    \"G24\",\n    \"G43\",\n    \"G44\"\n  ],\n  \"A9\": [\n    \"G5\",\n    \"G14\",\n    \"G28\"\n  ],\n  \"A10\": [\n    \"G5\",\n    \"G9\",\n    \"G10\",\n    \"G12\",\n    \"G15\",\n    \"G33\",\n    \"G36\",\n    \"G45\"\n  ],\n  \"A11\": [\n    \"G7\",\n    \"G9\",\n    \"G11\",\n    \"G14\",\n    \"G18\",\n    \"G24\",\n    \"G29\",\n    \"G36\",\n    \"G40\",\n    \"G53\"\n  ],\n  \"A12\": [\n    \"G4\",\n    \"G11\",\n    \"G16\",\n    \"G29\",\n    \"G32\",\n    \"G38\",\n    \"G49\"\n  ],\n  \"A13\": [\n    \"G4\",\n    \"G13\",\n    \"G21\",\n    \"G37\",\n    \"G39\"\n  ],\n  \"A14\": [\n    \"G1\",\n    \"G3\",\n    \"G7\",\n    \"G11\",\n    \"G17\",\n    \"G18\",\n    \"G19\",\n    \"G21\",\n    \"G24\",\n    \"G34\",\n    \"G47\",\n    \"G50\"\n  ],\n  \"A15\": [\n    \"G23\",\n    \"G36\",\n    \"G46\"\n  ],\n  \"A16\": [\n    \"G5\",\n    \"G12\",\n    \"G15\",\n    \"G16\",\n    \"G26\",\n    \"G28\",\n    \"G33\",\n    \"G38\",\n    \"G49\"\n  ],\n  \"A17\": [\n    \"G2\",\n    \"G6\",\n    \"G7\",\n    \"G11\",\n    \"G13\",\n    \"G21\",\n    \"G22\",\n    \"G23\",\n    \"G25\",\n    \"G35\",\n    \"G41\",\n    \"G42\"\n  ],\n  \"A18\": [\n    \"G8\",\n    \"G9\",\n    \"G12\",\n    \"G13\",\n    \"G16\",\n    \"G19\",\n    \"G20\",\n    \"G25\",\n    \"G32\",\n    \"G51\"\n  ],\n  \"A19\": [\n    \"G13\",\n    \"G17\",\n    \"G30\",\n    \"G39\",\n    \"G44\",\n    \"G47\"\n  ],\n  \"A20\": [\n    \"G1\",\n    \"G2\",\n    \"G7\",\n    \"G24\",\n    \"G40\",\n    \"G46\",\n    \"G52\"\n  ],\n  \"A21\": [\n    \"G2\",\n    \"G6\",\n    \"G10\",\n    \"G35\",\n    \"G39\",\n    \"G41\"\n  ],\n  \"A22\": [\n    \"G3\",\n    \"G13\",\n    \"G18\",\n    \"G32\",\n    \"G43\"\n  ],\n  \"A23\": [\n    \"G2\",\n    \"G6\",\n    \"G13\",\n    \"G21\",\n    \"G23\",\n    \"G30\",\n    \"G35\",\n    \"G41\"\n  ],\n  \"A24\": [\n    \"G3\",\n    \"G6\",\n    \"G10\",\n    \"G12\",\n    \"G16\",\n    \"G17\",\n    \"G22\",\n    \"G27\",\n    \"G35\",\n    \"G48\"\n  ],\n  \"A25\": [\n    \"G21\",\n    \"G23\",\n    \"G25\",\n    \"G35\",\n    \"G41\",\n    \"G42\",\n    \"G48\"\n  ],\n  \"A26\": [\n    \"G5\",\n    \"G12\",\n    \"G14\",\n    \"G26\",\n    \"G27\",\n    \"G37\"\n  ],\n  \"A27\": [],\n  \"A28\": [],\n  \"A29\": []\n};\n\nexport const KEYWORD_CONNECTIONS = {\n  \"G1\": [\n    \"A6\",\n    \"A14\",\n    \"A20\"\n  ],\n  \"G2\": [\n    \"A2\",\n    \"A7\",\n    \"A17\",\n    \"A20\",\n    \"A21\",\n    \"A23\"\n  ],\n  \"G3\": [\n    \"A2\",\n    \"A14\",\n    \"A22\",\n    \"A24\"\n  ],\n  \"G4\": [\n    \"A4\",\n    \"A12\",\n    \"A13\"\n  ],\n  \"G5\": [\n    \"A1\",\n    \"A7\",\n    \"A9\",\n    \"A10\",\n    \"A16\",\n    \"A26\"\n  ],\n  \"G6\": [\n    \"A6\",\n    \"A17\",\n    \"A21\",\n    \"A23\",\n    \"A24\"\n  ],\n  \"G7\": [\n    \"A6\",\n    \"A11\",\n    \"A14\",\n    \"A17\",\n    \"A20\"\n  ],\n  \"G8\": [\n    \"A1\",\n    \"A5\",\n    \"A8\",\n    \"A18\"\n  ],\n  \"G9\": [\n    \"A3\",\n    \"A10\",\n    \"A11\",\n    \"A18\"\n  ],\n  \"G10\": [\n    \"A7\",\n    \"A10\",\n    \"A21\",\n    \"A24\"\n  ],\n  \"G11\": [\n    \"A3\",\n    \"A4\",\n    \"A11\",\n    \"A12\",\n    \"A14\",\n    \"A17\"\n  ],\n  \"G12\": [\n    \"A10\",\n    \"A16\",\n    \"A18\",\n    \"A24\",\n    \"A26\"\n  ],\n  \"G13\": [\n    \"A13\",\n    \"A17\",\n    \"A18\",\n    \"A19\",\n    \"A22\",\n    \"A23\"\n  ],\n  \"G14\": [\n    \"A5\",\n    \"A6\",\n    \"A7\",\n    \"A9\",\n    \"A11\",\n    \"A14\",\n    \"A26\"\n  ],\n  \"G15\": [\n    \"A1\",\n    \"A4\",\n    \"A5\",\n    \"A10\",\n    \"A16\"\n  ],\n  \"G16\": [\n    \"A3\",\n    \"A4\",\n    \"A7\",\n    \"A12\",\n    \"A16\",\n    \"A18\",\n    \"A24\"\n  ],\n  \"G17\": [\n    \"A4\",\n    \"A14\",\n    \"A19\",\n    \"A24\"\n  ],\n  \"G18\": [\n    \"A3\",\n    \"A11\",\n    \"A14\",\n    \"A22\"\n  ],\n  \"G19\": [\n    \"A4\",\n    \"A6\",\n    \"A14\",\n    \"A18\"\n  ],\n  \"G20\": [\n    \"A1\",\n    \"A3\",\n    \"A8\",\n    \"A18\"\n  ],\n  \"G21\": [\n    \"A6\",\n    \"A13\",\n    \"A14\",\n    \"A17\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G22\": [\n    \"A5\",\n    \"A6\",\n    \"A17\",\n    \"A24\"\n  ],\n  \"G23\": [\n    \"A2\",\n    \"A15\",\n    \"A17\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G24\": [\n    \"A5\",\n    \"A6\",\n    \"A8\",\n    \"A11\",\n    \"A14\",\n    \"A20\"\n  ],\n  \"G25\": [\n    \"A6\",\n    \"A17\",\n    \"A18\",\n    \"A25\"\n  ],\n  \"G26\": [\n    \"A7\",\n    \"A16\",\n    \"A26\"\n  ],\n  \"G27\": [\n    \"A6\",\n    \"A24\",\n    \"A26\"\n  ],\n  \"G28\": [\n    \"A1\",\n    \"A9\",\n    \"A16\"\n  ],\n  \"G29\": [\n    \"A4\",\n    \"A11\",\n    \"A12\"\n  ],\n  \"G30\": [\n    \"A19\",\n    \"A23\",\n    \"A4\"\n  ],\n  \"G31\": [\n    \"A1\"\n  ],\n  \"G32\": [\n    \"A12\",\n    \"A18\",\n    \"A22\"\n  ],\n  \"G33\": [\n    \"A1\",\n    \"A10\",\n    \"A16\"\n  ],\n  \"G34\": [\n    \"A5\",\n    \"A6\",\n    \"A14\"\n  ],\n  \"G35\": [\n    \"A6\",\n    \"A17\",\n    \"A21\",\n    \"A23\",\n    \"A24\",\n    \"A25\"\n  ],\n  \"G36\": [\n    \"A10\",\n    \"A11\",\n    \"A15\"\n  ],\n  \"G37\": [\n    \"A2\",\n    \"A13\",\n    \"A26\"\n  ],\n  \"G38\": [\n    \"A4\",\n    \"A12\",\n    \"A16\"\n  ],\n  \"G39\": [\n    \"A13\",\n    \"A19\",\n    \"A21\"\n  ],\n  \"G40\": [\n    \"A3\",\n    \"A11\",\n    \"A20\"\n  ],\n  \"G41\": [\n    \"A17\",\n    \"A21\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G42\": [\n    \"A17\",\n    \"A25\"\n  ],\n  \"G43\": [\n    \"A8\",\n    \"A22\"\n  ],\n  \"G44\": [\n    \"A8\",\n    \"A19\"\n  ],\n  \"G45\": [\n    \"A1\",\n    \"A10\"\n  ],\n  \"G46\": [\n    \"A15\",\n    \"A20\"\n  ],\n  \"G47\": [\n    \"A14\",\n    \"A19\"\n  ],\n  \"G48\": [\n    \"A24\",\n    \"A25\"\n  ],\n  \"G49\": [\n    \"A12\",\n    \"A16\"\n  ],\n  \"G50\": [\n    \"A6\",\n    \"A14\"\n  ],\n  \"G51\": [\n    \"A1\",\n    \"A5\",\n    \"A18\"\n  ],\n  \"G52\": [\n    \"A6\",\n    \"A20\"\n  ],\n  \"G53\": [\n    \"A4\",\n    \"A11\"\n  ],\n  \"G54\": [\n    \"A1\",\n    \"A5\"\n  ]\n};\n\nexport function getConnectedNodes(nodeId) {\n  if (!nodeId) return [];\n  if (ARTICLE_CONNECTIONS[nodeId]) {\n    return ARTICLE_CONNECTIONS[nodeId];\n  }\n  if (KEYWORD_CONNECTIONS[nodeId]) {\n    return KEYWORD_CONNECTIONS[nodeId];\n  }\n  return [];\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,sBAAsB;IACjC,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO,EAAE;IACT,OAAO,EAAE;IACT,OAAO,EAAE;AACX;AAEO,MAAM,sBAAsB;IACjC,MAAM;QACJ;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;IACD,OAAO;QACL;QACA;KACD;AACH;AAEO,SAAS,kBAAkB,MAAM;IACtC,IAAI,CAAC,QAAQ,OAAO,EAAE;IACtB,IAAI,mBAAmB,CAAC,OAAO,EAAE;QAC/B,OAAO,mBAAmB,CAAC,OAAO;IACpC;IACA,IAAI,mBAAmB,CAAC,OAAO,EAAE;QAC/B,OAAO,mBAAmB,CAAC,OAAO;IACpC;IACA,OAAO,EAAE;AACX"}},
    {"offset": {"line": 749, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/radialPosition.js"],"sourcesContent":["const GOLDEN_ANGLE = Math.PI * (3 - Math.sqrt(5));\nconst OUTER_RADIUS_BASE = 22;\nconst OUTER_RADIUS_VARIATION = 6;\nconst INNER_RADIUS_BASE = 12;\nconst INNER_RADIUS_VARIATION = 3;\n\nfunction sphericalPosition(localIndex, localTotal, radius, useEvenDistribution = false) {\n  if (localTotal <= 1) {\n    return [0, 0, 0];\n  }\n\n  if (useEvenDistribution) {\n    const yRaw = 1 - (localIndex / (localTotal - 1)) * 2;\n    const y = Math.max(-0.9, Math.min(0.9, yRaw));\n    const r = Math.sqrt(Math.max(0, 1 - y * y)) * radius;\n    const theta = GOLDEN_ANGLE * localIndex;\n    const x = Math.cos(theta) * r;\n    const z = Math.sin(theta) * r;\n    return [x, y * radius, z];\n  } else {\n    const yRaw = 1 - (localIndex / (localTotal - 1)) * 2;\n    const y = Math.max(-0.85, Math.min(0.85, yRaw));\n    const r = Math.sqrt(Math.max(0, 1 - y * y)) * radius;\n    const theta = GOLDEN_ANGLE * localIndex;\n    const x = Math.cos(theta) * r;\n    const z = Math.sin(theta) * r;\n    return [x, y * radius * 0.8, z];\n  }\n}\n\nfunction getVariedRadius(index, baseRadius, variation) {\n  const variationFactor = Math.sin(index * 0.7) * 0.5 + Math.cos(index * 1.3) * 0.3;\n  const variedRadius = baseRadius + (variationFactor * variation);\n  return variedRadius;\n}\n\nexport function getRadialPosition(index, total, radius = 15, articlesCount = null, glossaryCount = null) {\n  if (articlesCount !== null && glossaryCount !== null && total === articlesCount + glossaryCount) {\n    if (index < articlesCount) {\n      const variedRadius = getVariedRadius(\n        index, \n        OUTER_RADIUS_BASE, \n        OUTER_RADIUS_VARIATION\n      );\n      return sphericalPosition(index, articlesCount, variedRadius, false);\n    }\n    const keywordIndex = index - articlesCount;\n    const variedRadius = getVariedRadius(\n      keywordIndex,\n      INNER_RADIUS_BASE,\n      INNER_RADIUS_VARIATION\n    );\n    return sphericalPosition(\n      keywordIndex,\n      glossaryCount,\n      variedRadius,\n      true\n    );\n  }\n\n  return sphericalPosition(index, total, radius);\n}\n\nexport function getCircularPosition(index, total, radius = 8, height = 0) {\n  const angle = (index / total) * Math.PI * 2;\n  const x = Math.cos(angle) * radius;\n  const z = Math.sin(angle) * radius;\n  return [x, height, z];\n}\n\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,eAAe,KAAK,EAAE,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE;AAChD,MAAM,oBAAoB;AAC1B,MAAM,yBAAyB;AAC/B,MAAM,oBAAoB;AAC1B,MAAM,yBAAyB;AAE/B,SAAS,kBAAkB,UAAU,EAAE,UAAU,EAAE,MAAM,EAAE,sBAAsB,KAAK;IACpF,IAAI,cAAc,GAAG;QACnB,OAAO;YAAC;YAAG;YAAG;SAAE;IAClB;IAEA,IAAI,qBAAqB;QACvB,MAAM,OAAO,IAAI,AAAC,aAAa,CAAC,aAAa,CAAC,IAAK;QACnD,MAAM,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;QACvC,MAAM,IAAI,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,IAAI,MAAM;QAC9C,MAAM,QAAQ,eAAe;QAC7B,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,OAAO;YAAC;YAAG,IAAI;YAAQ;SAAE;IAC3B,OAAO;QACL,MAAM,OAAO,IAAI,AAAC,aAAa,CAAC,aAAa,CAAC,IAAK;QACnD,MAAM,IAAI,KAAK,GAAG,CAAC,CAAC,MAAM,KAAK,GAAG,CAAC,MAAM;QACzC,MAAM,IAAI,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,IAAI,MAAM;QAC9C,MAAM,QAAQ,eAAe;QAC7B,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,OAAO;YAAC;YAAG,IAAI,SAAS;YAAK;SAAE;IACjC;AACF;AAEA,SAAS,gBAAgB,KAAK,EAAE,UAAU,EAAE,SAAS;IACnD,MAAM,kBAAkB,KAAK,GAAG,CAAC,QAAQ,OAAO,MAAM,KAAK,GAAG,CAAC,QAAQ,OAAO;IAC9E,MAAM,eAAe,aAAc,kBAAkB;IACrD,OAAO;AACT;AAEO,SAAS,kBAAkB,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,gBAAgB,IAAI,EAAE,gBAAgB,IAAI;IACrG,IAAI,kBAAkB,QAAQ,kBAAkB,QAAQ,UAAU,gBAAgB,eAAe;QAC/F,IAAI,QAAQ,eAAe;YACzB,MAAM,eAAe,gBACnB,OACA,mBACA;YAEF,OAAO,kBAAkB,OAAO,eAAe,cAAc;QAC/D;QACA,MAAM,eAAe,QAAQ;QAC7B,MAAM,eAAe,gBACnB,cACA,mBACA;QAEF,OAAO,kBACL,cACA,eACA,cACA;IAEJ;IAEA,OAAO,kBAAkB,OAAO,OAAO;AACzC;AAEO,SAAS,oBAAoB,KAAK,EAAE,KAAK,EAAE,SAAS,CAAC,EAAE,SAAS,CAAC;IACtE,MAAM,QAAQ,AAAC,QAAQ,QAAS,KAAK,EAAE,GAAG;IAC1C,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;IAC5B,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;IAC5B,OAAO;QAAC;QAAG;QAAQ;KAAE;AACvB"}},
    {"offset": {"line": 825, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/selectionStore.js"],"sourcesContent":["export {\n  selectedNodeStore,\n  highlightedNodesStore,\n  secondaryHighlightedArticlesStore,\n  elementOpacityStore,\n  connectionLinesVisibilityStore\n} from './appStores';\n\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 832, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/connectionControler.jsx"],"sourcesContent":["import { CubicBezierLine } from \"@react-three/drei\";\nimport React, { useMemo, useEffect, useState, useRef } from \"react\";\nimport { useStore, getStore } from \"usestore-react\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\n\nimport { getConnectedNodes, ARTICLE_CONNECTIONS, KEYWORD_CONNECTIONS } from \"./utils/nodeConnections\";\nimport { getRadialPosition } from \"./utils/radialPosition\";\nimport \"./utils/selectionStore\";\n\nfunction getRelatedArticles(articleId) {\n  if (!articleId || !articleId.startsWith('A')) return [];\n\n  const articleKeywords = ARTICLE_CONNECTIONS[articleId] || [];\n  if (articleKeywords.length === 0) return [];\n\n  const relatedArticles = new Set();\n\n  articleKeywords.forEach(keywordId => {\n    const articlesWithSameKeyword = KEYWORD_CONNECTIONS[keywordId] || [];\n    articlesWithSameKeyword.forEach(relatedArticleId => {\n      if (relatedArticleId !== articleId) {\n        relatedArticles.add(relatedArticleId);\n      }\n    });\n  });\n\n  return Array.from(relatedArticles);\n}\n\nfunction getSecondaryConnectionsForKeyword(keywordId) {\n  if (!keywordId || !keywordId.startsWith('G')) return [];\n\n  const connectedArticles = KEYWORD_CONNECTIONS[keywordId] || [];\n  if (connectedArticles.length === 0) return [];\n\n  const secondaryConnections = [];\n\n  connectedArticles.forEach(articleId => {\n    const articleKeywords = ARTICLE_CONNECTIONS[articleId] || [];\n    articleKeywords.forEach(articleKeywordId => {\n      if (articleKeywordId !== keywordId) {\n        secondaryConnections.push({\n          from: articleId,\n          to: articleKeywordId\n        });\n      }\n    });\n  });\n\n  return secondaryConnections;\n}\n\nconst ARTICLE_IDS = Array.from({ length: 29 }, (_, index) => `A${index + 1}`);\nconst KEYWORD_IDS = Array.from({ length: 54 }, (_, index) => `G${index + 1}`);\nconst TOTAL_NODES = ARTICLE_IDS.length + KEYWORD_IDS.length;\nconst BASE_RADIUS = 15;\n\nconst buildPositions = () => {\n  const positions = {};\n\n  ARTICLE_IDS.forEach((id, index) => {\n    positions[id] = getRadialPosition(index, TOTAL_NODES, BASE_RADIUS);\n  });\n\n  KEYWORD_IDS.forEach((id, index) => {\n    positions[id] = getRadialPosition(\n      ARTICLE_IDS.length + index,\n      TOTAL_NODES,\n      BASE_RADIUS\n    );\n  });\n\n  return positions;\n};\n\nfunction AnimatedConnectionLine({\n  start,\n  end,\n  v0,\n  v1,\n  index,\n  totalConnections,\n  color = \"#e9ff00\",\n  shouldHide = false\n}) {\n  const [opacity, setOpacity] = useState(0);\n  const [lineWidth, setLineWidth] = useState(0.5);\n  const revealStartTime = useRef(null);\n  const animationComplete = useRef(false);\n  const hasAnimatedRef = useRef(false);\n  const lineKeyRef = useRef(`${start[0]}-${start[1]}-${end[0]}-${end[1]}-${v0?.[0]}-${v1?.[0]}`);\n\n  useEffect(() => {\n    const newKey = `${start[0].toFixed(1)}-${start[1].toFixed(1)}-${end[0].toFixed(1)}-${end[1].toFixed(1)}-${v0?.[0]?.toFixed(1)}-${v1?.[0]?.toFixed(1)}`;\n    if (newKey !== lineKeyRef.current) {\n      setOpacity(0);\n      lineKeyRef.current = newKey;\n      setTimeout(() => {\n        revealStartTime.current = Date.now();\n        hasAnimatedRef.current = false;\n      }, 200);\n    }\n  }, [start, end, v0, v1]);\n\n  useEffect(() => {\n    if (shouldHide) {\n      setOpacity(0);\n      hasAnimatedRef.current = false;\n      return;\n    }\n\n    if (!hasAnimatedRef.current || opacity === 0) {\n      revealStartTime.current = Date.now();\n      const delay = index * 60;\n\n      const timer = setTimeout(() => {\n        const startTime = Date.now();\n        const duration = 500;\n\n        const animate = () => {\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n\n          const eased = 1 - Math.pow(1 - progress, 3);\n          setOpacity(eased);\n          setLineWidth(0.5 + eased * 0.5);\n\n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            animationComplete.current = true;\n            hasAnimatedRef.current = true;\n          }\n        };\n\n        animate();\n      }, delay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [index, shouldHide]);\n\n  const isValidControlPoint = (cp) => {\n    return cp && Array.isArray(cp) && cp.length === 3 &&\n      cp.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val));\n  };\n\n  const isValidPoint = (p) => {\n    return p && Array.isArray(p) && p.length === 3 &&\n      p.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val));\n  };\n\n  if (!isValidPoint(start) || !isValidPoint(end) || !isValidControlPoint(v0) || !isValidControlPoint(v1)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn('[AnimatedConnectionLine] Invalid points:', { start, end, v0, v1 });\n    }\n    return null;\n  }\n\n  if (opacity === 0) return null;\n\n  return (\n    <group renderOrder={4} frustumCulled={false}>\n      <CubicBezierLine\n        start={start}\n        end={end}\n        midA={v0} // First control point (goes down from article)\n        midB={v1} // Second control point (curves to keyword from down part)\n        color={color}\n        lineWidth={lineWidth}\n        opacity={opacity}\n        transparent\n        depthWrite={false}\n        depthTest={true}\n      />\n    </group>\n  );\n}\n\nexport function ConnectionController({ processedData }) {\n  const { camera } = useThree();\n  const [selectedNode] = useStore(\"selectedNodeStore\", null);\n  const [highlightedNodes] = useStore(\"highlightedNodesStore\", []);\n  const [linesVisible] = useStore(\"connectionLinesVisibilityStore\", true);\n\n  const getPositions = () => {\n    if (processedData && processedData.nodeMap) {\n      const posMap = {};\n      processedData.nodeMap.forEach((node, id) => {\n        posMap[id] = node.position || [0, 0, 0];\n      });\n      return posMap;\n    }\n    return buildPositions();\n  };\n\n  useEffect(() => {\n    const highlightedStore = getStore('highlightedNodesStore');\n    const secondaryHighlightedStore = getStore('secondaryHighlightedArticlesStore');\n    const highlighted = new Set();\n    const secondaryHighlighted = new Set();\n\n    if (selectedNode?.id) {\n      highlighted.add(selectedNode.id);\n      const connected = getConnectedNodes(selectedNode.id);\n      connected.forEach(nodeId => {\n        if (nodeId) {\n          highlighted.add(nodeId);\n        }\n      });\n\n      if (selectedNode.id.startsWith('A')) {\n        const relatedArticles = getRelatedArticles(selectedNode.id);\n        relatedArticles.forEach(articleId => {\n          secondaryHighlighted.add(articleId);\n        });\n      }\n    }\n\n    highlightedStore.setState(Array.from(highlighted));\n    secondaryHighlightedStore.setState(Array.from(secondaryHighlighted));\n\n    crossPositionCache.current.clear();\n  }, [selectedNode]);\n\n  const lastCheckRef = useRef(0);\n  const lastPositionsRef = useRef({});\n  const lastCameraPosRef = useRef(null);\n  const [updateTrigger, setUpdateTrigger] = useState(0);\n\n  useFrame((state) => {\n    const now = Date.now();\n    if (now - lastCheckRef.current < 16) return;\n    lastCheckRef.current = now;\n\n    if (!processedData || !processedData.nodeMap || !selectedNode?.id) return;\n\n    const currentCameraPos = state.camera.position;\n    const cameraChanged = !lastCameraPosRef.current || \n      Math.abs(currentCameraPos.x - lastCameraPosRef.current.x) > 0.01 ||\n      Math.abs(currentCameraPos.y - lastCameraPosRef.current.y) > 0.01 ||\n      Math.abs(currentCameraPos.z - lastCameraPosRef.current.z) > 0.01;\n\n    if (cameraChanged) {\n      lastCameraPosRef.current = currentCameraPos.clone();\n      crossPositionCache.current.clear();\n    }\n\n    const currentPositions = getPositions();\n    const connectedIds = getConnectedNodes(selectedNode.id);\n    const allRelevantIds = [selectedNode.id, ...connectedIds];\n\n    let hasChanges = false;\n    allRelevantIds.forEach(nodeId => {\n      const currentPos = currentPositions[nodeId];\n      if (!currentPos) return;\n\n      const lastPos = lastPositionsRef.current[nodeId];\n      if (!lastPos) {\n        hasChanges = true;\n        lastPositionsRef.current[nodeId] = [...currentPos];\n      } else {\n        const threshold = 0.05;\n        const changed =\n          Math.abs(currentPos[0] - lastPos[0]) > threshold ||\n          Math.abs(currentPos[1] - lastPos[1]) > threshold ||\n          Math.abs(currentPos[2] - lastPos[2]) > threshold;\n\n        if (changed) {\n          hasChanges = true;\n          lastPositionsRef.current[nodeId] = [...currentPos];\n        }\n      }\n    });\n\n    if (hasChanges || cameraChanged) {\n      setUpdateTrigger(prev => prev + 1);\n    }\n  });\n\n  const tempVec1 = useRef(new THREE.Vector3());\n  const tempVec2 = useRef(new THREE.Vector3());\n  const tempVec3 = useRef(new THREE.Vector3());\n  const tempVec4 = useRef(new THREE.Vector3());\n  const worldUpVec = useRef(new THREE.Vector3(0, 1, 0));\n  const rightVec = useRef(new THREE.Vector3(1, 0, 0));\n\n  const generateControlPoints = (start, end, index, isArticleToKeyword, isKeywordSource = false) => {\n    if (!start || !end || !Array.isArray(start) || !Array.isArray(end) ||\n      start.length !== 3 || end.length !== 3 ||\n      start.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n      end.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      const mid = [\n        ((start?.[0] || 0) + (end?.[0] || 0)) / 2,\n        ((start?.[1] || 0) + (end?.[1] || 0)) / 2,\n        ((start?.[2] || 0) + (end?.[2] || 0)) / 2,\n      ];\n      return { v0: mid, v1: mid };\n    }\n\n    const dx = end[0] - start[0];\n    const dy = end[1] - start[1];\n    const dz = end[2] - start[2];\n    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n    if (distance < 0.001 || !isFinite(distance)) {\n      const mid = [\n        (start[0] + end[0]) / 2,\n        (start[1] + end[1]) / 2,\n        (start[2] + end[2]) / 2,\n      ];\n      return { v0: mid, v1: mid };\n    }\n\n    const direction = tempVec1.current.set(dx, dy, dz);\n\n    if (direction.length() < 0.001 || !isFinite(direction.length())) {\n      direction.set(1, 0, 0);\n    } else {\n      direction.normalize();\n    }\n\n    const worldUp = worldUpVec.current;\n    let perp = tempVec2.current.crossVectors(worldUp, direction);\n\n    if (perp.length() < 0.001) {\n      perp.crossVectors(rightVec.current, direction);\n    }\n    perp.normalize();\n\n    const perp2 = tempVec3.current.crossVectors(direction, perp).normalize();\n\n    const angleVariation = (index * 30) % 360;\n    const angle = (angleVariation * Math.PI) / 180;\n    const cosAngle = Math.cos(angle);\n    const sinAngle = Math.sin(angle);\n    const horizontalOffset = distance * 0.08 * cosAngle;\n    const horizontalOffset2 = distance * 0.08 * sinAngle;\n\n    const straightDownDistance = isKeywordSource ? 12.0 : 8.0;\n\n    const v0 = tempVec4.current.set(\n      start[0] - worldUp.x * straightDownDistance + perp.x * horizontalOffset * 0.1 + perp2.x * horizontalOffset2 * 0.1,\n      start[1] - worldUp.y * straightDownDistance,\n      start[2] - worldUp.z * straightDownDistance + perp.z * horizontalOffset * 0.1 + perp2.z * horizontalOffset2 * 0.1\n    );\n\n    const upOffset2 = distance * 0.70;\n    const verticalOffset2 = isKeywordSource ? -distance * 0.15 : -distance * 0.10;\n\n    const v1 = tempVec1.current.set(\n      start[0] + direction.x * upOffset2 + perp.x * horizontalOffset * 0.2 + perp2.x * horizontalOffset2 * 0.2,\n      start[1] + direction.y * upOffset2 + verticalOffset2 + perp.y * horizontalOffset * 0.2 + perp2.y * horizontalOffset2 * 0.2,\n      start[2] + direction.z * upOffset2 + perp.z * horizontalOffset * 0.2 + perp2.z * horizontalOffset2 * 0.2\n    );\n\n    const sanitize = (val) => (typeof val === 'number' && isFinite(val) && !isNaN(val)) ? val : 0;\n    const cp0 = [sanitize(v0.x), sanitize(v0.y), sanitize(v0.z)];\n    const cp1 = [sanitize(v1.x), sanitize(v1.y), sanitize(v1.z)];\n\n    return {\n      v0: cp0,\n      v1: cp1\n    };\n  };\n  const centerVec = useRef(new THREE.Vector3(0, 0, 0));\n  const worldUpCross = useRef(new THREE.Vector3(0, 1, 0));\n  const tempNodeVec = useRef(new THREE.Vector3());\n  const tempDirToCenter = useRef(new THREE.Vector3());\n  const tempRight = useRef(new THREE.Vector3());\n  const tempUp = useRef(new THREE.Vector3());\n  const tempResult = useRef(new THREE.Vector3());\n  const crossPositionCache = useRef(new Map());\n\n  const getCrossPosition = (nodeId, nodePosition, camera = null) => {\n    let selectedNodeForCache = null;\n    let highlightedNodesForCache = [];\n    try {\n      selectedNodeForCache = getStore('selectedNodeStore', null);\n      const highlightedStoreValue = getStore('highlightedNodesStore', []);\n      highlightedNodesForCache = Array.isArray(highlightedStoreValue) ? highlightedStoreValue : [];\n    } catch (e) {\n      // Store not available\n    }\n\n    const isHighlightedForCache = selectedNodeForCache?.id === nodeId || highlightedNodesForCache.includes(nodeId);\n    let secondaryHighlightedForCache = [];\n    try {\n      const secondaryHighlightedStoreValue = getStore('secondaryHighlightedArticlesStore', []);\n      secondaryHighlightedForCache = Array.isArray(secondaryHighlightedStoreValue) ? secondaryHighlightedStoreValue : [];\n    } catch (e) {\n      // Store not available\n    }\n    const isSecondaryHighlightedForCache = secondaryHighlightedForCache.includes(nodeId);\n    const isDimmedForCache = selectedNodeForCache && selectedNodeForCache.id !== nodeId && !highlightedNodesForCache.includes(nodeId) && !isSecondaryHighlightedForCache;\n    const scaleState = isHighlightedForCache ? '1.3' : (isDimmedForCache ? '0.6' : '1.0');\n    const secondaryState = isSecondaryHighlightedForCache ? 'secondary' : 'normal';\n    const cameraState = camera ? `${camera.position.x.toFixed(3)}-${camera.position.y.toFixed(3)}-${camera.position.z.toFixed(3)}` : 'no-camera';\n\n    const cacheKey = `${nodeId}-${nodePosition[0].toFixed(3)}-${nodePosition[1].toFixed(3)}-${nodePosition[2].toFixed(3)}-${scaleState}-${secondaryState}-${cameraState}`;\n    const cached = crossPositionCache.current.get(cacheKey);\n    if (cached && !isHighlightedForCache && !isSecondaryHighlightedForCache) return cached;\n\n    const center = centerVec.current;\n    const nodeVec = tempNodeVec.current.set(nodePosition[0], nodePosition[1], nodePosition[2]);\n    \n    let directionToTarget = tempDirToCenter.current;\n    if ((isHighlightedForCache || isSecondaryHighlightedForCache) && camera) {\n      directionToTarget.subVectors(camera.position, nodeVec).normalize();\n    } else {\n      directionToTarget.subVectors(center, nodeVec).normalize();\n    }\n\n    const worldUp = worldUpCross.current;\n    let right = tempRight.current.crossVectors(worldUp, directionToTarget);\n    if (right.length() < 0.001) {\n      right.set(1, 0, 0);\n    }\n    right.normalize();\n\n    let up = tempUp.current.crossVectors(directionToTarget, right).normalize();\n\n    if (Math.abs(directionToTarget.dot(worldUp)) > 0.99) {\n      up.set(1, 0, 0);\n      right.set(0, 0, 1);\n    }\n\n    const isArticle = nodeId && nodeId.startsWith('A');\n    const result = tempResult.current;\n\n    if (isArticle) {\n      const baseImageHeight = 14.4;\n      const borderWidth = 0.12;\n      const baseTotalHeight = baseImageHeight + (borderWidth * 2);\n      const nodeGroupScale = 0.5;\n\n      let selectedNode = null;\n      let highlightedNodes = [];\n      let secondaryHighlightedArticles = [];\n      try {\n        selectedNode = getStore('selectedNodeStore', null);\n        const highlightedStoreValue = getStore('highlightedNodesStore', []);\n        highlightedNodes = Array.isArray(highlightedStoreValue) ? highlightedStoreValue : [];\n        const secondaryHighlightedStoreValue = getStore('secondaryHighlightedArticlesStore', []);\n        secondaryHighlightedArticles = Array.isArray(secondaryHighlightedStoreValue) ? secondaryHighlightedStoreValue : [];\n      } catch (e) {\n        // Store not available, use defaults\n      }\n\n      if (!Array.isArray(highlightedNodes)) {\n        highlightedNodes = [];\n      }\n      if (!Array.isArray(secondaryHighlightedArticles)) {\n        secondaryHighlightedArticles = [];\n      }\n\n      const isHighlighted = selectedNode?.id === nodeId || highlightedNodes.includes(nodeId);\n      const isSecondaryHighlighted = secondaryHighlightedArticles.includes(nodeId);\n      const isDimmed = selectedNode && selectedNode.id !== nodeId && !highlightedNodes.includes(nodeId) && !isSecondaryHighlighted;\n\n      let articleScale = 1.0;\n      if (isHighlighted) {\n        articleScale = 1.3;\n      } else if (isDimmed) {\n        articleScale = 0.6;\n      }\n\n      const scaledTotalHeight = baseTotalHeight * articleScale;\n      \n      if ((isHighlighted || isSecondaryHighlighted) && camera) {\n        const directionToCamera = tempDirToCenter.current.subVectors(camera.position, nodeVec).normalize();\n        const worldUp = worldUpCross.current;\n        \n        let right = tempRight.current.crossVectors(worldUp, directionToCamera);\n        if (right.length() < 0.001) {\n          right.set(1, 0, 0);\n        }\n        right.normalize();\n        \n        let correctedUp = tempUp.current.crossVectors(directionToCamera, right).normalize();\n        \n        const basis = tempMatrix.current.makeBasis(right, correctedUp, directionToCamera);\n        const rotationQuat = tempQuat.current.setFromRotationMatrix(basis);\n        \n        const forwardVec = tempVec4.current.set(0, 0, 1);\n        forwardVec.applyQuaternion(rotationQuat);\n        const tiltAngle = Math.acos(Math.max(-1, Math.min(1, forwardVec.dot(worldUp)))) * (180 / Math.PI);\n        const tiltFromCamera = Math.acos(Math.max(-1, Math.min(1, directionToCamera.dot(worldUp)))) * (180 / Math.PI);\n        \n        let bottomCenterOffset;\n        if (isSecondaryHighlighted) {\n          const baseOffset = -(scaledTotalHeight / 2 + 0.1) * nodeGroupScale;\n          const tiltFactor = Math.cos(tiltAngle * Math.PI / 180);\n          bottomCenterOffset = baseOffset / Math.max(0.1, tiltFactor);\n        } else {\n          bottomCenterOffset = -(scaledTotalHeight / 1.2 + 0.1) * nodeGroupScale;\n        }\n        \n        const localBottom = tempLocalBottom.current.set(0, bottomCenterOffset, 0);\n        const rotatedBottom = tempRotatedBottom.current.copy(localBottom).applyQuaternion(rotationQuat);\n        \n        const offsetDiff = rotatedBottom.y - localBottom.y;\n        const horizontalOffset = Math.sqrt(rotatedBottom.x * rotatedBottom.x + rotatedBottom.z * rotatedBottom.z);\n        \n        if (isSecondaryHighlighted) {\n          console.log('%c[SECONDARY] Node: ' + nodeId, 'color: orange; font-weight: bold; font-size: 14px;', {\n            scaledTotalHeight: scaledTotalHeight.toFixed(3),\n            bottomCenterOffset: bottomCenterOffset.toFixed(3),\n            localBottom: `(${localBottom.x.toFixed(3)}, ${localBottom.y.toFixed(3)}, ${localBottom.z.toFixed(3)})`,\n            rotatedBottom: `(${rotatedBottom.x.toFixed(3)}, ${rotatedBottom.y.toFixed(3)}, ${rotatedBottom.z.toFixed(3)})`,\n            offsetDiff: offsetDiff.toFixed(3),\n            horizontalOffset: horizontalOffset.toFixed(3),\n            tiltAngle: tiltAngle.toFixed(2) + '째',\n            tiltFromCamera: tiltFromCamera.toFixed(2) + '째',\n            cameraPos: `(${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)})`,\n            nodePos: `(${nodeVec.x.toFixed(2)}, ${nodeVec.y.toFixed(2)}, ${nodeVec.z.toFixed(2)})`,\n            directionToCamera: `(${directionToCamera.x.toFixed(3)}, ${directionToCamera.y.toFixed(3)}, ${directionToCamera.z.toFixed(3)})`\n          });\n        }\n        if (isHighlighted) {\n          console.log('%c[HIGHLIGHTED] Node: ' + nodeId, 'color: green; font-weight: bold; font-size: 14px;', {\n            scaledTotalHeight: scaledTotalHeight.toFixed(3),\n            bottomCenterOffset: bottomCenterOffset.toFixed(3),\n            localBottom: `(${localBottom.x.toFixed(3)}, ${localBottom.y.toFixed(3)}, ${localBottom.z.toFixed(3)})`,\n            rotatedBottom: `(${rotatedBottom.x.toFixed(3)}, ${rotatedBottom.y.toFixed(3)}, ${rotatedBottom.z.toFixed(3)})`,\n            offsetDiff: offsetDiff.toFixed(3),\n            horizontalOffset: horizontalOffset.toFixed(3),\n            tiltAngle: tiltAngle.toFixed(2) + '째',\n            tiltFromCamera: tiltFromCamera.toFixed(2) + '째',\n            cameraPos: `(${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)})`,\n            nodePos: `(${nodeVec.x.toFixed(2)}, ${nodeVec.y.toFixed(2)}, ${nodeVec.z.toFixed(2)})`,\n            directionToCamera: `(${directionToCamera.x.toFixed(3)}, ${directionToCamera.y.toFixed(3)}, ${directionToCamera.z.toFixed(3)})`\n          });\n        }\n        \n        result.copy(nodeVec);\n        result.add(rotatedBottom);\n      } else {\n        let bottomCenterOffset;\n        if (isSecondaryHighlighted) {\n          bottomCenterOffset = -(scaledTotalHeight / 1.8 + 0.15) * nodeGroupScale;\n        } else {\n          bottomCenterOffset = -(scaledTotalHeight / 1.2 + 0.1) * nodeGroupScale;\n        }\n        result.copy(nodeVec);\n        result.addScaledVector(up, bottomCenterOffset);\n      }\n    } else {\n      const keywordHeight = 0.4;\n      const keywordOffset = -(keywordHeight / 2);\n      result.copy(nodeVec).addScaledVector(up, keywordOffset);\n    }\n\n    const resultArray = [result.x, result.y, result.z];\n    crossPositionCache.current.set(cacheKey, resultArray);\n    if (crossPositionCache.current.size > 200) {\n      crossPositionCache.current.clear();\n    }\n    return resultArray;\n  };\n\n  const tempStartVec = useRef(new THREE.Vector3());\n  const tempEndVec = useRef(new THREE.Vector3());\n  const tempLocalBottom = useRef(new THREE.Vector3());\n  const tempRotatedBottom = useRef(new THREE.Vector3());\n  const tempQuat = useRef(new THREE.Quaternion());\n  const tempMatrix = useRef(new THREE.Matrix4());\n\n  const createLine = (startPos, endPos, index, totalConnections, color, isArticleToKeyword, startId, endId) => {\n    const isKeywordSource = startId && startId.startsWith('G');\n    if (!startPos || !endPos || !Array.isArray(startPos) || !Array.isArray(endPos) ||\n      startPos.length !== 3 || endPos.length !== 3 ||\n      startPos.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n      endPos.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      return null;\n    }\n\n    const startPosVec = tempStartVec.current.set(startPos[0], startPos[1], startPos[2]);\n    const endPosVec = tempEndVec.current.set(endPos[0], endPos[1], endPos[2]);\n    const dx = endPosVec.x - startPosVec.x;\n    const dy = endPosVec.y - startPosVec.y;\n    const dz = endPosVec.z - startPosVec.z;\n    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n    if (distance < 0.01 || !isFinite(distance)) {\n      return null;\n    }\n\n    let controlPoints = generateControlPoints(startPos, endPos, index, isArticleToKeyword, isKeywordSource);\n\n    if (!controlPoints || !controlPoints.v0 || !controlPoints.v1 ||\n      !Array.isArray(controlPoints.v0) || !Array.isArray(controlPoints.v1) ||\n      controlPoints.v0.length !== 3 || controlPoints.v1.length !== 3 ||\n      controlPoints.v0.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n      controlPoints.v1.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      return null;\n    }\n\n    const key = `${startId}-${endId}-${index}`;\n\n    return (\n      <AnimatedConnectionLine\n        key={key}\n        start={startPos}\n        end={endPos}\n        v0={controlPoints.v0}\n        v1={controlPoints.v1}\n        index={index}\n        totalConnections={totalConnections}\n        color={color}\n        shouldHide={!linesVisible}\n      />\n    );\n  };\n\n  const lines = useMemo(() => {\n    if (!selectedNode?.id || !linesVisible) {\n      return [];\n    }\n\n    const positions = getPositions();\n    const nodePosition = positions[selectedNode.id];\n    if (!nodePosition || !Array.isArray(nodePosition) || nodePosition.length !== 3) {\n      return [];\n    }\n\n    const startPosition = getCrossPosition(selectedNode.id, nodePosition, camera);\n\n    if (!startPosition || !Array.isArray(startPosition) || startPosition.length !== 3 ||\n      startPosition.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[ConnectionController] Invalid start position for ${selectedNode.id}:`, startPosition);\n      }\n      return [];\n    }\n\n    const allLines = [];\n    const isArticle = selectedNode.id.startsWith('A');\n\n    const targets = getConnectedNodes(selectedNode.id);\n    const targetsLength = targets ? targets.length : 0;\n    if (targetsLength > 0) {\n      for (let i = 0; i < targetsLength; i++) {\n        const targetId = targets[i];\n        const targetNodePosition = positions[targetId];\n        if (!targetNodePosition) continue;\n\n        const endPosition = getCrossPosition(targetId, targetNodePosition, camera);\n        const isArticleToKeyword = isArticle && targetId.startsWith('G');\n\n        const line = createLine(\n          startPosition,\n          endPosition,\n          i,\n          targetsLength,\n          \"#e9ff00\",\n          isArticleToKeyword,\n          selectedNode.id,\n          targetId\n        );\n\n        if (line) allLines.push(line);\n      }\n    }\n\n    if (isArticle) {\n      const relatedArticles = getRelatedArticles(selectedNode.id);\n      const selectedArticleKeywords = ARTICLE_CONNECTIONS[selectedNode.id] || [];\n      const selectedKeywordsSet = new Set(selectedArticleKeywords);\n\n      let whiteLineIndex = 0;\n      let totalWhiteLines = 0;\n      for (let i = 0; i < relatedArticles.length; i++) {\n        const relatedArticleKeywords = ARTICLE_CONNECTIONS[relatedArticles[i]] || [];\n        totalWhiteLines += relatedArticleKeywords.filter(kw => selectedKeywordsSet.has(kw)).length;\n      }\n\n      for (let i = 0; i < relatedArticles.length; i++) {\n        const relatedArticleId = relatedArticles[i];\n        const relatedArticlePos = positions[relatedArticleId];\n        if (!relatedArticlePos) continue;\n\n        const relatedArticleKeywords = ARTICLE_CONNECTIONS[relatedArticleId] || [];\n        const sharedKeywords = relatedArticleKeywords.filter(kw => selectedKeywordsSet.has(kw));\n\n        for (let j = 0; j < sharedKeywords.length; j++) {\n          const sharedKeywordId = sharedKeywords[j];\n          const keywordPos = positions[sharedKeywordId];\n          if (!keywordPos) continue;\n\n          const relatedArticleStartPos = getCrossPosition(relatedArticleId, relatedArticlePos, camera);\n          const keywordEndPos = getCrossPosition(sharedKeywordId, keywordPos, camera);\n\n          const line = createLine(\n            relatedArticleStartPos,\n            keywordEndPos,\n            targetsLength + whiteLineIndex,\n            targetsLength + totalWhiteLines,\n            \"#444444\",\n            true,\n            relatedArticleId,\n            sharedKeywordId\n          );\n\n          if (line) {\n            allLines.push(line);\n            whiteLineIndex++;\n          }\n        }\n      }\n    }\n\n    return allLines;\n  }, [selectedNode?.id, updateTrigger, linesVisible]);\n\n  useEffect(() => {\n    if (selectedNode?.id && linesVisible && lines.length === 0) {\n      const timer = setTimeout(() => {\n        setUpdateTrigger(prev => prev + 1);\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n  }, [selectedNode, linesVisible, lines.length]);\n\n  if (!lines.length) {\n    return null;\n  }\n\n  return <group frustumCulled={false}>{lines}</group>;\n}\n\nexport default ConnectionController;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1480, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/ElementOpacityController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { useThree } from '@react-three/fiber';\nimport { getStore } from 'usestore-react';\nimport { getConnectedNodes } from './nodeConnections';\nimport './selectionStore';\n\nexport function ElementOpacityController() {\n  const { camera, gl } = useThree();\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n\n  const isUserMovingCameraRef = useRef(false);\n  const opacityStoreRef = useRef(null);\n  const animationInProgressRef = useRef(false);\n\n  useEffect(() => {\n    opacityStoreRef.current = getStore('elementOpacityStore');\n    if (!opacityStoreRef.current) {\n      const { createStore } = require('usestore-react');\n      opacityStoreRef.current = createStore('elementOpacityStore', {});\n    }\n  }, []);\n\n  useEffect(() => {\n    const handleStart = () => {\n      isUserMovingCameraRef.current = true;\n      animationInProgressRef.current = false;\n    };\n\n    const handleChange = () => {\n    };\n\n    const controls = gl.domElement.parentElement?.querySelector('canvas')?.__r3f?.controls;\n    if (controls) {\n      controls.addEventListener('start', handleStart);\n      controls.addEventListener('change', handleChange);\n\n      return () => {\n        controls.removeEventListener('start', handleStart);\n        controls.removeEventListener('change', handleChange);\n      };\n    }\n\n    const canvas = gl.domElement;\n    const handleMouseDown = () => {\n      isUserMovingCameraRef.current = true;\n      animationInProgressRef.current = false;\n    };\n\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('touchstart', handleMouseDown);\n\n    return () => {\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('touchstart', handleMouseDown);\n    };\n  }, [gl]);\n\n  useEffect(() => {\n    if (!opacityStoreRef.current) return;\n\n    if (!selectedNode?.id || !Array.isArray(highlightedNodes) || highlightedNodes.length === 0) {\n      opacityStoreRef.current.setState({});\n      return;\n    }\n\n    if (opacityStoreRef.current) {\n      const secondaryHighlightedSet = new Set(Array.isArray(secondaryHighlightedArticles) ? secondaryHighlightedArticles : []);\n\n      const opacityMap = {};\n      const highlightedSet = new Set(highlightedNodes);\n      const selectedId = selectedNode?.id;\n\n      const ARTICLE_IDS = Array.from({ length: 29 }, (_, index) => `A${index + 1}`);\n      const KEYWORD_IDS = Array.from({ length: 54 }, (_, index) => `G${index + 1}`);\n\n      const directlyConnected = selectedId ? new Set(getConnectedNodes(selectedId)) : new Set();\n      directlyConnected.add(selectedId);\n\n      [...ARTICLE_IDS, ...KEYWORD_IDS].forEach(nodeId => {\n        const isKeyword = nodeId.startsWith('G');\n\n        if (nodeId === selectedId) {\n          opacityMap[nodeId] = 1.0;\n        } else if (highlightedSet.has(nodeId)) {\n          if (directlyConnected.has(nodeId)) {\n            opacityMap[nodeId] = 1.0;\n          } else {\n            opacityMap[nodeId] = isKeyword ? 0.3 : 0.4;\n          }\n        } else if (secondaryHighlightedSet.has(nodeId)) {\n          opacityMap[nodeId] = isKeyword ? 0.3 : 0.4;\n        } else {\n          opacityMap[nodeId] = isKeyword ? 0.3 : 0.4;\n        }\n      });\n\n      opacityStoreRef.current.setState(opacityMap);\n    }\n  }, [selectedNode, highlightedNodes, secondaryHighlightedArticles]);\n\n  useEffect(() => {\n    if (!animationInProgressRef.current) {\n      isUserMovingCameraRef.current = false;\n    }\n  }, [selectedNode]);\n\n  return null;\n}\n\nexport default ElementOpacityController;\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1599, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/treeComponents/styles.module.scss [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bottomButtons\": \"styles-module-scss-module__dJBWzG__bottomButtons\",\n  \"bottom_bar_wrapper\": \"styles-module-scss-module__dJBWzG__bottom_bar_wrapper\",\n  \"bottombarbutton\": \"styles-module-scss-module__dJBWzG__bottombarbutton\",\n  \"box_wrapper\": \"styles-module-scss-module__dJBWzG__box_wrapper\",\n  \"button\": \"styles-module-scss-module__dJBWzG__button\",\n  \"button_wrapper\": \"styles-module-scss-module__dJBWzG__button_wrapper\",\n  \"camera_modal\": \"styles-module-scss-module__dJBWzG__camera_modal\",\n  \"camera_modal_1\": \"styles-module-scss-module__dJBWzG__camera_modal_1\",\n  \"center_button\": \"styles-module-scss-module__dJBWzG__center_button\",\n  \"full\": \"styles-module-scss-module__dJBWzG__full\",\n  \"half\": \"styles-module-scss-module__dJBWzG__half\",\n  \"highlightedTerm\": \"styles-module-scss-module__dJBWzG__highlightedTerm\",\n  \"isDesktop\": \"styles-module-scss-module__dJBWzG__isDesktop\",\n  \"isMobile\": \"styles-module-scss-module__dJBWzG__isMobile\",\n  \"left\": \"styles-module-scss-module__dJBWzG__left\",\n  \"left_wrapper\": \"styles-module-scss-module__dJBWzG__left_wrapper\",\n  \"modal\": \"styles-module-scss-module__dJBWzG__modal\",\n  \"optionsbutton\": \"styles-module-scss-module__dJBWzG__optionsbutton\",\n  \"right\": \"styles-module-scss-module__dJBWzG__right\",\n  \"small_button\": \"styles-module-scss-module__dJBWzG__small_button\",\n  \"stoprotationbutton\": \"styles-module-scss-module__dJBWzG__stoprotationbutton\",\n  \"submenu\": \"styles-module-scss-module__dJBWzG__submenu\",\n  \"supplementbutton\": \"styles-module-scss-module__dJBWzG__supplementbutton\",\n  \"title\": \"styles-module-scss-module__dJBWzG__title\",\n  \"topbar_wrapper\": \"styles-module-scss-module__dJBWzG__topbar_wrapper\",\n  \"topbar_wrapper_mobile\": \"styles-module-scss-module__dJBWzG__topbar_wrapper_mobile\",\n  \"visible\": \"styles-module-scss-module__dJBWzG__visible\",\n  \"wrapper\": \"styles-module-scss-module__dJBWzG__wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1632, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/roomModal/style.module.scss [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"close_button\": \"style-module-scss-module__CB8I9q__close_button\",\n  \"content\": \"style-module-scss-module__CB8I9q__content\",\n  \"modal_wrapper\": \"style-module-scss-module__CB8I9q__modal_wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1641, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/roomModal/index.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport styles from \"./style.module.scss\";\n\nexport default function RoomModal({ close }) {\n  const pathname = usePathname();\n  const [infoData, setInfoData] = React.useState(null);\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    // Load info data from JSON\n    const loadInfoData = async () => {\n      try {\n        const response = await fetch('/data/info.json');\n        if (!response.ok) {\n          throw new Error('Failed to load info data');\n        }\n        const data = await response.json();\n        \n        // Get the route key (normalize pathname)\n        const routeKey = pathname === '/' ? '/' : pathname;\n        const routeInfo = data[routeKey] || data['/living-continuity']; // Fallback to landing page\n        \n        setInfoData(routeInfo);\n      } catch (error) {\n        console.error('Error loading info data:', error);\n        // Fallback content\n        setInfoData({\n          title: \"Welcome\",\n          content: \"To navigate in the digital exhibition, depending on the device you are currently browsing this space on you can use both your fingers or mouse. Zoom in or out, drag or pan to interact with the scene.\"\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadInfoData();\n  }, [pathname]);\n\n  // Helper function to render markdown-style emphasis\n  const renderText = (text) => {\n    if (!text) return null;\n    \n    // Convert *text* to <em>text</em>\n    const parts = text.split(/(\\*[^*]+\\*)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('*') && part.endsWith('*')) {\n        return <em key={index}>{part.slice(1, -1)}</em>;\n      }\n      return <React.Fragment key={index}>{part}</React.Fragment>;\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.modal_wrapper}>\n        <div className={styles.content}>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!infoData) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className={styles.modal_wrapper}>\n        {close && (\n          <div className={styles.close_button} onClick={close}>\n            <svg \n              width=\"24\" \n              height=\"24\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <line \n                x1=\"3\" \n                y1=\"3\" \n                x2=\"21\" \n                y2=\"21\" \n                stroke=\"#000000\" \n                strokeWidth=\"1.5\" \n                strokeLinecap=\"round\"\n              />\n              <line \n                x1=\"21\" \n                y1=\"3\" \n                x2=\"3\" \n                y2=\"21\" \n                stroke=\"#000000\" \n                strokeWidth=\"1.5\" \n                strokeLinecap=\"round\"\n              />\n            </svg>\n          </div>\n        )}\n        <div className={styles.content}>\n          {infoData.content && (\n            typeof infoData.content === 'string' ? (\n              <p>{renderText(infoData.content)}</p>\n            ) : Array.isArray(infoData.content) ? (\n              infoData.content.map((section, index) => (\n                <div key={index}>\n                  {section.text && <p>{renderText(section.text)}</p>}\n                </div>\n              ))\n            ) : null\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,UAAU,EAAE,KAAK,EAAE;IACzC,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,CAAC,UAAU,YAAY,GAAG,iNAAc,CAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,iNAAc,CAAC;IAE7C,kNAAe,CAAC;QACd,2BAA2B;QAC3B,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBACA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,yCAAyC;gBACzC,MAAM,WAAW,aAAa,MAAM,MAAM;gBAC1C,MAAM,YAAY,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,qBAAqB,EAAE,2BAA2B;gBAE3F,YAAY;YACd,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,mBAAmB;gBACnB,YAAY;oBACV,OAAO;oBACP,SAAS;gBACX;YACF,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAS;IAEb,oDAAoD;IACpD,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,MAAM,OAAO;QAElB,kCAAkC;QAClC,MAAM,QAAQ,KAAK,KAAK,CAAC;QACzB,OAAO,MAAM,GAAG,CAAC,CAAC,MAAM;YACtB,IAAI,KAAK,UAAU,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM;gBAC9C,qBAAO,8OAAC;8BAAgB,KAAK,KAAK,CAAC,GAAG,CAAC;mBAAvB;;;;;YAClB;YACA,qBAAO,8OAAC,iNAAc;0BAAc;eAAR;;;;;QAC9B;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAW,wJAAM,CAAC,aAAa;sBAClC,cAAA,8OAAC;gBAAI,WAAW,wJAAM,CAAC,OAAO;0BAC5B,cAAA,8OAAC;8BAAE;;;;;;;;;;;;;;;;IAIX;IAEA,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,qBACE;kBACE,cAAA,8OAAC;YAAI,WAAW,wJAAM,CAAC,aAAa;;gBACjC,uBACC,8OAAC;oBAAI,WAAW,wJAAM,CAAC,YAAY;oBAAE,SAAS;8BAC5C,cAAA,8OAAC;wBACC,OAAM;wBACN,QAAO;wBACP,SAAQ;wBACR,MAAK;wBACL,OAAM;;0CAEN,8OAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,eAAc;;;;;;0CAEhB,8OAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,eAAc;;;;;;;;;;;;;;;;;8BAKtB,8OAAC;oBAAI,WAAW,wJAAM,CAAC,OAAO;8BAC3B,SAAS,OAAO,IAAI,CACnB,OAAO,SAAS,OAAO,KAAK,yBAC1B,8OAAC;kCAAG,WAAW,SAAS,OAAO;;;;;+BAC7B,MAAM,OAAO,CAAC,SAAS,OAAO,IAChC,SAAS,OAAO,CAAC,GAAG,CAAC,CAAC,SAAS,sBAC7B,8OAAC;sCACE,QAAQ,IAAI,kBAAI,8OAAC;0CAAG,WAAW,QAAQ,IAAI;;;;;;2BADpC;;;;oCAIV,IACN;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 1824, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/sceneModal/style.module.scss [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"camera_modal\": \"style-module-scss-module__ALzo2W__camera_modal\",\n  \"camera_wrapper\": \"style-module-scss-module__ALzo2W__camera_wrapper\",\n  \"item\": \"style-module-scss-module__ALzo2W__item\",\n  \"link\": \"style-module-scss-module__ALzo2W__link\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1834, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/sceneModal/index.jsx"],"sourcesContent":["import * as React from \"react\";\nimport styles from \"./style.module.scss\";\n\nexport default function SceneModal() {\n  return (\n    <>\n      <div className={styles.camera_wrapper}>\n        <div className={`${styles.camera_modal} button`}>\n          <a href=\"https://livingcontinuity.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Digital Exhibition</div>\n          </a>\n          <a href=\"https://glossary.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Glossary</div>\n          </a>\n          <a href=\"https://kitofparts.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Kit of Parts - Blended Home</div>\n          </a>\n\n          <a href=\"#\" className={styles.link}>\n            <div className={styles.item}>Kit of Parts - Blended Park (soon)</div>\n          </a>\n\n          <a href=\"https://supplement.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Supplement</div>\n          </a>\n\n          <a href=\"http://toolkit.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Toolkit</div>\n          </a>\n          \n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE;kBACE,cAAA,8OAAC;YAAI,WAAW,yJAAM,CAAC,cAAc;sBACnC,cAAA,8OAAC;gBAAI,WAAW,GAAG,yJAAM,CAAC,YAAY,CAAC,OAAO,CAAC;;kCAC7C,8OAAC;wBAAE,MAAK;wBAA+C,WAAW,yJAAM,CAAC,IAAI;kCAC3E,cAAA,8OAAC;4BAAI,WAAW,yJAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAE/B,8OAAC;wBAAE,MAAK;wBAAuC,WAAW,yJAAM,CAAC,IAAI;kCACnE,cAAA,8OAAC;4BAAI,WAAW,yJAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAE/B,8OAAC;wBAAE,MAAK;wBAAyC,WAAW,yJAAM,CAAC,IAAI;kCACrE,cAAA,8OAAC;4BAAI,WAAW,yJAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,8OAAC;wBAAE,MAAK;wBAAI,WAAW,yJAAM,CAAC,IAAI;kCAChC,cAAA,8OAAC;4BAAI,WAAW,yJAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,8OAAC;wBAAE,MAAK;wBAAyC,WAAW,yJAAM,CAAC,IAAI;kCACrE,cAAA,8OAAC;4BAAI,WAAW,yJAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,8OAAC;wBAAE,MAAK;wBAAqC,WAAW,yJAAM,CAAC,IAAI;kCACjE,cAAA,8OAAC;4BAAI,WAAW,yJAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAOzC"}},
    {"offset": {"line": 1964, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/treeComponents/topbar.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport styles from \"./styles.module.scss\";\nimport Link from \"next/link\";\nimport RoomModal from \"../roomModal/index\";\nimport Modal from \"react-modal\";\nimport SceneModal from \"../sceneModal\";\nimport './treeComponents.scss';\nexport default function TopBar({ title }) {\n  const [isDisplay, setDisplay] = React.useState(false);\n\n  React.useEffect(() => {\n    if (title == \"Title Of The Entry\" || title == \"\") {\n      setDisplay(false);\n    } else {\n      setDisplay(true);\n    }\n  }, [title]);\n\n  const [modalIsOpen, setOpen] = React.useState(false);\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n  const [sceneOpen, setSceneOpen] = React.useState(false);\n  return (\n    <>\n      <div className=\"isDesktop\">\n        <div className={styles.topbar_wrapper}>\n          <Link href=\"/living-continuity\">\n            <div className={`${styles.button} button`}>living continuity</div>\n          </Link>\n          <div className={`${styles.title} button`}>\n            {!(title == \"Title Of The Entry\" || title == \"\") &&\n              <span>{title}</span>\n            }\n          </div>\n          <div className={`${styles.button} button`}>\n            Living Continuity\n          </div>\n        </div>\n      </div>\n      <div className=\"isMobile\">\n        <div\n          className={`${styles.topbar_wrapper} ${styles.topbar_wrapper_mobile}`}\n        >\n          <div className={styles.wrapper} onClick={() => setSceneOpen(!sceneOpen)} role=\"button\" tabIndex={0} aria-label=\"Toggle scene modal\" onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') setSceneOpen(!sceneOpen); }}>\n            <div\n              className={`${styles.full} ${styles.button} button full_button`}\n            >\n              living continuity\n            </div>\n            <div className={`${sceneOpen ? 'closed' : 'open'}`}>\n              <SceneModal />\n            </div>\n\n            <div\n              className={`${styles.full} ${styles.button} button full_button`}\n            >\n              Living Continuity\n            </div>\n            <button className={`${styles.half} ${styles.button} button`} onClick={() => {\n              handleOpen();\n            }} aria-label=\"Open info modal\">info</button>\n          </div>\n          <div className={`${styles.title} button`}>\n            {!(title == \"Title Of The Entry\" || title == \"\") &&\n              <span>{title}</span>\n            }\n          </div>\n        </div>\n      </div>\n      <Modal\n        isOpen={modalIsOpen}\n        contentLabel=\"Example Modal\"\n        closeTimeoutMS={150}\n        shouldCloseOnOverlayClick={true}\n      >\n        <RoomModal\n          close={handleOpen}\n        />\n      </Modal>\n    </>\n    //inline css ?\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;;AASe,SAAS,OAAO,EAAE,KAAK,EAAE;IACtC,MAAM,CAAC,WAAW,WAAW,GAAG,iNAAc,CAAC;IAE/C,kNAAe,CAAC;QACd,IAAI,SAAS,wBAAwB,SAAS,IAAI;YAChD,WAAW;QACb,OAAO;YACL,WAAW;QACb;IACF,GAAG;QAAC;KAAM;IAEV,MAAM,CAAC,aAAa,QAAQ,GAAG,iNAAc,CAAC;IAC9C,SAAS;QACP,QAAQ,CAAC;IACX;IACA,MAAM,CAAC,WAAW,aAAa,GAAG,iNAAc,CAAC;IACjD,qBACE;;0BACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAW,8JAAM,CAAC,cAAc;;sCACnC,8OAAC,uKAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAI,WAAW,GAAG,8JAAM,CAAC,MAAM,CAAC,OAAO,CAAC;0CAAE;;;;;;;;;;;sCAE7C,8OAAC;4BAAI,WAAW,GAAG,8JAAM,CAAC,KAAK,CAAC,OAAO,CAAC;sCACrC,CAAC,CAAC,SAAS,wBAAwB,SAAS,EAAE,mBAC7C,8OAAC;0CAAM;;;;;;;;;;;sCAGX,8OAAC;4BAAI,WAAW,GAAG,8JAAM,CAAC,MAAM,CAAC,OAAO,CAAC;sCAAE;;;;;;;;;;;;;;;;;0BAK/C,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAW,GAAG,8JAAM,CAAC,cAAc,CAAC,CAAC,EAAE,8JAAM,CAAC,qBAAqB,EAAE;;sCAErE,8OAAC;4BAAI,WAAW,8JAAM,CAAC,OAAO;4BAAE,SAAS,IAAM,aAAa,CAAC;4BAAY,MAAK;4BAAS,UAAU;4BAAG,cAAW;4BAAqB,WAAW,CAAC;gCAAQ,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK,aAAa,CAAC;4BAAY;;8CACxN,8OAAC;oCACC,WAAW,GAAG,8JAAM,CAAC,IAAI,CAAC,CAAC,EAAE,8JAAM,CAAC,MAAM,CAAC,mBAAmB,CAAC;8CAChE;;;;;;8CAGD,8OAAC;oCAAI,WAAW,GAAG,YAAY,WAAW,QAAQ;8CAChD,cAAA,8OAAC,6IAAU;;;;;;;;;;8CAGb,8OAAC;oCACC,WAAW,GAAG,8JAAM,CAAC,IAAI,CAAC,CAAC,EAAE,8JAAM,CAAC,MAAM,CAAC,mBAAmB,CAAC;8CAChE;;;;;;8CAGD,8OAAC;oCAAO,WAAW,GAAG,8JAAM,CAAC,IAAI,CAAC,CAAC,EAAE,8JAAM,CAAC,MAAM,CAAC,OAAO,CAAC;oCAAE,SAAS;wCACpE;oCACF;oCAAG,cAAW;8CAAkB;;;;;;;;;;;;sCAElC,8OAAC;4BAAI,WAAW,GAAG,8JAAM,CAAC,KAAK,CAAC,OAAO,CAAC;sCACrC,CAAC,CAAC,SAAS,wBAAwB,SAAS,EAAE,mBAC7C,8OAAC;0CAAM;;;;;;;;;;;;;;;;;;;;;;0BAKf,8OAAC,yJAAK;gBACJ,QAAQ;gBACR,cAAa;gBACb,gBAAgB;gBAChB,2BAA2B;0BAE3B,cAAA,8OAAC,4IAAS;oBACR,OAAO;;;;;;;;;;;;;AAMjB"}},
    {"offset": {"line": 2165, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/livingContinuityButton/index.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport \"../../app/living-continuity/welcomeModal.scss\";\n\nconst LivingContinuityButton = React.memo(({ onClick }) => {\n  return (\n    <div className=\"living_continuity_button\" onClick={onClick}>\n      <div className=\"black_box\">\n        <h1 className=\"main_text\">LIVING CONTINUITY</h1>\n      </div>\n      <span className=\"enter_text\">enter</span>\n    </div>\n  );\n});\n\nLivingContinuityButton.displayName = 'LivingContinuityButton';\n\nexport default LivingContinuityButton;\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;;AAKA,MAAM,uCAAyB,6MAAU,CAAC,CAAC,EAAE,OAAO,EAAE;IACpD,qBACE,8OAAC;QAAI,WAAU;QAA2B,SAAS;;0BACjD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAY;;;;;;;;;;;0BAE5B,8OAAC;gBAAK,WAAU;0BAAa;;;;;;;;;;;;AAGnC;AAEA,uBAAuB,WAAW,GAAG;uCAEtB"}},
    {"offset": {"line": 2216, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/suppressTextureErrors.js"],"sourcesContent":["export function suppressTextureErrors() {\n  if (typeof window === 'undefined') return;\n\n  const originalError = console.error;\n\n  console.error = (...args) => {\n    const message = args[0];\n    const fullMessage = args.join(' ');\n    \n    if (\n      (typeof message === 'string' && (\n        message.includes('THREE.GLTFLoader') && message.includes('Couldn\\'t load texture') ||\n        message.includes('GLTFLoader') && message.includes('texture')\n      )) ||\n      (typeof fullMessage === 'string' && (\n        fullMessage.includes('THREE.GLTFLoader') && fullMessage.includes('texture') ||\n        fullMessage.includes('GLTFLoader') && fullMessage.includes('texture')\n      ))\n    ) {\n      return;\n    }\n    \n    originalError.apply(console, args);\n  };\n\n  return () => {\n    console.error = originalError;\n  };\n}\n\n"],"names":[],"mappings":";;;;AAAO,SAAS;IACd,wCAAmC;;;IAEnC,MAAM;AAyBR"}},
    {"offset": {"line": 2230, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/d3DataManager.js"],"sourcesContent":["import * as d3 from 'd3';\nimport { getRadialPosition } from './radialPosition';\n\nconst BASE_RADIUS = 15;\n\nexport function processNodeData(jsonData) {\n  const allNodes = [];\n  const links = [];\n  const nodeMap = new Map();\n\n  const articlesCount = jsonData.articles?.length || 0;\n  const glossaryCount = jsonData.glossary?.length || 0;\n  const totalNodes = articlesCount + glossaryCount;\n\n  if (jsonData.articles) {\n    jsonData.articles.forEach((article, arrayIndex) => {\n      const position = getRadialPosition(\n        arrayIndex,\n        totalNodes,\n        BASE_RADIUS,\n        articlesCount,\n        glossaryCount\n      );\n      const node = {\n        ...article,\n        type: 'article',\n        position,\n        x: position[0],\n        y: position[1],\n        z: position[2],\n        vx: 0,\n        vy: 0,\n        vz: 0,\n        fx: null,\n        fy: null,\n        fz: null,\n      };\n      allNodes.push(node);\n      nodeMap.set(article.id, node);\n    });\n  }\n\n  if (jsonData.glossary) {\n    jsonData.glossary.forEach((keyword, arrayIndex) => {\n      const globalIndex = articlesCount + arrayIndex;\n      const position = getRadialPosition(\n        globalIndex,\n        totalNodes,\n        BASE_RADIUS,\n        articlesCount,\n        glossaryCount\n      );\n      const node = {\n        ...keyword,\n        type: 'glossary',\n        position,\n        x: position[0],\n        y: position[1],\n        z: position[2],\n        vx: 0,\n        vy: 0,\n        vz: 0,\n        fx: null,\n        fy: null,\n        fz: null,\n      };\n      allNodes.push(node);\n      nodeMap.set(keyword.id, node);\n    });\n  }\n\n  allNodes.forEach((node) => {\n    if (node.connections && node.connections.length > 0) {\n      node.connections.forEach((targetId) => {\n        const target = nodeMap.get(targetId);\n        if (target) {\n          links.push({\n            source: node.id,\n            target: targetId,\n            sourceNode: node,\n            targetNode: target,\n          });\n        }\n      });\n    }\n  });\n\n  return {\n    nodes: allNodes,\n    links,\n    nodeMap,\n  };\n}\n\nexport function createForceSimulation(nodes, links, options = {}) {\n  const {\n    chargeStrength = -300,\n    linkDistance = 50,\n    linkStrength = 0.1,\n    centerStrength = 0.1,\n  } = options;\n\n  const simulation = d3\n    .forceSimulation(nodes)\n    .force(\n      'link',\n      d3\n        .forceLink(links)\n        .id((d) => d.id)\n        .distance(linkDistance)\n        .strength(linkStrength)\n    )\n    .force('charge', d3.forceManyBody().strength(chargeStrength))\n    .force('center', d3.forceCenter(0, 0).strength(centerStrength))\n    .force(\n      'collision',\n      d3.forceCollide().radius((d) => (d.type === 'article' ? 3 : 2))\n    );\n\n  return simulation;\n}\n\nexport function getConnectedNodeIds(nodeId, links) {\n  return links\n    .filter((link) => link.source === nodeId || link.target === nodeId)\n    .map((link) => (link.source === nodeId ? link.target : link.source)  );\n}\n\nexport function getConnectedLinks(nodeId, links) {\n  return links.filter(\n    (link) => link.source === nodeId || link.target === nodeId\n  );\n}\n\n/**\n * Update node positions from simulation\n * @param {Array} nodes - Array of node objects\n */\nexport function updateNodePositions(nodes) {\n  nodes.forEach((node) => {\n    if (node.x !== undefined && node.y !== undefined) {\n      node.position = [node.x, node.y, node.z || 0];\n    }\n  });\n}\n\nexport function transitionNodePosition(node, targetPosition, duration = 1000) {\n  const [targetX, targetY, targetZ] = targetPosition;\n  const startX = node.x || node.position[0];\n  const startY = node.y || node.position[1];\n  const startZ = node.z || node.position[2];\n\n  return d3\n    .transition()\n    .duration(duration)\n    .ease(d3.easeCubicInOut)\n    .tween('position', function () {\n      const interpolateX = d3.interpolateNumber(startX, targetX);\n      const interpolateY = d3.interpolateNumber(startY, targetY);\n      const interpolateZ = d3.interpolateNumber(startZ, targetZ);\n      return function (t) {\n        node.x = interpolateX(t);\n        node.y = interpolateY(t);\n        node.z = interpolateZ(t);\n        node.position = [node.x, node.y, node.z];\n      };\n    });\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2375, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/treeModals/archiveModal.jsx"],"sourcesContent":["import * as React from \"react\";\nimport Link from \"next/link\";\nimport \"./archive.scss\";\nimport { useStore } from \"usestore-react\";\nimport CrossButton from \"../menu/CrossButton\";\nimport { COLOR_BLACK } from \"../_setup/colors\";\n\nconst slugifyTitle = (title) => {\n  return title\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n};\n\nexport default function ArchiveModal({\n  title,\n  author,\n  content,\n  img,\n  authorBio,\n  keywords,\n  connect1,\n  connect2,\n  connect3,\n  connect4,\n  photoCredit,\n  closeModal,\n}) {\n  const [adapt, setAdapt] = useStore(\"adapt\", false);\n  const [imageOrientation, setImageOrientation] = React.useState(null);\n\n  const handleImageLoad = (e) => {\n    const img = e.target;\n    const isLandscape = img.naturalWidth > img.naturalHeight;\n    setImageOrientation(isLandscape ? 'isLandscape' : 'isPortrait');\n  };\n\n  return (\n    <>\n      <div className=\"modal_wrapper\">\n        {closeModal && (\n          <div className=\"close_button\">\n            <CrossButton color={COLOR_BLACK} onClick={closeModal} />\n          </div>\n        )}\n        <div className=\"content\">\n          {img && (\n            <figure className={`image_wrapper ${imageOrientation || ''}`}>\n              <img \n                src={img} \n                alt={title}\n                onLoad={handleImageLoad}\n                onError={(e) => {\n                  e.target.style.display = 'none';\n                  console.warn('Failed to load image:', img);\n                }}\n              />\n              {author && (\n                <figcaption className=\"photo_credit\">\n                  Photo Credit: {photoCredit || author}\n                </figcaption>\n              )}\n            </figure>\n          )}\n          {title && <h2>{title}</h2>}\n          {author && <p className=\"author\"><span>By</span> {author}</p>}\n          {content && (\n            <div\n              className=\"text\"\n              dangerouslySetInnerHTML={{ __html: content }}\n            />\n          )}\n          {authorBio && (\n            <div className=\"section\">\n              <h5 className=\"section_label\">Author Bio:</h5>\n              <div\n                className=\"text-1\"\n                dangerouslySetInnerHTML={{ \n                  __html: authorBio\n                    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n                    .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n                    .replace(/\\n/g, '<br/>')\n                }}\n              />\n            </div>\n          )}\n          {(() => {\n            const hasConnections = connect1 || connect2 || connect3 || connect4;\n            \n            let keywordsToDisplay = [];\n            if (keywords) {\n              if (Array.isArray(keywords)) {\n                keywordsToDisplay = keywords;\n              } else if (typeof keywords === 'string') {\n                keywordsToDisplay = keywords.split(',').map(k => k.trim()).filter(Boolean);\n              }\n            }\n            \n            const hasKeywordsToShow = keywordsToDisplay.length > 0;\n            \n            if (!hasKeywordsToShow && !hasConnections) return null;\n            \n            return (\n              <div className=\"section\">\n                <h5 className=\"section_label\">Keywords:</h5>\n                {hasKeywordsToShow ? (\n                  <div className=\"connections\">\n                    {keywordsToDisplay.map((keyword, index) => {\n                      const keywordText = keyword && typeof keyword === 'object' ? (keyword.text || keyword) : keyword;\n                      let keywordLink = keyword && typeof keyword === 'object' && keyword.link !== undefined \n                        ? keyword.link \n                        : null;\n                      \n                      if (keywordLink && keywordLink.includes('#G')) {\n                        const idMatch = keywordLink.match(/#(G\\d+)/);\n                        if (idMatch) {\n                          const keywordId = idMatch[1];\n                          keywordLink = `/glossary#${slugifyTitle(keywordText)}`;\n                        }\n                      } else if (keywordLink && keywordLink.startsWith('/glossary#')) {\n                        const hashPart = keywordLink.split('#')[1];\n                        if (hashPart && hashPart.match(/^G\\d+$/)) {\n                          keywordLink = `/glossary#${slugifyTitle(keywordText)}`;\n                        }\n                      }\n                      \n                      return (\n                        <span key={index}>\n                          {keywordLink ? (\n                            <Link \n                              href={keywordLink}\n                              className=\"item_link\"\n                              onClick={closeModal}\n                            >\n                              {keywordText}\n                            </Link>\n                          ) : (\n                            <span className=\"item\">\n                              {keywordText}\n                            </span>\n                          )}\n                          {index < keywordsToDisplay.length - 1 && <span className=\"comma\">, </span>}\n                        </span>\n                      );\n                    })}\n                  </div>\n                ) : hasConnections ? (\n                  <div className=\"connections\">\n                    {[connect1, connect2, connect3, connect4].filter(Boolean).map((item, index, array) => (\n                      <span key={index}>\n                        <span className=\"item\">{item}</span>\n                        {index < array.length - 1 && <span className=\"comma\">, </span>}\n                      </span>\n                    ))}\n                  </div>\n                ) : null}\n              </div>\n            );\n          })()}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;AACA;AACA;;;;;;;;AAEA,MAAM,eAAe,CAAC;IACpB,OAAO,MACJ,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,aAAa,IACrB,OAAO,CAAC,YAAY,KACpB,OAAO,CAAC,YAAY;AACzB;AAEe,SAAS,aAAa,EACnC,KAAK,EACL,MAAM,EACN,OAAO,EACP,GAAG,EACH,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,UAAU,EACX;IACC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8JAAQ,EAAC,SAAS;IAC5C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,iNAAc,CAAC;IAE/D,MAAM,kBAAkB,CAAC;QACvB,MAAM,MAAM,EAAE,MAAM;QACpB,MAAM,cAAc,IAAI,YAAY,GAAG,IAAI,aAAa;QACxD,oBAAoB,cAAc,gBAAgB;IACpD;IAEA,qBACE;kBACE,cAAA,8OAAC;YAAI,WAAU;;gBACZ,4BACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,6IAAW;wBAAC,OAAO,6IAAW;wBAAE,SAAS;;;;;;;;;;;8BAG9C,8OAAC;oBAAI,WAAU;;wBACZ,qBACC,8OAAC;4BAAO,WAAW,CAAC,cAAc,EAAE,oBAAoB,IAAI;;8CAC1D,8OAAC;oCACC,KAAK;oCACL,KAAK;oCACL,QAAQ;oCACR,SAAS,CAAC;wCACR,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG;wCACzB,QAAQ,IAAI,CAAC,yBAAyB;oCACxC;;;;;;gCAED,wBACC,8OAAC;oCAAW,WAAU;;wCAAe;wCACpB,eAAe;;;;;;;;;;;;;wBAKrC,uBAAS,8OAAC;sCAAI;;;;;;wBACd,wBAAU,8OAAC;4BAAE,WAAU;;8CAAS,8OAAC;8CAAK;;;;;;gCAAS;gCAAE;;;;;;;wBACjD,yBACC,8OAAC;4BACC,WAAU;4BACV,yBAAyB;gCAAE,QAAQ;4BAAQ;;;;;;wBAG9C,2BACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAgB;;;;;;8CAC9B,8OAAC;oCACC,WAAU;oCACV,yBAAyB;wCACvB,QAAQ,UACL,OAAO,CAAC,kBAAkB,uBAC1B,OAAO,CAAC,cAAc,eACtB,OAAO,CAAC,OAAO;oCACpB;;;;;;;;;;;;wBAIL,CAAC;4BACA,MAAM,iBAAiB,YAAY,YAAY,YAAY;4BAE3D,IAAI,oBAAoB,EAAE;4BAC1B,IAAI,UAAU;gCACZ,IAAI,MAAM,OAAO,CAAC,WAAW;oCAC3B,oBAAoB;gCACtB,OAAO,IAAI,OAAO,aAAa,UAAU;oCACvC,oBAAoB,SAAS,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;gCACpE;4BACF;4BAEA,MAAM,oBAAoB,kBAAkB,MAAM,GAAG;4BAErD,IAAI,CAAC,qBAAqB,CAAC,gBAAgB,OAAO;4BAElD,qBACE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAgB;;;;;;oCAC7B,kCACC,8OAAC;wCAAI,WAAU;kDACZ,kBAAkB,GAAG,CAAC,CAAC,SAAS;4CAC/B,MAAM,cAAc,WAAW,OAAO,YAAY,WAAY,QAAQ,IAAI,IAAI,UAAW;4CACzF,IAAI,cAAc,WAAW,OAAO,YAAY,YAAY,QAAQ,IAAI,KAAK,YACzE,QAAQ,IAAI,GACZ;4CAEJ,IAAI,eAAe,YAAY,QAAQ,CAAC,OAAO;gDAC7C,MAAM,UAAU,YAAY,KAAK,CAAC;gDAClC,IAAI,SAAS;oDACX,MAAM,YAAY,OAAO,CAAC,EAAE;oDAC5B,cAAc,CAAC,UAAU,EAAE,aAAa,cAAc;gDACxD;4CACF,OAAO,IAAI,eAAe,YAAY,UAAU,CAAC,eAAe;gDAC9D,MAAM,WAAW,YAAY,KAAK,CAAC,IAAI,CAAC,EAAE;gDAC1C,IAAI,YAAY,SAAS,KAAK,CAAC,WAAW;oDACxC,cAAc,CAAC,UAAU,EAAE,aAAa,cAAc;gDACxD;4CACF;4CAEA,qBACE,8OAAC;;oDACE,4BACC,8OAAC,uKAAI;wDACH,MAAM;wDACN,WAAU;wDACV,SAAS;kEAER;;;;;6EAGH,8OAAC;wDAAK,WAAU;kEACb;;;;;;oDAGJ,QAAQ,kBAAkB,MAAM,GAAG,mBAAK,8OAAC;wDAAK,WAAU;kEAAQ;;;;;;;+CAdxD;;;;;wCAiBf;;;;;+CAEA,+BACF,8OAAC;wCAAI,WAAU;kDACZ;4CAAC;4CAAU;4CAAU;4CAAU;yCAAS,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,MAAM,OAAO,sBAC1E,8OAAC;;kEACC,8OAAC;wDAAK,WAAU;kEAAQ;;;;;;oDACvB,QAAQ,MAAM,MAAM,GAAG,mBAAK,8OAAC;wDAAK,WAAU;kEAAQ;;;;;;;+CAF5C;;;;;;;;;+CAMb;;;;;;;wBAGV,CAAC;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 2659, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/whiteMaterial.js"],"sourcesContent":["import * as THREE from \"three\";\n\nexport function createWhiteMaterial() {\n  return new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 0.9,\n    metalness: 0.1,\n    roughness: 0.8,\n  });\n}\n\nexport function createWhiteWireframeMaterial() {\n  return new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    wireframe: true,\n    transparent: true,\n    opacity: 0.7,\n  });\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,SAAS;IACd,OAAO,IAAI,uKAA0B,CAAC;QACpC,OAAO;QACP,aAAa;QACb,SAAS;QACT,WAAW;QACX,WAAW;IACb;AACF;AAEO,SAAS;IACd,OAAO,IAAI,uKAA0B,CAAC;QACpC,OAAO;QACP,WAAW;QACX,aAAa;QACb,SAAS;IACX;AACF"}},
    {"offset": {"line": 2688, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/useConnectionHighlight.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { getConnectedNodes } from './nodeConnections';\nimport './selectionStore';\n\nexport function useConnectionHighlight(nodeId, isActive) {\n  const [, setSelectedNode] = useStore('selectedNodeStore', null);\n  const hasConnections = getConnectedNodes(nodeId).length > 0;\n  const wasActiveRef = useRef(false);\n\n  useEffect(() => {\n    if (!nodeId) {\n      return undefined;\n    }\n\n    if (isActive && !wasActiveRef.current) {\n      setSelectedNode({ id: nodeId, ts: Date.now() });\n    }\n\n    if (!isActive && wasActiveRef.current) {\n      setSelectedNode(prev => (prev?.id === nodeId ? null : prev));\n    }\n\n    wasActiveRef.current = isActive;\n\n    return () => {\n      setSelectedNode(prev => (prev?.id === nodeId ? null : prev));\n    };\n  }, [isActive, nodeId, setSelectedNode]);\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,SAAS,uBAAuB,MAAM,EAAE,QAAQ;IACrD,MAAM,GAAG,gBAAgB,GAAG,IAAA,8JAAQ,EAAC,qBAAqB;IAC1D,MAAM,iBAAiB,IAAA,2JAAiB,EAAC,QAAQ,MAAM,GAAG;IAC1D,MAAM,eAAe,IAAA,+MAAM,EAAC;IAE5B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,QAAQ;YACX,OAAO;QACT;QAEA,IAAI,YAAY,CAAC,aAAa,OAAO,EAAE;YACrC,gBAAgB;gBAAE,IAAI;gBAAQ,IAAI,KAAK,GAAG;YAAG;QAC/C;QAEA,IAAI,CAAC,YAAY,aAAa,OAAO,EAAE;YACrC,gBAAgB,CAAA,OAAS,MAAM,OAAO,SAAS,OAAO;QACxD;QAEA,aAAa,OAAO,GAAG;QAEvB,OAAO;YACL,gBAAgB,CAAA,OAAS,MAAM,OAAO,SAAS,OAAO;QACxD;IACF,GAAG;QAAC;QAAU;QAAQ;KAAgB;AACxC"}},
    {"offset": {"line": 2731, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/useShouldShowTitle.js"],"sourcesContent":["import { useStore } from 'usestore-react';\nimport { useMemo } from 'react';\nimport './selectionStore';\n\nexport function useShouldShowTitle(nodeId) {\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  \n  return useMemo(() => {\n    if (!nodeId || !Array.isArray(highlightedNodes)) {\n      return false;\n    }\n    return highlightedNodes.includes(nodeId);\n  }, [nodeId, highlightedNodes]);\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,SAAS,mBAAmB,MAAM;IACvC,MAAM,CAAC,iBAAiB,GAAG,IAAA,8JAAQ,EAAC,yBAAyB,EAAE;IAE/D,OAAO,IAAA,gNAAO,EAAC;QACb,IAAI,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,mBAAmB;YAC/C,OAAO;QACT;QACA,OAAO,iBAAiB,QAAQ,CAAC;IACnC,GAAG;QAAC;QAAQ;KAAiB;AAC/B"}},
    {"offset": {"line": 2757, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/crossPositionTracker.js"],"sourcesContent":["import * as THREE from 'three';\n\nconst crossElementRegistry = new Map();\nconst crossPositionCache = new Map();\nconst tempVec = new THREE.Vector3();\nconst tempVec2 = new THREE.Vector3();\nconst tempVec3 = new THREE.Vector3();\n\nexport function registerCrossElement(nodeId, element, groupRef, crossGroupRef) {\n  if (element && groupRef) {\n    crossElementRegistry.set(nodeId, { element, groupRef, crossGroupRef });\n    crossPositionCache.delete(nodeId);\n  } else {\n    crossElementRegistry.delete(nodeId);\n    crossPositionCache.delete(nodeId);\n  }\n}\n\nexport function unregisterCrossElement(nodeId) {\n  crossElementRegistry.delete(nodeId);\n  crossPositionCache.delete(nodeId);\n}\n\nexport function getCrossElementWorldPosition(nodeId, camera) {\n  const entry = crossElementRegistry.get(nodeId);\n  if (!entry || !entry.crossGroupRef || !entry.crossGroupRef.current) return null;\n\n  try {\n    const crossGroup = entry.crossGroupRef.current;\n    crossGroup.getWorldPosition(tempVec);\n    return [tempVec.x, tempVec.y, tempVec.z];\n  } catch (error) {\n    console.warn(`[crossPositionTracker] Error getting position for ${nodeId}:`, error);\n    return null;\n  }\n}\n\nexport function updateAllCrossPositions(camera) {\n  const positions = {};\n  crossElementRegistry.forEach((entry, nodeId) => {\n    const pos = getCrossElementWorldPosition(nodeId, camera);\n    if (pos) {\n      positions[nodeId] = pos;\n      crossPositionCache.set(nodeId, pos);\n    }\n  });\n  return positions;\n}\n\nexport function getCachedCrossPosition(nodeId) {\n  return crossPositionCache.get(nodeId) || null;\n}\n\nexport function clearCache() {\n  crossPositionCache.clear();\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA,MAAM,uBAAuB,IAAI;AACjC,MAAM,qBAAqB,IAAI;AAC/B,MAAM,UAAU,IAAI,0JAAa;AACjC,MAAM,WAAW,IAAI,0JAAa;AAClC,MAAM,WAAW,IAAI,0JAAa;AAE3B,SAAS,qBAAqB,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,aAAa;IAC3E,IAAI,WAAW,UAAU;QACvB,qBAAqB,GAAG,CAAC,QAAQ;YAAE;YAAS;YAAU;QAAc;QACpE,mBAAmB,MAAM,CAAC;IAC5B,OAAO;QACL,qBAAqB,MAAM,CAAC;QAC5B,mBAAmB,MAAM,CAAC;IAC5B;AACF;AAEO,SAAS,uBAAuB,MAAM;IAC3C,qBAAqB,MAAM,CAAC;IAC5B,mBAAmB,MAAM,CAAC;AAC5B;AAEO,SAAS,6BAA6B,MAAM,EAAE,MAAM;IACzD,MAAM,QAAQ,qBAAqB,GAAG,CAAC;IACvC,IAAI,CAAC,SAAS,CAAC,MAAM,aAAa,IAAI,CAAC,MAAM,aAAa,CAAC,OAAO,EAAE,OAAO;IAE3E,IAAI;QACF,MAAM,aAAa,MAAM,aAAa,CAAC,OAAO;QAC9C,WAAW,gBAAgB,CAAC;QAC5B,OAAO;YAAC,QAAQ,CAAC;YAAE,QAAQ,CAAC;YAAE,QAAQ,CAAC;SAAC;IAC1C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,CAAC,kDAAkD,EAAE,OAAO,CAAC,CAAC,EAAE;QAC7E,OAAO;IACT;AACF;AAEO,SAAS,wBAAwB,MAAM;IAC5C,MAAM,YAAY,CAAC;IACnB,qBAAqB,OAAO,CAAC,CAAC,OAAO;QACnC,MAAM,MAAM,6BAA6B,QAAQ;QACjD,IAAI,KAAK;YACP,SAAS,CAAC,OAAO,GAAG;YACpB,mBAAmB,GAAG,CAAC,QAAQ;QACjC;IACF;IACA,OAAO;AACT;AAEO,SAAS,uBAAuB,MAAM;IAC3C,OAAO,mBAAmB,GAAG,CAAC,WAAW;AAC3C;AAEO,SAAS;IACd,mBAAmB,KAAK;AAC1B"}},
    {"offset": {"line": 2832, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/RotatingImage.jsx"],"sourcesContent":["import React, { useRef, useMemo, useState, useEffect } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { Image, Html } from '@react-three/drei';\nimport * as THREE from 'three';\nimport { COLOR_ACCENT } from '../_setup/colors';\nimport { registerCrossElement, unregisterCrossElement } from './crossPositionTracker';\nimport './RotatingImage.scss';\nimport '../templates/ArticleNodeTemplate.scss';\n\nexport function RotatingImage({\n  imageUrl,\n  position,\n  scale = [10.8, 10.8, 1],\n  tiltAmount = 0.15,\n  opacity = 1.0,\n  faceCamera = false,\n  showCross = false,\n  title = \"\",\n  showTitle = false,\n  showReadButton = false,\n  onReadClick = null,\n  onCloseCross = null,\n  highlightState = { isSelected: false, isHighlighted: false, isSecondaryHighlighted: false, hasSelection: false },\n  nodeId = null,\n}) {\n  const meshRef = useRef();\n  const imageMeshRef = useRef();\n  const rotatingWrapperRef = useRef();\n  const groupRef = useRef();\n  const crossGroupRef = useRef();\n  const crossElementRef = useRef(null);\n  const titleWrapperRefFront = useRef(null);\n  const titleWrapperRefBack = useRef(null);\n  const [imageError, setImageError] = useState(false);\n  const [currentImageUrl, setCurrentImageUrl] = useState(imageUrl);\n  const [htmlElementsVisible, setHtmlElementsVisible] = useState(true);\n  const [backHtmlElementsVisible, setBackHtmlElementsVisible] = useState(false);\n  const [crossVisible, setCrossVisible] = useState(true);\n  const [measuredTitleHeight, setMeasuredTitleHeight] = useState(0);\n  const [isMeasurementReady, setIsMeasurementReady] = useState(false);\n\n  const isSelected = highlightState?.isSelected;\n  const isHighlighted = highlightState?.isHighlighted;\n  const isSecondaryHighlighted = highlightState?.isSecondaryHighlighted;\n  const hasSelection = highlightState?.hasSelection;\n  const isDimmed = hasSelection && !isSelected && !isHighlighted && !isSecondaryHighlighted;\n  const displayOpacity = isDimmed ? opacity * 0.2 : opacity;\n  const borderColor = isSelected || isHighlighted ? COLOR_ACCENT : (isSecondaryHighlighted ? \"#ffffff\" : \"#ffffff\");\n\n  const center = useMemo(() => new THREE.Vector3(0, 0, 0), []);\n\n  useEffect(() => {\n    if (!imageUrl) {\n      setImageError(true);\n      return;\n    }\n\n    const img = new window.Image();\n    img.onload = () => {\n      setImageError(false);\n      setCurrentImageUrl(imageUrl);\n    };\n    img.onerror = (error) => {\n      console.warn(`Failed to load image: ${imageUrl}`, error);\n      if (imageUrl && (imageUrl.startsWith('http://') || imageUrl.startsWith('https://'))) {\n        const placeholderUrl = '/entriesImages/placeholder.svg';\n        const placeholderImg = new window.Image();\n        placeholderImg.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(placeholderUrl);\n          console.warn(`Using placeholder for external image: ${imageUrl}`);\n        };\n        placeholderImg.onerror = () => {\n          setImageError(true);\n          setCurrentImageUrl(null);\n        };\n        placeholderImg.src = placeholderUrl;\n        return;\n      }\n\n      if (imageUrl.endsWith('.jpg')) {\n        const pngUrl = imageUrl.replace('.jpg', '.png');\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(pngUrl);\n        };\n        img2.onerror = () => {\n          const placeholderUrl = '/entriesImages/placeholder.svg';\n          const img3 = new window.Image();\n          img3.onload = () => {\n            setImageError(false);\n            setCurrentImageUrl(placeholderUrl);\n            console.warn(`Using placeholder for missing image: ${imageUrl}`);\n          };\n          img3.onerror = () => {\n            console.warn(`Could not load image: ${imageUrl} or ${pngUrl} or placeholder`);\n            setImageError(true);\n          };\n          img3.src = placeholderUrl;\n        };\n        img2.src = pngUrl;\n      } else if (imageUrl.endsWith('.png')) {\n        // Try .jpg if .png fails\n        const jpgUrl = imageUrl.replace('.png', '.jpg');\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(jpgUrl);\n        };\n        img2.onerror = () => {\n          // Try placeholder as last resort\n          const placeholderUrl = '/entriesImages/placeholder.svg';\n          const img3 = new window.Image();\n          img3.onload = () => {\n            setImageError(false);\n            setCurrentImageUrl(placeholderUrl);\n            console.warn(`Using placeholder for missing image: ${imageUrl}`);\n          };\n          img3.onerror = () => {\n            console.warn(`Could not load image: ${imageUrl} or ${jpgUrl} or placeholder`);\n            setImageError(true);\n          };\n          img3.src = placeholderUrl;\n        };\n        img2.src = jpgUrl;\n      } else {\n        const placeholderUrl = '/entriesImages/placeholder.svg';\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(placeholderUrl);\n          console.warn(`Using placeholder for missing image: ${imageUrl}`);\n        };\n        img2.onerror = () => {\n          console.warn(`Could not load image: ${imageUrl} or placeholder`);\n          setImageError(true);\n        };\n        img2.src = placeholderUrl;\n      }\n    };\n    img.src = imageUrl;\n  }, [imageUrl]);\n\n  const tempVec1 = useRef(new THREE.Vector3());\n  const tempVec2 = useRef(new THREE.Vector3());\n  const tempVec3 = useRef(new THREE.Vector3());\n  const tempVec4 = useRef(new THREE.Vector3());\n  const tempQuat = useRef(new THREE.Quaternion());\n  const tempQuat2 = useRef(new THREE.Quaternion());\n  const tempMatrix = useRef(new THREE.Matrix4());\n  const worldUp = useRef(new THREE.Vector3(0, 1, 0));\n\n  useFrame((state, delta) => {\n    if (!groupRef.current || !rotatingWrapperRef.current) return;\n\n    let targetQuaternion = tempQuat.current;\n\n    if (faceCamera) {\n      const camera = state.camera;\n      const currentPos = tempVec1.current;\n      groupRef.current.getWorldPosition(currentPos);\n\n      const directionToCamera = tempVec2.current.subVectors(camera.position, currentPos).normalize();\n\n      const right = tempVec3.current.crossVectors(worldUp.current, directionToCamera);\n\n      if (right.length() < 0.001) {\n        right.set(1, 0, 0);\n      }\n      right.normalize();\n\n      const correctedUp = tempVec4.current.crossVectors(directionToCamera, right).normalize();\n\n      const basis = tempMatrix.current.makeBasis(right, correctedUp, directionToCamera);\n      targetQuaternion.setFromRotationMatrix(basis);\n    } else {\n      const currentPos = tempVec1.current;\n      groupRef.current.getWorldPosition(currentPos);\n\n      const directionToCenter = tempVec2.current.subVectors(center, currentPos);\n      const distance = directionToCenter.length();\n      if (distance < 0.001) return;\n      directionToCenter.normalize();\n\n      const right = tempVec3.current.crossVectors(worldUp.current, directionToCenter);\n      if (right.length() < 0.001) {\n        right.set(1, 0, 0);\n      }\n      right.normalize();\n\n      const stableUp = tempVec4.current.crossVectors(directionToCenter, right).normalize();\n\n      const basis = tempMatrix.current.makeBasis(right, stableUp, directionToCenter);\n      targetQuaternion.setFromRotationMatrix(basis);\n\n      if (tiltAmount !== 0) {\n        const tiltQuaternion = tempQuat2.current.setFromAxisAngle(right, tiltAmount);\n        targetQuaternion.multiply(tiltQuaternion);\n      }\n    }\n\n    const currentQuaternion = rotatingWrapperRef.current.quaternion;\n    const rotationLerp = Math.min(1, 8.0 * delta);\n    currentQuaternion.slerp(targetQuaternion, rotationLerp);\n\n    const camera = state.camera;\n    const cardPosition = tempVec1.current;\n    groupRef.current.getWorldPosition(cardPosition);\n\n    const forward = tempVec2.current.set(0, 0, 1);\n    forward.applyQuaternion(currentQuaternion);\n\n    const toCamera = tempVec3.current.subVectors(camera.position, cardPosition).normalize();\n\n    const dotProduct = forward.dot(toCamera);\n\n    setHtmlElementsVisible(dotProduct > 0);\n    setBackHtmlElementsVisible(dotProduct <= 0);\n    setCrossVisible(dotProduct > 0);\n  });\n\n  const borderWidth = 0.2;\n  const borderScale = useMemo(() => [\n    scale[0] + (borderWidth * 2),\n    scale[1] + (borderWidth * 2),\n    scale[2]\n  ], [scale]);\n\n  const showPlaceholder = !imageUrl || (imageError && !currentImageUrl);\n\n  const imageWidth = scale[0];\n  const imageHeight = scale[1];\n  const totalWidth = imageWidth + (borderWidth * 2);\n  const totalHeight = imageHeight + (borderWidth * 2);\n\n  const topLeft = useMemo(() => new THREE.Vector3(-totalWidth / 2, totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const topRight = useMemo(() => new THREE.Vector3(totalWidth / 2, totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const bottomLeft = useMemo(() => new THREE.Vector3(-totalWidth / 2, -totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const bottomRight = useMemo(() => new THREE.Vector3(totalWidth / 2, -totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const imageCenter = center;\n  const topCenter = useMemo(() => new THREE.Vector3(0, totalHeight / 2, 0), [totalHeight]);\n  const bottomCenter = useMemo(() => new THREE.Vector3(0, -totalHeight / 2, 0), [totalHeight]);\n  const leftCenter = useMemo(() => new THREE.Vector3(-totalWidth / 2, 0, 0), [totalWidth]);\n  const rightCenter = useMemo(() => new THREE.Vector3(totalWidth / 2, 0, 0), [totalWidth]);\n\n  const crossSize = 1.5;\n  const crossLineWidth = 0.1;\n  const crossBottomPosition = -totalHeight / 2 - 0.1;\n  const crossZPosition = 0.001;\n  const circleRadius = crossSize * 0.7;\n\n  const titleAndReadWrapperZPosition = -0.08;\n\n  const wrapperWidthMultiplier = 2.14;\n  const wrapperHeightMultiplier = 2.07;\n  const wrapperWidth = useMemo(() => scale[0] * wrapperWidthMultiplier, [scale]);\n  const wrapperHeight = useMemo(() => scale[1] * wrapperHeightMultiplier, [scale]);\n  const wrapperWidthPx = useMemo(() => Math.round(wrapperWidth * 20), [wrapperWidth]);\n  const wrapperHeightPx = useMemo(() => Math.round(wrapperHeight * 20), [wrapperHeight]);\n  const titleWidthPx = useMemo(() => Math.round(wrapperWidthPx * 0.95), [wrapperWidthPx]);\n\n  const truncateTitle = useMemo(() => {\n    if (!title || title.length <= 96) return title;\n    const truncated = title.substring(0, 96);\n    const lastSpaceIndex = truncated.lastIndexOf(' ');\n    if (lastSpaceIndex > 0) {\n      return truncated.substring(0, lastSpaceIndex) + '...';\n    }\n    return truncated + '...';\n  }, [title]);\n\n  const articleHeightPx = useMemo(() => Math.round(scale[1] * 41), [scale]);\n  \n  useEffect(() => {\n    if (!showTitle || !title) {\n      setMeasuredTitleHeight(0);\n      if (showReadButton) {\n        setIsMeasurementReady(true);\n      } else {\n        setIsMeasurementReady(false);\n      }\n      return;\n    }\n\n    setIsMeasurementReady(false);\n\n    const measureTitle = (element) => {\n      if (!element) return null;\n      \n      const rect = element.getBoundingClientRect();\n      if (rect.width === 0 && rect.height === 0) {\n        return null;\n      }\n      \n      const computedStyle = window.getComputedStyle(element);\n      const height = rect.height || element.offsetHeight || element.scrollHeight;\n      const marginTop = parseFloat(computedStyle.marginTop) || 0;\n      const marginBottom = parseFloat(computedStyle.marginBottom) || 0;\n      \n      const totalHeight = height + marginTop + marginBottom;\n      \n      return totalHeight > 0 ? Math.round(totalHeight) : null;\n    };\n\n    const performMeasurement = () => {\n      const frontElement = titleWrapperRefFront.current;\n      const backElement = titleWrapperRefBack.current;\n      \n      let measuredHeight = null;\n      \n      if (htmlElementsVisible && frontElement) {\n        const rect = frontElement.getBoundingClientRect();\n        if (rect.width > 0 && rect.height > 0) {\n          measuredHeight = measureTitle(frontElement);\n        }\n      }\n      \n      if (!measuredHeight && backHtmlElementsVisible && backElement) {\n        const rect = backElement.getBoundingClientRect();\n        if (rect.width > 0 && rect.height > 0) {\n          measuredHeight = measureTitle(backElement);\n        }\n      }\n      \n      if (measuredHeight !== null && measuredHeight > 0) {\n        setMeasuredTitleHeight(measuredHeight);\n        setTimeout(() => {\n          setIsMeasurementReady(true);\n        }, 100);\n        return true;\n      }\n      return false;\n    };\n\n    const resizeObserver = new ResizeObserver(() => {\n      requestAnimationFrame(() => {\n        performMeasurement();\n      });\n    });\n\n    const setupObserver = () => {\n      const elementsToObserve = [];\n      if (titleWrapperRefFront.current) {\n        elementsToObserve.push(titleWrapperRefFront.current);\n      }\n      if (titleWrapperRefBack.current) {\n        elementsToObserve.push(titleWrapperRefBack.current);\n      }\n\n      if (elementsToObserve.length > 0) {\n        elementsToObserve.forEach(element => {\n          resizeObserver.observe(element);\n        });\n        return true;\n      }\n      return false;\n    };\n\n    if (setupObserver()) {\n      const initialTimeout = setTimeout(() => {\n        if (performMeasurement()) {\n          return;\n        }\n      }, 150);\n\n      const checkInterval = setInterval(() => {\n        if (performMeasurement()) {\n          clearInterval(checkInterval);\n          clearTimeout(initialTimeout);\n        }\n      }, 100);\n\n      const maxTimeout = setTimeout(() => {\n        clearInterval(checkInterval);\n        clearTimeout(initialTimeout);\n        performMeasurement();\n        setIsMeasurementReady(true);\n      }, 1000);\n\n      return () => {\n        clearTimeout(initialTimeout);\n        clearTimeout(maxTimeout);\n        clearInterval(checkInterval);\n        resizeObserver.disconnect();\n      };\n    } else {\n      const checkInterval = setInterval(() => {\n        if (setupObserver()) {\n          clearInterval(checkInterval);\n          const elementsToObserve = [];\n          if (titleWrapperRefFront.current) {\n            elementsToObserve.push(titleWrapperRefFront.current);\n          }\n          if (titleWrapperRefBack.current) {\n            elementsToObserve.push(titleWrapperRefBack.current);\n          }\n          elementsToObserve.forEach(element => {\n            resizeObserver.observe(element);\n          });\n          setTimeout(() => performMeasurement(), 150);\n        }\n      }, 50);\n\n      const maxTimeout = setTimeout(() => {\n        clearInterval(checkInterval);\n        setIsMeasurementReady(true);\n      }, 1000);\n\n      return () => {\n        clearInterval(checkInterval);\n        clearTimeout(maxTimeout);\n        resizeObserver.disconnect();\n      };\n    }\n  }, [showTitle, title, truncateTitle, titleWidthPx, htmlElementsVisible, backHtmlElementsVisible, showReadButton]);\n\n  const readWrapperHeightPx = useMemo(() => {\n    const titleHeight = measuredTitleHeight || 0;\n    return Math.max(0, articleHeightPx - titleHeight);\n  }, [articleHeightPx, measuredTitleHeight]);\n\n  useEffect(() => {\n    if (nodeId && showCross && crossGroupRef.current && crossElementRef.current) {\n      registerCrossElement(nodeId, crossElementRef.current, groupRef, crossGroupRef);\n    } else if (nodeId) {\n      unregisterCrossElement(nodeId);\n    }\n    return () => {\n      if (nodeId) {\n        unregisterCrossElement(nodeId);\n      }\n    };\n  }, [nodeId, showCross, crossVisible]);\n\n  return (\n    <group ref={groupRef} position={position}>\n      <group ref={rotatingWrapperRef}>\n        <mesh position={[0, 0, -0.06]} renderOrder={1} frustumCulled={false}>\n          <planeGeometry args={[borderScale[0], borderScale[1]]} />\n          <meshBasicMaterial\n            color=\"#000000\"\n            transparent\n            opacity={1.0 * displayOpacity}\n            side={THREE.DoubleSide}\n            depthWrite={true}\n            depthTest={true}\n          />\n        </mesh>\n        <mesh position={[0, 0, -0.05]} renderOrder={2} frustumCulled={false}>\n          <planeGeometry args={[borderScale[0], borderScale[1]]} />\n          <meshBasicMaterial\n            color={borderColor}\n            transparent\n            opacity={1.0 * displayOpacity}\n            side={THREE.DoubleSide}\n            depthWrite={true}\n            depthTest={true}\n          />\n        </mesh>\n        {isSelected && (\n          <mesh position={[0, 0, -0.04]} renderOrder={2.5} frustumCulled={false}>\n            <planeGeometry args={[borderScale[0], borderScale[1]]} />\n            <meshBasicMaterial\n              color={COLOR_ACCENT}\n              transparent\n              opacity={0.18 * displayOpacity}\n              side={THREE.DoubleSide}\n              depthWrite={true}\n              depthTest={true}\n            />\n          </mesh>\n        )}\n        {showPlaceholder ? (\n          <mesh ref={meshRef} position={[0, 0, 0]} renderOrder={3} frustumCulled={false}>\n            <planeGeometry args={[scale[0], scale[1]]} />\n            <meshBasicMaterial\n              color={COLOR_ACCENT}\n              transparent\n              opacity={0.95 * displayOpacity}\n              side={THREE.DoubleSide}\n              depthWrite={true}\n              depthTest={true}\n            />\n          </mesh>\n        ) : currentImageUrl && !imageError && (\n          <group ref={imageMeshRef} position={[0, 0, 0]} renderOrder={3}>\n            <Image\n              url={currentImageUrl}\n              scale={scale}\n              transparent\n              opacity={0.95 * displayOpacity}\n              depthWrite={true}\n              depthTest={true}\n              frustumCulled={false}\n              onError={(error) => {\n                console.warn(`Image component failed to load: ${currentImageUrl}`, error);\n                setImageError(true);\n                setCurrentImageUrl(null);\n              }}\n            />\n            <Image\n              url={currentImageUrl}\n              scale={scale}\n              transparent\n              opacity={0.95 * displayOpacity}\n              depthWrite={true}\n              depthTest={true}\n              frustumCulled={false}\n              rotation={[0, Math.PI, 0]}\n              onError={(error) => {\n                console.warn(`Image component failed to load (back): ${currentImageUrl}`, error);\n                setImageError(true);\n                setCurrentImageUrl(null);\n              }}\n            />\n          </group>\n        )}\n\n        {((showTitle && title) || showReadButton) && htmlElementsVisible && (\n          <group position={[0, 0, titleAndReadWrapperZPosition]} renderOrder={7}>\n            <mesh renderOrder={7} frustumCulled={false}>\n              <planeGeometry args={[wrapperWidth, wrapperHeight]} />\n              <meshBasicMaterial\n                color=\"#000000\"\n                transparent\n                opacity={0}\n                side={THREE.FrontSide}\n                depthWrite={false}\n                depthTest={false}\n              />\n            </mesh>\n            <Html\n              center={false}\n              className=\"titleAndReadWrapper\"\n              style={{\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n                transform: 'translate(-50%, -50%)',\n                width: `${wrapperWidthPx}px`,\n                height: `${wrapperHeightPx}px`,\n                minWidth: `${wrapperWidthPx}px`,\n                minHeight: `${wrapperHeightPx}px`,\n                maxWidth: 'none',\n                maxHeight: 'none',\n                margin: 0,\n                padding: 0,\n                pointerEvents: 'auto',\n              }}\n              transform\n              occlude={false}\n            >\n              <div\n                className=\"titleAndReadContainer\"\n                style={{\n                  width: `${wrapperWidthPx}px`,\n                  height: `${articleHeightPx}px`,\n                  minWidth: `${wrapperWidthPx}px`,\n                  minHeight: `${articleHeightPx}px`,\n                  maxWidth: 'none',\n                  maxHeight: 'none',\n                  opacity: displayOpacity,\n                  margin: 0,\n                  padding: 0,\n                  position: 'relative',\n                }}\n              >\n                {showReadButton && (\n                  <div \n                    className=\"readWrapper\"\n                    style={{\n                      position: 'absolute',\n                      top: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                      height: `${readWrapperHeightPx}px`,\n                      opacity: isMeasurementReady ? 1 : 0,\n                      transition: 'opacity 0.3s ease-in-out',\n                    }}\n                  >\n                    <div\n                      className=\"readButton\"\n                      onClick={onReadClick}\n                    >\n                      <span className=\"readButtonText\">\n                        READ\n                      </span>\n                    </div>\n                  </div>\n                )}\n                {showTitle && title && (\n                  <div \n                    ref={titleWrapperRefFront}\n                    className=\"titleWrapper\"\n                    style={{\n                      position: 'absolute',\n                      bottom: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                    }}\n                  >\n                    <div\n                      className=\"titleContainer\"\n                      style={{\n                        width: `${titleWidthPx}px`,\n                      }}\n                    >\n                      {truncateTitle}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </Html>\n          </group>\n        )}\n        {((showTitle && title) || showReadButton) && backHtmlElementsVisible && (\n          <group position={[0, 0, titleAndReadWrapperZPosition]} rotation={[0, Math.PI, 0]} renderOrder={7}>\n            <mesh renderOrder={7} frustumCulled={false}>\n              <planeGeometry args={[wrapperWidth, wrapperHeight]} />\n              <meshBasicMaterial\n                color=\"#000000\"\n                transparent\n                opacity={0}\n                side={THREE.FrontSide}\n                depthWrite={false}\n                depthTest={false}\n              />\n            </mesh>\n            <Html\n              center={false}\n              className=\"titleAndReadWrapper\"\n              style={{\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n                transform: 'translate(-50%, -50%)',\n                width: `${wrapperWidthPx}px`,\n                height: `${wrapperHeightPx}px`,\n                minWidth: `${wrapperWidthPx}px`,\n                minHeight: `${wrapperHeightPx}px`,\n                maxWidth: 'none',\n                maxHeight: 'none',\n                margin: 0,\n                padding: 0,\n                pointerEvents: 'auto',\n              }}\n              transform\n              occlude={false}\n            >\n              <div\n                className=\"titleAndReadContainer\"\n                style={{\n                  width: `${wrapperWidthPx}px`,\n                  height: `${articleHeightPx}px`,\n                  minWidth: `${wrapperWidthPx}px`,\n                  minHeight: `${articleHeightPx}px`,\n                  maxWidth: 'none',\n                  maxHeight: 'none',\n                  opacity: displayOpacity,\n                  margin: 0,\n                  padding: 0,\n                  position: 'relative',\n                }}\n              >\n                {showReadButton && (\n                  <div \n                    className=\"readWrapper\"\n                    style={{\n                      position: 'absolute',\n                      top: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                      height: `${readWrapperHeightPx}px`,\n                      opacity: isMeasurementReady ? 1 : 0,\n                      transition: 'opacity 0.3s ease-in-out',\n                    }}\n                  >\n                    <div\n                      className=\"readButton\"\n                      onClick={onReadClick}\n                    >\n                      <span className=\"readButtonText\">\n                        READ\n                      </span>\n                    </div>\n                  </div>\n                )}\n                {showTitle && title && (\n                  <div \n                    ref={titleWrapperRefBack}\n                    className=\"titleWrapper\"\n                    style={{\n                      position: 'absolute',\n                      bottom: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                    }}\n                  >\n                    <div\n                      className=\"titleContainer\"\n                      style={{\n                        width: `${titleWidthPx}px`,\n                      }}\n                    >\n                      {truncateTitle}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </Html>\n          </group>\n        )}\n\n        {showCross && crossVisible && (\n          <group ref={crossGroupRef} position={[0, crossBottomPosition, crossZPosition]} renderOrder={1000}>\n            <Html\n              center\n              className=\"crossHtml\"\n              style={{\n                width: `${scale[0] * 20}px`,\n              }}\n              transform\n              occlude={false}\n            >\n              <div\n                ref={crossElementRef}\n                className=\"crossContainer\"\n                style={{\n                  opacity: displayOpacity,\n                }}\n                onClick={onCloseCross || undefined}\n              >\n                <div className=\"crossBackground\" />\n                <div className=\"crossBorder\" />\n                <div className=\"crossLines\">\n                  <div className=\"crossLine line1\" />\n                  <div className=\"crossLine line2\" />\n                </div>\n              </div>\n            </Html>\n          </group>\n        )}\n      </group>\n    </group>\n  );\n}\n\nexport default RotatingImage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3881, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/LoadingStateManager.jsx"],"sourcesContent":["import { useStore, getStore } from 'usestore-react';\nimport { useEffect, useState } from 'react';\n\nexport function useLoadingState() {\n  const [loadingState] = useStore('loadingState', {\n    nodesLoaded: 0,\n    totalNodes: 0,\n    isLoading: true,\n    nodesVisible: [],\n  });\n\n  return loadingState;\n}\n\nexport function useNodeVisibility(nodeId, index, totalNodes) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [opacity, setOpacity] = useState(0);\n  const [loadingState] = useStore('loadingState', {\n    nodesLoaded: 0,\n    totalNodes: 0,\n    isLoading: true,\n    nodesVisible: [],\n  });\n\n  useEffect(() => {\n    const baseDelay = 50;\n    const staggerDelay = index * baseDelay;\n    const maxDelay = totalNodes * baseDelay;\n    \n    if (!loadingState.isLoading && loadingState.totalNodes > 0) {\n      const timer = setTimeout(() => {\n        setIsVisible(true);\n        \n        const fadeDuration = 800;\n        const startTime = Date.now();\n        \n        const animate = () => {\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / fadeDuration, 1);\n          \n          const eased = 1 - Math.pow(1 - progress, 3);\n          setOpacity(eased);\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          }\n        };\n        \n        animate();\n      }, staggerDelay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [loadingState.isLoading, loadingState.totalNodes, index, totalNodes]);\n\n  return { isVisible, opacity: Math.max(opacity, 0.1) };\n}\n\nexport function initializeLoadingState(totalNodes) {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState({\n    nodesLoaded: 0,\n    totalNodes,\n    isLoading: true,\n      nodesVisible: [],\n  });\n  }\n}\n\nexport function completeLoading() {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState(prev => ({\n    ...prev,\n    isLoading: false,\n  }));\n  }\n}\n\nexport function markNodeLoaded(nodeId) {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState(prev => ({\n    ...prev,\n    nodesLoaded: prev.nodesLoaded + 1,\n      nodesVisible: [...(prev.nodesVisible || []), nodeId],\n  }));\n  }\n}\n\nexport default { useLoadingState, useNodeVisibility, initializeLoadingState, completeLoading, markNodeLoaded };\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS;IACd,MAAM,CAAC,aAAa,GAAG,IAAA,8JAAQ,EAAC,gBAAgB;QAC9C,aAAa;QACb,YAAY;QACZ,WAAW;QACX,cAAc,EAAE;IAClB;IAEA,OAAO;AACT;AAEO,SAAS,kBAAkB,MAAM,EAAE,KAAK,EAAE,UAAU;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,GAAG,IAAA,8JAAQ,EAAC,gBAAgB;QAC9C,aAAa;QACb,YAAY;QACZ,WAAW;QACX,cAAc,EAAE;IAClB;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;QAClB,MAAM,eAAe,QAAQ;QAC7B,MAAM,WAAW,aAAa;QAE9B,IAAI,CAAC,aAAa,SAAS,IAAI,aAAa,UAAU,GAAG,GAAG;YAC1D,MAAM,QAAQ,WAAW;gBACvB,aAAa;gBAEb,MAAM,eAAe;gBACrB,MAAM,YAAY,KAAK,GAAG;gBAE1B,MAAM,UAAU;oBACd,MAAM,UAAU,KAAK,GAAG,KAAK;oBAC7B,MAAM,WAAW,KAAK,GAAG,CAAC,UAAU,cAAc;oBAElD,MAAM,QAAQ,IAAI,KAAK,GAAG,CAAC,IAAI,UAAU;oBACzC,WAAW;oBAEX,IAAI,WAAW,GAAG;wBAChB,sBAAsB;oBACxB;gBACF;gBAEA;YACF,GAAG;YAEH,OAAO,IAAM,aAAa;QAC5B;IACF,GAAG;QAAC,aAAa,SAAS;QAAE,aAAa,UAAU;QAAE;QAAO;KAAW;IAEvE,OAAO;QAAE;QAAW,SAAS,KAAK,GAAG,CAAC,SAAS;IAAK;AACtD;AAEO,SAAS,uBAAuB,UAAU;IAC/C,MAAM,QAAQ,IAAA,8JAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC;YACb,aAAa;YACb;YACA,WAAW;YACT,cAAc,EAAE;QACpB;IACA;AACF;AAEO,SAAS;IACd,MAAM,QAAQ,IAAA,8JAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC,CAAA,OAAQ,CAAC;gBACtB,GAAG,IAAI;gBACP,WAAW;YACb,CAAC;IACD;AACF;AAEO,SAAS,eAAe,MAAM;IACnC,MAAM,QAAQ,IAAA,8JAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC,CAAA,OAAQ,CAAC;gBACtB,GAAG,IAAI;gBACP,aAAa,KAAK,WAAW,GAAG;gBAC9B,cAAc;uBAAK,KAAK,YAAY,IAAI,EAAE;oBAAG;iBAAO;YACxD,CAAC;IACD;AACF;uCAEe;IAAE;IAAiB;IAAmB;IAAwB;IAAiB;AAAe"}},
    {"offset": {"line": 3994, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/templates/ArticleNodeTemplate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, useCallback, Suspense } from \"react\";\nimport {\n  Line,\n  useGLTF,\n  Html,\n} from \"@react-three/drei\";\nimport { useStore } from \"usestore-react\";\nimport * as THREE from \"three\";\nimport Modal from \"react-modal\";\nimport ArchiveModal from \"../../components/treeModals/archiveModal\";\nimport \"../../components/treeModals/archive.scss\";\nimport { createWhiteMaterial } from \"../utils/whiteMaterial\";\nimport { useConnectionHighlight } from \"../utils/useConnectionHighlight\";\nimport { useShouldShowTitle } from \"../utils/useShouldShowTitle\";\nimport { RotatingImage } from \"../utils/RotatingImage\";\nimport { useNodeVisibility } from \"../utils/LoadingStateManager\";\nimport \"./ArticleNodeTemplate.scss\";\n\nfunction ArticleNodeWithModel({ nodeData, ...props }) {\n  const { nodes, materials } = useGLTF(nodeData.modelPath);\n  return <ArticleNodeContent nodeData={nodeData} nodes={nodes} materials={materials} {...props} />;\n}\n\nfunction ArticleNodeWithoutModel({ nodeData, ...props }) {\n  return <ArticleNodeContent nodeData={nodeData} nodes={{}} materials={{}} {...props} />;\n}\n\nfunction ArticleNodeContent({\n  nodeData,\n  nodes,\n  materials,\n  showAllLines,\n  props,\n  setTitle,\n  setDefault,\n  selectedComponent,\n}) {\n  const objectRef = useRef();\n  const [linesActive, setLinesActive] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [modalIsOpen, setOpen] = useState(false);\n  const [Store, setStore] = useStore(`${nodeData.id}Store`, false);\n\n  const position = nodeData.position || [0, 0, 0];\n  const centerPoint = position;\n  const whiteMaterial = useMemo(() => createWhiteMaterial(), []);\n  useConnectionHighlight(nodeData.id, linesActive);\n  const shouldShowTitle = useShouldShowTitle(nodeData.id);\n  const [opacityMap] = useStore('elementOpacityStore', {});\n  const opacity = opacityMap[nodeData.id] !== undefined ? opacityMap[nodeData.id] : 1.0;\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n\n  const nodeIndex = nodeData.index !== undefined ? nodeData.index : 0;\n  const totalNodes = 83;\n  const { isVisible, opacity: loadingOpacity } = useNodeVisibility(nodeData.id, nodeIndex, totalNodes);\n\n  const isSecondaryHighlighted = secondaryHighlightedArticles?.includes(nodeData.id);\n\n  const finalOpacity = useMemo(() => {\n    if (!isVisible) return 0;\n    const baseOpacity = opacity * loadingOpacity;\n    return baseOpacity;\n  }, [isVisible, opacity, loadingOpacity]);\n\n  const [selectedNode, setSelectedNode] = useStore('selectedNodeStore', null);\n\n  const isDimmed = useMemo(() => {\n    return selectedNode && selectedNode.id !== nodeData.id && !highlightedNodes?.includes(nodeData.id) && !isSecondaryHighlighted;\n  }, [selectedNode, nodeData.id, highlightedNodes, isSecondaryHighlighted]);\n\n  const isHighlighted = useMemo(() => {\n    return selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'));\n  }, [selectedNode, nodeData.id, highlightedNodes]);\n\n  const articleScale = useMemo(() => {\n    if (isDimmed) {\n      return [10.8 * 0.6, 14.4 * 0.6, 1];\n    }\n    if (isHighlighted) {\n      return [10.8 * 1.3, 14.4 * 1.3, 1];\n    }\n    return [10.8, 14.4, 1];\n  }, [isDimmed, isHighlighted]);\n  const [, setHighlightedNodes] = useStore('highlightedNodesStore', []);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  useEffect(() => {\n    if (selectedNode && selectedNode.id !== nodeData.id && linesActive) {\n      setClickCount(0);\n      setClicked(false);\n      setLinesActive(false);\n      setStore(false);\n    }\n  }, [selectedNode, linesActive, nodeData.id, setStore]);\n\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n\n  const [modelState, setModelState] = useState(false);\n  useEffect(() => {\n    if (!nodeData.connections || nodeData.connections.length === 0) {\n      setModelState(false);\n      return;\n    }\n\n    const checkConnections = () => {\n      const { getStore } = require('usestore-react');\n      const anyActive = nodeData.connections.some(connId => {\n        try {\n          const store = getStore(`${connId}Store`, false);\n          return store === true;\n        } catch (e) {\n          return false;\n        }\n      });\n      setModelState(anyActive);\n    };\n\n    checkConnections();\n    const interval = setInterval(checkConnections, 500);\n    return () => clearInterval(interval);\n  }, [nodeData.connections]);\n\n  function handleCloseModal() {\n    setOpen(false);\n    setDefault();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setStore(false);\n    if (window.location.hash) {\n      window.history.pushState(null, '', window.location.pathname);\n    }\n  }\n\n  function handleClick() {\n    if (clickCount === 0) {\n      setClicked(true);\n      setClickCount(1);\n      setLinesActive(true);\n      setStore(true);\n      if (setTitle) setTitle();\n    } else {\n      setClickCount(0);\n      setClicked(false);\n      setLinesActive(false);\n      setDefault();\n      setStore(false);\n    }\n  }\n\n  // Slugify title for URL hash\n  const slugifyTitle = (title) => {\n    if (!title) return '';\n    return title\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/[\\s_-]+/g, '-')\n      .replace(/^-+|-+$/g, '');\n  };\n\n  function handleReadClick(e) {\n    e.stopPropagation();\n    setOpen(true);\n    if (nodeData.title) {\n      const hash = slugifyTitle(nodeData.title);\n      window.history.pushState(null, '', `#${hash}`);\n    }\n  }\n\n  function closeAll() {\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setDefault();\n    setStore(false);\n  }\n\n  const handleCloseCross = useCallback((e) => {\n    e.stopPropagation();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setStore(false);\n    setSelectedNode(null);\n    setHighlightedNodes([]);\n    if (setDefault) setDefault();\n  }, [setStore, setSelectedNode, setHighlightedNodes, setDefault]);\n\n  useEffect(() => {\n    if (clickCount === 1) {\n      setLinesActive(true);\n      if (setTitle) setTitle();\n      setStore(true);\n    }\n  }, [clicked, setTitle, setStore]);\n\n  // Handle hash on page load - open modal if hash matches article title\n  useEffect(() => {\n    if (typeof window === 'undefined' || !nodeData.title) return;\n\n    const hash = window.location.hash.substring(1);\n    if (!hash) return;\n\n    const articleHash = slugifyTitle(nodeData.title);\n    if (articleHash === hash && !modalIsOpen) {\n      setTimeout(() => {\n        setOpen(true);\n      }, 1000);\n    }\n  }, [nodeData.title, modalIsOpen]);\n\n  return (\n    <>\n      <group {...props} dispose={null} frustumCulled={false}>\n        <group\n          position={position}\n          scale={[0.5, 0.5, 0.5]}\n          onClick={() => handleClick()}\n          opacity={finalOpacity}\n          ref={objectRef}\n          className=\"articleNodeGroup\"\n          frustumCulled={false}\n        >\n          {!modelState && (\n            <RotatingImage\n              imageUrl={nodeData.imageUrl}\n              position={[0, 0, 0]}\n              scale={articleScale}\n              tiltAmount={0.15}\n              opacity={finalOpacity}\n              faceCamera={isHighlighted || isSecondaryHighlighted}\n              showCross={linesActive}\n              title={nodeData.title}\n              showTitle={selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'))}\n              showReadButton={selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'))}\n              onReadClick={handleReadClick}\n              onCloseCross={handleCloseCross}\n              nodeId={nodeData.id}\n              highlightState={{\n                isSelected: selectedNode?.id === nodeData.id,\n                isHighlighted: highlightedNodes?.includes(nodeData.id),\n                isSecondaryHighlighted: isSecondaryHighlighted,\n                hasSelection: !!selectedNode,\n              }}\n            />\n          )}\n\n          <Html center>\n            <Modal\n              isOpen={modalIsOpen}\n              contentLabel=\"Article Modal\"\n              className=\"archive-modal-content\"\n              overlayClassName=\"archive-modal-overlay\"\n            >\n              <ArchiveModal\n                closeModal={() => handleCloseModal()}\n                connect1={nodeData.connectionKeywords?.[0] || \"\"}\n                connect2={nodeData.connectionKeywords?.[1] || \"\"}\n                connect3={nodeData.connectionKeywords?.[2] || \"\"}\n                connect4={nodeData.connectionKeywords?.[3] || \"\"}\n                img={nodeData.imageUrl}\n                title={nodeData.title}\n                author={nodeData.author}\n                content={nodeData.content}\n                authorBio={nodeData.authorBio}\n                keywords={nodeData.keywords}\n                photoCredit={nodeData.photoCredit}\n              />\n            </Modal>\n          </Html>\n\n        </group>\n      </group>\n    </>\n  );\n}\n\nconst ArticleNodeTemplate = React.memo(function ArticleNodeTemplate({ nodeData, ...props }) {\n  const hasModel = !!nodeData.modelPath && nodeData.modelPath.trim() !== '';\n\n  if (hasModel) {\n    return (\n      <Suspense fallback={null}>\n        <ArticleNodeWithModel nodeData={nodeData} {...props} />\n      </Suspense>\n    );\n  } else {\n    return <ArticleNodeWithoutModel nodeData={nodeData} {...props} />;\n  }\n}, (prevProps, nextProps) => {\n  const prevPos = prevProps.nodeData.position || [0, 0, 0];\n  const nextPos = nextProps.nodeData.position || [0, 0, 0];\n  const positionChanged = prevPos[0] !== nextPos[0] || prevPos[1] !== nextPos[1] || prevPos[2] !== nextPos[2];\n\n  if (positionChanged) return false;\n\n  return (\n    prevProps.nodeData.id === nextProps.nodeData.id &&\n    prevProps.showAllLines === nextProps.showAllLines\n  );\n});\n\nexport default ArticleNodeTemplate;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4390, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/templates/GlossaryNodeTemplate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, useCallback, Suspense } from \"react\";\nimport { useGLTF, Html, Line } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { createStore, useStore } from \"usestore-react\";\nimport { createWhiteMaterial } from \"../utils/whiteMaterial\";\nimport { useConnectionHighlight } from \"../utils/useConnectionHighlight\";\nimport { useShouldShowTitle } from \"../utils/useShouldShowTitle\";\nimport { useNodeVisibility } from \"../utils/LoadingStateManager\";\nimport \"./GlossaryNodeTemplate.scss\";\n\nfunction GlossaryNodeWithModel({ nodeData, ...props }) {\n  const { nodes, materials } = useGLTF(nodeData.modelPath);\n  return <GlossaryNodeContent nodeData={nodeData} nodes={nodes} materials={materials} {...props} />;\n}\n\nfunction GlossaryNodeWithoutModel({ nodeData, ...props }) {\n  return <GlossaryNodeContent nodeData={nodeData} nodes={{}} materials={{}} {...props} />;\n}\n\nfunction GlossaryNodeContent({\n  nodeData,\n  nodes,\n  materials,\n  showAllLines,\n  title,\n  active,\n  props,\n  setTitle,\n  setDefault,\n  glossaryShellComponent,\n}) {\n  const objectRef = useRef();\n  const [linesActive, setLinesActive] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [modalIsOpen, setOpen] = useState(false);\n\n  const position = nodeData.position || [0, 0, 0];\n  const centerPoint = position;\n  const [opacityMap] = useStore('elementOpacityStore', {});\n  const opacity = opacityMap[nodeData.id] !== undefined ? opacityMap[nodeData.id] : 1.0;\n  \n  const crossBottomOffset = useMemo(() => {\n    return 1.93; // Offset downward from keyword center (matches connectionController with 0.35 scale)\n  }, []);\n  \n  const nodeIndex = nodeData.index !== undefined ? nodeData.index : 0;\n  const totalNodes = 83;\n  const { isVisible, opacity: loadingOpacity } = useNodeVisibility(nodeData.id, nodeIndex, totalNodes);\n  \n  const finalOpacity = useMemo(() => {\n    if (!isVisible) return 0;\n    return opacity * loadingOpacity;\n  }, [isVisible, opacity, loadingOpacity]);\n\n  const isDimmed = useMemo(() => {\n    const isKeyword = nodeData.id && nodeData.id.startsWith('G');\n    return isKeyword && Math.abs(finalOpacity - 0.3) < 0.01;\n  }, [finalOpacity, nodeData.id]);\n  \n  const whiteMaterial = useMemo(() => {\n    const material = createWhiteMaterial();\n    material.opacity = finalOpacity;\n    material.transparent = finalOpacity < 1.0;\n    return material;\n  }, [finalOpacity]);\n  \n  useConnectionHighlight(nodeData.id, linesActive);\n  const shouldShowTitle = useShouldShowTitle(nodeData.id);\n  \n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const isHighlighted = useMemo(() => {\n    return Array.isArray(highlightedNodes) && highlightedNodes.includes(nodeData.id);\n  }, [highlightedNodes, nodeData.id]);\n\n  const [selectedNode, setSelectedNode] = useStore('selectedNodeStore', null);\n  const isSelected = useMemo(() => {\n    return selectedNode?.id === nodeData.id;\n  }, [selectedNode, nodeData.id]);\n  \n  const [, setHighlightedNodes] = useStore('highlightedNodesStore', []);\n\n  const isSecondaryHighlighted = useMemo(() => {\n    return isHighlighted && !isSelected && !linesActive;\n  }, [isHighlighted, isSelected, linesActive]);\n\n  const [clickCounter4, setClickCounter4] = useStore(`${nodeData.id}Store`, false);\n  useEffect(() => {\n    if (selectedNode && selectedNode.id !== nodeData.id && linesActive) {\n      setClickCount(0);\n      setClicked(false);\n      setLinesActive(false);\n    }\n  }, [selectedNode, linesActive, nodeData.id]);\n\n  useEffect(() => {\n    if (materials && Object.keys(materials).length > 0) {\n      Object.values(materials).forEach(material => {\n        if (material) {\n          material.opacity = finalOpacity;\n          material.transparent = finalOpacity < 1.0;\n        }\n      });\n    }\n  }, [finalOpacity, materials]);\n\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n\n  function handleCloseModal() {\n    setOpen(false);\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n  }\n\n  const handleClick = useCallback(() => {\n    setClicked(prev => !prev);\n    setClickCount(prev => prev + 1);\n    setClickCounter4(false);\n  }, [setClickCounter4]);\n\n  function closeAll() {\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n  }\n\n  const handleCloseCross = useCallback((e) => {\n    e.stopPropagation();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setClickCounter4(false);\n    setSelectedNode(null);\n    setHighlightedNodes([]);\n    if (setDefault) setDefault();\n  }, [setClickCounter4, setSelectedNode, setHighlightedNodes, setDefault]);\n\n  useEffect(() => {\n    if (clickCount === 1) {\n      setLinesActive(true);\n      if (setTitle) setTitle();\n      setClickCounter4(true);\n    } else if (clickCount === 2) {\n      setLinesActive(false);\n      setClickCount(0);\n      if (setDefault) setDefault();\n    }\n  }, [clicked, setTitle, setDefault, setClickCounter4]);\n\n  useEffect(() => {\n    if (showAllLines) {\n      setClickCount(1);\n    } else if (!showAllLines) {\n      setClickCount(0);\n    }\n  }, [showAllLines]);\n\n  return (\n    <>\n      <group\n        {...props}\n        dispose={null}\n        position={position}\n        scale={[1, 1, 1]}\n        onClick={handleClick}\n        ref={objectRef}\n        opacity={finalOpacity}\n        className=\"glossaryNodeGroup\"\n        frustumCulled={false}\n      >\n        <mesh position={[0, 0, 0]} visible={false}>\n          <planeGeometry args={[5, 2]} />\n          <meshBasicMaterial transparent opacity={0} side={THREE.DoubleSide} />\n        </mesh>\n        <Html center>\n          <div className=\"glossaryContainer\">\n            <div\n              className={`glossaryPill ${(isSelected || isHighlighted || linesActive) ? 'selected' : ''} ${isSecondaryHighlighted ? 'secondaryHighlighted' : ''} ${isHighlighted || linesActive ? 'highlighted' : ''} ${isDimmed ? 'dimmed' : ''}`}\n              onClick={(e) => {\n                e.stopPropagation();\n                handleClick();\n              }}\n              style={{ opacity: finalOpacity }}\n            >\n              <span className=\"glossaryPillTitle\">\n                {(title || nodeData.title || \"\").toUpperCase()}\n              </span>\n              {(isSelected || isHighlighted || linesActive) && nodeData.hasOpenButton && (\n                <span\n                  className=\"glossaryPillOpenButton\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    const slugifyTitle = (title) => {\n                      return title\n                        .toLowerCase()\n                        .trim()\n                        .replace(/[^\\w\\s-]/g, '')\n                        .replace(/[\\s_-]+/g, '-')\n                        .replace(/^-+|-+$/g, '');\n                    };\n                    const keywordSlug = slugifyTitle(nodeData.title || '');\n                    if (typeof window !== 'undefined') {\n                      sessionStorage.setItem('fromLivingContinuity', Date.now().toString());\n                    }\n                    window.location.href = `/glossary#${keywordSlug}`;\n                  }}\n                >\n                  OPEN\n                </span>\n              )}\n            </div>\n            {(isSelected || isHighlighted || linesActive) && (\n              <div \n                className={`glossaryCross ${(isSelected || isHighlighted || linesActive) ? 'selected' : ''}`} \n                style={{ opacity: finalOpacity }}\n                onClick={handleCloseCross}\n              >\n                <div className=\"glossaryCrossBackground\" />\n                <div className=\"glossaryCrossBorder\" />\n                <div className=\"glossaryCrossLines\">\n                  <div className=\"glossaryCrossLine line1\" />\n                  <div className=\"glossaryCrossLine line2\" />\n                </div>\n              </div>\n            )}\n          </div>\n        </Html>\n      </group>\n      {linesActive == true && (\n        <group>\n          <Line\n            points={[...position, ...centerPoint]}\n            color={\"#ffffff\"}\n            lineWidth={1}\n          />\n        </group>\n      )}\n\n      {showAllLines == true && (\n        <group>\n          <Line\n            points={[...position, ...centerPoint]}\n            color={\"#ffffff\"}\n            lineWidth={1}\n          />\n        </group>\n      )}\n    </>\n  );\n}\n\nexport const GlossaryNodeTemplate = React.memo(function GlossaryNodeTemplate({ nodeData, ...props }) {\n  const hasModel = !!nodeData.modelPath && nodeData.modelPath.trim() !== '';\n  \n  if (hasModel) {\n    return (\n      <Suspense fallback={null}>\n        <GlossaryNodeWithModel nodeData={nodeData} {...props} />\n      </Suspense>\n    );\n  } else {\n    return <GlossaryNodeWithoutModel nodeData={nodeData} {...props} />;\n  }\n}, (prevProps, nextProps) => {\n  const prevPos = prevProps.nodeData.position || [0, 0, 0];\n  const nextPos = nextProps.nodeData.position || [0, 0, 0];\n  const positionChanged = prevPos[0] !== nextPos[0] || prevPos[1] !== nextPos[1] || prevPos[2] !== nextPos[2];\n  \n  if (positionChanged) return false;\n  \n  return (\n    prevProps.nodeData.id === nextProps.nodeData.id &&\n    prevProps.showAllLines === nextProps.showAllLines\n  );\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4843, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/CameraInteractionTracker.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\n\nexport function CameraInteractionTracker() {\n  const [, setCameraInteraction] = useStore('cameraInteractionStore', false);\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const interactionTimeoutRef = useRef(null);\n  const isInteractingRef = useRef(false);\n  \n  useEffect(() => {\n    if (selectedNode?.id) {\n      setCameraInteraction(false);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n        interactionTimeoutRef.current = null;\n      }\n      isInteractingRef.current = false;\n    }\n  }, [selectedNode, setCameraInteraction]);\n\n  useEffect(() => {\n    const canvas = document.querySelector('canvas');\n    if (!canvas) return;\n\n    let dragStartPos = null;\n    let isDragging = false;\n    \n    const handlePointerDown = (e) => {\n      dragStartPos = { x: e.clientX, y: e.clientY };\n      isDragging = false;\n    };\n    \n    const handlePointerMove = (e) => {\n      if (dragStartPos && !isDragging) {\n        const dx = Math.abs(e.clientX - dragStartPos.x);\n        const dy = Math.abs(e.clientY - dragStartPos.y);\n        if (dx > 5 || dy > 5) {\n          isDragging = true;\n          isInteractingRef.current = true;\n          setCameraInteraction(true);\n          \n          if (interactionTimeoutRef.current) {\n            clearTimeout(interactionTimeoutRef.current);\n            interactionTimeoutRef.current = null;\n          }\n        }\n      } else if (isDragging) {\n        isInteractingRef.current = true;\n        setCameraInteraction(true);\n      }\n    };\n    \n    const handlePointerUp = () => {\n      if (isDragging) {\n        isInteractingRef.current = false;\n        if (interactionTimeoutRef.current) {\n          clearTimeout(interactionTimeoutRef.current);\n        }\n        interactionTimeoutRef.current = setTimeout(() => {\n          if (!isInteractingRef.current) {\n            setCameraInteraction(false);\n          }\n        }, 1500);\n      }\n      dragStartPos = null;\n      isDragging = false;\n    };\n    \n    const handleWheel = () => {\n      isInteractingRef.current = true;\n      setCameraInteraction(true);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n      }\n      interactionTimeoutRef.current = setTimeout(() => {\n        if (!isInteractingRef.current) {\n          setCameraInteraction(false);\n        }\n      }, 2000);\n    };\n    \n    canvas.addEventListener('pointerdown', handlePointerDown, { passive: true });\n    canvas.addEventListener('pointermove', handlePointerMove, { passive: true });\n    canvas.addEventListener('pointerup', handlePointerUp, { passive: true });\n    canvas.addEventListener('wheel', handleWheel, { passive: true });\n\n    return () => {\n      canvas.removeEventListener('pointerdown', handlePointerDown);\n      canvas.removeEventListener('pointermove', handlePointerMove);\n      canvas.removeEventListener('pointerup', handlePointerUp);\n      canvas.removeEventListener('wheel', handleWheel);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n      }\n    };\n  }, [setCameraInteraction]);\n\n  return null;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACd,MAAM,GAAG,qBAAqB,GAAG,IAAA,8JAAQ,EAAC,0BAA0B;IACpE,MAAM,CAAC,aAAa,GAAG,IAAA,8JAAQ,EAAC,qBAAqB;IACrD,MAAM,wBAAwB,IAAA,+MAAM,EAAC;IACrC,MAAM,mBAAmB,IAAA,+MAAM,EAAC;IAEhC,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc,IAAI;YACpB,qBAAqB;YACrB,IAAI,sBAAsB,OAAO,EAAE;gBACjC,aAAa,sBAAsB,OAAO;gBAC1C,sBAAsB,OAAO,GAAG;YAClC;YACA,iBAAiB,OAAO,GAAG;QAC7B;IACF,GAAG;QAAC;QAAc;KAAqB;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,IAAI,CAAC,QAAQ;QAEb,IAAI,eAAe;QACnB,IAAI,aAAa;QAEjB,MAAM,oBAAoB,CAAC;YACzB,eAAe;gBAAE,GAAG,EAAE,OAAO;gBAAE,GAAG,EAAE,OAAO;YAAC;YAC5C,aAAa;QACf;QAEA,MAAM,oBAAoB,CAAC;YACzB,IAAI,gBAAgB,CAAC,YAAY;gBAC/B,MAAM,KAAK,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,aAAa,CAAC;gBAC9C,MAAM,KAAK,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,aAAa,CAAC;gBAC9C,IAAI,KAAK,KAAK,KAAK,GAAG;oBACpB,aAAa;oBACb,iBAAiB,OAAO,GAAG;oBAC3B,qBAAqB;oBAErB,IAAI,sBAAsB,OAAO,EAAE;wBACjC,aAAa,sBAAsB,OAAO;wBAC1C,sBAAsB,OAAO,GAAG;oBAClC;gBACF;YACF,OAAO,IAAI,YAAY;gBACrB,iBAAiB,OAAO,GAAG;gBAC3B,qBAAqB;YACvB;QACF;QAEA,MAAM,kBAAkB;YACtB,IAAI,YAAY;gBACd,iBAAiB,OAAO,GAAG;gBAC3B,IAAI,sBAAsB,OAAO,EAAE;oBACjC,aAAa,sBAAsB,OAAO;gBAC5C;gBACA,sBAAsB,OAAO,GAAG,WAAW;oBACzC,IAAI,CAAC,iBAAiB,OAAO,EAAE;wBAC7B,qBAAqB;oBACvB;gBACF,GAAG;YACL;YACA,eAAe;YACf,aAAa;QACf;QAEA,MAAM,cAAc;YAClB,iBAAiB,OAAO,GAAG;YAC3B,qBAAqB;YACrB,IAAI,sBAAsB,OAAO,EAAE;gBACjC,aAAa,sBAAsB,OAAO;YAC5C;YACA,sBAAsB,OAAO,GAAG,WAAW;gBACzC,IAAI,CAAC,iBAAiB,OAAO,EAAE;oBAC7B,qBAAqB;gBACvB;YACF,GAAG;QACL;QAEA,OAAO,gBAAgB,CAAC,eAAe,mBAAmB;YAAE,SAAS;QAAK;QAC1E,OAAO,gBAAgB,CAAC,eAAe,mBAAmB;YAAE,SAAS;QAAK;QAC1E,OAAO,gBAAgB,CAAC,aAAa,iBAAiB;YAAE,SAAS;QAAK;QACtE,OAAO,gBAAgB,CAAC,SAAS,aAAa;YAAE,SAAS;QAAK;QAE9D,OAAO;YACL,OAAO,mBAAmB,CAAC,eAAe;YAC1C,OAAO,mBAAmB,CAAC,eAAe;YAC1C,OAAO,mBAAmB,CAAC,aAAa;YACxC,OAAO,mBAAmB,CAAC,SAAS;YACpC,IAAI,sBAAsB,OAAO,EAAE;gBACjC,aAAa,sBAAsB,OAAO;YAC5C;QACF;IACF,GAAG;QAAC;KAAqB;IAEzB,OAAO;AACT"}},
    {"offset": {"line": 4956, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/ConnectionTransitionController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore, getStore } from 'usestore-react';\n\nexport function ConnectionTransitionController() {\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  const prevSelectedNodeRef = useRef(null);\n  const transitionTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    const visibilityStore = getStore('connectionLinesVisibilityStore');\n    \n    if (transitionTimeoutRef.current) {\n      clearTimeout(transitionTimeoutRef.current);\n    }\n\n    if (selectedNode?.id !== prevSelectedNodeRef.current?.id) {\n      const isNewSelection = selectedNode?.id && !prevSelectedNodeRef.current?.id;\n      const isDeselection = !selectedNode?.id && prevSelectedNodeRef.current?.id;\n\n      if (isNewSelection) {\n        visibilityStore.setState(false);\n        \n        transitionTimeoutRef.current = setTimeout(() => {\n          visibilityStore.setState(true);\n        }, 1500);\n        \n      } else if (isDeselection) {\n        visibilityStore.setState(false);\n        \n        transitionTimeoutRef.current = setTimeout(() => {\n          visibilityStore.setState(true);\n        }, 1000);\n      }\n      \n      prevSelectedNodeRef.current = selectedNode;\n    }\n\n    if (cameraInteraction && selectedNode?.id) {\n      visibilityStore.setState(false);\n      \n      transitionTimeoutRef.current = setTimeout(() => {\n        visibilityStore.setState(true);\n      }, 1200);\n    }\n\n    return () => {\n      if (transitionTimeoutRef.current) {\n        clearTimeout(transitionTimeoutRef.current);\n      }\n    };\n  }, [selectedNode, cameraInteraction]);\n\n  return null;\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACd,MAAM,CAAC,aAAa,GAAG,IAAA,8JAAQ,EAAC,qBAAqB;IACrD,MAAM,CAAC,kBAAkB,GAAG,IAAA,8JAAQ,EAAC,0BAA0B;IAC/D,MAAM,sBAAsB,IAAA,+MAAM,EAAC;IACnC,MAAM,uBAAuB,IAAA,+MAAM,EAAC;IAEpC,IAAA,kNAAS,EAAC;QACR,MAAM,kBAAkB,IAAA,8JAAQ,EAAC;QAEjC,IAAI,qBAAqB,OAAO,EAAE;YAChC,aAAa,qBAAqB,OAAO;QAC3C;QAEA,IAAI,cAAc,OAAO,oBAAoB,OAAO,EAAE,IAAI;YACxD,MAAM,iBAAiB,cAAc,MAAM,CAAC,oBAAoB,OAAO,EAAE;YACzE,MAAM,gBAAgB,CAAC,cAAc,MAAM,oBAAoB,OAAO,EAAE;YAExE,IAAI,gBAAgB;gBAClB,gBAAgB,QAAQ,CAAC;gBAEzB,qBAAqB,OAAO,GAAG,WAAW;oBACxC,gBAAgB,QAAQ,CAAC;gBAC3B,GAAG;YAEL,OAAO,IAAI,eAAe;gBACxB,gBAAgB,QAAQ,CAAC;gBAEzB,qBAAqB,OAAO,GAAG,WAAW;oBACxC,gBAAgB,QAAQ,CAAC;gBAC3B,GAAG;YACL;YAEA,oBAAoB,OAAO,GAAG;QAChC;QAEA,IAAI,qBAAqB,cAAc,IAAI;YACzC,gBAAgB,QAAQ,CAAC;YAEzB,qBAAqB,OAAO,GAAG,WAAW;gBACxC,gBAAgB,QAAQ,CAAC;YAC3B,GAAG;QACL;QAEA,OAAO;YACL,IAAI,qBAAqB,OAAO,EAAE;gBAChC,aAAa,qBAAqB,OAAO;YAC3C;QACF;IACF,GAAG;QAAC;QAAc;KAAkB;IAEpC,OAAO;AACT"}},
    {"offset": {"line": 5011, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/ModelPreloader.js"],"sourcesContent":["import { useGLTF } from \"@react-three/drei\";\n\nconst preloadedModels = new Set();\n\nexport function preloadGLBModel(path) {\n  if (!path || preloadedModels.has(path)) {\n    return;\n  }\n  \n  preloadedModels.add(path);\n  \n  try {\n    useGLTF.preload(path);\n  } catch (error) {\n    console.warn(`Failed to preload model ${path}:`, error);\n    preloadedModels.delete(path);\n  }\n}\n\nexport function preloadAllModels(nodeData) {\n  if (!nodeData) return;\n  \n  if (nodeData.articles) {\n    nodeData.articles.forEach(article => {\n      if (article.modelPath && article.modelPath.trim() !== '') {\n        preloadGLBModel(article.modelPath);\n      }\n    });\n  }\n  \n  if (nodeData.glossary) {\n    nodeData.glossary.forEach(glossary => {\n      if (glossary.modelPath && glossary.modelPath.trim() !== '') {\n        preloadGLBModel(glossary.modelPath);\n      }\n    });\n  }\n}\n\nexport function preloadImages(nodeData) {\n  if (!nodeData) return Promise.resolve();\n  \n  const imagePromises = [];\n  const batchSize = 6;\n  const articles = nodeData.articles || [];\n  \n  for (let i = 0; i < articles.length; i += batchSize) {\n    const batch = articles.slice(i, i + batchSize);\n    batch.forEach(article => {\n      if (article.imageUrl) {\n        const img = new Image();\n        img.crossOrigin = 'anonymous';\n        const promise = new Promise((resolve) => {\n          img.onload = resolve;\n          img.onerror = resolve;\n          img.src = article.imageUrl;\n        });\n        imagePromises.push(promise);\n      }\n    });\n    \n    if (i + batchSize < articles.length) {\n      imagePromises.push(new Promise(resolve => setTimeout(resolve, 10)));\n    }\n  }\n  \n  return Promise.allSettled(imagePromises);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,kBAAkB,IAAI;AAErB,SAAS,gBAAgB,IAAI;IAClC,IAAI,CAAC,QAAQ,gBAAgB,GAAG,CAAC,OAAO;QACtC;IACF;IAEA,gBAAgB,GAAG,CAAC;IAEpB,IAAI;QACF,mKAAO,CAAC,OAAO,CAAC;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC,EAAE;QACjD,gBAAgB,MAAM,CAAC;IACzB;AACF;AAEO,SAAS,iBAAiB,QAAQ;IACvC,IAAI,CAAC,UAAU;IAEf,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,CAAA;YACxB,IAAI,QAAQ,SAAS,IAAI,QAAQ,SAAS,CAAC,IAAI,OAAO,IAAI;gBACxD,gBAAgB,QAAQ,SAAS;YACnC;QACF;IACF;IAEA,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,CAAA;YACxB,IAAI,SAAS,SAAS,IAAI,SAAS,SAAS,CAAC,IAAI,OAAO,IAAI;gBAC1D,gBAAgB,SAAS,SAAS;YACpC;QACF;IACF;AACF;AAEO,SAAS,cAAc,QAAQ;IACpC,IAAI,CAAC,UAAU,OAAO,QAAQ,OAAO;IAErC,MAAM,gBAAgB,EAAE;IACxB,MAAM,YAAY;IAClB,MAAM,WAAW,SAAS,QAAQ,IAAI,EAAE;IAExC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,KAAK,UAAW;QACnD,MAAM,QAAQ,SAAS,KAAK,CAAC,GAAG,IAAI;QACpC,MAAM,OAAO,CAAC,CAAA;YACZ,IAAI,QAAQ,QAAQ,EAAE;gBACpB,MAAM,MAAM,IAAI;gBAChB,IAAI,WAAW,GAAG;gBAClB,MAAM,UAAU,IAAI,QAAQ,CAAC;oBAC3B,IAAI,MAAM,GAAG;oBACb,IAAI,OAAO,GAAG;oBACd,IAAI,GAAG,GAAG,QAAQ,QAAQ;gBAC5B;gBACA,cAAc,IAAI,CAAC;YACrB;QACF;QAEA,IAAI,IAAI,YAAY,SAAS,MAAM,EAAE;YACnC,cAAc,IAAI,CAAC,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;QAChE;IACF;IAEA,OAAO,QAAQ,UAAU,CAAC;AAC5B"}},
    {"offset": {"line": 5080, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/WalkThroughController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\n\nexport function WalkThroughController({ nodeData, processedData, isActive }) {\n  const { camera } = useThree();\n  const [, setSelectedNode] = useStore('selectedNodeStore', null);\n  const intervalRef = useRef(null);\n  const currentArticleRef = useRef(null);\n  const visitedArticlesRef = useRef(new Set());\n  const targetNodeRef = useRef(null);\n  const animationProgressRef = useRef(0);\n  const isAnimatingRef = useRef(false);\n  const startPositionRef = useRef(null);\n  const targetPositionRef = useRef(null);\n  const animationStartTimeRef = useRef(0);\n\n  useEffect(() => {\n    if (!isActive || !nodeData || !processedData) {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      isAnimatingRef.current = false;\n      animationProgressRef.current = 0;\n      if (!isActive) {\n        setSelectedNode(null);\n        currentArticleRef.current = null;\n        visitedArticlesRef.current.clear();\n      }\n      return;\n    }\n\n    const allArticles = nodeData.articles || [];\n    const allGlossary = nodeData.glossary || [];\n    const allNodes = [...allArticles, ...allGlossary];\n    if (allNodes.length === 0) return;\n\n    const findNearestNode = (currentNode) => {\n      if (!currentNode) {\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      const currentDataNode = processedData.nodeMap.get(currentNode.id);\n      if (!currentDataNode || !currentDataNode.position) {\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      const currentPos = new THREE.Vector3(...currentDataNode.position);\n      let nearestNode = null;\n      let nearestDistance = Infinity;\n\n      allNodes.forEach(node => {\n        if (node.id === currentNode.id) return;\n        if (visitedArticlesRef.current.size < allNodes.length && visitedArticlesRef.current.has(node.id)) {\n          return;\n        }\n\n        const dataNode = processedData.nodeMap.get(node.id);\n        if (!dataNode || !dataNode.position) return;\n\n        const nodePos = new THREE.Vector3(...dataNode.position);\n        const distance = currentPos.distanceTo(nodePos);\n\n        if (distance < nearestDistance) {\n          nearestDistance = distance;\n          nearestNode = node;\n        }\n      });\n\n      if (!nearestNode || visitedArticlesRef.current.size >= allNodes.length) {\n        visitedArticlesRef.current.clear();\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      return nearestNode;\n    };\n\n    const visitNode = (nodeItem) => {\n      const node = processedData.nodeMap.get(nodeItem.id);\n      if (!node || !node.position) return;\n\n      targetNodeRef.current = node;\n      const targetPos = new THREE.Vector3(...node.position);\n      \n      const currentDistance = camera.position.distanceTo(targetPos);\n      const overviewDistance = Math.max(14, Math.min(20, currentDistance * 0.8));\n      \n      const direction = new THREE.Vector3().subVectors(camera.position, targetPos).normalize();\n      const cameraTarget = new THREE.Vector3().addVectors(targetPos, direction.multiplyScalar(overviewDistance));\n      \n      cameraTarget.y = Math.max(cameraTarget.y, targetPos.y + 5);\n\n      startPositionRef.current = camera.position.clone();\n      targetPositionRef.current = cameraTarget;\n      animationStartTimeRef.current = Date.now();\n      animationProgressRef.current = 0;\n      isAnimatingRef.current = true;\n\n      setTimeout(() => {\n        setSelectedNode({ id: nodeItem.id, ts: Date.now() });\n      }, 7500);\n    };\n\n    const nextNode = () => {\n      const nearestNode = findNearestNode(currentArticleRef.current);\n      if (nearestNode) {\n        currentArticleRef.current = nearestNode;\n        visitedArticlesRef.current.add(nearestNode.id);\n        visitNode(nearestNode);\n      }\n    };\n\n    if (!currentArticleRef.current) {\n      currentArticleRef.current = allNodes[Math.floor(Math.random() * allNodes.length)];\n      visitedArticlesRef.current.add(currentArticleRef.current.id);\n      visitNode(currentArticleRef.current);\n    }\n\n    intervalRef.current = setInterval(() => {\n      if (!isAnimatingRef.current) {\n        nextNode();\n      }\n    }, 30000);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      isAnimatingRef.current = false;\n    };\n  }, [isActive, nodeData, processedData, camera, setSelectedNode]);\n\n  useFrame(() => {\n    if (!isActive || !isAnimatingRef.current || !targetPositionRef.current || !startPositionRef.current) {\n      return;\n    }\n\n    const elapsed = (Date.now() - animationStartTimeRef.current) / 20000;\n    animationProgressRef.current = Math.min(elapsed, 1);\n\n    const easeInOutCubic = (t) => {\n      return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n    };\n\n    const easedProgress = easeInOutCubic(animationProgressRef.current);\n\n    camera.position.lerpVectors(\n      startPositionRef.current,\n      targetPositionRef.current,\n      easedProgress\n    );\n\n    if (targetNodeRef.current && targetNodeRef.current.position) {\n      const targetPos = new THREE.Vector3(...targetNodeRef.current.position);\n      \n      const direction = new THREE.Vector3().subVectors(targetPos, camera.position).normalize();\n      const up = new THREE.Vector3(0, 1, 0);\n      const right = new THREE.Vector3().crossVectors(up, direction).normalize();\n      const correctedUp = new THREE.Vector3().crossVectors(direction, right).normalize();\n      \n      const targetMatrix = new THREE.Matrix4().lookAt(camera.position, targetPos, correctedUp);\n      const targetQuaternion = new THREE.Quaternion().setFromRotationMatrix(targetMatrix);\n      \n      const rotationOffset = Math.sin(easedProgress * Math.PI) * 0.15;\n      const offsetQuaternion = new THREE.Quaternion().setFromAxisAngle(up, rotationOffset);\n      targetQuaternion.multiply(offsetQuaternion);\n      \n      camera.quaternion.slerp(targetQuaternion, 0.05);\n    }\n    \n    camera.updateProjectionMatrix();\n\n    if (animationProgressRef.current >= 1) {\n      isAnimatingRef.current = false;\n    }\n  });\n\n  return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5247, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/CameraFOVController.jsx"],"sourcesContent":["'use client';\n\nimport { useFrame, useThree } from '@react-three/fiber';\nimport { useStore } from 'usestore-react';\nimport { useMemo } from 'react';\n\nexport function CameraFOVController() {\n  const { camera } = useThree();\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n\n  const hasHighlightedElements = useMemo(() => {\n    return !!selectedNode || (Array.isArray(highlightedNodes) && highlightedNodes.length > 0);\n  }, [selectedNode, highlightedNodes]);\n\n  const targetFOV = useMemo(() => {\n    return hasHighlightedElements ? 42 : 50;\n  }, [hasHighlightedElements]);\n\n  useFrame(() => {\n    if (camera && camera.isPerspectiveCamera) {\n      const currentFOV = camera.fov;\n      const difference = targetFOV - currentFOV;\n      \n      if (Math.abs(difference) > 0.1) {\n        camera.fov += difference * 0.1;\n        camera.updateProjectionMatrix();\n      } else if (Math.abs(difference) > 0.01) {\n        camera.fov = targetFOV;\n        camera.updateProjectionMatrix();\n      }\n    }\n  });\n\n  return null;\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AAJA;;;;AAMO,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,2NAAQ;IAC3B,MAAM,CAAC,aAAa,GAAG,IAAA,8JAAQ,EAAC,qBAAqB;IACrD,MAAM,CAAC,iBAAiB,GAAG,IAAA,8JAAQ,EAAC,yBAAyB,EAAE;IAE/D,MAAM,yBAAyB,IAAA,gNAAO,EAAC;QACrC,OAAO,CAAC,CAAC,gBAAiB,MAAM,OAAO,CAAC,qBAAqB,iBAAiB,MAAM,GAAG;IACzF,GAAG;QAAC;QAAc;KAAiB;IAEnC,MAAM,YAAY,IAAA,gNAAO,EAAC;QACxB,OAAO,yBAAyB,KAAK;IACvC,GAAG;QAAC;KAAuB;IAE3B,IAAA,2NAAQ,EAAC;QACP,IAAI,UAAU,OAAO,mBAAmB,EAAE;YACxC,MAAM,aAAa,OAAO,GAAG;YAC7B,MAAM,aAAa,YAAY;YAE/B,IAAI,KAAK,GAAG,CAAC,cAAc,KAAK;gBAC9B,OAAO,GAAG,IAAI,aAAa;gBAC3B,OAAO,sBAAsB;YAC/B,OAAO,IAAI,KAAK,GAAG,CAAC,cAAc,MAAM;gBACtC,OAAO,GAAG,GAAG;gBACb,OAAO,sBAAsB;YAC/B;QACF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 5293, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/app/living-continuity/page.js"],"sourcesContent":["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { OrbitControls, Environment } from \"@react-three/drei\";\nimport { useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport React, { useEffect, Suspense, useMemo, useCallback, useState } from \"react\";\nimport OptimizedCanvas from \"../../components/utils/OptimizedCanvas\";\nimport ConnectionController from \"../../components/connectionControler\";\nimport ElementOpacityController from \"../../components/utils/ElementOpacityController\";\nimport Modal from \"react-modal\";\nimport { useStore } from \"usestore-react\";\nimport TopBar from \"../../components/treeComponents/topbar\";\nimport LivingContinuityButton from \"../../components/livingContinuityButton\";\nimport { suppressTextureErrors } from \"../../components/utils/suppressTextureErrors\";\nimport { processNodeData } from \"../../components/utils/d3DataManager\";\nimport ArticleNodeTemplate from \"../../components/templates/ArticleNodeTemplate\";\nimport { GlossaryNodeTemplate } from \"../../components/templates/GlossaryNodeTemplate\";\nimport { initializeLoadingState, completeLoading } from \"../../components/utils/LoadingStateManager\";\nimport { CameraInteractionTracker } from \"../../components/utils/CameraInteractionTracker\";\nimport { ConnectionTransitionController } from \"../../components/utils/ConnectionTransitionController\";\nimport { preloadAllModels, preloadImages } from \"../../components/utils/ModelPreloader\";\nimport { WalkThroughController } from \"../../components/utils/WalkThroughController\";\nimport { CameraFOVController } from \"../../components/utils/CameraFOVController\";\nimport \"./welcomeModal.scss\";\n\nconst selectedComponents = {};\nconst glossaryShellComponents = {};\nlet initialCameraHasBeenSet = false;\n\nconst getSelectedComponent = async (id) => {\n  if (!selectedComponents[id]) {\n    try {\n      const lowerId = id.toLowerCase();\n      const module = await import(`../../models/entries_selected/${lowerId}`);\n      const exportName = `${id}Selected2`;\n      selectedComponents[id] = module[exportName] || module.default || module[`${id}Selected`];\n    } catch (e) {\n      console.warn(`Could not load selected component for ${id}:`, e);\n      return null;\n    }\n  }\n  return selectedComponents[id];\n};\n\nconst getGlossaryShellComponent = async (path) => {\n  if (!path) return null;\n  let key = path.replace('../glossaryShell/', '');\n  if (!glossaryShellComponents[key]) {\n    try {\n      let module;\n      try {\n        module = await import(`../../models/glossaryShell/${key}`);\n      } catch (e1) {\n        const normalizedKey = key.replace(/-/g, '');\n        try {\n          module = await import(`../../models/glossaryShell/${normalizedKey}`);\n          key = normalizedKey;\n        } catch (e2) {\n          if (key === 'racialbias') {\n            module = await import(`../../models/glossaryShell/racialbias`);\n          } else {\n            throw e2;\n          }\n        }\n      }\n      const pascalCase = key\n        .split(/[-_]/)\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join('');\n      glossaryShellComponents[key] = module.default || module[pascalCase] || Object.values(module).find(v => typeof v === 'function');\n    } catch (e) {\n      console.warn(`Could not load glossary shell for ${key}:`, e);\n      return null;\n    }\n  }\n  return glossaryShellComponents[key];\n};\n\n\nconst HomePage = () => {\n  const [cameraOptions] = useStore('cameraOptions');\n  const [sceneRotation] = useStore('livingContinuity_sceneRotation', false);\n  const [walkThroughActive] = useStore('walkThroughActive', false);\n  const showAllLines = false;\n  const [camera, setCamera] = useState(true);\n  const [modalIsOpen, setOpen] = useState(true);\n  const [title, setTitle] = useState(\"\");\n  const [nodeData, setNodeData] = useState(null);\n  const [processedData, setProcessedData] = useState(null);\n  const [selectedComponentsMap, setSelectedComponentsMap] = useState({});\n  const [glossaryShellComponentsMap, setGlossaryShellComponentsMap] = useState({});\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  const [environmentLoaded, setEnvironmentLoaded] = useState(false);\n  const [initialLoad, setInitialLoad] = useState(true);\n  const [modalInitialized, setModalInitialized] = useState(typeof window !== 'undefined');\n  const getInitialCameraPosition = () => {\n    const radius = 28;\n    const height = 6;\n    const theta = Math.random() * Math.PI * 2;\n    const x = radius * Math.cos(theta);\n    const z = radius * Math.sin(theta);\n    return [x, height, z];\n  };\n  \n  const [initialCameraPosition] = useState(() => getInitialCameraPosition());\n  \n  const frameloopMode = camera || cameraInteraction || initialLoad ? 'always' : 'demand';\n  \n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const rootElement = document.getElementById('root') || document.body;\n      try {\n        Modal.setAppElement(rootElement);\n      } catch (error) {\n        console.warn('Modal initialization warning:', error);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    fetch('/data/nodes.json')\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(`HTTP error! status: ${res.status}`);\n        }\n        return res.json();\n      })\n      .then(data => {\n        setNodeData(data);\n        const processed = processNodeData(data);\n        setProcessedData(processed);\n        \n        const totalNodes = (data.articles?.length || 0) + (data.glossary?.length || 0);\n        initializeLoadingState(totalNodes);\n        \n        preloadAllModels(data);\n        preloadImages(data).catch(() => {});\n        \n        const loadComponentsInBatches = async () => {\n          const batchSize = 10;\n          const allArticles = data.articles || [];\n          const allGlossary = data.glossary || [];\n          \n          const articlePromises = [];\n          for (let i = 0; i < allArticles.length; i += batchSize) {\n            const batch = allArticles.slice(i, i + batchSize);\n            const batchPromise = Promise.all(\n              batch.map(async (article) => {\n                if (article.selectedModelPath) {\n                  try {\n                    const component = await getSelectedComponent(article.id);\n                    return { id: article.id, component };\n                  } catch (e) {\n                    console.warn(`Failed to load selected component for ${article.id}:`, e);\n                    return { id: article.id, component: null };\n                  }\n                }\n                return { id: article.id, component: null };\n              })\n            ).then(batchResults => {\n              setSelectedComponentsMap(prev => {\n                const updated = { ...prev };\n                batchResults.forEach(({ id, component }) => {\n                  if (component) updated[id] = component;\n                });\n                return updated;\n              });\n            });\n            articlePromises.push(batchPromise);\n          }\n          \n          const glossaryPromises = [];\n          for (let i = 0; i < allGlossary.length; i += batchSize) {\n            const batch = allGlossary.slice(i, i + batchSize);\n            const batchPromise = Promise.all(\n              batch.map(async (glossary) => {\n                if (glossary.glossaryShellPath) {\n                  try {\n                    const component = await getGlossaryShellComponent(glossary.glossaryShellPath);\n                    return { id: glossary.id, component };\n                  } catch (e) {\n                    console.warn(`Failed to load glossary shell for ${glossary.id}:`, e);\n                    return { id: glossary.id, component: null };\n                  }\n                }\n                return { id: glossary.id, component: null };\n              })\n            ).then(batchResults => {\n              setGlossaryShellComponentsMap(prev => {\n                const updated = { ...prev };\n                batchResults.forEach(({ id, component }) => {\n                  if (component) updated[id] = component;\n                });\n                return updated;\n              });\n            });\n            glossaryPromises.push(batchPromise);\n          }\n          \n          await Promise.allSettled([...articlePromises, ...glossaryPromises]);\n          completeLoading();\n        };\n        \n        loadComponentsInBatches().catch(err => {\n          console.error('Error loading components:', err);\n          completeLoading();\n        });\n      })\n      .catch(err => {\n        console.error('Failed to load node data:', err);\n        setNodeData({ articles: [], glossary: [] });\n        setProcessedData({ nodes: [], links: [], nodeMap: new Map() });\n      });\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setEnvironmentLoaded(true);\n      setTimeout(() => {\n        setInitialLoad(false);\n      }, 2000);\n    }, 500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    const cleanup = suppressTextureErrors();\n    return cleanup;\n  }, []);\n\n  const handleOpen = useCallback(() => {\n    setOpen(prev => !prev);\n  }, []);\n\n  const titleSetters = useMemo(() => {\n    if (!nodeData) return {};\n    const setters = {};\n    \n    nodeData.articles.forEach(article => {\n      setters[article.id] = () => setTitle(article.title);\n    });\n    \n    nodeData.glossary.forEach(glossary => {\n      setters[glossary.id] = () => setTitle(glossary.title || '');\n    });\n    \n    return setters;\n  }, [nodeData]);\n\n  const setTitleDefault = useCallback(() => setTitle(\"\"), []);\n\n  const SceneBackground = React.memo(() => {\n    const { scene } = useThree();\n    useEffect(() => {\n      scene.background = new THREE.Color(0x1C1C1C);\n    }, [scene]);\n    return null;\n  });\n  SceneBackground.displayName = 'SceneBackground';\n\n  const CameraDolly = React.memo(({ cameraOptions }) => {\n    const state = useThree();\n    const [selectedNode] = useStore('selectedNodeStore', null);\n    \n    useEffect(() => {\n      if (selectedNode) {\n        return;\n      }\n      \n      if (!cameraOptions) {\n        return;\n      }\n      \n      if (!initialCameraHasBeenSet) {\n        return;\n      }\n      \n      const presets = {\n        top: [0.267, 14.68, 0.6],\n        reset: [5.29, -1.59, 6],\n        overview: [0, 6, 18],\n      };\n\n      const nextPosition = presets[cameraOptions];\n      if (!nextPosition) {\n        return;\n      }\n\n      state.camera.position.set(...nextPosition);\n      state.camera.lookAt(0, 0, 0);\n      state.camera.updateProjectionMatrix();\n    }, [cameraOptions, state.camera, selectedNode]);\n    return null;\n  });\n\n  const InitialCameraSetup = React.memo(({ initialPosition }) => {\n    const { camera, set } = useThree();\n    const initialPositionRef = React.useRef(initialPosition);\n    \n    useEffect(() => {\n      if (!initialCameraHasBeenSet && initialPositionRef.current) {\n        const timer = setTimeout(() => {\n          if (!initialCameraHasBeenSet) {\n            camera.position.set(...initialPositionRef.current);\n            camera.lookAt(0, 0, 0);\n            camera.updateProjectionMatrix();\n            set({ camera });\n            initialCameraHasBeenSet = true;\n          }\n        }, 50);\n        return () => clearTimeout(timer);\n      }\n    }, []);\n    \n    return null;\n  });\n  InitialCameraSetup.displayName = 'InitialCameraSetup';\n  \n  CameraDolly.displayName = 'CameraDolly';\n\n  return (\n    <>\n      <Modal \n        isOpen={modalIsOpen} \n        contentLabel=\"Welcome Modal\"\n        shouldCloseOnOverlayClick={true}\n        shouldCloseOnEsc={false}\n        ariaHideApp={false}\n        className=\"welcomeModalContent\"\n        overlayClassName=\"welcomeModalOverlay\"\n        onRequestClose={handleOpen}\n        closeTimeoutMS={150}\n      >\n        <div onClick={handleOpen}>\n          <LivingContinuityButton onClick={handleOpen} />\n        </div>\n      </Modal>\n      {(!processedData || !nodeData) && (\n        <div className=\"welcomeLoading\">\n          Loading...\n        </div>\n      )}\n      <div className=\"welcomeTopbarWrapper\">\n        <TopBar title={title} />\n      </div>\n\n      <div className=\"welcomeCanvasWrapper\">\n        <OptimizedCanvas\n          frameloop={frameloopMode}\n        >\n        <SceneBackground />\n        <InitialCameraSetup initialPosition={initialCameraPosition} />\n        <ambientLight intensity={1} />\n        {environmentLoaded && (\n          <Suspense fallback={null}>\n            <Environment preset=\"city\" />\n          </Suspense>\n        )}\n        <CameraDolly cameraOptions={cameraOptions} />\n        {processedData && nodeData && (\n          <>\n            <WalkThroughController \n              nodeData={nodeData} \n              processedData={processedData} \n              isActive={walkThroughActive}\n            />\n            <ElementOpacityController />\n            <CameraInteractionTracker />\n            <ConnectionTransitionController />\n            <CameraFOVController />\n\n            {nodeData.articles.map((article) => {\n              const node = processedData.nodeMap.get(article.id);\n              if (!node) return null;\n              \n              const SelectedComponent = selectedComponentsMap[article.id];\n              const setTitleFn = titleSetters[article.id] || setTitleDefault;\n              \n              return (\n                <Suspense key={article.id} fallback={null}>\n                  <ArticleNodeTemplate\n                    nodeData={node}\n                    showAllLines={showAllLines}\n                    setTitle={setTitleFn}\n                    setDefault={setTitleDefault}\n                    selectedComponent={SelectedComponent}\n                  />\n                </Suspense>\n              );\n            })}\n\n            {nodeData.glossary.map((glossary) => {\n              const node = processedData.nodeMap.get(glossary.id);\n              if (!node) return null;\n              \n              const GlossaryShellComponent = glossaryShellComponentsMap[glossary.id];\n              const setTitleFn = titleSetters[glossary.id] || setTitleDefault;\n              \n              return (\n                <Suspense key={glossary.id} fallback={null}>\n                  <GlossaryNodeTemplate\n                    nodeData={node}\n                    showAllLines={showAllLines}\n                    title={glossary.title}\n                    setTitle={setTitleFn}\n                    setDefault={setTitleDefault}\n                    glossaryShellComponent={GlossaryShellComponent}\n                  />\n                </Suspense>\n              );\n            })}\n\n            <ConnectionController processedData={processedData} />\n          </>\n        )}\n\n        <OrbitControls\n          autoRotate={sceneRotation && !walkThroughActive ? true : false}\n          autoRotateSpeed={0.5}\n          minDistance={1}\n          maxDistance={60}\n          enableDamping={true}\n          dampingFactor={0.08}\n          enablePan={!walkThroughActive}\n          makeDefault={false}\n          rotateSpeed={0.8}\n          panSpeed={0.8}\n          zoomSpeed={0.8}\n          enableRotate={!walkThroughActive}\n        />\n        </OptimizedCanvas>\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;\n"],"names":[],"mappings":"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"}}]
}