{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/OptimizedCanvas.jsx"],"sourcesContent":["'use client';\n\nimport { Canvas } from \"@react-three/fiber\";\nimport { useMemo } from \"react\";\n\nconst createCleanObject = (source) => {\n  if (!source || typeof source !== 'object' || Array.isArray(source)) {\n    return {};\n  }\n  const clean = {};\n  try {\n    for (const key in source) {\n      if (source.hasOwnProperty(key)) {\n        const value = source[key];\n        if (value !== undefined && value !== null) {\n          if (typeof value === 'object' && !Array.isArray(value)) {\n            clean[key] = createCleanObject(value);\n          } else if (typeof value !== 'object') {\n            clean[key] = value;\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn('[OptimizedCanvas] Error creating clean object:', e);\n  }\n  return clean;\n};\n\nexport default function OptimizedCanvas({ children, frameloop, style, camera, orthographic }) {\n  const glConfig = useMemo(() => {\n    try {\n      return {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n        stencil: false,\n        depth: true,\n        logarithmicDepthBuffer: false,\n        preserveDrawingBuffer: false,\n        failIfMajorPerformanceCaveat: false,\n      };\n    } catch (e) {\n      console.error('[OptimizedCanvas] Error creating glConfig:', e);\n      return {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n      };\n    }\n  }, []);\n\n  const canvasProps = useMemo(() => {\n    const builtProps = {\n      dpr: [1, 1.5],\n      frameloop: frameloop || 'demand',\n      gl: (glConfig && typeof glConfig === 'object' && !Array.isArray(glConfig)) ? glConfig : {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n      },\n    };\n    \n    if (orthographic !== undefined) {\n      builtProps.orthographic = orthographic;\n    }\n    \n    try {\n      if (style !== undefined && style !== null && typeof style === 'object' && !Array.isArray(style)) {\n        builtProps.style = createCleanObject(style);\n      }\n      \n      if (camera !== undefined && camera !== null && typeof camera === 'object' && !Array.isArray(camera)) {\n        builtProps.camera = createCleanObject(camera);\n      }\n    } catch (e) {\n      console.error('[OptimizedCanvas] Error building canvasProps:', e);\n    }\n    \n    return builtProps;\n  }, [frameloop, style, camera, glConfig, orthographic]);\n\n  if (!canvasProps || typeof canvasProps !== 'object' || Array.isArray(canvasProps)) {\n    console.error('[OptimizedCanvas] Invalid canvasProps, using defaults:', canvasProps);\n    return (\n      <Canvas dpr={[1, 1.5]} frameloop=\"demand\">\n        {children}\n      </Canvas>\n    );\n  }\n\n  if (!Canvas) {\n    console.error('[OptimizedCanvas] Canvas component not available');\n    return null;\n  }\n\n  const safeCanvasProps = useMemo(() => {\n    const clean = createCleanObject(canvasProps);\n    \n    if (!clean.dpr || !Array.isArray(clean.dpr)) {\n      clean.dpr = [1, 1.5];\n    }\n    if (!clean.frameloop || typeof clean.frameloop !== 'string') {\n      clean.frameloop = 'demand';\n    }\n    if (!clean.gl || typeof clean.gl !== 'object' || Array.isArray(clean.gl)) {\n      clean.gl = glConfig;\n    }\n    \n    return clean;\n  }, [canvasProps, glConfig]);\n\n  try {\n    return (\n      <Canvas {...safeCanvasProps}>\n        {children}\n      </Canvas>\n    );\n  } catch (e) {\n    console.error('[OptimizedCanvas] Error rendering Canvas:', e, 'safeCanvasProps:', safeCanvasProps);\n    return (\n      <Canvas dpr={[1, 1.5]} frameloop=\"demand\">\n        {children}\n      </Canvas>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/nodeConnections.js"],"sourcesContent":["export const ARTICLE_CONNECTIONS = {\n  \"A1\": [\n    \"G5\",\n    \"G8\",\n    \"G15\",\n    \"G28\",\n    \"G33\",\n    \"G45\",\n    \"G51\",\n    \"G54\"\n  ],\n  \"A2\": [\n    \"G2\",\n    \"G3\",\n    \"G23\",\n    \"G37\"\n  ],\n  \"A3\": [\n    \"G9\",\n    \"G11\",\n    \"G16\",\n    \"G18\",\n    \"G20\",\n    \"G40\"\n  ],\n  \"A4\": [\n    \"G4\",\n    \"G11\",\n    \"G15\",\n    \"G16\",\n    \"G17\",\n    \"G19\",\n    \"G29\",\n    \"G38\",\n    \"G53\"\n  ],\n  \"A5\": [\n    \"G8\",\n    \"G14\",\n    \"G15\",\n    \"G22\",\n    \"G24\",\n    \"G34\",\n    \"G51\",\n    \"G54\"\n  ],\n  \"A6\": [\n    \"G1\",\n    \"G6\",\n    \"G7\",\n    \"G14\",\n    \"G19\",\n    \"G21\",\n    \"G22\",\n    \"G24\",\n    \"G25\",\n    \"G27\",\n    \"G34\",\n    \"G35\",\n    \"G50\",\n    \"G52\"\n  ],\n  \"A7\": [\n    \"G2\",\n    \"G5\",\n    \"G10\",\n    \"G14\",\n    \"G16\",\n    \"G26\"\n  ],\n  \"A8\": [\n    \"G2\",\n    \"G8\",\n    \"G20\",\n    \"G24\",\n    \"G43\",\n    \"G44\"\n  ],\n  \"A9\": [\n    \"G5\",\n    \"G14\",\n    \"G28\"\n  ],\n  \"A10\": [\n    \"G5\",\n    \"G9\",\n    \"G10\",\n    \"G12\",\n    \"G15\",\n    \"G33\",\n    \"G36\",\n    \"G45\"\n  ],\n  \"A11\": [\n    \"G7\",\n    \"G9\",\n    \"G11\",\n    \"G14\",\n    \"G18\",\n    \"G24\",\n    \"G29\",\n    \"G36\",\n    \"G40\",\n    \"G53\"\n  ],\n  \"A12\": [\n    \"G4\",\n    \"G11\",\n    \"G16\",\n    \"G29\",\n    \"G32\",\n    \"G38\",\n    \"G49\"\n  ],\n  \"A13\": [\n    \"G4\",\n    \"G13\",\n    \"G21\",\n    \"G37\",\n    \"G39\"\n  ],\n  \"A14\": [\n    \"G1\",\n    \"G3\",\n    \"G7\",\n    \"G11\",\n    \"G17\",\n    \"G18\",\n    \"G19\",\n    \"G21\",\n    \"G24\",\n    \"G34\",\n    \"G47\",\n    \"G50\"\n  ],\n  \"A15\": [\n    \"G23\",\n    \"G36\",\n    \"G46\"\n  ],\n  \"A16\": [\n    \"G5\",\n    \"G12\",\n    \"G15\",\n    \"G16\",\n    \"G26\",\n    \"G28\",\n    \"G33\",\n    \"G38\",\n    \"G49\"\n  ],\n  \"A17\": [\n    \"G2\",\n    \"G6\",\n    \"G7\",\n    \"G11\",\n    \"G13\",\n    \"G21\",\n    \"G22\",\n    \"G23\",\n    \"G25\",\n    \"G35\",\n    \"G41\",\n    \"G42\"\n  ],\n  \"A18\": [\n    \"G8\",\n    \"G9\",\n    \"G12\",\n    \"G13\",\n    \"G16\",\n    \"G19\",\n    \"G20\",\n    \"G25\",\n    \"G32\",\n    \"G51\"\n  ],\n  \"A19\": [\n    \"G13\",\n    \"G17\",\n    \"G30\",\n    \"G39\",\n    \"G44\",\n    \"G47\"\n  ],\n  \"A20\": [\n    \"G1\",\n    \"G2\",\n    \"G7\",\n    \"G24\",\n    \"G40\",\n    \"G46\",\n    \"G52\"\n  ],\n  \"A21\": [\n    \"G2\",\n    \"G6\",\n    \"G10\",\n    \"G35\",\n    \"G39\",\n    \"G41\"\n  ],\n  \"A22\": [\n    \"G3\",\n    \"G13\",\n    \"G18\",\n    \"G32\",\n    \"G43\"\n  ],\n  \"A23\": [\n    \"G2\",\n    \"G6\",\n    \"G13\",\n    \"G21\",\n    \"G23\",\n    \"G30\",\n    \"G35\",\n    \"G41\"\n  ],\n  \"A24\": [\n    \"G3\",\n    \"G6\",\n    \"G10\",\n    \"G12\",\n    \"G16\",\n    \"G17\",\n    \"G22\",\n    \"G27\",\n    \"G35\",\n    \"G48\"\n  ],\n  \"A25\": [\n    \"G21\",\n    \"G23\",\n    \"G25\",\n    \"G35\",\n    \"G41\",\n    \"G42\",\n    \"G48\"\n  ],\n  \"A26\": [\n    \"G5\",\n    \"G12\",\n    \"G14\",\n    \"G26\",\n    \"G27\",\n    \"G37\"\n  ],\n  \"A27\": [],\n  \"A28\": [],\n  \"A29\": []\n};\n\nexport const KEYWORD_CONNECTIONS = {\n  \"G1\": [\n    \"A6\",\n    \"A14\",\n    \"A20\"\n  ],\n  \"G2\": [\n    \"A2\",\n    \"A7\",\n    \"A17\",\n    \"A20\",\n    \"A21\",\n    \"A23\"\n  ],\n  \"G3\": [\n    \"A2\",\n    \"A14\",\n    \"A22\",\n    \"A24\"\n  ],\n  \"G4\": [\n    \"A4\",\n    \"A12\",\n    \"A13\"\n  ],\n  \"G5\": [\n    \"A1\",\n    \"A7\",\n    \"A9\",\n    \"A10\",\n    \"A16\",\n    \"A26\"\n  ],\n  \"G6\": [\n    \"A6\",\n    \"A17\",\n    \"A21\",\n    \"A23\",\n    \"A24\"\n  ],\n  \"G7\": [\n    \"A6\",\n    \"A11\",\n    \"A14\",\n    \"A17\",\n    \"A20\"\n  ],\n  \"G8\": [\n    \"A1\",\n    \"A5\",\n    \"A8\",\n    \"A18\"\n  ],\n  \"G9\": [\n    \"A3\",\n    \"A10\",\n    \"A11\",\n    \"A18\"\n  ],\n  \"G10\": [\n    \"A7\",\n    \"A10\",\n    \"A21\",\n    \"A24\"\n  ],\n  \"G11\": [\n    \"A3\",\n    \"A4\",\n    \"A11\",\n    \"A12\",\n    \"A14\",\n    \"A17\"\n  ],\n  \"G12\": [\n    \"A10\",\n    \"A16\",\n    \"A18\",\n    \"A24\",\n    \"A26\"\n  ],\n  \"G13\": [\n    \"A13\",\n    \"A17\",\n    \"A18\",\n    \"A19\",\n    \"A22\",\n    \"A23\"\n  ],\n  \"G14\": [\n    \"A5\",\n    \"A6\",\n    \"A7\",\n    \"A9\",\n    \"A11\",\n    \"A14\",\n    \"A26\"\n  ],\n  \"G15\": [\n    \"A1\",\n    \"A4\",\n    \"A5\",\n    \"A10\",\n    \"A16\"\n  ],\n  \"G16\": [\n    \"A3\",\n    \"A4\",\n    \"A7\",\n    \"A12\",\n    \"A16\",\n    \"A18\",\n    \"A24\"\n  ],\n  \"G17\": [\n    \"A4\",\n    \"A14\",\n    \"A19\",\n    \"A24\"\n  ],\n  \"G18\": [\n    \"A3\",\n    \"A11\",\n    \"A14\",\n    \"A22\"\n  ],\n  \"G19\": [\n    \"A4\",\n    \"A6\",\n    \"A14\",\n    \"A18\"\n  ],\n  \"G20\": [\n    \"A1\",\n    \"A3\",\n    \"A8\",\n    \"A18\"\n  ],\n  \"G21\": [\n    \"A6\",\n    \"A13\",\n    \"A14\",\n    \"A17\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G22\": [\n    \"A5\",\n    \"A6\",\n    \"A17\",\n    \"A24\"\n  ],\n  \"G23\": [\n    \"A2\",\n    \"A15\",\n    \"A17\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G24\": [\n    \"A5\",\n    \"A6\",\n    \"A8\",\n    \"A11\",\n    \"A14\",\n    \"A20\"\n  ],\n  \"G25\": [\n    \"A6\",\n    \"A17\",\n    \"A18\",\n    \"A25\"\n  ],\n  \"G26\": [\n    \"A7\",\n    \"A16\",\n    \"A26\"\n  ],\n  \"G27\": [\n    \"A6\",\n    \"A24\",\n    \"A26\"\n  ],\n  \"G28\": [\n    \"A1\",\n    \"A9\",\n    \"A16\"\n  ],\n  \"G29\": [\n    \"A4\",\n    \"A11\",\n    \"A12\"\n  ],\n  \"G30\": [\n    \"A19\",\n    \"A23\",\n    \"A4\"\n  ],\n  \"G31\": [\n    \"A1\"\n  ],\n  \"G32\": [\n    \"A12\",\n    \"A18\",\n    \"A22\"\n  ],\n  \"G33\": [\n    \"A1\",\n    \"A10\",\n    \"A16\"\n  ],\n  \"G34\": [\n    \"A5\",\n    \"A6\",\n    \"A14\"\n  ],\n  \"G35\": [\n    \"A6\",\n    \"A17\",\n    \"A21\",\n    \"A23\",\n    \"A24\",\n    \"A25\"\n  ],\n  \"G36\": [\n    \"A10\",\n    \"A11\",\n    \"A15\"\n  ],\n  \"G37\": [\n    \"A2\",\n    \"A13\",\n    \"A26\"\n  ],\n  \"G38\": [\n    \"A4\",\n    \"A12\",\n    \"A16\"\n  ],\n  \"G39\": [\n    \"A13\",\n    \"A19\",\n    \"A21\"\n  ],\n  \"G40\": [\n    \"A3\",\n    \"A11\",\n    \"A20\"\n  ],\n  \"G41\": [\n    \"A17\",\n    \"A21\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G42\": [\n    \"A17\",\n    \"A25\"\n  ],\n  \"G43\": [\n    \"A8\",\n    \"A22\"\n  ],\n  \"G44\": [\n    \"A8\",\n    \"A19\"\n  ],\n  \"G45\": [\n    \"A1\",\n    \"A10\"\n  ],\n  \"G46\": [\n    \"A15\",\n    \"A20\"\n  ],\n  \"G47\": [\n    \"A14\",\n    \"A19\"\n  ],\n  \"G48\": [\n    \"A24\",\n    \"A25\"\n  ],\n  \"G49\": [\n    \"A12\",\n    \"A16\"\n  ],\n  \"G50\": [\n    \"A6\",\n    \"A14\"\n  ],\n  \"G51\": [\n    \"A1\",\n    \"A5\",\n    \"A18\"\n  ],\n  \"G52\": [\n    \"A6\",\n    \"A20\"\n  ],\n  \"G53\": [\n    \"A4\",\n    \"A11\"\n  ],\n  \"G54\": [\n    \"A1\",\n    \"A5\"\n  ]\n};\n\nexport function getConnectedNodes(nodeId) {\n  if (!nodeId) return [];\n  if (ARTICLE_CONNECTIONS[nodeId]) {\n    return ARTICLE_CONNECTIONS[nodeId];\n  }\n  if (KEYWORD_CONNECTIONS[nodeId]) {\n    return KEYWORD_CONNECTIONS[nodeId];\n  }\n  return [];\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAO,IAAM,sBAAsB;IACjC,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO,EAAE;IACT,KAAO,EAAE;IACT,KAAO,EAAE;AACX;AAEO,IAAM,sBAAsB;IACjC,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;AACH;AAEO,SAAS,kBAAkB,MAAM;IACtC,IAAI,CAAC,QAAQ,OAAO,EAAE;IACtB,IAAI,mBAAmB,CAAC,OAAO,EAAE;QAC/B,OAAO,mBAAmB,CAAC,OAAO;IACpC;IACA,IAAI,mBAAmB,CAAC,OAAO,EAAE;QAC/B,OAAO,mBAAmB,CAAC,OAAO;IACpC;IACA,OAAO,EAAE;AACX"}},
    {"offset": {"line": 769, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/radialPosition.js"],"sourcesContent":["const GOLDEN_ANGLE = Math.PI * (3 - Math.sqrt(5));\nconst OUTER_RADIUS_BASE = 22;\nconst OUTER_RADIUS_VARIATION = 6;\nconst INNER_RADIUS_BASE = 12;\nconst INNER_RADIUS_VARIATION = 3;\n\nfunction sphericalPosition(localIndex, localTotal, radius, useEvenDistribution = false) {\n  if (localTotal <= 1) {\n    return [0, 0, 0];\n  }\n\n  if (useEvenDistribution) {\n    const yRaw = 1 - (localIndex / (localTotal - 1)) * 2;\n    const y = Math.max(-0.9, Math.min(0.9, yRaw));\n    const r = Math.sqrt(Math.max(0, 1 - y * y)) * radius;\n    const theta = GOLDEN_ANGLE * localIndex;\n    const x = Math.cos(theta) * r;\n    const z = Math.sin(theta) * r;\n    return [x, y * radius, z];\n  } else {\n    const yRaw = 1 - (localIndex / (localTotal - 1)) * 2;\n    const y = Math.max(-0.85, Math.min(0.85, yRaw));\n    const r = Math.sqrt(Math.max(0, 1 - y * y)) * radius;\n    const theta = GOLDEN_ANGLE * localIndex;\n    const x = Math.cos(theta) * r;\n    const z = Math.sin(theta) * r;\n    return [x, y * radius * 0.8, z];\n  }\n}\n\nfunction getVariedRadius(index, baseRadius, variation) {\n  const variationFactor = Math.sin(index * 0.7) * 0.5 + Math.cos(index * 1.3) * 0.3;\n  const variedRadius = baseRadius + (variationFactor * variation);\n  return variedRadius;\n}\n\nexport function getRadialPosition(index, total, radius = 15, articlesCount = null, glossaryCount = null) {\n  if (articlesCount !== null && glossaryCount !== null && total === articlesCount + glossaryCount) {\n    if (index < articlesCount) {\n      const variedRadius = getVariedRadius(\n        index, \n        OUTER_RADIUS_BASE, \n        OUTER_RADIUS_VARIATION\n      );\n      return sphericalPosition(index, articlesCount, variedRadius, false);\n    }\n    const keywordIndex = index - articlesCount;\n    const variedRadius = getVariedRadius(\n      keywordIndex,\n      INNER_RADIUS_BASE,\n      INNER_RADIUS_VARIATION\n    );\n    return sphericalPosition(\n      keywordIndex,\n      glossaryCount,\n      variedRadius,\n      true\n    );\n  }\n\n  return sphericalPosition(index, total, radius);\n}\n\nexport function getCircularPosition(index, total, radius = 8, height = 0) {\n  const angle = (index / total) * Math.PI * 2;\n  const x = Math.cos(angle) * radius;\n  const z = Math.sin(angle) * radius;\n  return [x, height, z];\n}\n\n"],"names":[],"mappings":";;;;;;;;AAAA,IAAM,eAAe,KAAK,EAAE,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE;AAChD,IAAM,oBAAoB;AAC1B,IAAM,yBAAyB;AAC/B,IAAM,oBAAoB;AAC1B,IAAM,yBAAyB;AAE/B,SAAS,kBAAkB,UAAU,EAAE,UAAU,EAAE,MAAM;QAAE,sBAAA,iEAAsB;IAC/E,IAAI,cAAc,GAAG;QACnB,OAAO;YAAC;YAAG;YAAG;SAAE;IAClB;IAEA,IAAI,qBAAqB;QACvB,IAAM,OAAO,IAAI,AAAC,aAAa,CAAC,aAAa,CAAC,IAAK;QACnD,IAAM,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;QACvC,IAAM,IAAI,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,IAAI,MAAM;QAC9C,IAAM,QAAQ,eAAe;QAC7B,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,OAAO;YAAC;YAAG,IAAI;YAAQ;SAAE;IAC3B,OAAO;QACL,IAAM,QAAO,IAAI,AAAC,aAAa,CAAC,aAAa,CAAC,IAAK;QACnD,IAAM,KAAI,KAAK,GAAG,CAAC,CAAC,MAAM,KAAK,GAAG,CAAC,MAAM;QACzC,IAAM,KAAI,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,KAAI,OAAM;QAC9C,IAAM,SAAQ,eAAe;QAC7B,IAAM,KAAI,KAAK,GAAG,CAAC,UAAS;QAC5B,IAAM,KAAI,KAAK,GAAG,CAAC,UAAS;QAC5B,OAAO;YAAC;YAAG,KAAI,SAAS;YAAK;SAAE;IACjC;AACF;AAEA,SAAS,gBAAgB,KAAK,EAAE,UAAU,EAAE,SAAS;IACnD,IAAM,kBAAkB,KAAK,GAAG,CAAC,QAAQ,OAAO,MAAM,KAAK,GAAG,CAAC,QAAQ,OAAO;IAC9E,IAAM,eAAe,aAAc,kBAAkB;IACrD,OAAO;AACT;AAEO,SAAS,kBAAkB,KAAK,EAAE,KAAK;QAAE,SAAA,iEAAS,IAAI,gBAAA,iEAAgB,MAAM,gBAAA,iEAAgB;IACjG,IAAI,kBAAkB,QAAQ,kBAAkB,QAAQ,UAAU,gBAAgB,eAAe;QAC/F,IAAI,QAAQ,eAAe;YACzB,IAAM,eAAe,gBACnB,OACA,mBACA;YAEF,OAAO,kBAAkB,OAAO,eAAe,cAAc;QAC/D;QACA,IAAM,eAAe,QAAQ;QAC7B,IAAM,gBAAe,gBACnB,cACA,mBACA;QAEF,OAAO,kBACL,cACA,eACA,eACA;IAEJ;IAEA,OAAO,kBAAkB,OAAO,OAAO;AACzC;AAEO,SAAS,oBAAoB,KAAK,EAAE,KAAK;QAAE,SAAA,iEAAS,GAAG,SAAA,iEAAS;IACrE,IAAM,QAAQ,AAAC,QAAQ,QAAS,KAAK,EAAE,GAAG;IAC1C,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;IAC5B,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;IAC5B,OAAO;QAAC;QAAG;QAAQ;KAAE;AACvB"}},
    {"offset": {"line": 853, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/selectionStore.js"],"sourcesContent":["export {\n  selectedNodeStore,\n  highlightedNodesStore,\n  secondaryHighlightedArticlesStore,\n  elementOpacityStore,\n  connectionLinesVisibilityStore\n} from './appStores';\n\n"],"names":[],"mappings":";;AAAA"}},
    {"offset": {"line": 865, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/connectionControler.jsx"],"sourcesContent":["import { CubicBezierLine } from \"@react-three/drei\";\nimport React, { useMemo, useEffect, useState, useRef } from \"react\";\nimport { useStore, getStore } from \"usestore-react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\n\nimport { getConnectedNodes, ARTICLE_CONNECTIONS, KEYWORD_CONNECTIONS } from \"./utils/nodeConnections\";\nimport { getRadialPosition } from \"./utils/radialPosition\";\nimport \"./utils/selectionStore\";\n\nfunction getRelatedArticles(articleId) {\n  if (!articleId || !articleId.startsWith('A')) return [];\n  \n  const articleKeywords = ARTICLE_CONNECTIONS[articleId] || [];\n  if (articleKeywords.length === 0) return [];\n  \n  const relatedArticles = new Set();\n  \n  articleKeywords.forEach(keywordId => {\n    const articlesWithSameKeyword = KEYWORD_CONNECTIONS[keywordId] || [];\n    articlesWithSameKeyword.forEach(relatedArticleId => {\n      if (relatedArticleId !== articleId) {\n        relatedArticles.add(relatedArticleId);\n      }\n    });\n  });\n  \n  return Array.from(relatedArticles);\n}\n\nfunction getSecondaryConnectionsForKeyword(keywordId) {\n  if (!keywordId || !keywordId.startsWith('G')) return [];\n  \n  const connectedArticles = KEYWORD_CONNECTIONS[keywordId] || [];\n  if (connectedArticles.length === 0) return [];\n  \n  const secondaryConnections = [];\n  \n  connectedArticles.forEach(articleId => {\n    const articleKeywords = ARTICLE_CONNECTIONS[articleId] || [];\n    articleKeywords.forEach(articleKeywordId => {\n      if (articleKeywordId !== keywordId) {\n        secondaryConnections.push({\n          from: articleId,\n          to: articleKeywordId\n        });\n      }\n    });\n  });\n  \n  return secondaryConnections;\n}\n\nconst ARTICLE_IDS = Array.from({ length: 29 }, (_, index) => `A${index + 1}`);\nconst KEYWORD_IDS = Array.from({ length: 54 }, (_, index) => `G${index + 1}`);\nconst TOTAL_NODES = ARTICLE_IDS.length + KEYWORD_IDS.length;\nconst BASE_RADIUS = 15;\n\nconst buildPositions = () => {\n  const positions = {};\n\n  ARTICLE_IDS.forEach((id, index) => {\n    positions[id] = getRadialPosition(index, TOTAL_NODES, BASE_RADIUS);\n  });\n\n  KEYWORD_IDS.forEach((id, index) => {\n    positions[id] = getRadialPosition(\n      ARTICLE_IDS.length + index,\n      TOTAL_NODES,\n      BASE_RADIUS\n    );\n  });\n\n  return positions;\n};\n\nfunction AnimatedConnectionLine({ \n  start, \n  end, \n  v0,\n  v1,\n  index, \n  totalConnections,\n  color = \"#e9ff00\",\n  shouldHide = false\n}) {\n  const [opacity, setOpacity] = useState(0);\n  const [lineWidth, setLineWidth] = useState(0.5);\n  const revealStartTime = useRef(null);\n  const animationComplete = useRef(false);\n  const hasAnimatedRef = useRef(false);\n  const lineKeyRef = useRef(`${start[0]}-${start[1]}-${end[0]}-${end[1]}-${v0?.[0]}-${v1?.[0]}`);\n\n  useEffect(() => {\n    const newKey = `${start[0].toFixed(1)}-${start[1].toFixed(1)}-${end[0].toFixed(1)}-${end[1].toFixed(1)}-${v0?.[0]?.toFixed(1)}-${v1?.[0]?.toFixed(1)}`;\n    if (newKey !== lineKeyRef.current) {\n      setOpacity(0);\n      lineKeyRef.current = newKey;\n      setTimeout(() => {\n        revealStartTime.current = Date.now();\n        hasAnimatedRef.current = false;\n      }, 200);\n    }\n  }, [start, end, v0, v1]);\n\n  useEffect(() => {\n    if (shouldHide) {\n      setOpacity(0);\n      hasAnimatedRef.current = false;\n      return;\n    }\n    \n    if (!hasAnimatedRef.current || opacity === 0) {\n      revealStartTime.current = Date.now();\n      const delay = index * 60;\n      \n      const timer = setTimeout(() => {\n        const startTime = Date.now();\n        const duration = 500;\n        \n        const animate = () => {\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n          \n          const eased = 1 - Math.pow(1 - progress, 3);\n          setOpacity(eased);\n          setLineWidth(0.5 + eased * 0.5);\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            animationComplete.current = true;\n            hasAnimatedRef.current = true;\n          }\n        };\n        \n        animate();\n      }, delay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [index, shouldHide]);\n\n  const isValidControlPoint = (cp) => {\n    return cp && Array.isArray(cp) && cp.length === 3 && \n           cp.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val));\n  };\n  \n  const isValidPoint = (p) => {\n    return p && Array.isArray(p) && p.length === 3 && \n           p.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val));\n  };\n  \n  if (!isValidPoint(start) || !isValidPoint(end) || !isValidControlPoint(v0) || !isValidControlPoint(v1)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn('[AnimatedConnectionLine] Invalid points:', { start, end, v0, v1 });\n    }\n    return null;\n  }\n  \n  if (opacity === 0) return null;\n\n  return (\n    <group renderOrder={100} frustumCulled={false}>\n      <CubicBezierLine\n        start={start}\n        end={end}\n        midA={v0} // First control point (goes down from article)\n        midB={v1} // Second control point (curves to keyword from down part)\n        color={color}\n        lineWidth={lineWidth}\n        opacity={opacity}\n        transparent\n        depthWrite={false}\n        depthTest={false}\n      />\n    </group>\n  );\n}\n\nexport function ConnectionController({ processedData }) {\n  const [selectedNode] = useStore(\"selectedNodeStore\", null);\n  const [linesVisible] = useStore(\"connectionLinesVisibilityStore\", true);\n  \n  const getPositions = () => {\n    if (processedData && processedData.nodeMap) {\n      const posMap = {};\n      processedData.nodeMap.forEach((node, id) => {\n        posMap[id] = node.position || [0, 0, 0];\n      });\n      return posMap;\n    }\n    return buildPositions();\n  };\n\n  useEffect(() => {\n    const highlightedStore = getStore('highlightedNodesStore');\n    const secondaryHighlightedStore = getStore('secondaryHighlightedArticlesStore');\n    const highlighted = new Set();\n    const secondaryHighlighted = new Set();\n    \n    if (selectedNode?.id) {\n      highlighted.add(selectedNode.id);\n      const connected = getConnectedNodes(selectedNode.id);\n      connected.forEach(nodeId => {\n        if (nodeId) {\n          highlighted.add(nodeId);\n        }\n      });\n      \n      if (selectedNode.id.startsWith('A')) {\n        const relatedArticles = getRelatedArticles(selectedNode.id);\n        relatedArticles.forEach(articleId => {\n          secondaryHighlighted.add(articleId);\n        });\n      }\n    }\n    \n    highlightedStore.setState(Array.from(highlighted));\n    secondaryHighlightedStore.setState(Array.from(secondaryHighlighted));\n  }, [selectedNode]);\n\n  const lastCheckRef = useRef(0);\n  const lastPositionsRef = useRef({});\n  const [updateTrigger, setUpdateTrigger] = useState(0);\n  \n  useFrame(() => {\n    const now = Date.now();\n    if (now - lastCheckRef.current < 33) return;\n    lastCheckRef.current = now;\n    \n    if (!processedData || !processedData.nodeMap || !selectedNode?.id) return;\n    \n    const currentPositions = getPositions();\n    const connectedIds = getConnectedNodes(selectedNode.id);\n    const allRelevantIds = [selectedNode.id, ...connectedIds];\n    \n    let hasChanges = false;\n    allRelevantIds.forEach(nodeId => {\n      const currentPos = currentPositions[nodeId];\n      if (!currentPos) return;\n      \n      const lastPos = lastPositionsRef.current[nodeId];\n      if (!lastPos) {\n        hasChanges = true;\n        lastPositionsRef.current[nodeId] = [...currentPos];\n      } else {\n        const threshold = 0.05;\n        const changed = \n          Math.abs(currentPos[0] - lastPos[0]) > threshold ||\n          Math.abs(currentPos[1] - lastPos[1]) > threshold ||\n          Math.abs(currentPos[2] - lastPos[2]) > threshold;\n        \n        if (changed) {\n          hasChanges = true;\n          lastPositionsRef.current[nodeId] = [...currentPos];\n        }\n      }\n    });\n    \n    if (hasChanges) {\n      setUpdateTrigger(prev => prev + 1);\n    }\n  });\n\n  const tempVec1 = useRef(new THREE.Vector3());\n  const tempVec2 = useRef(new THREE.Vector3());\n  const tempVec3 = useRef(new THREE.Vector3());\n  const tempVec4 = useRef(new THREE.Vector3());\n  const worldUpVec = useRef(new THREE.Vector3(0, 1, 0));\n  const rightVec = useRef(new THREE.Vector3(1, 0, 0));\n  \n  const generateControlPoints = (start, end, index, isArticleToKeyword, isKeywordSource = false) => {\n    if (!start || !end || !Array.isArray(start) || !Array.isArray(end) || \n        start.length !== 3 || end.length !== 3 ||\n        start.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n        end.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      const mid = [\n        ((start?.[0] || 0) + (end?.[0] || 0)) / 2,\n        ((start?.[1] || 0) + (end?.[1] || 0)) / 2,\n        ((start?.[2] || 0) + (end?.[2] || 0)) / 2,\n      ];\n      return { v0: mid, v1: mid };\n    }\n    \n    const dx = end[0] - start[0];\n    const dy = end[1] - start[1];\n    const dz = end[2] - start[2];\n    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n    \n    if (distance < 0.001 || !isFinite(distance)) {\n      const mid = [\n        (start[0] + end[0]) / 2,\n        (start[1] + end[1]) / 2,\n        (start[2] + end[2]) / 2,\n      ];\n      return { v0: mid, v1: mid };\n    }\n    \n    const direction = tempVec1.current.set(dx, dy, dz);\n    \n    if (direction.length() < 0.001 || !isFinite(direction.length())) {\n      direction.set(1, 0, 0);\n    } else {\n      direction.normalize();\n    }\n    \n    const worldUp = worldUpVec.current;\n    let perp = tempVec2.current.crossVectors(worldUp, direction);\n    \n    if (perp.length() < 0.001) {\n      perp.crossVectors(rightVec.current, direction);\n    }\n    perp.normalize();\n    \n    const perp2 = tempVec3.current.crossVectors(direction, perp).normalize();\n    \n    const angleVariation = (index * 30) % 360;\n    const angle = (angleVariation * Math.PI) / 180;\n    const cosAngle = Math.cos(angle);\n    const sinAngle = Math.sin(angle);\n    const horizontalOffset = distance * 0.08 * cosAngle;\n    const horizontalOffset2 = distance * 0.08 * sinAngle;\n    \n    const straightDownDistance = isKeywordSource ? 12.0 : 8.0;\n    \n    const v0 = tempVec4.current.set(\n      start[0] - worldUp.x * straightDownDistance + perp.x * horizontalOffset * 0.1 + perp2.x * horizontalOffset2 * 0.1,\n      start[1] - worldUp.y * straightDownDistance,\n      start[2] - worldUp.z * straightDownDistance + perp.z * horizontalOffset * 0.1 + perp2.z * horizontalOffset2 * 0.1\n    );\n    \n    const upOffset2 = distance * 0.70;\n    const verticalOffset2 = isKeywordSource ? -distance * 0.15 : -distance * 0.10;\n    \n    const v1 = tempVec1.current.set(\n      start[0] + direction.x * upOffset2 + perp.x * horizontalOffset * 0.2 + perp2.x * horizontalOffset2 * 0.2,\n      start[1] + direction.y * upOffset2 + verticalOffset2 + perp.y * horizontalOffset * 0.2 + perp2.y * horizontalOffset2 * 0.2,\n      start[2] + direction.z * upOffset2 + perp.z * horizontalOffset * 0.2 + perp2.z * horizontalOffset2 * 0.2\n    );\n    \n    const sanitize = (val) => (typeof val === 'number' && isFinite(val) && !isNaN(val)) ? val : 0;\n    const cp0 = [sanitize(v0.x), sanitize(v0.y), sanitize(v0.z)];\n    const cp1 = [sanitize(v1.x), sanitize(v1.y), sanitize(v1.z)];\n    \n    return {\n      v0: cp0,\n      v1: cp1\n    };\n  };\n  const centerVec = useRef(new THREE.Vector3(0, 0, 0));\n  const worldUpCross = useRef(new THREE.Vector3(0, 1, 0));\n  const tempNodeVec = useRef(new THREE.Vector3());\n  const tempDirToCenter = useRef(new THREE.Vector3());\n  const tempRight = useRef(new THREE.Vector3());\n  const tempUp = useRef(new THREE.Vector3());\n  const tempResult = useRef(new THREE.Vector3());\n  const crossPositionCache = useRef(new Map());\n  \n  const getCrossPosition = (nodeId, nodePosition) => {\n    const cacheKey = `${nodeId}-${nodePosition[0]}-${nodePosition[1]}-${nodePosition[2]}`;\n    const cached = crossPositionCache.current.get(cacheKey);\n    if (cached) return cached;\n    \n    const center = centerVec.current;\n    const nodeVec = tempNodeVec.current.set(nodePosition[0], nodePosition[1], nodePosition[2]);\n    const directionToCenter = tempDirToCenter.current.subVectors(center, nodeVec).normalize();\n    \n    const worldUp = worldUpCross.current;\n    let right = tempRight.current.crossVectors(worldUp, directionToCenter);\n    if (right.length() < 0.001) {\n      right.set(1, 0, 0);\n    }\n    right.normalize();\n    \n    let up = tempUp.current.crossVectors(directionToCenter, right).normalize();\n    \n    if (Math.abs(directionToCenter.dot(worldUp)) > 0.99) {\n      up.set(1, 0, 0);\n      right.set(0, 0, 1);\n    }\n    \n    const isArticle = nodeId && nodeId.startsWith('A');\n    const result = tempResult.current;\n    \n    if (isArticle) {\n      const imageHeight = 14.4;\n      const borderWidth = 0.12;\n      const totalHeight = imageHeight + (borderWidth * 2);\n      const nodeScale = 0.5;\n      const bottomCenterOffset = -(totalHeight / 2) * nodeScale;\n      result.copy(nodeVec);\n      result.addScaledVector(up, bottomCenterOffset);\n    } else {\n      const keywordOffset = -0.8;\n      result.copy(nodeVec).addScaledVector(up, keywordOffset);\n    }\n    \n    const resultArray = [result.x, result.y, result.z];\n    crossPositionCache.current.set(cacheKey, resultArray);\n    if (crossPositionCache.current.size > 200) {\n      crossPositionCache.current.clear();\n    }\n    return resultArray;\n  };\n\n  const tempStartVec = useRef(new THREE.Vector3());\n  const tempEndVec = useRef(new THREE.Vector3());\n  \n  const createLine = (startPos, endPos, index, totalConnections, color, isArticleToKeyword, startId, endId) => {\n    const isKeywordSource = startId && startId.startsWith('G');\n    if (!startPos || !endPos || !Array.isArray(startPos) || !Array.isArray(endPos) ||\n        startPos.length !== 3 || endPos.length !== 3 ||\n        startPos.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n        endPos.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      return null;\n    }\n    \n    const startPosVec = tempStartVec.current.set(startPos[0], startPos[1], startPos[2]);\n    const endPosVec = tempEndVec.current.set(endPos[0], endPos[1], endPos[2]);\n    const dx = endPosVec.x - startPosVec.x;\n    const dy = endPosVec.y - startPosVec.y;\n    const dz = endPosVec.z - startPosVec.z;\n    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n    \n    if (distance < 0.01 || !isFinite(distance)) {\n      return null;\n    }\n    \n    let controlPoints = generateControlPoints(startPos, endPos, index, isArticleToKeyword, isKeywordSource);\n    \n    if (!controlPoints || !controlPoints.v0 || !controlPoints.v1 || \n        !Array.isArray(controlPoints.v0) || !Array.isArray(controlPoints.v1) ||\n        controlPoints.v0.length !== 3 || controlPoints.v1.length !== 3 ||\n        controlPoints.v0.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n        controlPoints.v1.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      return null;\n    }\n    \n    const key = `${startId}-${endId}-${index}`;\n    \n    return (\n      <AnimatedConnectionLine\n        key={key}\n        start={startPos}\n        end={endPos}\n        v0={controlPoints.v0}\n        v1={controlPoints.v1}\n        index={index}\n        totalConnections={totalConnections}\n        color={color}\n        shouldHide={!linesVisible}\n      />\n    );\n  };\n\n  const lines = useMemo(() => {\n    if (!selectedNode?.id || !linesVisible) {\n      return [];\n    }\n\n    const positions = getPositions();\n    const nodePosition = positions[selectedNode.id];\n    if (!nodePosition || !Array.isArray(nodePosition) || nodePosition.length !== 3) {\n      return [];\n    }\n\n    const startPosition = getCrossPosition(selectedNode.id, nodePosition);\n    \n    if (!startPosition || !Array.isArray(startPosition) || startPosition.length !== 3 ||\n        startPosition.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[ConnectionController] Invalid start position for ${selectedNode.id}:`, startPosition);\n      }\n      return [];\n    }\n\n    const allLines = [];\n    const isArticle = selectedNode.id.startsWith('A');\n\n    const targets = getConnectedNodes(selectedNode.id);\n    const targetsLength = targets ? targets.length : 0;\n    if (targetsLength > 0) {\n      for (let i = 0; i < targetsLength; i++) {\n        const targetId = targets[i];\n        const targetNodePosition = positions[targetId];\n        if (!targetNodePosition) continue;\n\n        const endPosition = getCrossPosition(targetId, targetNodePosition);\n        const isArticleToKeyword = isArticle && targetId.startsWith('G');\n        \n        const line = createLine(\n          startPosition,\n          endPosition,\n          i,\n          targetsLength,\n          \"#e9ff00\",\n          isArticleToKeyword,\n          selectedNode.id,\n          targetId\n        );\n        \n        if (line) allLines.push(line);\n      }\n    }\n\n    if (isArticle) {\n      const relatedArticles = getRelatedArticles(selectedNode.id);\n      const selectedArticleKeywords = ARTICLE_CONNECTIONS[selectedNode.id] || [];\n      const selectedKeywordsSet = new Set(selectedArticleKeywords);\n      \n      let whiteLineIndex = 0;\n      let totalWhiteLines = 0;\n      for (let i = 0; i < relatedArticles.length; i++) {\n        const relatedArticleKeywords = ARTICLE_CONNECTIONS[relatedArticles[i]] || [];\n        totalWhiteLines += relatedArticleKeywords.filter(kw => selectedKeywordsSet.has(kw)).length;\n      }\n      \n      for (let i = 0; i < relatedArticles.length; i++) {\n        const relatedArticleId = relatedArticles[i];\n        const relatedArticlePos = positions[relatedArticleId];\n        if (!relatedArticlePos) continue;\n        \n        const relatedArticleKeywords = ARTICLE_CONNECTIONS[relatedArticleId] || [];\n        const sharedKeywords = relatedArticleKeywords.filter(kw => selectedKeywordsSet.has(kw));\n        \n        for (let j = 0; j < sharedKeywords.length; j++) {\n          const sharedKeywordId = sharedKeywords[j];\n          const keywordPos = positions[sharedKeywordId];\n          if (!keywordPos) continue;\n          \n          const relatedArticleStartPos = getCrossPosition(relatedArticleId, relatedArticlePos);\n          const keywordEndPos = getCrossPosition(sharedKeywordId, keywordPos);\n          \n          const line = createLine(\n            relatedArticleStartPos,\n            keywordEndPos,\n            targetsLength + whiteLineIndex,\n            targetsLength + totalWhiteLines,\n            \"#939393\",\n            true,\n            relatedArticleId,\n            sharedKeywordId\n          );\n          \n          if (line) {\n            allLines.push(line);\n            whiteLineIndex++;\n          }\n        }\n      }\n    }\n    \n    return allLines;\n  }, [selectedNode?.id, updateTrigger, linesVisible]);\n\n  useEffect(() => {\n    if (selectedNode?.id && linesVisible && lines.length === 0) {\n      const timer = setTimeout(() => {\n        setUpdateTrigger(prev => prev + 1);\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n  }, [selectedNode, linesVisible, lines.length]);\n\n  if (!lines.length) {\n    return null;\n  }\n\n  return <group frustumCulled={false}>{lines}</group>;\n}\n\nexport default ConnectionController;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1478, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/ElementOpacityController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { useThree } from '@react-three/fiber';\nimport { getStore } from 'usestore-react';\nimport { getConnectedNodes } from './nodeConnections';\nimport './selectionStore';\n\nexport function ElementOpacityController() {\n  const { camera, gl } = useThree();\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n  \n  const isUserMovingCameraRef = useRef(false);\n  const opacityStoreRef = useRef(null);\n  const animationInProgressRef = useRef(false);\n  \n  useEffect(() => {\n    opacityStoreRef.current = getStore('elementOpacityStore');\n    if (!opacityStoreRef.current) {\n      const { createStore } = require('usestore-react');\n      opacityStoreRef.current = createStore('elementOpacityStore', {});\n    }\n  }, []);\n  \n  useEffect(() => {\n    const handleStart = () => {\n      isUserMovingCameraRef.current = true;\n      animationInProgressRef.current = false;\n    };\n    \n    const handleChange = () => {\n    };\n    \n    const controls = gl.domElement.parentElement?.querySelector('canvas')?.__r3f?.controls;\n    if (controls) {\n      controls.addEventListener('start', handleStart);\n      controls.addEventListener('change', handleChange);\n      \n      return () => {\n        controls.removeEventListener('start', handleStart);\n        controls.removeEventListener('change', handleChange);\n      };\n    }\n    \n    const canvas = gl.domElement;\n    const handleMouseDown = () => {\n      isUserMovingCameraRef.current = true;\n      animationInProgressRef.current = false;\n    };\n    \n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('touchstart', handleMouseDown);\n    \n    return () => {\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('touchstart', handleMouseDown);\n    };\n  }, [gl]);\n  \n  useEffect(() => {\n    if (!opacityStoreRef.current) return;\n    \n    if (!selectedNode?.id || !Array.isArray(highlightedNodes) || highlightedNodes.length === 0) {\n      opacityStoreRef.current.setState({});\n      return;\n    }\n    \n    if (opacityStoreRef.current) {\n        const secondaryHighlightedSet = new Set(Array.isArray(secondaryHighlightedArticles) ? secondaryHighlightedArticles : []);\n        \n        const opacityMap = {};\n        const highlightedSet = new Set(highlightedNodes);\n        const selectedId = selectedNode?.id;\n        \n        const ARTICLE_IDS = Array.from({ length: 29 }, (_, index) => `A${index + 1}`);\n        const KEYWORD_IDS = Array.from({ length: 54 }, (_, index) => `G${index + 1}`);\n        \n        const directlyConnected = selectedId ? new Set(getConnectedNodes(selectedId)) : new Set();\n        directlyConnected.add(selectedId);\n        \n        [...ARTICLE_IDS, ...KEYWORD_IDS].forEach(nodeId => {\n          const isKeyword = nodeId.startsWith('G');\n          \n          if (nodeId === selectedId) {\n            opacityMap[nodeId] = 1.0;\n          } else if (highlightedSet.has(nodeId)) {\n            if (directlyConnected.has(nodeId)) {\n              opacityMap[nodeId] = 1.0;\n            } else {\n              opacityMap[nodeId] = isKeyword ? 0.3 : 0.4;\n            }\n          } else if (secondaryHighlightedSet.has(nodeId)) {\n            opacityMap[nodeId] = isKeyword ? 0.3 : 0.4;\n          } else {\n            opacityMap[nodeId] = isKeyword ? 0.3 : 0.4;\n          }\n        });\n        \n      opacityStoreRef.current.setState(opacityMap);\n    }\n  }, [selectedNode, highlightedNodes, secondaryHighlightedArticles]);\n  \n  useEffect(() => {\n    if (!animationInProgressRef.current) {\n      isUserMovingCameraRef.current = false;\n    }\n  }, [selectedNode]);\n  \n  return null;\n}\n\nexport default ElementOpacityController;\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1645, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/treeComponents/styles.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bottomButtons\": \"styles-module-scss-module__dJBWzG__bottomButtons\",\n  \"bottom_bar_wrapper\": \"styles-module-scss-module__dJBWzG__bottom_bar_wrapper\",\n  \"bottombarbutton\": \"styles-module-scss-module__dJBWzG__bottombarbutton\",\n  \"box_wrapper\": \"styles-module-scss-module__dJBWzG__box_wrapper\",\n  \"button\": \"styles-module-scss-module__dJBWzG__button\",\n  \"button_wrapper\": \"styles-module-scss-module__dJBWzG__button_wrapper\",\n  \"camera_modal\": \"styles-module-scss-module__dJBWzG__camera_modal\",\n  \"camera_modal_1\": \"styles-module-scss-module__dJBWzG__camera_modal_1\",\n  \"center_button\": \"styles-module-scss-module__dJBWzG__center_button\",\n  \"full\": \"styles-module-scss-module__dJBWzG__full\",\n  \"half\": \"styles-module-scss-module__dJBWzG__half\",\n  \"isDesktop\": \"styles-module-scss-module__dJBWzG__isDesktop\",\n  \"isMobile\": \"styles-module-scss-module__dJBWzG__isMobile\",\n  \"left\": \"styles-module-scss-module__dJBWzG__left\",\n  \"left_wrapper\": \"styles-module-scss-module__dJBWzG__left_wrapper\",\n  \"modal\": \"styles-module-scss-module__dJBWzG__modal\",\n  \"optionsbutton\": \"styles-module-scss-module__dJBWzG__optionsbutton\",\n  \"right\": \"styles-module-scss-module__dJBWzG__right\",\n  \"small_button\": \"styles-module-scss-module__dJBWzG__small_button\",\n  \"stoprotationbutton\": \"styles-module-scss-module__dJBWzG__stoprotationbutton\",\n  \"submenu\": \"styles-module-scss-module__dJBWzG__submenu\",\n  \"supplementbutton\": \"styles-module-scss-module__dJBWzG__supplementbutton\",\n  \"title\": \"styles-module-scss-module__dJBWzG__title\",\n  \"topbar_wrapper\": \"styles-module-scss-module__dJBWzG__topbar_wrapper\",\n  \"topbar_wrapper_mobile\": \"styles-module-scss-module__dJBWzG__topbar_wrapper_mobile\",\n  \"visible\": \"styles-module-scss-module__dJBWzG__visible\",\n  \"wrapper\": \"styles-module-scss-module__dJBWzG__wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1677, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/roomModal/style.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"close_button\": \"style-module-scss-module__CB8I9q__close_button\",\n  \"content\": \"style-module-scss-module__CB8I9q__content\",\n  \"modal_wrapper\": \"style-module-scss-module__CB8I9q__modal_wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1686, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/roomModal/index.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport styles from \"./style.module.scss\";\n\nexport default function RoomModal({ close }) {\n  const pathname = usePathname();\n  const [infoData, setInfoData] = React.useState(null);\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    // Load info data from JSON\n    const loadInfoData = async () => {\n      try {\n        const response = await fetch('/data/info.json');\n        if (!response.ok) {\n          throw new Error('Failed to load info data');\n        }\n        const data = await response.json();\n        \n        // Get the route key (normalize pathname)\n        const routeKey = pathname === '/' ? '/' : pathname;\n        const routeInfo = data[routeKey] || data['/living-continuity']; // Fallback to landing page\n        \n        setInfoData(routeInfo);\n      } catch (error) {\n        console.error('Error loading info data:', error);\n        // Fallback content\n        setInfoData({\n          title: \"Welcome\",\n          content: \"To navigate in the digital exhibition, depending on the device you are currently browsing this space on you can use both your fingers or mouse. Zoom in or out, drag or pan to interact with the scene.\"\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadInfoData();\n  }, [pathname]);\n\n  // Helper function to render markdown-style emphasis\n  const renderText = (text) => {\n    if (!text) return null;\n    \n    // Convert *text* to <em>text</em>\n    const parts = text.split(/(\\*[^*]+\\*)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('*') && part.endsWith('*')) {\n        return <em key={index}>{part.slice(1, -1)}</em>;\n      }\n      return <React.Fragment key={index}>{part}</React.Fragment>;\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.modal_wrapper}>\n        <div className={styles.content}>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!infoData) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className={styles.modal_wrapper}>\n        {close && (\n          <div className={styles.close_button} onClick={close}>\n            <svg \n              width=\"24\" \n              height=\"24\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <line \n                x1=\"3\" \n                y1=\"3\" \n                x2=\"21\" \n                y2=\"21\" \n                stroke=\"#000000\" \n                strokeWidth=\"1.5\" \n                strokeLinecap=\"round\"\n              />\n              <line \n                x1=\"21\" \n                y1=\"3\" \n                x2=\"3\" \n                y2=\"21\" \n                stroke=\"#000000\" \n                strokeWidth=\"1.5\" \n                strokeLinecap=\"round\"\n              />\n            </svg>\n          </div>\n        )}\n        <div className={styles.content}>\n          {infoData.content && (\n            typeof infoData.content === 'string' ? (\n              <p>{renderText(infoData.content)}</p>\n            ) : Array.isArray(infoData.content) ? (\n              infoData.content.map((section, index) => (\n                <div key={index}>\n                  {section.text && <p>{renderText(section.text)}</p>}\n                </div>\n              ))\n            ) : null\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;;;;;;;AAJA;;;;AAMe,SAAS,UAAU,KAAS;;QAAT,AAAE,QAAF,MAAE;;IAClC,IAAM,WAAW,IAAA,oJAAW;IAC5B,IAAgC,2LAAA,yKAAc,CAAC,WAAxC,WAAyB,oBAAf,cAAe;IAChC,IAA8B,4LAAA,yKAAc,CAAC,WAAtC,UAAuB,qBAAd,aAAc;IAE9B,0KAAe;+BAAC;YACd,2BAA2B;YAC3B,IAAM;oDAAe;;;gCAEX,UAIA,MAGA,UACA,WAGC;;;;;;;;;;;4CAXU;;gDAAM,MAAM;;;4CAAvB,WAAW;4CACjB,IAAI,CAAC,SAAS,EAAE,EAAE;gDAChB,MAAM,IAAI,MAAM;4CAClB;4CACa;;gDAAM,SAAS,IAAI;;;4CAA1B,OAAO;4CAEb,yCAAyC;4CACnC,WAAW,aAAa,MAAM,MAAM;4CACpC,YAAY,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,qBAAqB,EAAE,2BAA2B;4CAE3F,YAAY;;;;;;4CACL;4CACP,QAAQ,KAAK,CAAC,4BAA4B;4CAC1C,mBAAmB;4CACnB,YAAY;gDACV,OAAO;gDACP,SAAS;4CACX;;;;;;4CAEA,WAAW;;;;;;;;;;;wBAEf;;;;YAEA;QACF;8BAAG;QAAC;KAAS;IAEb,oDAAoD;IACpD,IAAM,aAAa,SAAC;QAClB,IAAI,CAAC,MAAM,OAAO;QAElB,kCAAkC;QAClC,IAAM,QAAQ,KAAK,KAAK,CAAC;QACzB,OAAO,MAAM,GAAG,CAAC,SAAC,MAAM;YACtB,IAAI,KAAK,UAAU,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM;gBAC9C,qBAAO,6LAAC;8BAAgB,KAAK,KAAK,CAAC,GAAG,CAAC;mBAAvB;;;;;YAClB;YACA,qBAAO,6LAAC,yKAAc;0BAAc;eAAR;;;;;QAC9B;IACF;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAW,2JAAM,CAAC,aAAa;sBAClC,cAAA,6LAAC;gBAAI,WAAW,2JAAM,CAAC,OAAO;0BAC5B,cAAA,6LAAC;8BAAE;;;;;;;;;;;;;;;;IAIX;IAEA,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAW,2JAAM,CAAC,aAAa;;gBACjC,uBACC,6LAAC;oBAAI,WAAW,2JAAM,CAAC,YAAY;oBAAE,SAAS;8BAC5C,cAAA,6LAAC;wBACC,OAAM;wBACN,QAAO;wBACP,SAAQ;wBACR,MAAK;wBACL,OAAM;;0CAEN,6LAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,eAAc;;;;;;0CAEhB,6LAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,eAAc;;;;;;;;;;;;;;;;;8BAKtB,6LAAC;oBAAI,WAAW,2JAAM,CAAC,OAAO;8BAC3B,SAAS,OAAO,IAAI,CACnB,OAAO,SAAS,OAAO,KAAK,yBAC1B,6LAAC;kCAAG,WAAW,SAAS,OAAO;;;;;+BAC7B,MAAM,OAAO,CAAC,SAAS,OAAO,IAChC,SAAS,OAAO,CAAC,GAAG,CAAC,SAAC,SAAS;6CAC7B,6LAAC;sCACE,QAAQ,IAAI,kBAAI,6LAAC;0CAAG,WAAW,QAAQ,IAAI;;;;;;2BADpC;;;;;yBAIV,IACN;;;;;;;;;;;;;AAKV;GAhHwB;;QACL,oJAAW;;;KADN"}},
    {"offset": {"line": 1940, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/sceneModal/style.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"camera_modal\": \"style-module-scss-module__ALzo2W__camera_modal\",\n  \"camera_wrapper\": \"style-module-scss-module__ALzo2W__camera_wrapper\",\n  \"item\": \"style-module-scss-module__ALzo2W__item\",\n  \"link\": \"style-module-scss-module__ALzo2W__link\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1950, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/sceneModal/index.jsx"],"sourcesContent":["import * as React from \"react\";\nimport styles from \"./style.module.scss\";\n\nexport default function SceneModal() {\n  return (\n    <>\n      <div className={styles.camera_wrapper}>\n        <div className={`${styles.camera_modal} button`}>\n          <a href=\"https://livingcontinuity.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Digital Exhibition</div>\n          </a>\n          <a href=\"https://glossary.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Glossary</div>\n          </a>\n          <a href=\"https://kitofparts.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Kit of Parts - Blended Home</div>\n          </a>\n\n          <a href=\"#\" className={styles.link}>\n            <div className={styles.item}>Kit of Parts - Blended Park (soon)</div>\n          </a>\n\n          <a href=\"https://supplement.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Supplement</div>\n          </a>\n\n          <a href=\"http://toolkit.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Toolkit</div>\n          </a>\n          \n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;AAEe,SAAS;IACtB,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAW,4JAAM,CAAC,cAAc;sBACnC,cAAA,6LAAC;gBAAI,WAAW,AAAC,GAAsB,OAApB,4JAAM,CAAC,YAAY,EAAC;;kCACrC,6LAAC;wBAAE,MAAK;wBAA+C,WAAW,4JAAM,CAAC,IAAI;kCAC3E,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAE/B,6LAAC;wBAAE,MAAK;wBAAuC,WAAW,4JAAM,CAAC,IAAI;kCACnE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAE/B,6LAAC;wBAAE,MAAK;wBAAyC,WAAW,4JAAM,CAAC,IAAI;kCACrE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,6LAAC;wBAAE,MAAK;wBAAI,WAAW,4JAAM,CAAC,IAAI;kCAChC,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,6LAAC;wBAAE,MAAK;wBAAyC,WAAW,4JAAM,CAAC,IAAI;kCACrE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,6LAAC;wBAAE,MAAK;wBAAqC,WAAW,4JAAM,CAAC,IAAI;kCACjE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAOzC;KA/BwB"}},
    {"offset": {"line": 2088, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/treeComponents/topbar.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport styles from \"./styles.module.scss\";\nimport Link from \"next/link\";\nimport useEffect from \"react\"\nimport RoomModal from \"../roomModal/index\";\nimport Modal from \"react-modal\";\nimport SceneModal from \"../sceneModal\";\nimport './treeComponents.scss';\nexport default function TopBar({ title }) {\n  const [isDisplay, setDisplay] = React.useState(false);\n  React.useEffect(() => {\n   if(title == \"Title Of The Entry\" || title == \"\") {\n     setDisplay(false);\n   } else {\n    setDisplay(true);\n   }\n  }, [title]);\n  const [modalIsOpen, setOpen] = React.useState(false);\n  const [modal2IsOpen, setOpen2] = React.useState(false);\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n  const [sceneOpen, setSceneOpen] = React.useState(false);\n  return (\n    <>\n      <div className=\"isDesktop\">\n        <div className={styles.topbar_wrapper}>\n          <Link href=\"/living-continuity\">\n            <div className={`${styles.button} button`}>living continuity</div>\n          </Link>\n          <div className={`${styles.title} button`}>\n          {!(title == \"Title Of The Entry\" || title == \"\") &&\n            <span>{title}</span>\n          }\n          </div>\n          <div className={`${styles.button} button`}>\n            Living Continuity\n          </div>\n        </div>\n      </div>\n      <div className=\"isMobile\">\n        <div\n          className={`${styles.topbar_wrapper} ${styles.topbar_wrapper_mobile}`}\n        >\n          <div className={styles.wrapper} onClick={() => setSceneOpen(!sceneOpen)} role=\"button\" tabIndex={0} aria-label=\"Toggle scene modal\" onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') setSceneOpen(!sceneOpen); }}>\n            <div\n              className={`${styles.full} ${styles.button} button full_button`}\n            >\n              living continuity\n            </div>\n              <div className={`${sceneOpen ? 'closed' : 'open'}`}>\n                  <SceneModal />\n              </div>\n\n            <div\n              className={`${styles.full} ${styles.button} button full_button`}\n            >\n              Living Continuity\n            </div>\n            <button className={`${styles.half} ${styles.button} button`} onClick={() => {\n                handleOpen();\n              }} aria-label=\"Open info modal\">info</button>\n          </div>\n          <div className={`${styles.title} button`}>\n          {!(title == \"Title Of The Entry\" || title == \"\") &&\n            <span>{title}</span>\n          }\n          </div>\n        </div>\n      </div>\n      <Modal \n        isOpen={modalIsOpen} \n        contentLabel=\"Example Modal\"\n        closeTimeoutMS={150}\n        shouldCloseOnOverlayClick={true}\n      >\n        <RoomModal\n          close={handleOpen}\n        />\n      </Modal>\n    </>\n      //inline css ?\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAEA;AACA;AACA;;;;;AARA;;;;;;;;;AAUe,SAAS,OAAO,KAAS;QAAT,AAAE,QAAF,MAAE;;IAC/B,IAAgC,2LAAA,yKAAc,CAAC,YAAxC,YAAyB,oBAAd,aAAc;IAChC,0KAAe;4BAAC;YACf,IAAG,SAAS,wBAAwB,SAAS,IAAI;gBAC/C,WAAW;YACb,OAAO;gBACN,WAAW;YACZ;QACD;2BAAG;QAAC;KAAM;IACV,IAA+B,4LAAA,yKAAc,CAAC,YAAvC,cAAwB,qBAAX,UAAW;IAC/B,IAAiC,4LAAA,yKAAc,CAAC,YAAzC,eAA0B,qBAAZ,WAAY;IACjC,SAAS;QACP,QAAQ,CAAC;IACX;IACA,IAAkC,4LAAA,yKAAc,CAAC,YAA1C,YAA2B,qBAAhB,eAAgB;IAClC,qBACE;;0BACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAW,iKAAM,CAAC,cAAc;;sCACnC,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC;gCAAI,WAAW,AAAC,GAAgB,OAAd,iKAAM,CAAC,MAAM,EAAC;0CAAU;;;;;;;;;;;sCAE7C,6LAAC;4BAAI,WAAW,AAAC,GAAe,OAAb,iKAAM,CAAC,KAAK,EAAC;sCAC/B,CAAC,CAAC,SAAS,wBAAwB,SAAS,EAAE,mBAC7C,6LAAC;0CAAM;;;;;;;;;;;sCAGT,6LAAC;4BAAI,WAAW,AAAC,GAAgB,OAAd,iKAAM,CAAC,MAAM,EAAC;sCAAU;;;;;;;;;;;;;;;;;0BAK/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,WAAW,AAAC,GAA2B,OAAzB,iKAAM,CAAC,cAAc,EAAC,KAAgC,OAA7B,iKAAM,CAAC,qBAAqB;;sCAEnE,6LAAC;4BAAI,WAAW,iKAAM,CAAC,OAAO;4BAAE,SAAS;uCAAM,aAAa,CAAC;;4BAAY,MAAK;4BAAS,UAAU;4BAAG,cAAW;4BAAqB,WAAW,SAAC;gCAAQ,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK,aAAa,CAAC;4BAAY;;8CACxN,6LAAC;oCACC,WAAW,AAAC,GAAiB,OAAf,iKAAM,CAAC,IAAI,EAAC,KAAiB,OAAd,iKAAM,CAAC,MAAM,EAAC;8CAC5C;;;;;;8CAGC,6LAAC;oCAAI,WAAW,AAAC,GAAgC,OAA9B,YAAY,WAAW;8CACtC,cAAA,6LAAC,gJAAU;;;;;;;;;;8CAGjB,6LAAC;oCACC,WAAW,AAAC,GAAiB,OAAf,iKAAM,CAAC,IAAI,EAAC,KAAiB,OAAd,iKAAM,CAAC,MAAM,EAAC;8CAC5C;;;;;;8CAGD,6LAAC;oCAAO,WAAW,AAAC,GAAiB,OAAf,iKAAM,CAAC,IAAI,EAAC,KAAiB,OAAd,iKAAM,CAAC,MAAM,EAAC;oCAAU,SAAS;wCAClE;oCACF;oCAAG,cAAW;8CAAkB;;;;;;;;;;;;sCAEpC,6LAAC;4BAAI,WAAW,AAAC,GAAe,OAAb,iKAAM,CAAC,KAAK,EAAC;sCAC/B,CAAC,CAAC,SAAS,wBAAwB,SAAS,EAAE,mBAC7C,6LAAC;0CAAM;;;;;;;;;;;;;;;;;;;;;;0BAKb,6LAAC,4JAAK;gBACJ,QAAQ;gBACR,cAAa;gBACb,gBAAgB;gBAChB,2BAA2B;0BAE3B,cAAA,6LAAC,+IAAS;oBACR,OAAO;;;;;;;;;;;;;AAMjB;GA3EwB;KAAA"}},
    {"offset": {"line": 2309, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/livingContinuityButton/index.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport \"../../app/living-continuity/welcomeModal.scss\";\n\nconst LivingContinuityButton = React.memo(({ onClick }) => {\n  return (\n    <div className=\"living_continuity_button\" onClick={onClick}>\n      <div className=\"black_box\">\n        <h1 className=\"main_text\">LIVING CONTINUITY</h1>\n      </div>\n      <span className=\"enter_text\">enter</span>\n    </div>\n  );\n});\n\nLivingContinuityButton.displayName = 'LivingContinuityButton';\n\nexport default LivingContinuityButton;\n\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;;;;;AAKA,IAAM,uCAAyB,qKAAU,MAAC;QAAG,gBAAA;IAC3C,qBACE,6LAAC;QAAI,WAAU;QAA2B,SAAS;;0BACjD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAY;;;;;;;;;;;0BAE5B,6LAAC;gBAAK,WAAU;0BAAa;;;;;;;;;;;;AAGnC;;AAEA,uBAAuB,WAAW,GAAG;uCAEtB"}},
    {"offset": {"line": 2371, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/suppressTextureErrors.js"],"sourcesContent":["export function suppressTextureErrors() {\n  if (typeof window === 'undefined') return;\n\n  const originalError = console.error;\n\n  console.error = (...args) => {\n    const message = args[0];\n    const fullMessage = args.join(' ');\n    \n    if (\n      (typeof message === 'string' && (\n        message.includes('THREE.GLTFLoader') && message.includes('Couldn\\'t load texture') ||\n        message.includes('GLTFLoader') && message.includes('texture')\n      )) ||\n      (typeof fullMessage === 'string' && (\n        fullMessage.includes('THREE.GLTFLoader') && fullMessage.includes('texture') ||\n        fullMessage.includes('GLTFLoader') && fullMessage.includes('texture')\n      ))\n    ) {\n      return;\n    }\n    \n    originalError.apply(console, args);\n  };\n\n  return () => {\n    console.error = originalError;\n  };\n}\n\n"],"names":[],"mappings":";;;;;;AAAO,SAAS;IACd;;IAEA,IAAM,gBAAgB,QAAQ,KAAK;IAEnC,QAAQ,KAAK,GAAG;yCAAI;YAAA;;QAClB,IAAM,UAAU,IAAI,CAAC,EAAE;QACvB,IAAM,cAAc,KAAK,IAAI,CAAC;QAE9B,IACE,AAAC,OAAO,YAAY,YAAY,CAC9B,QAAQ,QAAQ,CAAC,uBAAuB,QAAQ,QAAQ,CAAC,6BACzD,QAAQ,QAAQ,CAAC,iBAAiB,QAAQ,QAAQ,CAAC,UACrD,KACC,OAAO,gBAAgB,YAAY,CAClC,YAAY,QAAQ,CAAC,uBAAuB,YAAY,QAAQ,CAAC,cACjE,YAAY,QAAQ,CAAC,iBAAiB,YAAY,QAAQ,CAAC,UAC7D,GACA;YACA;QACF;QAEA,cAAc,KAAK,CAAC,SAAS;IAC/B;IAEA,OAAO;QACL,QAAQ,KAAK,GAAG;IAClB;AACF"}},
    {"offset": {"line": 2403, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/d3DataManager.js"],"sourcesContent":["import * as d3 from 'd3';\nimport { getRadialPosition } from './radialPosition';\n\nconst BASE_RADIUS = 15;\n\nexport function processNodeData(jsonData) {\n  const allNodes = [];\n  const links = [];\n  const nodeMap = new Map();\n\n  const articlesCount = jsonData.articles?.length || 0;\n  const glossaryCount = jsonData.glossary?.length || 0;\n  const totalNodes = articlesCount + glossaryCount;\n\n  if (jsonData.articles) {\n    jsonData.articles.forEach((article, arrayIndex) => {\n      const position = getRadialPosition(\n        arrayIndex,\n        totalNodes,\n        BASE_RADIUS,\n        articlesCount,\n        glossaryCount\n      );\n      const node = {\n        ...article,\n        type: 'article',\n        position,\n        x: position[0],\n        y: position[1],\n        z: position[2],\n        vx: 0,\n        vy: 0,\n        vz: 0,\n        fx: null,\n        fy: null,\n        fz: null,\n      };\n      allNodes.push(node);\n      nodeMap.set(article.id, node);\n    });\n  }\n\n  if (jsonData.glossary) {\n    jsonData.glossary.forEach((keyword, arrayIndex) => {\n      const globalIndex = articlesCount + arrayIndex;\n      const position = getRadialPosition(\n        globalIndex,\n        totalNodes,\n        BASE_RADIUS,\n        articlesCount,\n        glossaryCount\n      );\n      const node = {\n        ...keyword,\n        type: 'glossary',\n        position,\n        x: position[0],\n        y: position[1],\n        z: position[2],\n        vx: 0,\n        vy: 0,\n        vz: 0,\n        fx: null,\n        fy: null,\n        fz: null,\n      };\n      allNodes.push(node);\n      nodeMap.set(keyword.id, node);\n    });\n  }\n\n  allNodes.forEach((node) => {\n    if (node.connections && node.connections.length > 0) {\n      node.connections.forEach((targetId) => {\n        const target = nodeMap.get(targetId);\n        if (target) {\n          links.push({\n            source: node.id,\n            target: targetId,\n            sourceNode: node,\n            targetNode: target,\n          });\n        }\n      });\n    }\n  });\n\n  return {\n    nodes: allNodes,\n    links,\n    nodeMap,\n  };\n}\n\nexport function createForceSimulation(nodes, links, options = {}) {\n  const {\n    chargeStrength = -300,\n    linkDistance = 50,\n    linkStrength = 0.1,\n    centerStrength = 0.1,\n  } = options;\n\n  const simulation = d3\n    .forceSimulation(nodes)\n    .force(\n      'link',\n      d3\n        .forceLink(links)\n        .id((d) => d.id)\n        .distance(linkDistance)\n        .strength(linkStrength)\n    )\n    .force('charge', d3.forceManyBody().strength(chargeStrength))\n    .force('center', d3.forceCenter(0, 0).strength(centerStrength))\n    .force(\n      'collision',\n      d3.forceCollide().radius((d) => (d.type === 'article' ? 3 : 2))\n    );\n\n  return simulation;\n}\n\nexport function getConnectedNodeIds(nodeId, links) {\n  return links\n    .filter((link) => link.source === nodeId || link.target === nodeId)\n    .map((link) => (link.source === nodeId ? link.target : link.source)  );\n}\n\nexport function getConnectedLinks(nodeId, links) {\n  return links.filter(\n    (link) => link.source === nodeId || link.target === nodeId\n  );\n}\n\n/**\n * Update node positions from simulation\n * @param {Array} nodes - Array of node objects\n */\nexport function updateNodePositions(nodes) {\n  nodes.forEach((node) => {\n    if (node.x !== undefined && node.y !== undefined) {\n      node.position = [node.x, node.y, node.z || 0];\n    }\n  });\n}\n\nexport function transitionNodePosition(node, targetPosition, duration = 1000) {\n  const [targetX, targetY, targetZ] = targetPosition;\n  const startX = node.x || node.position[0];\n  const startY = node.y || node.position[1];\n  const startZ = node.z || node.position[2];\n\n  return d3\n    .transition()\n    .duration(duration)\n    .ease(d3.easeCubicInOut)\n    .tween('position', function () {\n      const interpolateX = d3.interpolateNumber(startX, targetX);\n      const interpolateY = d3.interpolateNumber(startY, targetY);\n      const interpolateZ = d3.interpolateNumber(startZ, targetZ);\n      return function (t) {\n        node.x = interpolateX(t);\n        node.y = interpolateY(t);\n        node.z = interpolateZ(t);\n        node.position = [node.x, node.y, node.z];\n      };\n    });\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2570, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/treeModals/archiveModal.jsx"],"sourcesContent":["import * as React from \"react\";\nimport Link from \"next/link\";\nimport \"./archive.scss\";\nimport { useStore } from \"usestore-react\";\nimport CrossButton from \"../menu/CrossButton\";\nimport { COLOR_BLACK } from \"../_setup/colors\";\n\nconst slugifyTitle = (title) => {\n  return title\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n};\n\nexport default function ArchiveModal({\n  title,\n  author,\n  content,\n  img,\n  authorBio,\n  keywords,\n  connect1,\n  connect2,\n  connect3,\n  connect4,\n  photoCredit,\n  closeModal,\n}) {\n  const [adapt, setAdapt] = useStore(\"adapt\", false);\n  const [imageOrientation, setImageOrientation] = React.useState(null);\n\n  const handleImageLoad = (e) => {\n    const img = e.target;\n    const isLandscape = img.naturalWidth > img.naturalHeight;\n    setImageOrientation(isLandscape ? 'isLandscape' : 'isPortrait');\n  };\n\n  return (\n    <>\n      <div className=\"modal_wrapper\">\n        {closeModal && (\n          <div className=\"close_button\">\n            <CrossButton color={COLOR_BLACK} onClick={closeModal} />\n          </div>\n        )}\n        <div className=\"content\">\n          {img && (\n            <figure className={`image_wrapper ${imageOrientation || ''}`}>\n              <img \n                src={img} \n                alt={title}\n                onLoad={handleImageLoad}\n                onError={(e) => {\n                  e.target.style.display = 'none';\n                  console.warn('Failed to load image:', img);\n                }}\n              />\n              {author && (\n                <figcaption className=\"photo_credit\">\n                  Photo Credit: {photoCredit || author}\n                </figcaption>\n              )}\n            </figure>\n          )}\n          {title && <h2>{title}</h2>}\n          {author && <p className=\"author\"><span>By</span> {author}</p>}\n          {content && (\n            <div\n              className=\"text\"\n              dangerouslySetInnerHTML={{ __html: content }}\n            />\n          )}\n          {authorBio && (\n            <div className=\"section\">\n              <h5 className=\"section_label\">Author Bio:</h5>\n              <div\n                className=\"text-1\"\n                dangerouslySetInnerHTML={{ \n                  __html: authorBio\n                    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n                    .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n                    .replace(/\\n/g, '<br/>')\n                }}\n              />\n            </div>\n          )}\n          {(() => {\n            const hasConnections = connect1 || connect2 || connect3 || connect4;\n            \n            let keywordsToDisplay = [];\n            if (keywords) {\n              if (Array.isArray(keywords)) {\n                keywordsToDisplay = keywords;\n              } else if (typeof keywords === 'string') {\n                keywordsToDisplay = keywords.split(',').map(k => k.trim()).filter(Boolean);\n              }\n            }\n            \n            const hasKeywordsToShow = keywordsToDisplay.length > 0;\n            \n            if (!hasKeywordsToShow && !hasConnections) return null;\n            \n            return (\n              <div className=\"section\">\n                <h5 className=\"section_label\">Keywords:</h5>\n                {hasKeywordsToShow ? (\n                  <div className=\"connections\">\n                    {keywordsToDisplay.map((keyword, index) => {\n                      const keywordText = keyword && typeof keyword === 'object' ? (keyword.text || keyword) : keyword;\n                      let keywordLink = keyword && typeof keyword === 'object' && keyword.link !== undefined \n                        ? keyword.link \n                        : null;\n                      \n                      if (keywordLink && keywordLink.includes('#G')) {\n                        const idMatch = keywordLink.match(/#(G\\d+)/);\n                        if (idMatch) {\n                          const keywordId = idMatch[1];\n                          keywordLink = `/glossary#${slugifyTitle(keywordText)}`;\n                        }\n                      } else if (keywordLink && keywordLink.startsWith('/glossary#')) {\n                        const hashPart = keywordLink.split('#')[1];\n                        if (hashPart && hashPart.match(/^G\\d+$/)) {\n                          keywordLink = `/glossary#${slugifyTitle(keywordText)}`;\n                        }\n                      }\n                      \n                      return (\n                        <span key={index}>\n                          {keywordLink ? (\n                            <Link \n                              href={keywordLink}\n                              className=\"item_link\"\n                              onClick={closeModal}\n                            >\n                              {keywordText}\n                            </Link>\n                          ) : (\n                            <span className=\"item\">\n                              {keywordText}\n                            </span>\n                          )}\n                          {index < keywordsToDisplay.length - 1 && <span className=\"comma\">, </span>}\n                        </span>\n                      );\n                    })}\n                  </div>\n                ) : hasConnections ? (\n                  <div className=\"connections\">\n                    {[connect1, connect2, connect3, connect4].filter(Boolean).map((item, index, array) => (\n                      <span key={index}>\n                        <span className=\"item\">{item}</span>\n                        {index < array.length - 1 && <span className=\"comma\">, </span>}\n                      </span>\n                    ))}\n                  </div>\n                ) : null}\n              </div>\n            );\n          })()}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2877, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/whiteMaterial.js"],"sourcesContent":["import * as THREE from \"three\";\n\nexport function createWhiteMaterial() {\n  return new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 0.9,\n    metalness: 0.1,\n    roughness: 0.8,\n  });\n}\n\nexport function createWhiteWireframeMaterial() {\n  return new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    wireframe: true,\n    transparent: true,\n    opacity: 0.7,\n  });\n}\n\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAEO,SAAS;IACd,OAAO,IAAI,0KAA0B,CAAC;QACpC,OAAO;QACP,aAAa;QACb,SAAS;QACT,WAAW;QACX,WAAW;IACb;AACF;AAEO,SAAS;IACd,OAAO,IAAI,0KAA0B,CAAC;QACpC,OAAO;QACP,WAAW;QACX,aAAa;QACb,SAAS;IACX;AACF"}},
    {"offset": {"line": 2911, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/useConnectionHighlight.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { getConnectedNodes } from './nodeConnections';\nimport './selectionStore';\n\nexport function useConnectionHighlight(nodeId, isActive) {\n  const [, setSelectedNode] = useStore('selectedNodeStore', null);\n  const hasConnections = getConnectedNodes(nodeId).length > 0;\n  const wasActiveRef = useRef(false);\n\n  useEffect(() => {\n    if (!nodeId) {\n      return undefined;\n    }\n\n    if (isActive && !wasActiveRef.current) {\n      setSelectedNode({ id: nodeId, ts: Date.now() });\n    }\n\n    if (!isActive && wasActiveRef.current) {\n      setSelectedNode(prev => (prev?.id === nodeId ? null : prev));\n    }\n\n    wasActiveRef.current = isActive;\n\n    return () => {\n      setSelectedNode(prev => (prev?.id === nodeId ? null : prev));\n    };\n  }, [isActive, nodeId, setSelectedNode]);\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;;;;AAEO,SAAS,uBAAuB,MAAM,EAAE,QAAQ;;IACrD,IAA4B,qLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAAjD,kBAAmB;IAC5B,IAAM,iBAAiB,IAAA,8JAAiB,EAAC,QAAQ,MAAM,GAAG;IAC1D,IAAM,eAAe,IAAA,uKAAM,EAAC;IAE5B,IAAA,0KAAS;4CAAC;YACR,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YAEA,IAAI,YAAY,CAAC,aAAa,OAAO,EAAE;gBACrC,gBAAgB;oBAAE,IAAI;oBAAQ,IAAI,KAAK,GAAG;gBAAG;YAC/C;YAEA,IAAI,CAAC,YAAY,aAAa,OAAO,EAAE;gBACrC;wDAAgB,SAAA;+BAAS,CAAA,iBAAA,2BAAA,KAAM,EAAE,MAAK,SAAS,OAAO;;;YACxD;YAEA,aAAa,OAAO,GAAG;YAEvB;oDAAO;oBACL;4DAAgB,SAAA;mCAAS,CAAA,iBAAA,2BAAA,KAAM,EAAE,MAAK,SAAS,OAAO;;;gBACxD;;QACF;2CAAG;QAAC;QAAU;QAAQ;KAAgB;AACxC;GAxBgB;;QACc,iKAAQ"}},
    {"offset": {"line": 2980, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/useShouldShowTitle.js"],"sourcesContent":["import { useStore } from 'usestore-react';\nimport { useMemo } from 'react';\nimport './selectionStore';\n\nexport function useShouldShowTitle(nodeId) {\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  \n  return useMemo(() => {\n    if (!nodeId || !Array.isArray(highlightedNodes)) {\n      return false;\n    }\n    return highlightedNodes.includes(nodeId);\n  }, [nodeId, highlightedNodes]);\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;AAEO,SAAS,mBAAmB,MAAM;;IACvC,IAA2B,qLAAA,IAAA,iKAAQ,EAAC,yBAAyB,EAAE,OAAxD,mBAAoB;IAE3B,OAAO,IAAA,wKAAO;sCAAC;YACb,IAAI,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,mBAAmB;gBAC/C,OAAO;YACT;YACA,OAAO,iBAAiB,QAAQ,CAAC;QACnC;qCAAG;QAAC;QAAQ;KAAiB;AAC/B;GATgB;;QACa,iKAAQ"}},
    {"offset": {"line": 3022, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/RotatingImage.jsx"],"sourcesContent":["import React, { useRef, useMemo, useState, useEffect } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { Image, Html } from '@react-three/drei';\nimport * as THREE from 'three';\nimport { COLOR_ACCENT } from '../_setup/colors';\nimport './RotatingImage.scss';\nimport '../templates/ArticleNodeTemplate.scss';\n\nexport function RotatingImage({ \n  imageUrl, \n  position, \n  scale = [10.8, 10.8, 1],\n  tiltAmount = 0.15,\n  opacity = 1.0,\n  faceCamera = false,\n  showCross = false,\n  title = \"\",\n  showTitle = false,\n  showReadButton = false,\n  onReadClick = null,\n  highlightState = { isSelected: false, isHighlighted: false, isSecondaryHighlighted: false, hasSelection: false },\n}) {\n  const meshRef = useRef();\n  const imageMeshRef = useRef();\n  const rotatingWrapperRef = useRef();\n  const groupRef = useRef();\n  const [imageError, setImageError] = useState(false);\n  const [currentImageUrl, setCurrentImageUrl] = useState(imageUrl);\n  const [htmlElementsVisible, setHtmlElementsVisible] = useState(true);\n  \n  const isSelected = highlightState?.isSelected;\n  const isHighlighted = highlightState?.isHighlighted;\n  const isSecondaryHighlighted = highlightState?.isSecondaryHighlighted;\n  const hasSelection = highlightState?.hasSelection;\n  const isDimmed = hasSelection && !isSelected && !isHighlighted && !isSecondaryHighlighted;\n  const displayOpacity = isDimmed ? opacity * 0.2 : opacity;\n  const borderColor = isSelected || isHighlighted ? COLOR_ACCENT : (isSecondaryHighlighted ? \"#ffffff\" : \"#ffffff\");\n\n  const center = useMemo(() => new THREE.Vector3(0, 0, 0), []);\n  \n  useEffect(() => {\n    if (!imageUrl) {\n      setImageError(true);\n      return;\n    }\n    \n    const img = new window.Image();\n    img.onload = () => {\n      setImageError(false);\n      setCurrentImageUrl(imageUrl);\n    };\n    img.onerror = (error) => {\n      console.warn(`Failed to load image: ${imageUrl}`, error);\n      if (imageUrl && (imageUrl.startsWith('http://') || imageUrl.startsWith('https://'))) {\n        const placeholderUrl = '/entriesImages/placeholder.svg';\n        const placeholderImg = new window.Image();\n        placeholderImg.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(placeholderUrl);\n          console.warn(`Using placeholder for external image: ${imageUrl}`);\n        };\n        placeholderImg.onerror = () => {\n          setImageError(true);\n          setCurrentImageUrl(null);\n        };\n        placeholderImg.src = placeholderUrl;\n        return;\n      }\n      \n      if (imageUrl.endsWith('.jpg')) {\n        const pngUrl = imageUrl.replace('.jpg', '.png');\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(pngUrl);\n        };\n        img2.onerror = () => {\n          const placeholderUrl = '/entriesImages/placeholder.svg';\n          const img3 = new window.Image();\n          img3.onload = () => {\n            setImageError(false);\n            setCurrentImageUrl(placeholderUrl);\n            console.warn(`Using placeholder for missing image: ${imageUrl}`);\n          };\n          img3.onerror = () => {\n            console.warn(`Could not load image: ${imageUrl} or ${pngUrl} or placeholder`);\n            setImageError(true);\n          };\n          img3.src = placeholderUrl;\n        };\n        img2.src = pngUrl;\n      } else if (imageUrl.endsWith('.png')) {\n        // Try .jpg if .png fails\n        const jpgUrl = imageUrl.replace('.png', '.jpg');\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(jpgUrl);\n        };\n        img2.onerror = () => {\n          // Try placeholder as last resort\n          const placeholderUrl = '/entriesImages/placeholder.svg';\n          const img3 = new window.Image();\n          img3.onload = () => {\n            setImageError(false);\n            setCurrentImageUrl(placeholderUrl);\n            console.warn(`Using placeholder for missing image: ${imageUrl}`);\n          };\n          img3.onerror = () => {\n            console.warn(`Could not load image: ${imageUrl} or ${jpgUrl} or placeholder`);\n            setImageError(true);\n          };\n          img3.src = placeholderUrl;\n        };\n        img2.src = jpgUrl;\n      } else {\n        const placeholderUrl = '/entriesImages/placeholder.svg';\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(placeholderUrl);\n          console.warn(`Using placeholder for missing image: ${imageUrl}`);\n        };\n        img2.onerror = () => {\n          console.warn(`Could not load image: ${imageUrl} or placeholder`);\n          setImageError(true);\n        };\n        img2.src = placeholderUrl;\n      }\n    };\n    img.src = imageUrl;\n  }, [imageUrl]);\n  \n  const tempVec1 = useRef(new THREE.Vector3());\n  const tempVec2 = useRef(new THREE.Vector3());\n  const tempVec3 = useRef(new THREE.Vector3());\n  const tempVec4 = useRef(new THREE.Vector3());\n  const tempQuat = useRef(new THREE.Quaternion());\n  const tempQuat2 = useRef(new THREE.Quaternion());\n  const tempMatrix = useRef(new THREE.Matrix4());\n  const worldUp = useRef(new THREE.Vector3(0, 1, 0));\n  \n  useFrame((state, delta) => {\n    if (!groupRef.current || !rotatingWrapperRef.current) return;\n    \n    let targetQuaternion = tempQuat.current;\n    \n    if (faceCamera) {\n      const camera = state.camera;\n      const currentPos = tempVec1.current;\n      groupRef.current.getWorldPosition(currentPos);\n      \n      const direction = tempVec2.current.subVectors(camera.position, currentPos).normalize();\n      \n      const forward = tempVec3.current.set(0, 0, 1);\n      targetQuaternion.setFromUnitVectors(forward, direction);\n    } else {\n      const currentPos = tempVec1.current;\n      groupRef.current.getWorldPosition(currentPos);\n\n      const directionToCenter = tempVec2.current.subVectors(center, currentPos);\n      const distance = directionToCenter.length();\n      if (distance < 0.001) return;\n      directionToCenter.normalize();\n\n      const right = tempVec3.current.crossVectors(worldUp.current, directionToCenter);\n      if (right.length() < 0.001) {\n        right.set(1, 0, 0);\n      }\n      right.normalize();\n\n      const stableUp = tempVec4.current.crossVectors(directionToCenter, right).normalize();\n\n      const basis = tempMatrix.current.makeBasis(right, stableUp, directionToCenter);\n      targetQuaternion.setFromRotationMatrix(basis);\n\n      if (tiltAmount !== 0) {\n        const tiltQuaternion = tempQuat2.current.setFromAxisAngle(right, tiltAmount);\n        targetQuaternion.multiply(tiltQuaternion);\n      }\n    }\n    \n    const currentQuaternion = rotatingWrapperRef.current.quaternion;\n    const rotationLerp = Math.min(1, 8.0 * delta);\n    currentQuaternion.slerp(targetQuaternion, rotationLerp);\n    \n    const camera = state.camera;\n    const cardPosition = tempVec1.current;\n    groupRef.current.getWorldPosition(cardPosition);\n    \n    const forward = tempVec2.current.set(0, 0, 1);\n    forward.applyQuaternion(currentQuaternion);\n    \n    const toCamera = tempVec3.current.subVectors(camera.position, cardPosition).normalize();\n    \n    const dotProduct = forward.dot(toCamera);\n    \n    setHtmlElementsVisible(dotProduct > 0);\n  });\n  \n  const borderWidth = 0.12;\n  const borderScale = useMemo(() => [\n    scale[0] + (borderWidth * 2), \n    scale[1] + (borderWidth * 2), \n    scale[2]\n  ], [scale]);\n  \n  const showPlaceholder = !imageUrl || (imageError && !currentImageUrl);\n  \n  const imageWidth = scale[0];\n  const imageHeight = scale[1];\n  const totalWidth = imageWidth + (borderWidth * 2);\n  const totalHeight = imageHeight + (borderWidth * 2);\n  \n  const topLeft = useMemo(() => new THREE.Vector3(-totalWidth / 2, totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const topRight = useMemo(() => new THREE.Vector3(totalWidth / 2, totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const bottomLeft = useMemo(() => new THREE.Vector3(-totalWidth / 2, -totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const bottomRight = useMemo(() => new THREE.Vector3(totalWidth / 2, -totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const imageCenter = center;\n  const topCenter = useMemo(() => new THREE.Vector3(0, totalHeight / 2, 0), [totalHeight]);\n  const bottomCenter = useMemo(() => new THREE.Vector3(0, -totalHeight / 2, 0), [totalHeight]);\n  const leftCenter = useMemo(() => new THREE.Vector3(-totalWidth / 2, 0, 0), [totalWidth]);\n  const rightCenter = useMemo(() => new THREE.Vector3(totalWidth / 2, 0, 0), [totalWidth]);\n  \n  const crossSize = 1.5;\n  const crossLineWidth = 0.1;\n  const crossBottomPosition = -totalHeight / 2 - 0.1;\n  const crossZPosition = 0.01;\n  const circleRadius = crossSize * 0.7;\n  \n  const titleZPosition = 0.01;\n  const readButtonZPosition = 0.01;\n  \n  const titleWidthPx = useMemo(() => scale[0] * 20 * 2.25 * 0.9, [scale]);\n  \n  const titleHeightUnits = useMemo(() => 2.6, []);\n  const readButtonYPosition = useMemo(() => {\n    if (showTitle) {\n      const titleBottom = scale[1] / 2 - titleHeightUnits / 2;\n      const imageBottom = -scale[1] / 2;\n      return (titleBottom + imageBottom) / 2;\n    }\n    return 0; // Center if no title\n  }, [scale, showTitle, titleHeightUnits]);\n  \n  return (\n    <group ref={groupRef} position={position}>\n      <group ref={rotatingWrapperRef}>\n        <mesh position={[0, 0, -0.06]} renderOrder={1} frustumCulled={false}>\n          <planeGeometry args={[borderScale[0], borderScale[1]]} />\n          <meshBasicMaterial \n            color=\"#000000\" \n            transparent \n            opacity={1.0 * displayOpacity}\n            side={THREE.DoubleSide}\n            depthWrite={true}\n            depthTest={true}\n          />\n        </mesh>\n        <mesh position={[0, 0, -0.05]} renderOrder={2} frustumCulled={false}>\n          <planeGeometry args={[borderScale[0], borderScale[1]]} />\n          <meshBasicMaterial \n            color={borderColor} \n            transparent \n            opacity={1.0 * displayOpacity}\n            side={THREE.DoubleSide}\n            depthWrite={true}\n            depthTest={true}\n          />\n        </mesh>\n        {isSelected && (\n          <mesh position={[0, 0, -0.04]} renderOrder={2.5} frustumCulled={false}>\n            <planeGeometry args={[borderScale[0], borderScale[1]]} />\n            <meshBasicMaterial \n              color={COLOR_ACCENT} \n              transparent \n              opacity={0.18 * displayOpacity}\n              side={THREE.DoubleSide}\n              depthWrite={true}\n              depthTest={true}\n            />\n          </mesh>\n        )}\n        {showPlaceholder ? (\n          <mesh ref={meshRef} position={[0, 0, 0]} renderOrder={3} frustumCulled={false}>\n            <planeGeometry args={[scale[0], scale[1]]} />\n            <meshBasicMaterial \n              color={COLOR_ACCENT} \n              transparent \n              opacity={0.95 * displayOpacity}\n              side={THREE.DoubleSide}\n              depthWrite={true}\n              depthTest={true}\n            />\n          </mesh>\n        ) : currentImageUrl && !imageError && (\n          <group ref={imageMeshRef} position={[0, 0, 0]} renderOrder={3}>\n            <Image\n              url={currentImageUrl}\n              scale={scale}\n              transparent\n              opacity={0.95 * displayOpacity}\n              depthWrite={true}\n              depthTest={true}\n              frustumCulled={false}\n              onError={(error) => {\n                console.warn(`Image component failed to load: ${currentImageUrl}`, error);\n                setImageError(true);\n                setCurrentImageUrl(null);\n              }}\n            />\n            <Image\n              url={currentImageUrl}\n              scale={scale}\n              transparent\n              opacity={0.95 * displayOpacity}\n              depthWrite={true}\n              depthTest={true}\n              frustumCulled={false}\n              rotation={[0, Math.PI, 0]}\n              onError={(error) => {\n                console.warn(`Image component failed to load (back): ${currentImageUrl}`, error);\n                setImageError(true);\n                setCurrentImageUrl(null);\n              }}\n            />\n          </group>\n        )}\n        \n        {showTitle && title && htmlElementsVisible && (\n          <group position={[0, scale[1] / 2, titleZPosition]} renderOrder={6}>\n            <Html\n              center={false}\n              className=\"titleHtml\"\n              style={{\n                width: `${titleWidthPx}px`,\n                left: `${-titleWidthPx / 2}px`,\n                top: \"0px\",\n              }}\n              transform\n              occlude={false}\n            >\n              <div\n                className=\"titleContainer\"\n                style={{\n                  width: `${titleWidthPx}px`,\n                  opacity: displayOpacity,\n                }}\n              >\n                {title}\n              </div>\n            </Html>\n          </group>\n        )}\n        \n        {showReadButton && htmlElementsVisible && (\n          <group position={[0, readButtonYPosition, readButtonZPosition]} renderOrder={6}>\n            <Html\n              center\n              className=\"readButtonHtml\"\n              transform\n              occlude={false}\n            >\n              <div\n                className=\"readButton\"\n                onClick={onReadClick}\n                style={{\n                  width: `${scale[0] * 20}px`,\n                  height: `${scale[1] * 20}px`,\n                }}\n              >\n                <span className=\"readButtonText\">\n                  READ\n                </span>\n              </div>\n            </Html>\n          </group>\n        )}\n        \n        {showCross && (\n          <group position={[0, crossBottomPosition, crossZPosition]} renderOrder={1000}>\n            <Html\n              center\n              className=\"crossHtml\"\n              style={{\n                width: `${scale[0] * 20}px`,\n              }}\n              transform\n              occlude={false}\n            >\n              <div\n                className=\"crossContainer\"\n                style={{\n                  opacity: displayOpacity,\n                }}\n              >\n                <div className=\"crossBackground\" />\n                <div className=\"crossBorder\" />\n                <div className=\"crossLines\">\n                  <div className=\"crossLine line1\" />\n                  <div className=\"crossLine line2\" />\n                </div>\n              </div>\n            </Html>\n          </group>\n        )}\n      </group>\n    </group>\n  );\n}\n\nexport default RotatingImage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3757, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/LoadingStateManager.jsx"],"sourcesContent":["import { useStore, getStore } from 'usestore-react';\nimport { useEffect, useState } from 'react';\n\nexport function useLoadingState() {\n  const [loadingState] = useStore('loadingState', {\n    nodesLoaded: 0,\n    totalNodes: 0,\n    isLoading: true,\n    nodesVisible: [],\n  });\n\n  return loadingState;\n}\n\nexport function useNodeVisibility(nodeId, index, totalNodes) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [opacity, setOpacity] = useState(0);\n  const [loadingState] = useStore('loadingState', {\n    nodesLoaded: 0,\n    totalNodes: 0,\n    isLoading: true,\n    nodesVisible: [],\n  });\n\n  useEffect(() => {\n    const baseDelay = 50;\n    const staggerDelay = index * baseDelay;\n    const maxDelay = totalNodes * baseDelay;\n    \n    if (!loadingState.isLoading && loadingState.totalNodes > 0) {\n      const timer = setTimeout(() => {\n        setIsVisible(true);\n        \n        const fadeDuration = 800;\n        const startTime = Date.now();\n        \n        const animate = () => {\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / fadeDuration, 1);\n          \n          const eased = 1 - Math.pow(1 - progress, 3);\n          setOpacity(eased);\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          }\n        };\n        \n        animate();\n      }, staggerDelay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [loadingState.isLoading, loadingState.totalNodes, index, totalNodes]);\n\n  return { isVisible, opacity: Math.max(opacity, 0.1) };\n}\n\nexport function initializeLoadingState(totalNodes) {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState({\n    nodesLoaded: 0,\n    totalNodes,\n    isLoading: true,\n      nodesVisible: [],\n  });\n  }\n}\n\nexport function completeLoading() {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState(prev => ({\n    ...prev,\n    isLoading: false,\n  }));\n  }\n}\n\nexport function markNodeLoaded(nodeId) {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState(prev => ({\n    ...prev,\n    nodesLoaded: prev.nodesLoaded + 1,\n      nodesVisible: [...(prev.nodesVisible || []), nodeId],\n  }));\n  }\n}\n\nexport default { useLoadingState, useNodeVisibility, initializeLoadingState, completeLoading, markNodeLoaded };\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;;;;;;;;;AAEO,SAAS;;IACd,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,gBAAgB;QAC9C,aAAa;QACb,YAAY;QACZ,WAAW;QACX,cAAc,EAAE;IAClB,QALO,eAAgB;IAOvB,OAAO;AACT;GATgB;;QACS,iKAAQ;;;AAU1B,SAAS,kBAAkB,MAAM,EAAE,KAAK,EAAE,UAAU;;IACzD,IAAkC,qLAAA,IAAA,yKAAQ,EAAC,YAApC,YAA2B,cAAhB,eAAgB;IAClC,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,QAAhC,UAAuB,eAAd,aAAc;IAC9B,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,gBAAgB;QAC9C,aAAa;QACb,YAAY;QACZ,WAAW;QACX,cAAc,EAAE;IAClB,QALO,eAAgB;IAOvB,IAAA,0KAAS;uCAAC;YACR,IAAM,YAAY;YAClB,IAAM,eAAe,QAAQ;YAC7B,IAAM,WAAW,aAAa;YAE9B,IAAI,CAAC,aAAa,SAAS,IAAI,aAAa,UAAU,GAAG,GAAG;gBAC1D,IAAM,QAAQ;yDAAW;wBACvB,aAAa;wBAEb,IAAM,eAAe;wBACrB,IAAM,YAAY,KAAK,GAAG;wBAE1B,IAAM;yEAAU;gCACd,IAAM,UAAU,KAAK,GAAG,KAAK;gCAC7B,IAAM,WAAW,KAAK,GAAG,CAAC,UAAU,cAAc;gCAElD,IAAM,QAAQ,IAAI,KAAK,GAAG,CAAC,IAAI,UAAU;gCACzC,WAAW;gCAEX,IAAI,WAAW,GAAG;oCAChB,sBAAsB;gCACxB;4BACF;;wBAEA;oBACF;wDAAG;gBAEH;mDAAO;+BAAM,aAAa;;;YAC5B;QACF;sCAAG;QAAC,aAAa,SAAS;QAAE,aAAa,UAAU;QAAE;QAAO;KAAW;IAEvE,OAAO;QAAE,WAAA;QAAW,SAAS,KAAK,GAAG,CAAC,SAAS;IAAK;AACtD;IA1CgB;;QAGS,iKAAQ;;;AAyC1B,SAAS,uBAAuB,UAAU;IAC/C,IAAM,QAAQ,IAAA,iKAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC;YACb,aAAa;YACb,YAAA;YACA,WAAW;YACT,cAAc,EAAE;QACpB;IACA;AACF;AAEO,SAAS;IACd,IAAM,QAAQ,IAAA,iKAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC,SAAA;mBAAS,wVACnB;gBACH,WAAW;;;IAEb;AACF;AAEO,SAAS,eAAe,MAAM;IACnC,IAAM,QAAQ,IAAA,iKAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC,SAAA;mBAAS,wVACnB;gBACH,aAAa,KAAK,WAAW,GAAG;gBAC9B,cAAc,AAAC,6KAAI,KAAK,YAAY,IAAI,EAAE,SAA5B;oBAA+B;iBAAO;;;IAExD;AACF;uCAEe;IAAE,iBAAA;IAAiB,mBAAA;IAAmB,wBAAA;IAAwB,iBAAA;IAAiB,gBAAA;AAAe"}},
    {"offset": {"line": 3907, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/templates/ArticleNodeTemplate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, Suspense } from \"react\";\nimport {\n  Line,\n  useGLTF,\n  Html,\n} from \"@react-three/drei\";\nimport { useStore } from \"usestore-react\";\nimport * as THREE from \"three\";\nimport Modal from \"react-modal\";\nimport ArchiveModal from \"../../components/treeModals/archiveModal\";\nimport \"../../components/treeModals/archive.scss\";\nimport { createWhiteMaterial } from \"../utils/whiteMaterial\";\nimport { useConnectionHighlight } from \"../utils/useConnectionHighlight\";\nimport { useShouldShowTitle } from \"../utils/useShouldShowTitle\";\nimport { RotatingImage } from \"../utils/RotatingImage\";\nimport { useNodeVisibility } from \"../utils/LoadingStateManager\";\nimport \"./ArticleNodeTemplate.scss\";\n\nfunction ArticleNodeWithModel({ nodeData, ...props }) {\n  const { nodes, materials } = useGLTF(nodeData.modelPath);\n  return <ArticleNodeContent nodeData={nodeData} nodes={nodes} materials={materials} {...props} />;\n}\n\nfunction ArticleNodeWithoutModel({ nodeData, ...props }) {\n  return <ArticleNodeContent nodeData={nodeData} nodes={{}} materials={{}} {...props} />;\n}\n\nfunction ArticleNodeContent({\n  nodeData,\n  nodes,\n  materials,\n  showAllLines,\n  props,\n  setTitle,\n  setDefault,\n  selectedComponent,\n}) {\n  const objectRef = useRef();\n  const [linesActive, setLinesActive] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [modalIsOpen, setOpen] = useState(false);\n  const [Store, setStore] = useStore(`${nodeData.id}Store`, false);\n  \n  const position = nodeData.position || [0, 0, 0];\n  const centerPoint = position;\n  const whiteMaterial = useMemo(() => createWhiteMaterial(), []);\n  useConnectionHighlight(nodeData.id, linesActive);\n  const shouldShowTitle = useShouldShowTitle(nodeData.id);\n  const [opacityMap] = useStore('elementOpacityStore', {});\n  const opacity = opacityMap[nodeData.id] !== undefined ? opacityMap[nodeData.id] : 1.0;\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n  \n  const nodeIndex = nodeData.index !== undefined ? nodeData.index : 0;\n  const totalNodes = 83;\n  const { isVisible, opacity: loadingOpacity } = useNodeVisibility(nodeData.id, nodeIndex, totalNodes);\n  \n  const isSecondaryHighlighted = secondaryHighlightedArticles?.includes(nodeData.id);\n  \n  const finalOpacity = useMemo(() => {\n    if (!isVisible) return 0;\n    const baseOpacity = opacity * loadingOpacity;\n    return baseOpacity;\n  }, [isVisible, opacity, loadingOpacity]);\n\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  useEffect(() => {\n    if (selectedNode && selectedNode.id !== nodeData.id && linesActive) {\n      setClickCount(0);\n      setClicked(false);\n      setLinesActive(false);\n      setStore(false);\n    }\n  }, [selectedNode, linesActive, nodeData.id, setStore]);\n\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n\n  const [modelState, setModelState] = useState(false);\n  useEffect(() => {\n    if (!nodeData.connections || nodeData.connections.length === 0) {\n      setModelState(false);\n      return;\n    }\n    \n    const checkConnections = () => {\n      const { getStore } = require('usestore-react');\n      const anyActive = nodeData.connections.some(connId => {\n        try {\n          const store = getStore(`${connId}Store`, false);\n          return store === true;\n        } catch (e) {\n          return false;\n        }\n      });\n      setModelState(anyActive);\n    };\n    \n    checkConnections();\n    const interval = setInterval(checkConnections, 500);\n    return () => clearInterval(interval);\n  }, [nodeData.connections]);\n\n  function handleCloseModal() {\n    setOpen(false);\n    setDefault();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setStore(false);\n    if (window.location.hash) {\n      window.history.pushState(null, '', window.location.pathname);\n    }\n  }\n\n  function handleClick() {\n    if (clickCount === 0) {\n      setClicked(true);\n      setClickCount(1);\n      setLinesActive(true);\n      setStore(true);\n      if (setTitle) setTitle();\n    } else {\n      setClickCount(0);\n      setClicked(false);\n      setLinesActive(false);\n      setDefault();\n      setStore(false);\n    }\n  }\n\n  // Slugify title for URL hash\n  const slugifyTitle = (title) => {\n    if (!title) return '';\n    return title\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/[\\s_-]+/g, '-')\n      .replace(/^-+|-+$/g, '');\n  };\n\n  function handleReadClick(e) {\n    e.stopPropagation();\n    setOpen(true);\n    if (nodeData.title) {\n      const hash = slugifyTitle(nodeData.title);\n      window.history.pushState(null, '', `#${hash}`);\n    }\n  }\n\n  function closeAll() {\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setDefault();\n    setStore(false);\n  }\n\n  useEffect(() => {\n    if (clickCount === 1) {\n      setLinesActive(true);\n      if (setTitle) setTitle();\n      setStore(true);\n    }\n  }, [clicked, setTitle, setStore]);\n\n  // Handle hash on page load - open modal if hash matches article title\n  useEffect(() => {\n    if (typeof window === 'undefined' || !nodeData.title) return;\n\n    const hash = window.location.hash.substring(1);\n    if (!hash) return;\n\n    const articleHash = slugifyTitle(nodeData.title);\n    if (articleHash === hash && !modalIsOpen) {\n      setTimeout(() => {\n        setOpen(true);\n      }, 1000);\n    }\n  }, [nodeData.title, modalIsOpen]);\n\n  return (\n    <>\n      <group {...props} dispose={null} frustumCulled={false}>\n        <group\n          position={position}\n          scale={[0.5, 0.5, 0.5]}\n          onClick={() => handleClick()}\n          opacity={finalOpacity}\n          ref={objectRef}\n          className=\"articleNodeGroup\"\n          frustumCulled={false}\n        >\n          {!modelState && (\n            <RotatingImage\n              imageUrl={nodeData.imageUrl}\n              position={[0, 0, 0]}\n              scale={[10.8, 14.4, 1]} // Back to original size (1x bigger than the 40% reduced size)\n              tiltAmount={0.15}\n              opacity={finalOpacity}\n              faceCamera={false} // Always face center so user can rotate in middle and see all images\n              showCross={linesActive} // Show cross only when connections are visible\n              title={nodeData.title}\n              showTitle={selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'))} // Show title when article is selected or highlighted via keyword\n              showReadButton={selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'))} // Show READ button when article is selected or highlighted via keyword\n              onReadClick={handleReadClick}\n              highlightState={{\n                isSelected: selectedNode?.id === nodeData.id,\n                isHighlighted: highlightedNodes?.includes(nodeData.id),\n                isSecondaryHighlighted: isSecondaryHighlighted,\n                hasSelection: !!selectedNode,\n              }}\n            />\n          )}\n\n          <Html center>\n            <Modal \n              isOpen={modalIsOpen} \n              contentLabel=\"Article Modal\"\n              className=\"archive-modal-content\"\n              overlayClassName=\"archive-modal-overlay\"\n            >\n              <ArchiveModal\n                closeModal={() => handleCloseModal()}\n                connect1={nodeData.connectionKeywords?.[0] || \"\"}\n                connect2={nodeData.connectionKeywords?.[1] || \"\"}\n                connect3={nodeData.connectionKeywords?.[2] || \"\"}\n                connect4={nodeData.connectionKeywords?.[3] || \"\"}\n                img={nodeData.imageUrl}\n                title={nodeData.title}\n                author={nodeData.author}\n                content={nodeData.content}\n                authorBio={nodeData.authorBio}\n                keywords={nodeData.keywords}\n                photoCredit={nodeData.photoCredit}\n              />\n            </Modal>\n          </Html>\n\n        </group>\n      </group>\n    </>\n  );\n}\n\nconst ArticleNodeTemplate = React.memo(function ArticleNodeTemplate({ nodeData, ...props }) {\n  const hasModel = !!nodeData.modelPath && nodeData.modelPath.trim() !== '';\n  \n  if (hasModel) {\n    return (\n      <Suspense fallback={null}>\n        <ArticleNodeWithModel nodeData={nodeData} {...props} />\n      </Suspense>\n    );\n  } else {\n    return <ArticleNodeWithoutModel nodeData={nodeData} {...props} />;\n  }\n}, (prevProps, nextProps) => {\n  const prevPos = prevProps.nodeData.position || [0, 0, 0];\n  const nextPos = nextProps.nodeData.position || [0, 0, 0];\n  const positionChanged = prevPos[0] !== nextPos[0] || prevPos[1] !== nextPos[1] || prevPos[2] !== nextPos[2];\n  \n  if (positionChanged) return false;\n  \n  return (\n    prevProps.nodeData.id === nextProps.nodeData.id &&\n    prevProps.showAllLines === nextProps.showAllLines\n  );\n});\n\nexport default ArticleNodeTemplate;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4332, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/templates/GlossaryNodeTemplate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, useCallback, Suspense } from \"react\";\nimport { useGLTF, Html, Line } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { createStore, useStore } from \"usestore-react\";\nimport { createWhiteMaterial } from \"../utils/whiteMaterial\";\nimport { useConnectionHighlight } from \"../utils/useConnectionHighlight\";\nimport { useShouldShowTitle } from \"../utils/useShouldShowTitle\";\nimport { useNodeVisibility } from \"../utils/LoadingStateManager\";\nimport \"./GlossaryNodeTemplate.scss\";\n\nfunction GlossaryNodeWithModel({ nodeData, ...props }) {\n  const { nodes, materials } = useGLTF(nodeData.modelPath);\n  return <GlossaryNodeContent nodeData={nodeData} nodes={nodes} materials={materials} {...props} />;\n}\n\nfunction GlossaryNodeWithoutModel({ nodeData, ...props }) {\n  return <GlossaryNodeContent nodeData={nodeData} nodes={{}} materials={{}} {...props} />;\n}\n\nfunction GlossaryNodeContent({\n  nodeData,\n  nodes,\n  materials,\n  showAllLines,\n  title,\n  active,\n  props,\n  setTitle,\n  setDefault,\n  glossaryShellComponent,\n}) {\n  const objectRef = useRef();\n  const [linesActive, setLinesActive] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [modalIsOpen, setOpen] = useState(false);\n\n  const position = nodeData.position || [0, 0, 0];\n  const centerPoint = position;\n  const [opacityMap] = useStore('elementOpacityStore', {});\n  const opacity = opacityMap[nodeData.id] !== undefined ? opacityMap[nodeData.id] : 1.0;\n  \n  const crossBottomOffset = useMemo(() => {\n    return 1.93; // Offset downward from keyword center (matches connectionController with 0.35 scale)\n  }, []);\n  \n  const nodeIndex = nodeData.index !== undefined ? nodeData.index : 0;\n  const totalNodes = 83;\n  const { isVisible, opacity: loadingOpacity } = useNodeVisibility(nodeData.id, nodeIndex, totalNodes);\n  \n  const finalOpacity = useMemo(() => {\n    if (!isVisible) return 0;\n    return opacity * loadingOpacity;\n  }, [isVisible, opacity, loadingOpacity]);\n\n  const isDimmed = useMemo(() => {\n    const isKeyword = nodeData.id && nodeData.id.startsWith('G');\n    return isKeyword && Math.abs(finalOpacity - 0.3) < 0.01;\n  }, [finalOpacity, nodeData.id]);\n  \n  const whiteMaterial = useMemo(() => {\n    const material = createWhiteMaterial();\n    material.opacity = finalOpacity;\n    material.transparent = finalOpacity < 1.0;\n    return material;\n  }, [finalOpacity]);\n  \n  useConnectionHighlight(nodeData.id, linesActive);\n  const shouldShowTitle = useShouldShowTitle(nodeData.id);\n  \n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const isHighlighted = useMemo(() => {\n    return Array.isArray(highlightedNodes) && highlightedNodes.includes(nodeData.id);\n  }, [highlightedNodes, nodeData.id]);\n\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const isSelected = useMemo(() => {\n    return selectedNode?.id === nodeData.id;\n  }, [selectedNode, nodeData.id]);\n\n  const isSecondaryHighlighted = useMemo(() => {\n    return isHighlighted && !isSelected && !linesActive;\n  }, [isHighlighted, isSelected, linesActive]);\n\n  const [clickCounter4, setClickCounter4] = useStore(`${nodeData.id}Store`, false);\n  useEffect(() => {\n    if (selectedNode && selectedNode.id !== nodeData.id && linesActive) {\n      setClickCount(0);\n      setClicked(false);\n      setLinesActive(false);\n    }\n  }, [selectedNode, linesActive, nodeData.id]);\n\n  useEffect(() => {\n    if (materials && Object.keys(materials).length > 0) {\n      Object.values(materials).forEach(material => {\n        if (material) {\n          material.opacity = finalOpacity;\n          material.transparent = finalOpacity < 1.0;\n        }\n      });\n    }\n  }, [finalOpacity, materials]);\n\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n\n  function handleCloseModal() {\n    setOpen(false);\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n  }\n\n  const handleClick = useCallback(() => {\n    setClicked(prev => !prev);\n    setClickCount(prev => prev + 1);\n    setClickCounter4(false);\n  }, [setClickCounter4]);\n\n  function closeAll() {\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n  }\n\n  useEffect(() => {\n    if (clickCount === 1) {\n      setLinesActive(true);\n      if (setTitle) setTitle();\n      setClickCounter4(true);\n    } else if (clickCount === 2) {\n      setLinesActive(false);\n      setClickCount(0);\n      if (setDefault) setDefault();\n    }\n  }, [clicked, setTitle, setDefault, setClickCounter4]);\n\n  useEffect(() => {\n    if (showAllLines) {\n      setClickCount(1);\n    } else if (!showAllLines) {\n      setClickCount(0);\n    }\n  }, [showAllLines]);\n\n  return (\n    <>\n      <group\n        {...props}\n        dispose={null}\n        position={position}\n        scale={[1, 1, 1]}\n        onClick={handleClick}\n        ref={objectRef}\n        opacity={finalOpacity}\n        className=\"glossaryNodeGroup\"\n        frustumCulled={false}\n      >\n        <mesh position={[0, 0, 0]} visible={false}>\n          <planeGeometry args={[5, 2]} />\n          <meshBasicMaterial transparent opacity={0} side={THREE.DoubleSide} />\n        </mesh>\n        <Html center>\n          <div className=\"glossaryContainer\">\n            <div\n              className={`glossaryPill ${(isSelected || isHighlighted || linesActive) ? 'selected' : ''} ${isSecondaryHighlighted ? 'secondaryHighlighted' : ''} ${isHighlighted || linesActive ? 'highlighted' : ''} ${isDimmed ? 'dimmed' : ''}`}\n              onClick={(e) => {\n                e.stopPropagation();\n                handleClick();\n              }}\n              style={{ opacity: finalOpacity }}\n            >\n              <span className=\"glossaryPillTitle\">\n                {(title || nodeData.title || \"\").toUpperCase()}\n              </span>\n              {(isSelected || isHighlighted || linesActive) && nodeData.hasOpenButton && (\n                <span\n                  className=\"glossaryPillOpenButton\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    window.location.href = `/glossary#${nodeData.id}`;\n                  }}\n                >\n                  OPEN\n                </span>\n              )}\n            </div>\n            {(isSelected || isHighlighted || linesActive) && (\n              <div className={`glossaryCross ${(isSelected || isHighlighted || linesActive) ? 'selected' : ''}`} style={{ opacity: finalOpacity }}>\n                <div className=\"glossaryCrossBackground\" />\n                <div className=\"glossaryCrossBorder\" />\n                <div className=\"glossaryCrossLines\">\n                  <div className=\"glossaryCrossLine line1\" />\n                  <div className=\"glossaryCrossLine line2\" />\n                </div>\n              </div>\n            )}\n          </div>\n        </Html>\n      </group>\n      {linesActive == true && (\n        <group>\n          <Line\n            points={[...position, ...centerPoint]}\n            color={\"#ffffff\"}\n            lineWidth={1}\n          />\n        </group>\n      )}\n\n      {showAllLines == true && (\n        <group>\n          <Line\n            points={[...position, ...centerPoint]}\n            color={\"#ffffff\"}\n            lineWidth={1}\n          />\n        </group>\n      )}\n    </>\n  );\n}\n\nexport const GlossaryNodeTemplate = React.memo(function GlossaryNodeTemplate({ nodeData, ...props }) {\n  const hasModel = !!nodeData.modelPath && nodeData.modelPath.trim() !== '';\n  \n  if (hasModel) {\n    return (\n      <Suspense fallback={null}>\n        <GlossaryNodeWithModel nodeData={nodeData} {...props} />\n      </Suspense>\n    );\n  } else {\n    return <GlossaryNodeWithoutModel nodeData={nodeData} {...props} />;\n  }\n}, (prevProps, nextProps) => {\n  const prevPos = prevProps.nodeData.position || [0, 0, 0];\n  const nextPos = nextProps.nodeData.position || [0, 0, 0];\n  const positionChanged = prevPos[0] !== nextPos[0] || prevPos[1] !== nextPos[1] || prevPos[2] !== nextPos[2];\n  \n  if (positionChanged) return false;\n  \n  return (\n    prevProps.nodeData.id === nextProps.nodeData.id &&\n    prevProps.showAllLines === nextProps.showAllLines\n  );\n});\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAGA,SAAS,sBAAsB;QAAE,WAAF,OAAE,UAAa,2LAAf;QAAE;;;IAC/B,IAA6B,WAAA,IAAA,sKAAO,EAAC,SAAS,SAAS,GAA/C,QAAqB,SAArB,OAAO,YAAc,SAAd;IACf,qBAAO,6LAAC;QAAoB,UAAU;QAAU,OAAO;QAAO,WAAW;OAAe;;;;;AAC1F;GAHS;;QACsB,sKAAO;;;KAD7B;AAKT,SAAS,yBAAyB;QAAE,WAAF,OAAE,UAAa,2LAAf;QAAE;;IAClC,qBAAO,6LAAC;QAAoB,UAAU;QAAU,OAAO,CAAC;QAAG,WAAW,CAAC;OAAO;;;;;AAChF;MAFS;AAIT,SAAS,oBAAoB,KAW5B;QAVC,WAD2B,MAC3B,UACA,QAF2B,MAE3B,OACA,YAH2B,MAG3B,WACA,eAJ2B,MAI3B,cACA,QAL2B,MAK3B,OACA,SAN2B,MAM3B,QACA,QAP2B,MAO3B,OACA,WAR2B,MAQ3B,UACA,aAT2B,MAS3B,YACA,yBAV2B,MAU3B;;IAEA,IAAM,YAAY,IAAA,uKAAM;IACxB,IAAsC,qLAAA,IAAA,yKAAQ,EAAC,YAAxC,cAA+B,cAAlB,iBAAkB;IACtC,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,YAAhC,UAAuB,eAAd,aAAc;IAC9B,IAAoC,sLAAA,IAAA,yKAAQ,EAAC,QAAtC,aAA6B,eAAjB,gBAAiB;IACpC,IAA+B,sLAAA,IAAA,yKAAQ,EAAC,YAAjC,cAAwB,eAAX,UAAW;IAE/B,IAAM,WAAW,SAAS,QAAQ,IAAI;QAAC;QAAG;QAAG;KAAE;IAC/C,IAAM,cAAc;IACpB,IAAqB,qLAAA,IAAA,iKAAQ,EAAC,uBAAuB,CAAC,QAA/C,aAAc;IACrB,IAAM,UAAU,UAAU,CAAC,SAAS,EAAE,CAAC,KAAK,YAAY,UAAU,CAAC,SAAS,EAAE,CAAC,GAAG;IAElF,IAAM,oBAAoB,IAAA,wKAAO;0DAAC;YAChC,OAAO,MAAM,qFAAqF;QACpG;yDAAG,EAAE;IAEL,IAAM,YAAY,SAAS,KAAK,KAAK,YAAY,SAAS,KAAK,GAAG;IAClE,IAAM,aAAa;IACnB,IAA+C,qBAAA,IAAA,mKAAiB,EAAC,SAAS,EAAE,EAAE,WAAW,aAAjF,YAAuC,mBAAvC,WAAW,AAAS,iBAAmB,mBAA5B;IAEnB,IAAM,eAAe,IAAA,wKAAO;qDAAC;YAC3B,IAAI,CAAC,WAAW,OAAO;YACvB,OAAO,UAAU;QACnB;oDAAG;QAAC;QAAW;QAAS;KAAe;IAEvC,IAAM,WAAW,IAAA,wKAAO;iDAAC;YACvB,IAAM,YAAY,SAAS,EAAE,IAAI,SAAS,EAAE,CAAC,UAAU,CAAC;YACxD,OAAO,aAAa,KAAK,GAAG,CAAC,eAAe,OAAO;QACrD;gDAAG;QAAC;QAAc,SAAS,EAAE;KAAC;IAE9B,IAAM,gBAAgB,IAAA,wKAAO;sDAAC;YAC5B,IAAM,WAAW,IAAA,8JAAmB;YACpC,SAAS,OAAO,GAAG;YACnB,SAAS,WAAW,GAAG,eAAe;YACtC,OAAO;QACT;qDAAG;QAAC;KAAa;IAEjB,IAAA,0KAAsB,EAAC,SAAS,EAAE,EAAE;IACpC,IAAM,kBAAkB,IAAA,kKAAkB,EAAC,SAAS,EAAE;IAEtD,IAA2B,sLAAA,IAAA,iKAAQ,EAAC,yBAAyB,EAAE,OAAxD,mBAAoB;IAC3B,IAAM,gBAAgB,IAAA,wKAAO;sDAAC;YAC5B,OAAO,MAAM,OAAO,CAAC,qBAAqB,iBAAiB,QAAQ,CAAC,SAAS,EAAE;QACjF;qDAAG;QAAC;QAAkB,SAAS,EAAE;KAAC;IAElC,IAAuB,sLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAAM,aAAa,IAAA,wKAAO;mDAAC;YACzB,OAAO,CAAA,yBAAA,mCAAA,aAAc,EAAE,MAAK,SAAS,EAAE;QACzC;kDAAG;QAAC;QAAc,SAAS,EAAE;KAAC;IAE9B,IAAM,yBAAyB,IAAA,wKAAO;+DAAC;YACrC,OAAO,iBAAiB,CAAC,cAAc,CAAC;QAC1C;8DAAG;QAAC;QAAe;QAAY;KAAY;IAE3C,IAA0C,sLAAA,IAAA,iKAAQ,EAAC,AAAC,GAAc,OAAZ,SAAS,EAAE,EAAC,UAAQ,YAAnE,gBAAmC,eAApB,mBAAoB;IAC1C,IAAA,0KAAS;yCAAC;YACR,IAAI,gBAAgB,aAAa,EAAE,KAAK,SAAS,EAAE,IAAI,aAAa;gBAClE,cAAc;gBACd,WAAW;gBACX,eAAe;YACjB;QACF;wCAAG;QAAC;QAAc;QAAa,SAAS,EAAE;KAAC;IAE3C,IAAA,0KAAS;yCAAC;YACR,IAAI,aAAa,OAAO,IAAI,CAAC,WAAW,MAAM,GAAG,GAAG;gBAClD,OAAO,MAAM,CAAC,WAAW,OAAO;qDAAC,SAAA;wBAC/B,IAAI,UAAU;4BACZ,SAAS,OAAO,GAAG;4BACnB,SAAS,WAAW,GAAG,eAAe;wBACxC;oBACF;;YACF;QACF;wCAAG;QAAC;QAAc;KAAU;IAE5B,SAAS;QACP,QAAQ,CAAC;IACX;IAEA,SAAS;QACP,QAAQ;QACR,cAAc;QACd,WAAW;QACX,eAAe;IACjB;IAEA,IAAM,cAAc,IAAA,4KAAW;wDAAC;YAC9B;gEAAW,SAAA;2BAAQ,CAAC;;;YACpB;gEAAc,SAAA;2BAAQ,OAAO;;;YAC7B,iBAAiB;QACnB;uDAAG;QAAC;KAAiB;IAErB,SAAS;QACP,cAAc;QACd,WAAW;QACX,eAAe;IACjB;IAEA,IAAA,0KAAS;yCAAC;YACR,IAAI,eAAe,GAAG;gBACpB,eAAe;gBACf,IAAI,UAAU;gBACd,iBAAiB;YACnB,OAAO,IAAI,eAAe,GAAG;gBAC3B,eAAe;gBACf,cAAc;gBACd,IAAI,YAAY;YAClB;QACF;wCAAG;QAAC;QAAS;QAAU;QAAY;KAAiB;IAEpD,IAAA,0KAAS;yCAAC;YACR,IAAI,cAAc;gBAChB,cAAc;YAChB,OAAO,IAAI,CAAC,cAAc;gBACxB,cAAc;YAChB;QACF;wCAAG;QAAC;KAAa;IAEjB,qBACE;;0BACE,6LAAC,iWACK;gBACJ,SAAS;gBACT,UAAU;gBACV,OAAO;oBAAC;oBAAG;oBAAG;iBAAE;gBAChB,SAAS;gBACT,KAAK;gBACL,SAAS;gBACT,WAAU;gBACV,eAAe;;kCAEf,6LAAC;wBAAK,UAAU;4BAAC;4BAAG;4BAAG;yBAAE;wBAAE,SAAS;;0CAClC,6LAAC;gCAAc,MAAM;oCAAC;oCAAG;iCAAE;;;;;;0CAC3B,6LAAC;gCAAkB,WAAW;gCAAC,SAAS;gCAAG,MAAM,gKAAgB;;;;;;;;;;;;kCAEnE,6LAAC,kKAAI;wBAAC,MAAM;kCACV,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,WAAW,AAAC,gBAAiF,OAAlE,AAAC,cAAc,iBAAiB,cAAe,aAAa,IAAG,KAA2D,OAAxD,yBAAyB,yBAAyB,IAAG,KAAwD,OAArD,iBAAiB,cAAc,gBAAgB,IAAG,KAA4B,OAAzB,WAAW,WAAW;oCAChO,SAAS,SAAC;wCACR,EAAE,eAAe;wCACjB;oCACF;oCACA,OAAO;wCAAE,SAAS;oCAAa;;sDAE/B,6LAAC;4CAAK,WAAU;sDACb,CAAC,SAAS,SAAS,KAAK,IAAI,EAAE,EAAE,WAAW;;;;;;wCAE7C,CAAC,cAAc,iBAAiB,WAAW,KAAK,SAAS,aAAa,kBACrE,6LAAC;4CACC,WAAU;4CACV,SAAS,SAAC;gDACR,EAAE,eAAe;gDACjB,OAAO,QAAQ,CAAC,IAAI,GAAG,AAAC,aAAwB,OAAZ,SAAS,EAAE;4CACjD;sDACD;;;;;;;;;;;;gCAKJ,CAAC,cAAc,iBAAiB,WAAW,mBAC1C,6LAAC;oCAAI,WAAW,AAAC,iBAA+E,OAA/D,AAAC,cAAc,iBAAiB,cAAe,aAAa;oCAAM,OAAO;wCAAE,SAAS;oCAAa;;sDAChI,6LAAC;4CAAI,WAAU;;;;;;sDACf,6LAAC;4CAAI,WAAU;;;;;;sDACf,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;;;;;;8DACf,6LAAC;oDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAO1B,eAAe,sBACd,6LAAC;0BACC,cAAA,6LAAC,mKAAI;oBACH,QAAQ,AAAC,6KAAG,iBAAU,6KAAG;oBACzB,OAAO;oBACP,WAAW;;;;;;;;;;;YAKhB,gBAAgB,sBACf,6LAAC;0BACC,cAAA,6LAAC,mKAAI;oBACH,QAAQ,AAAC,6KAAG,iBAAU,6KAAG;oBACzB,OAAO;oBACP,WAAW;;;;;;;;;;;;;AAMvB;IA5MS;;QAoBc,iKAAQ;QASkB,mKAAiB;QAmBhE,0KAAsB;QACE,kKAAkB;QAEf,iKAAQ;QAKZ,iKAAQ;QASW,iKAAQ;;;MAjE3C;AA8MF,IAAM,qCAAuB,wKAAK,CAAC,IAAI,OAAC,SAAS,qBAAqB;QAAE,WAAF,OAAE,UAAa,2LAAf;QAAE;;IAC7E,IAAM,WAAW,CAAC,CAAC,SAAS,SAAS,IAAI,SAAS,SAAS,CAAC,IAAI,OAAO;IAEvE,IAAI,UAAU;QACZ,qBACE,6LAAC,yKAAQ;YAAC,UAAU;sBAClB,cAAA,6LAAC;gBAAsB,UAAU;eAAc;;;;;;;;;;IAGrD,OAAO;QACL,qBAAO,6LAAC;YAAyB,UAAU;WAAc;;;;;IAC3D;AACF,GAAG,SAAC,WAAW;IACb,IAAM,UAAU,UAAU,QAAQ,CAAC,QAAQ,IAAI;QAAC;QAAG;QAAG;KAAE;IACxD,IAAM,UAAU,UAAU,QAAQ,CAAC,QAAQ,IAAI;QAAC;QAAG;QAAG;KAAE;IACxD,IAAM,kBAAkB,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE;IAE3G,IAAI,iBAAiB,OAAO;IAE5B,OACE,UAAU,QAAQ,CAAC,EAAE,KAAK,UAAU,QAAQ,CAAC,EAAE,IAC/C,UAAU,YAAY,KAAK,UAAU,YAAY;AAErD"}},
    {"offset": {"line": 4839, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/CameraInteractionTracker.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\n\nexport function CameraInteractionTracker() {\n  const [, setCameraInteraction] = useStore('cameraInteractionStore', false);\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const interactionTimeoutRef = useRef(null);\n  const isInteractingRef = useRef(false);\n  \n  useEffect(() => {\n    if (selectedNode?.id) {\n      setCameraInteraction(false);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n        interactionTimeoutRef.current = null;\n      }\n      isInteractingRef.current = false;\n    }\n  }, [selectedNode, setCameraInteraction]);\n\n  useEffect(() => {\n    const canvas = document.querySelector('canvas');\n    if (!canvas) return;\n\n    let dragStartPos = null;\n    let isDragging = false;\n    \n    const handlePointerDown = (e) => {\n      dragStartPos = { x: e.clientX, y: e.clientY };\n      isDragging = false;\n    };\n    \n    const handlePointerMove = (e) => {\n      if (dragStartPos && !isDragging) {\n        const dx = Math.abs(e.clientX - dragStartPos.x);\n        const dy = Math.abs(e.clientY - dragStartPos.y);\n        if (dx > 5 || dy > 5) {\n          isDragging = true;\n          isInteractingRef.current = true;\n          setCameraInteraction(true);\n          \n          if (interactionTimeoutRef.current) {\n            clearTimeout(interactionTimeoutRef.current);\n            interactionTimeoutRef.current = null;\n          }\n        }\n      } else if (isDragging) {\n        isInteractingRef.current = true;\n        setCameraInteraction(true);\n      }\n    };\n    \n    const handlePointerUp = () => {\n      if (isDragging) {\n        isInteractingRef.current = false;\n        if (interactionTimeoutRef.current) {\n          clearTimeout(interactionTimeoutRef.current);\n        }\n        interactionTimeoutRef.current = setTimeout(() => {\n          if (!isInteractingRef.current) {\n            setCameraInteraction(false);\n          }\n        }, 1500);\n      }\n      dragStartPos = null;\n      isDragging = false;\n    };\n    \n    const handleWheel = () => {\n      isInteractingRef.current = true;\n      setCameraInteraction(true);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n      }\n      interactionTimeoutRef.current = setTimeout(() => {\n        if (!isInteractingRef.current) {\n          setCameraInteraction(false);\n        }\n      }, 2000);\n    };\n    \n    canvas.addEventListener('pointerdown', handlePointerDown, { passive: true });\n    canvas.addEventListener('pointermove', handlePointerMove, { passive: true });\n    canvas.addEventListener('pointerup', handlePointerUp, { passive: true });\n    canvas.addEventListener('wheel', handleWheel, { passive: true });\n\n    return () => {\n      canvas.removeEventListener('pointerdown', handlePointerDown);\n      canvas.removeEventListener('pointermove', handlePointerMove);\n      canvas.removeEventListener('pointerup', handlePointerUp);\n      canvas.removeEventListener('wheel', handleWheel);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n      }\n    };\n  }, [setCameraInteraction]);\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;AAEO,SAAS;;IACd,IAAiC,qLAAA,IAAA,iKAAQ,EAAC,0BAA0B,YAA3D,uBAAwB;IACjC,IAAuB,sLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAAM,wBAAwB,IAAA,uKAAM,EAAC;IACrC,IAAM,mBAAmB,IAAA,uKAAM,EAAC;IAEhC,IAAA,0KAAS;8CAAC;YACR,IAAI,yBAAA,mCAAA,aAAc,EAAE,EAAE;gBACpB,qBAAqB;gBACrB,IAAI,sBAAsB,OAAO,EAAE;oBACjC,aAAa,sBAAsB,OAAO;oBAC1C,sBAAsB,OAAO,GAAG;gBAClC;gBACA,iBAAiB,OAAO,GAAG;YAC7B;QACF;6CAAG;QAAC;QAAc;KAAqB;IAEvC,IAAA,0KAAS;8CAAC;YACR,IAAM,SAAS,SAAS,aAAa,CAAC;YACtC,IAAI,CAAC,QAAQ;YAEb,IAAI,eAAe;YACnB,IAAI,aAAa;YAEjB,IAAM;wEAAoB,SAAC;oBACzB,eAAe;wBAAE,GAAG,EAAE,OAAO;wBAAE,GAAG,EAAE,OAAO;oBAAC;oBAC5C,aAAa;gBACf;;YAEA,IAAM;wEAAoB,SAAC;oBACzB,IAAI,gBAAgB,CAAC,YAAY;wBAC/B,IAAM,KAAK,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,aAAa,CAAC;wBAC9C,IAAM,KAAK,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,aAAa,CAAC;wBAC9C,IAAI,KAAK,KAAK,KAAK,GAAG;4BACpB,aAAa;4BACb,iBAAiB,OAAO,GAAG;4BAC3B,qBAAqB;4BAErB,IAAI,sBAAsB,OAAO,EAAE;gCACjC,aAAa,sBAAsB,OAAO;gCAC1C,sBAAsB,OAAO,GAAG;4BAClC;wBACF;oBACF,OAAO,IAAI,YAAY;wBACrB,iBAAiB,OAAO,GAAG;wBAC3B,qBAAqB;oBACvB;gBACF;;YAEA,IAAM;sEAAkB;oBACtB,IAAI,YAAY;wBACd,iBAAiB,OAAO,GAAG;wBAC3B,IAAI,sBAAsB,OAAO,EAAE;4BACjC,aAAa,sBAAsB,OAAO;wBAC5C;wBACA,sBAAsB,OAAO,GAAG;kFAAW;gCACzC,IAAI,CAAC,iBAAiB,OAAO,EAAE;oCAC7B,qBAAqB;gCACvB;4BACF;iFAAG;oBACL;oBACA,eAAe;oBACf,aAAa;gBACf;;YAEA,IAAM;kEAAc;oBAClB,iBAAiB,OAAO,GAAG;oBAC3B,qBAAqB;oBACrB,IAAI,sBAAsB,OAAO,EAAE;wBACjC,aAAa,sBAAsB,OAAO;oBAC5C;oBACA,sBAAsB,OAAO,GAAG;0EAAW;4BACzC,IAAI,CAAC,iBAAiB,OAAO,EAAE;gCAC7B,qBAAqB;4BACvB;wBACF;yEAAG;gBACL;;YAEA,OAAO,gBAAgB,CAAC,eAAe,mBAAmB;gBAAE,SAAS;YAAK;YAC1E,OAAO,gBAAgB,CAAC,eAAe,mBAAmB;gBAAE,SAAS;YAAK;YAC1E,OAAO,gBAAgB,CAAC,aAAa,iBAAiB;gBAAE,SAAS;YAAK;YACtE,OAAO,gBAAgB,CAAC,SAAS,aAAa;gBAAE,SAAS;YAAK;YAE9D;sDAAO;oBACL,OAAO,mBAAmB,CAAC,eAAe;oBAC1C,OAAO,mBAAmB,CAAC,eAAe;oBAC1C,OAAO,mBAAmB,CAAC,aAAa;oBACxC,OAAO,mBAAmB,CAAC,SAAS;oBACpC,IAAI,sBAAsB,OAAO,EAAE;wBACjC,aAAa,sBAAsB,OAAO;oBAC5C;gBACF;;QACF;6CAAG;QAAC;KAAqB;IAEzB,OAAO;AACT;GA/FgB;;QACmB,iKAAQ;QAClB,iKAAQ;;;KAFjB"}},
    {"offset": {"line": 4988, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/ConnectionTransitionController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore, getStore } from 'usestore-react';\n\nexport function ConnectionTransitionController() {\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  const prevSelectedNodeRef = useRef(null);\n  const transitionTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    const visibilityStore = getStore('connectionLinesVisibilityStore');\n    \n    if (transitionTimeoutRef.current) {\n      clearTimeout(transitionTimeoutRef.current);\n    }\n\n    if (selectedNode?.id !== prevSelectedNodeRef.current?.id) {\n      const isNewSelection = selectedNode?.id && !prevSelectedNodeRef.current?.id;\n      const isDeselection = !selectedNode?.id && prevSelectedNodeRef.current?.id;\n\n      if (isNewSelection) {\n        visibilityStore.setState(false);\n        \n        transitionTimeoutRef.current = setTimeout(() => {\n          visibilityStore.setState(true);\n        }, 1500);\n        \n      } else if (isDeselection) {\n        visibilityStore.setState(false);\n        \n        transitionTimeoutRef.current = setTimeout(() => {\n          visibilityStore.setState(true);\n        }, 1000);\n      }\n      \n      prevSelectedNodeRef.current = selectedNode;\n    }\n\n    if (cameraInteraction && selectedNode?.id) {\n      visibilityStore.setState(false);\n      \n      transitionTimeoutRef.current = setTimeout(() => {\n        visibilityStore.setState(true);\n      }, 1200);\n    }\n\n    return () => {\n      if (transitionTimeoutRef.current) {\n        clearTimeout(transitionTimeoutRef.current);\n      }\n    };\n  }, [selectedNode, cameraInteraction]);\n\n  return null;\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;AAEO,SAAS;;IACd,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAA4B,sLAAA,IAAA,iKAAQ,EAAC,0BAA0B,YAAxD,oBAAqB;IAC5B,IAAM,sBAAsB,IAAA,uKAAM,EAAC;IACnC,IAAM,uBAAuB,IAAA,uKAAM,EAAC;IAEpC,IAAA,0KAAS;oDAAC;gBAOiB;YANzB,IAAM,kBAAkB,IAAA,iKAAQ,EAAC;YAEjC,IAAI,qBAAqB,OAAO,EAAE;gBAChC,aAAa,qBAAqB,OAAO;YAC3C;YAEA,IAAI,CAAA,yBAAA,mCAAA,aAAc,EAAE,QAAK,+BAAA,oBAAoB,OAAO,cAA3B,mDAAA,6BAA6B,EAAE,GAAE;oBACZ,+BACD;gBAD3C,IAAM,iBAAiB,CAAA,yBAAA,mCAAA,aAAc,EAAE,KAAI,GAAC,gCAAA,oBAAoB,OAAO,cAA3B,oDAAA,8BAA6B,EAAE;gBAC3E,IAAM,gBAAgB,EAAC,yBAAA,mCAAA,aAAc,EAAE,OAAI,gCAAA,oBAAoB,OAAO,cAA3B,oDAAA,8BAA6B,EAAE;gBAE1E,IAAI,gBAAgB;oBAClB,gBAAgB,QAAQ,CAAC;oBAEzB,qBAAqB,OAAO,GAAG;oEAAW;4BACxC,gBAAgB,QAAQ,CAAC;wBAC3B;mEAAG;gBAEL,OAAO,IAAI,eAAe;oBACxB,gBAAgB,QAAQ,CAAC;oBAEzB,qBAAqB,OAAO,GAAG;oEAAW;4BACxC,gBAAgB,QAAQ,CAAC;wBAC3B;mEAAG;gBACL;gBAEA,oBAAoB,OAAO,GAAG;YAChC;YAEA,IAAI,sBAAqB,yBAAA,mCAAA,aAAc,EAAE,GAAE;gBACzC,gBAAgB,QAAQ,CAAC;gBAEzB,qBAAqB,OAAO,GAAG;gEAAW;wBACxC,gBAAgB,QAAQ,CAAC;oBAC3B;+DAAG;YACL;YAEA;4DAAO;oBACL,IAAI,qBAAqB,OAAO,EAAE;wBAChC,aAAa,qBAAqB,OAAO;oBAC3C;gBACF;;QACF;mDAAG;QAAC;QAAc;KAAkB;IAEpC,OAAO;AACT;GAnDgB;;QACS,iKAAQ;QACH,iKAAQ;;;KAFtB"}},
    {"offset": {"line": 5073, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/ModelPreloader.js"],"sourcesContent":["import { useGLTF } from \"@react-three/drei\";\n\nconst preloadedModels = new Set();\n\nexport function preloadGLBModel(path) {\n  if (!path || preloadedModels.has(path)) {\n    return;\n  }\n  \n  preloadedModels.add(path);\n  \n  try {\n    useGLTF.preload(path);\n  } catch (error) {\n    console.warn(`Failed to preload model ${path}:`, error);\n    preloadedModels.delete(path);\n  }\n}\n\nexport function preloadAllModels(nodeData) {\n  if (!nodeData) return;\n  \n  if (nodeData.articles) {\n    nodeData.articles.forEach(article => {\n      if (article.modelPath && article.modelPath.trim() !== '') {\n        preloadGLBModel(article.modelPath);\n      }\n    });\n  }\n  \n  if (nodeData.glossary) {\n    nodeData.glossary.forEach(glossary => {\n      if (glossary.modelPath && glossary.modelPath.trim() !== '') {\n        preloadGLBModel(glossary.modelPath);\n      }\n    });\n  }\n}\n\nexport function preloadImages(nodeData) {\n  if (!nodeData) return Promise.resolve();\n  \n  const imagePromises = [];\n  const batchSize = 6;\n  const articles = nodeData.articles || [];\n  \n  for (let i = 0; i < articles.length; i += batchSize) {\n    const batch = articles.slice(i, i + batchSize);\n    batch.forEach(article => {\n      if (article.imageUrl) {\n        const img = new Image();\n        img.crossOrigin = 'anonymous';\n        const promise = new Promise((resolve) => {\n          img.onload = resolve;\n          img.onerror = resolve;\n          img.src = article.imageUrl;\n        });\n        imagePromises.push(promise);\n      }\n    });\n    \n    if (i + batchSize < articles.length) {\n      imagePromises.push(new Promise(resolve => setTimeout(resolve, 10)));\n    }\n  }\n  \n  return Promise.allSettled(imagePromises);\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;AAEA,IAAM,kBAAkB,IAAI;AAErB,SAAS,gBAAgB,IAAI;IAClC,IAAI,CAAC,QAAQ,gBAAgB,GAAG,CAAC,OAAO;QACtC;IACF;IAEA,gBAAgB,GAAG,CAAC;IAEpB,IAAI;QACF,sKAAO,CAAC,OAAO,CAAC;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,AAAC,2BAA+B,OAAL,MAAK,MAAI;QACjD,eAAgB,CAAA,SAAM,CAAC;IACzB;AACF;AAEO,SAAS,iBAAiB,QAAQ;IACvC,IAAI,CAAC,UAAU;IAEf,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,SAAA;YACxB,IAAI,QAAQ,SAAS,IAAI,QAAQ,SAAS,CAAC,IAAI,OAAO,IAAI;gBACxD,gBAAgB,QAAQ,SAAS;YACnC;QACF;IACF;IAEA,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,SAAA;YACxB,IAAI,SAAS,SAAS,IAAI,SAAS,SAAS,CAAC,IAAI,OAAO,IAAI;gBAC1D,gBAAgB,SAAS,SAAS;YACpC;QACF;IACF;AACF;AAEO,SAAS,cAAc,QAAQ;IACpC,IAAI,CAAC,UAAU,OAAO,QAAQ,OAAO;IAErC,IAAM,gBAAgB,EAAE;IACxB,IAAM,YAAY;IAClB,IAAM,WAAW,SAAS,QAAQ,IAAI,EAAE;IAExC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,KAAK,UAAW;QACnD,IAAM,QAAQ,SAAS,KAAK,CAAC,GAAG,IAAI;QACpC,MAAM,OAAO,CAAC,SAAA;YACZ,IAAI,QAAQ,QAAQ,EAAE;gBACpB,IAAM,MAAM,IAAI;gBAChB,IAAI,WAAW,GAAG;gBAClB,IAAM,UAAU,IAAI,QAAQ,SAAC;oBAC3B,IAAI,MAAM,GAAG;oBACb,IAAI,OAAO,GAAG;oBACd,IAAI,GAAG,GAAG,QAAQ,QAAQ;gBAC5B;gBACA,cAAc,IAAI,CAAC;YACrB;QACF;QAEA,IAAI,IAAI,YAAY,SAAS,MAAM,EAAE;YACnC,cAAc,IAAI,CAAC,IAAI,QAAQ,SAAA;uBAAW,WAAW,SAAS;;QAChE;IACF;IAEA,OAAO,QAAQ,UAAU,CAAC;AAC5B"}},
    {"offset": {"line": 5149, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/utils/WalkThroughController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\n\nexport function WalkThroughController({ nodeData, processedData, isActive }) {\n  const { camera } = useThree();\n  const [, setSelectedNode] = useStore('selectedNodeStore', null);\n  const intervalRef = useRef(null);\n  const currentArticleRef = useRef(null);\n  const visitedArticlesRef = useRef(new Set());\n  const targetNodeRef = useRef(null);\n  const animationProgressRef = useRef(0);\n  const isAnimatingRef = useRef(false);\n  const startPositionRef = useRef(null);\n  const targetPositionRef = useRef(null);\n  const animationStartTimeRef = useRef(0);\n\n  useEffect(() => {\n    if (!isActive || !nodeData || !processedData) {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      isAnimatingRef.current = false;\n      animationProgressRef.current = 0;\n      if (!isActive) {\n        setSelectedNode(null);\n        currentArticleRef.current = null;\n        visitedArticlesRef.current.clear();\n      }\n      return;\n    }\n\n    const allArticles = nodeData.articles || [];\n    const allGlossary = nodeData.glossary || [];\n    const allNodes = [...allArticles, ...allGlossary];\n    if (allNodes.length === 0) return;\n\n    const findNearestNode = (currentNode) => {\n      if (!currentNode) {\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      const currentDataNode = processedData.nodeMap.get(currentNode.id);\n      if (!currentDataNode || !currentDataNode.position) {\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      const currentPos = new THREE.Vector3(...currentDataNode.position);\n      let nearestNode = null;\n      let nearestDistance = Infinity;\n\n      allNodes.forEach(node => {\n        if (node.id === currentNode.id) return;\n        if (visitedArticlesRef.current.size < allNodes.length && visitedArticlesRef.current.has(node.id)) {\n          return;\n        }\n\n        const dataNode = processedData.nodeMap.get(node.id);\n        if (!dataNode || !dataNode.position) return;\n\n        const nodePos = new THREE.Vector3(...dataNode.position);\n        const distance = currentPos.distanceTo(nodePos);\n\n        if (distance < nearestDistance) {\n          nearestDistance = distance;\n          nearestNode = node;\n        }\n      });\n\n      if (!nearestNode || visitedArticlesRef.current.size >= allNodes.length) {\n        visitedArticlesRef.current.clear();\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      return nearestNode;\n    };\n\n    const visitNode = (nodeItem) => {\n      const node = processedData.nodeMap.get(nodeItem.id);\n      if (!node || !node.position) return;\n\n      targetNodeRef.current = node;\n      const targetPos = new THREE.Vector3(...node.position);\n      \n      const currentDistance = camera.position.distanceTo(targetPos);\n      const overviewDistance = Math.max(14, Math.min(20, currentDistance * 0.8));\n      \n      const direction = new THREE.Vector3().subVectors(camera.position, targetPos).normalize();\n      const cameraTarget = new THREE.Vector3().addVectors(targetPos, direction.multiplyScalar(overviewDistance));\n      \n      cameraTarget.y = Math.max(cameraTarget.y, targetPos.y + 5);\n\n      startPositionRef.current = camera.position.clone();\n      targetPositionRef.current = cameraTarget;\n      animationStartTimeRef.current = Date.now();\n      animationProgressRef.current = 0;\n      isAnimatingRef.current = true;\n\n      setTimeout(() => {\n        setSelectedNode({ id: nodeItem.id, ts: Date.now() });\n      }, 7500);\n    };\n\n    const nextNode = () => {\n      const nearestNode = findNearestNode(currentArticleRef.current);\n      if (nearestNode) {\n        currentArticleRef.current = nearestNode;\n        visitedArticlesRef.current.add(nearestNode.id);\n        visitNode(nearestNode);\n      }\n    };\n\n    if (!currentArticleRef.current) {\n      currentArticleRef.current = allNodes[Math.floor(Math.random() * allNodes.length)];\n      visitedArticlesRef.current.add(currentArticleRef.current.id);\n      visitNode(currentArticleRef.current);\n    }\n\n    intervalRef.current = setInterval(() => {\n      if (!isAnimatingRef.current) {\n        nextNode();\n      }\n    }, 30000);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      isAnimatingRef.current = false;\n    };\n  }, [isActive, nodeData, processedData, camera, setSelectedNode]);\n\n  useFrame(() => {\n    if (!isActive || !isAnimatingRef.current || !targetPositionRef.current || !startPositionRef.current) {\n      return;\n    }\n\n    const elapsed = (Date.now() - animationStartTimeRef.current) / 20000;\n    animationProgressRef.current = Math.min(elapsed, 1);\n\n    const easeInOutCubic = (t) => {\n      return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n    };\n\n    const easedProgress = easeInOutCubic(animationProgressRef.current);\n\n    camera.position.lerpVectors(\n      startPositionRef.current,\n      targetPositionRef.current,\n      easedProgress\n    );\n\n    if (targetNodeRef.current && targetNodeRef.current.position) {\n      const targetPos = new THREE.Vector3(...targetNodeRef.current.position);\n      \n      const direction = new THREE.Vector3().subVectors(targetPos, camera.position).normalize();\n      const up = new THREE.Vector3(0, 1, 0);\n      const right = new THREE.Vector3().crossVectors(up, direction).normalize();\n      const correctedUp = new THREE.Vector3().crossVectors(direction, right).normalize();\n      \n      const targetMatrix = new THREE.Matrix4().lookAt(camera.position, targetPos, correctedUp);\n      const targetQuaternion = new THREE.Quaternion().setFromRotationMatrix(targetMatrix);\n      \n      const rotationOffset = Math.sin(easedProgress * Math.PI) * 0.15;\n      const offsetQuaternion = new THREE.Quaternion().setFromAxisAngle(up, rotationOffset);\n      targetQuaternion.multiply(offsetQuaternion);\n      \n      camera.quaternion.slerp(targetQuaternion, 0.05);\n    }\n    \n    camera.updateProjectionMatrix();\n\n    if (animationProgressRef.current >= 1) {\n      isAnimatingRef.current = false;\n    }\n  });\n\n  return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5357, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/components/homePageComponents/titleBox.jsx"],"sourcesContent":["import { useStore } from \"usestore-react\";\nimport { useEffect } from \"react\";\nimport \"./titleBox.scss\";\n\nconst TitleBox = () => {\n  const [handleOpen, setHandleOpen] = useStore(\"handleOpen\");\n  const [closeCloseUpVar, setCloseCloseUpVar] = useStore(\"closeCloseUpVar\");\n  const [handleTitleBox, setHandelTitleBox] = useStore(\"handleTitleBox\");\n  const [clicked, setClicked] = useStore(\"clicked\");\n  const [handleClicks, setHandleClicks] = useStore(\"handleClicks\");\n  const [keyWordOne, setKeyWordOne] = useStore(\"keyWordOne\");\n  const [keyWordTwo, setKeyWordTwo] = useStore(\"keyWordTwo\");\n  const [keyWordTree, setKeyWordTree] = useStore(\"keyWordTree\");\n  const [keyWordFour, setKeyWordFour] = useStore(\"keyWordFour\");\n  const [keyWordFive, setKeyWordFive] = useStore(\"keyWordFive\");\n\n  function openModal2() {\n    setHandleOpen(true);\n  }\n  function closeCloseUp() {\n    setHandelTitleBox(false);\n    setHandleClicks(0);\n    setClicked(0);\n    setKeyWordOne(false);\n    setKeyWordTwo(false);\n    setKeyWordTree(false);\n    setKeyWordFour(false);\n    setKeyWordFive(false);\n  }\n  function keyWordClick() {\n    setKeyWordOne(!keyWordOne);\n    console.log(keyWordOne);\n  }\n  function keyWordClickTwo() {\n    setKeyWordTwo(!keyWordTwo);\n  }\n  function keyWordClickTree() {\n    setKeyWordTree(!keyWordTree);\n  }\n  function keyWordClickFour() {\n    setKeyWordTree(!keyWordFour);\n  }\n  function keyWordClickFive() {\n    setKeyWordTree(!keyWordFive);\n  }\n\n  return (\n    <div className=\"titlebox\">\n      <div className=\"closeButton\" onClick={closeCloseUp}>\n        x\n      </div>\n      <h2>Title of The Entry</h2>\n      <div className=\"header\">\n        <div>Author</div>\n        <div className=\"readMore\" onClick={openModal2}>\n          read more\n        </div>\n      </div>\n      <div className=\"keywordsContainer\">\n        <div className=\"keyword keyword1\" onClick={keyWordClick}>\n          keyword 1\n        </div>\n        <div className=\"keyword keyword2\" onClick={keyWordClickTwo}>\n          keyword 2\n        </div>\n        <div className=\"keyword keyword3\" onClick={keyWordClickTree}>\n          keyword 3\n        </div>\n        <div className=\"keyword keyword4\" onClick={keyWordClickFour}>\n          keyword 4\n        </div>\n        <div className=\"keyword keyword5\" onClick={keyWordClickFive}>\n          keyword 5\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default TitleBox;\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;;;;;AAGA,IAAM,WAAW;QAYN,aAAT,SAAS;QACP,cAAc;IAChB;QACS,eAAT,SAAS;QACP,kBAAkB;QAClB,gBAAgB;QAChB,WAAW;QACX,cAAc;QACd,cAAc;QACd,eAAe;QACf,eAAe;QACf,eAAe;IACjB;QACS,eAAT,SAAS;QACP,cAAc,CAAC;QACf,QAAQ,GAAG,CAAC;IACd;QACS,kBAAT,SAAS;QACP,cAAc,CAAC;IACjB;QACS,mBAAT,SAAS;QACP,eAAe,CAAC;IAClB;QACS,mBAAT,SAAS;QACP,eAAe,CAAC;IAClB;QACS,mBAAT,SAAS;QACP,eAAe,CAAC;IAClB;;IAvCA,IAAoC,qLAAA,IAAA,iKAAQ,EAAC,mBAAtC,aAA6B,cAAjB,gBAAiB;IACpC,IAA8C,sLAAA,IAAA,iKAAQ,EAAC,wBAAhD,kBAAuC,eAAtB,qBAAsB;IAC9C,IAA4C,sLAAA,IAAA,iKAAQ,EAAC,uBAA9C,iBAAqC,eAArB,oBAAqB;IAC5C,IAA8B,sLAAA,IAAA,iKAAQ,EAAC,gBAAhC,UAAuB,eAAd,aAAc;IAC9B,IAAwC,sLAAA,IAAA,iKAAQ,EAAC,qBAA1C,eAAiC,eAAnB,kBAAmB;IACxC,IAAoC,sLAAA,IAAA,iKAAQ,EAAC,mBAAtC,aAA6B,eAAjB,gBAAiB;IACpC,IAAoC,sLAAA,IAAA,iKAAQ,EAAC,mBAAtC,aAA6B,eAAjB,gBAAiB;IACpC,IAAsC,sLAAA,IAAA,iKAAQ,EAAC,oBAAxC,cAA+B,eAAlB,iBAAkB;IACtC,IAAsC,sLAAA,IAAA,iKAAQ,EAAC,oBAAxC,cAA+B,eAAlB,iBAAkB;IACtC,IAAsC,sLAAA,IAAA,iKAAQ,EAAC,oBAAxC,cAA+B,eAAlB,iBAAkB;IAgCtC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;gBAAc,SAAS;0BAAc;;;;;;0BAGpD,6LAAC;0BAAG;;;;;;0BACJ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAI;;;;;;kCACL,6LAAC;wBAAI,WAAU;wBAAW,SAAS;kCAAY;;;;;;;;;;;;0BAIjD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;wBAAmB,SAAS;kCAAc;;;;;;kCAGzD,6LAAC;wBAAI,WAAU;wBAAmB,SAAS;kCAAiB;;;;;;kCAG5D,6LAAC;wBAAI,WAAU;wBAAmB,SAAS;kCAAkB;;;;;;kCAG7D,6LAAC;wBAAI,WAAU;wBAAmB,SAAS;kCAAkB;;;;;;kCAG7D,6LAAC;wBAAI,WAAU;wBAAmB,SAAS;kCAAkB;;;;;;;;;;;;;;;;;;AAMrE;GAzEM;;QACgC,iKAAQ;QACE,iKAAQ;QACV,iKAAQ;QACtB,iKAAQ;QACE,iKAAQ;QACZ,iKAAQ;QACR,iKAAQ;QACN,iKAAQ;QACR,iKAAQ;QACR,iKAAQ;;;KAV1C;uCA0ES"}},
    {"offset": {"line": 5545, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/app/living-continuity/page.js"],"sourcesContent":["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { OrbitControls, Environment } from \"@react-three/drei\";\nimport { useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport React, { useEffect, Suspense, useMemo, useCallback, useState } from \"react\";\nimport OptimizedCanvas from \"../../components/utils/OptimizedCanvas\";\nimport ConnectionController from \"../../components/connectionControler\";\nimport ElementOpacityController from \"../../components/utils/ElementOpacityController\";\nimport Modal from \"react-modal\";\nimport { useStore } from \"usestore-react\";\nimport TopBar from \"../../components/treeComponents/topbar\";\nimport LivingContinuityButton from \"../../components/livingContinuityButton\";\nimport { suppressTextureErrors } from \"../../components/utils/suppressTextureErrors\";\nimport { processNodeData } from \"../../components/utils/d3DataManager\";\nimport ArticleNodeTemplate from \"../../components/templates/ArticleNodeTemplate\";\nimport { GlossaryNodeTemplate } from \"../../components/templates/GlossaryNodeTemplate\";\nimport { initializeLoadingState, completeLoading } from \"../../components/utils/LoadingStateManager\";\nimport { CameraInteractionTracker } from \"../../components/utils/CameraInteractionTracker\";\nimport { ConnectionTransitionController } from \"../../components/utils/ConnectionTransitionController\";\nimport { preloadAllModels, preloadImages } from \"../../components/utils/ModelPreloader\";\nimport { WalkThroughController } from \"../../components/utils/WalkThroughController\";\nimport TitleBox from \"../../components/homePageComponents/titleBox\";\nimport \"./welcomeModal.scss\";\n\nconst selectedComponents = {};\nconst glossaryShellComponents = {};\nlet initialCameraHasBeenSet = false;\n\nconst getSelectedComponent = async (id) => {\n  if (!selectedComponents[id]) {\n    try {\n      const lowerId = id.toLowerCase();\n      const module = await import(`../../models/entries_selected/${lowerId}`);\n      const exportName = `${id}Selected2`;\n      selectedComponents[id] = module[exportName] || module.default || module[`${id}Selected`];\n    } catch (e) {\n      console.warn(`Could not load selected component for ${id}:`, e);\n      return null;\n    }\n  }\n  return selectedComponents[id];\n};\n\nconst getGlossaryShellComponent = async (path) => {\n  if (!path) return null;\n  let key = path.replace('../glossaryShell/', '');\n  if (!glossaryShellComponents[key]) {\n    try {\n      let module;\n      try {\n        module = await import(`../../models/glossaryShell/${key}`);\n      } catch (e1) {\n        const normalizedKey = key.replace(/-/g, '');\n        try {\n          module = await import(`../../models/glossaryShell/${normalizedKey}`);\n          key = normalizedKey;\n        } catch (e2) {\n          if (key === 'racialbias') {\n            module = await import(`../../models/glossaryShell/racialbias`);\n          } else {\n            throw e2;\n          }\n        }\n      }\n      const pascalCase = key\n        .split(/[-_]/)\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join('');\n      glossaryShellComponents[key] = module.default || module[pascalCase] || Object.values(module).find(v => typeof v === 'function');\n    } catch (e) {\n      console.warn(`Could not load glossary shell for ${key}:`, e);\n      return null;\n    }\n  }\n  return glossaryShellComponents[key];\n};\n\n\nconst HomePage = () => {\n  const [cameraOptions] = useStore('cameraOptions');\n  const [sceneRotation] = useStore('livingContinuity_sceneRotation', false);\n  const [walkThroughActive] = useStore('walkThroughActive', false);\n  const showAllLines = false;\n  const [camera, setCamera] = useState(true);\n  const [modalIsOpen, setOpen] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [nodeData, setNodeData] = useState(null);\n  const [processedData, setProcessedData] = useState(null);\n  const [selectedComponentsMap, setSelectedComponentsMap] = useState({});\n  const [glossaryShellComponentsMap, setGlossaryShellComponentsMap] = useState({});\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  const [handleTitleBox, setHandleTitleBox] = useStore('handleTitleBox', false);\n  const [environmentLoaded, setEnvironmentLoaded] = useState(false);\n  const [initialLoad, setInitialLoad] = useState(true);\n  const [modalInitialized, setModalInitialized] = useState(false);\n  const getInitialCameraPosition = () => {\n    const radius = 18;\n    const height = 6;\n    const theta = Math.random() * Math.PI * 2;\n    const x = radius * Math.cos(theta);\n    const z = radius * Math.sin(theta);\n    return [x, height, z];\n  };\n  \n  const [initialCameraPosition] = useState(() => getInitialCameraPosition());\n  \n  const frameloopMode = camera || cameraInteraction || initialLoad ? 'always' : 'demand';\n  \n  useEffect(() => {\n    if (typeof window !== 'undefined' && document.getElementById('root')) {\n      try {\n        Modal.setAppElement('#root');\n        setModalInitialized(true);\n        setOpen(true);\n      } catch (error) {\n        console.warn('Modal initialization warning:', error);\n      }\n    }\n    setHandleTitleBox(true);\n  }, [setHandleTitleBox]);\n\n  useEffect(() => {\n    fetch('/data/nodes.json')\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(`HTTP error! status: ${res.status}`);\n        }\n        return res.json();\n      })\n      .then(data => {\n        setNodeData(data);\n        const processed = processNodeData(data);\n        setProcessedData(processed);\n        \n        const totalNodes = (data.articles?.length || 0) + (data.glossary?.length || 0);\n        initializeLoadingState(totalNodes);\n        \n        preloadAllModels(data);\n        preloadImages(data).catch(() => {});\n        \n        const loadComponentsInBatches = async () => {\n          const batchSize = 10;\n          const allArticles = data.articles || [];\n          const allGlossary = data.glossary || [];\n          \n          const articlePromises = [];\n          for (let i = 0; i < allArticles.length; i += batchSize) {\n            const batch = allArticles.slice(i, i + batchSize);\n            const batchPromise = Promise.all(\n              batch.map(async (article) => {\n                if (article.selectedModelPath) {\n                  try {\n                    const component = await getSelectedComponent(article.id);\n                    return { id: article.id, component };\n                  } catch (e) {\n                    console.warn(`Failed to load selected component for ${article.id}:`, e);\n                    return { id: article.id, component: null };\n                  }\n                }\n                return { id: article.id, component: null };\n              })\n            ).then(batchResults => {\n              setSelectedComponentsMap(prev => {\n                const updated = { ...prev };\n                batchResults.forEach(({ id, component }) => {\n                  if (component) updated[id] = component;\n                });\n                return updated;\n              });\n            });\n            articlePromises.push(batchPromise);\n          }\n          \n          const glossaryPromises = [];\n          for (let i = 0; i < allGlossary.length; i += batchSize) {\n            const batch = allGlossary.slice(i, i + batchSize);\n            const batchPromise = Promise.all(\n              batch.map(async (glossary) => {\n                if (glossary.glossaryShellPath) {\n                  try {\n                    const component = await getGlossaryShellComponent(glossary.glossaryShellPath);\n                    return { id: glossary.id, component };\n                  } catch (e) {\n                    console.warn(`Failed to load glossary shell for ${glossary.id}:`, e);\n                    return { id: glossary.id, component: null };\n                  }\n                }\n                return { id: glossary.id, component: null };\n              })\n            ).then(batchResults => {\n              setGlossaryShellComponentsMap(prev => {\n                const updated = { ...prev };\n                batchResults.forEach(({ id, component }) => {\n                  if (component) updated[id] = component;\n                });\n                return updated;\n              });\n            });\n            glossaryPromises.push(batchPromise);\n          }\n          \n          await Promise.allSettled([...articlePromises, ...glossaryPromises]);\n          completeLoading();\n        };\n        \n        loadComponentsInBatches().catch(err => {\n          console.error('Error loading components:', err);\n          completeLoading();\n        });\n      })\n      .catch(err => {\n        console.error('Failed to load node data:', err);\n        setNodeData({ articles: [], glossary: [] });\n        setProcessedData({ nodes: [], links: [], nodeMap: new Map() });\n      });\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setEnvironmentLoaded(true);\n      setTimeout(() => {\n        setInitialLoad(false);\n      }, 2000);\n    }, 500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    const cleanup = suppressTextureErrors();\n    return cleanup;\n  }, []);\n\n  const handleOpen = useCallback(() => {\n    setOpen(prev => !prev);\n  }, []);\n\n  const titleSetters = useMemo(() => {\n    if (!nodeData) return {};\n    const setters = {};\n    \n    nodeData.articles.forEach(article => {\n      setters[article.id] = () => setTitle(article.title);\n    });\n    \n    nodeData.glossary.forEach(glossary => {\n      setters[glossary.id] = () => setTitle(glossary.title || '');\n    });\n    \n    return setters;\n  }, [nodeData]);\n\n  const setTitleDefault = useCallback(() => setTitle(\"\"), []);\n\n  const SceneBackground = React.memo(() => {\n    const { scene } = useThree();\n    useEffect(() => {\n      scene.background = new THREE.Color(0x1C1C1C);\n    }, [scene]);\n    return null;\n  });\n  SceneBackground.displayName = 'SceneBackground';\n\n  const CameraDolly = React.memo(({ cameraOptions }) => {\n    const state = useThree();\n    const [selectedNode] = useStore('selectedNodeStore', null);\n    \n    useEffect(() => {\n      if (selectedNode) {\n        return;\n      }\n      \n      if (!cameraOptions) {\n        return;\n      }\n      \n      if (!initialCameraHasBeenSet) {\n        return;\n      }\n      \n      const presets = {\n        top: [0.267, 14.68, 0.6],\n        reset: [5.29, -1.59, 6],\n        overview: [0, 6, 18],\n      };\n\n      const nextPosition = presets[cameraOptions];\n      if (!nextPosition) {\n        return;\n      }\n\n      state.camera.position.set(...nextPosition);\n      state.camera.lookAt(0, 0, 0);\n      state.camera.updateProjectionMatrix();\n    }, [cameraOptions, state.camera, selectedNode]);\n    return null;\n  });\n\n  const InitialCameraSetup = React.memo(({ initialPosition }) => {\n    const { camera, set } = useThree();\n    const initialPositionRef = React.useRef(initialPosition);\n    \n    useEffect(() => {\n      if (!initialCameraHasBeenSet && initialPositionRef.current) {\n        const timer = setTimeout(() => {\n          if (!initialCameraHasBeenSet) {\n            camera.position.set(...initialPositionRef.current);\n            camera.lookAt(0, 0, 0);\n            camera.updateProjectionMatrix();\n            set({ camera });\n            initialCameraHasBeenSet = true;\n          }\n        }, 50);\n        return () => clearTimeout(timer);\n      }\n    }, []);\n    \n    return null;\n  });\n  InitialCameraSetup.displayName = 'InitialCameraSetup';\n  \n  CameraDolly.displayName = 'CameraDolly';\n\n  return (\n    <>\n      {modalInitialized && (\n        <Modal \n          isOpen={modalIsOpen} \n          contentLabel=\"Welcome Modal\"\n          shouldCloseOnOverlayClick={true}\n          shouldCloseOnEsc={false}\n          ariaHideApp={true}\n          className=\"welcomeModalContent\"\n          overlayClassName=\"welcomeModalOverlay\"\n          onRequestClose={handleOpen}\n          closeTimeoutMS={150}\n        >\n          <div onClick={handleOpen}>\n            <LivingContinuityButton onClick={handleOpen} />\n          </div>\n        </Modal>\n      )}\n      {(!processedData || !nodeData) && (\n        <div className=\"welcomeLoading\">\n          Loading...\n        </div>\n      )}\n      {handleTitleBox && <TitleBox />}\n      <div className=\"welcomeTopbarWrapper\">\n        <TopBar title={title} />\n      </div>\n\n      <div className=\"welcomeCanvasWrapper\">\n        <OptimizedCanvas\n          frameloop={frameloopMode}\n        >\n        <SceneBackground />\n        <InitialCameraSetup initialPosition={initialCameraPosition} />\n        <ambientLight intensity={1} />\n        {environmentLoaded && (\n          <Suspense fallback={null}>\n            <Environment preset=\"city\" />\n          </Suspense>\n        )}\n        <CameraDolly cameraOptions={cameraOptions} />\n        {processedData && nodeData && (\n          <>\n            <WalkThroughController \n              nodeData={nodeData} \n              processedData={processedData} \n              isActive={walkThroughActive}\n            />\n            <ElementOpacityController />\n            <CameraInteractionTracker />\n            <ConnectionTransitionController />\n\n            {nodeData.articles.map((article) => {\n              const node = processedData.nodeMap.get(article.id);\n              if (!node) return null;\n              \n              const SelectedComponent = selectedComponentsMap[article.id];\n              const setTitleFn = titleSetters[article.id] || setTitleDefault;\n              \n              return (\n                <Suspense key={article.id} fallback={null}>\n                  <ArticleNodeTemplate\n                    nodeData={node}\n                    showAllLines={showAllLines}\n                    setTitle={setTitleFn}\n                    setDefault={setTitleDefault}\n                    selectedComponent={SelectedComponent}\n                  />\n                </Suspense>\n              );\n            })}\n\n            {nodeData.glossary.map((glossary) => {\n              const node = processedData.nodeMap.get(glossary.id);\n              if (!node) return null;\n              \n              const GlossaryShellComponent = glossaryShellComponentsMap[glossary.id];\n              const setTitleFn = titleSetters[glossary.id] || setTitleDefault;\n              \n              return (\n                <Suspense key={glossary.id} fallback={null}>\n                  <GlossaryNodeTemplate\n                    nodeData={node}\n                    showAllLines={showAllLines}\n                    title={glossary.title}\n                    setTitle={setTitleFn}\n                    setDefault={setTitleDefault}\n                    glossaryShellComponent={GlossaryShellComponent}\n                  />\n                </Suspense>\n              );\n            })}\n\n            <ConnectionController processedData={processedData} />\n          </>\n        )}\n\n        <OrbitControls\n          autoRotate={sceneRotation && !walkThroughActive ? true : false}\n          autoRotateSpeed={0.5}\n          minDistance={1}\n          maxDistance={60}\n          enableDamping={true}\n          dampingFactor={0.08}\n          enablePan={!walkThroughActive}\n          makeDefault={false}\n          rotateSpeed={0.8}\n          panSpeed={0.8}\n          zoomSpeed={0.8}\n          enableRotate={!walkThroughActive}\n        />\n        </OptimizedCanvas>\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;\n"],"names":[],"mappings":"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"}}]
}