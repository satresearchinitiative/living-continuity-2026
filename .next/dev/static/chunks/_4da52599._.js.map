{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/PassiveOrbitControls.jsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { OrbitControls as DreiOrbitControls } from '@react-three/drei';\nimport { useThree } from '@react-three/fiber';\n\nexport default function PassiveOrbitControls(props) {\n  const { gl } = useThree();\n\n  useEffect(() => {\n    const domElement = gl.domElement;\n    if (!domElement) return;\n\n    const makeEventsPassive = () => {\n      const passiveListeners = [];\n      const originalAddEventListener = domElement.addEventListener.bind(domElement);\n      const originalRemoveEventListener = domElement.removeEventListener.bind(domElement);\n      \n      const passiveEvents = ['wheel', 'touchstart', 'touchmove'];\n      \n      domElement.addEventListener = function(type, listener, options) {\n        if (passiveEvents.includes(type)) {\n          passiveListeners.push({ type, listener, options });\n          const passiveOptions = typeof options === 'boolean' \n            ? { passive: true, capture: options }\n            : options && typeof options === 'object'\n            ? { ...options, passive: true }\n            : { passive: true };\n          return originalAddEventListener(type, listener, passiveOptions);\n        }\n        return originalAddEventListener(type, listener, options);\n      };\n\n      domElement.removeEventListener = function(type, listener, options) {\n        if (passiveEvents.includes(type)) {\n          const index = passiveListeners.findIndex(l => l.listener === listener && l.type === type);\n          if (index !== -1) {\n            passiveListeners.splice(index, 1);\n          }\n        }\n        return originalRemoveEventListener(type, listener, options);\n      };\n    };\n\n    makeEventsPassive();\n\n    return () => {\n      if (domElement.addEventListener && domElement.addEventListener !== EventTarget.prototype.addEventListener) {\n        delete domElement.addEventListener;\n        domElement.addEventListener = EventTarget.prototype.addEventListener.bind(domElement);\n      }\n      if (domElement.removeEventListener && domElement.removeEventListener !== EventTarget.prototype.removeEventListener) {\n        delete domElement.removeEventListener;\n        domElement.removeEventListener = EventTarget.prototype.removeEventListener.bind(domElement);\n      }\n    };\n  }, [gl]);\n\n  return <DreiOrbitControls {...props} />;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;;;;;;AAEe,SAAS,qBAAqB,KAAK;;IAChD,IAAM,AAAE,KAAO,IAAA,8NAAQ,IAAf;IAER,IAAA,0KAAS;0CAAC;YACR,IAAM,aAAa,GAAG,UAAU;YAChC,IAAI,CAAC,YAAY;YAEjB,IAAM;oEAAoB;oBACxB,IAAM,mBAAmB,EAAE;oBAC3B,IAAM,2BAA2B,WAAW,gBAAgB,CAAC,IAAI,CAAC;oBAClE,IAAM,8BAA8B,WAAW,mBAAmB,CAAC,IAAI,CAAC;oBAExE,IAAM,gBAAgB;wBAAC;wBAAS;wBAAc;qBAAY;oBAE1D,WAAW,gBAAgB,GAAG,2BAAS,IAAI,EAAE,QAAQ,EAAE,OAAO;wBAC5D,IAAI,cAAc,QAAQ,CAAC,OAAO;4BAChC,iBAAiB,IAAI,CAAC;gCAAE,MAAA;gCAAM,UAAA;gCAAU,SAAA;4BAAQ;4BAChD,IAAM,iBAAiB,OAAO,YAAY,YACtC;gCAAE,SAAS;gCAAM,SAAS;4BAAQ,IAClC,WAAW,CAAA,OAAO,wCAAP,IAAA,2JAAc,EAAP,QAAM,MAAM,WAC9B,wVAAK;gCAAS,SAAS;iCACvB;gCAAE,SAAS;4BAAK;4BACpB,OAAO,yBAAyB,MAAM,UAAU;wBAClD;wBACA,OAAO,yBAAyB,MAAM,UAAU;oBAClD;oBAEA,WAAW,mBAAmB;4EAAG,SAAS,IAAI,EAAE,QAAQ,EAAE,OAAO;4BAC/D,IAAI,cAAc,QAAQ,CAAC,OAAO;gCAChC,IAAM,QAAQ,iBAAiB,SAAS;8FAAC,SAAA;+CAAK,EAAE,QAAQ,KAAK,YAAY,EAAE,IAAI,KAAK;;;gCACpF,IAAI,UAAU,CAAC,GAAG;oCAChB,iBAAiB,MAAM,CAAC,OAAO;gCACjC;4BACF;4BACA,OAAO,4BAA4B,MAAM,UAAU;wBACrD;;gBACF;;YAEA;YAEA;kDAAO;oBACL,IAAI,WAAW,gBAAgB,IAAI,WAAW,gBAAgB,KAAK,YAAY,SAAS,CAAC,gBAAgB,EAAE;wBACzG,OAAO,WAAW,gBAAgB;wBAClC,WAAW,gBAAgB,GAAG,YAAY,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC;oBAC5E;oBACA,IAAI,WAAW,mBAAmB,IAAI,WAAW,mBAAmB,KAAK,YAAY,SAAS,CAAC,mBAAmB,EAAE;wBAClH,OAAO,WAAW,mBAAmB;wBACrC,WAAW,mBAAmB,GAAG,YAAY,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC;oBAClF;gBACF;;QACF;yCAAG;QAAC;KAAG;IAEP,qBAAO,6LAAC,qLAAiB,6KAAK;;;;;AAChC;GArDwB;;QACP,8NAAQ;;;KADD"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/OptimizedCanvas.jsx"],"sourcesContent":["'use client';\n\nimport { Canvas } from \"@react-three/fiber\";\nimport { useMemo } from \"react\";\n\nconst createCleanObject = (source) => {\n  if (!source || typeof source !== 'object' || Array.isArray(source)) {\n    return {};\n  }\n  const clean = {};\n  try {\n    for (const key in source) {\n      if (source.hasOwnProperty(key)) {\n        const value = source[key];\n        if (value !== undefined && value !== null) {\n          if (typeof value === 'object' && !Array.isArray(value)) {\n            clean[key] = createCleanObject(value);\n          } else if (typeof value !== 'object') {\n            clean[key] = value;\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn('[OptimizedCanvas] Error creating clean object:', e);\n  }\n  return clean;\n};\n\nexport default function OptimizedCanvas({ children, frameloop, style, camera, orthographic }) {\n  const glConfig = useMemo(() => {\n    try {\n      return {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n        stencil: false,\n        depth: true,\n        logarithmicDepthBuffer: false,\n        preserveDrawingBuffer: false,\n        failIfMajorPerformanceCaveat: false,\n      };\n    } catch (e) {\n      console.error('[OptimizedCanvas] Error creating glConfig:', e);\n      return {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n      };\n    }\n  }, []);\n\n  const canvasProps = useMemo(() => {\n    const builtProps = {\n      dpr: [1, 1.5],\n      frameloop: frameloop || 'demand',\n      gl: (glConfig && typeof glConfig === 'object' && !Array.isArray(glConfig)) ? glConfig : {\n        antialias: true,\n        alpha: false,\n        powerPreference: 'high-performance',\n      },\n    };\n    \n    if (orthographic !== undefined) {\n      builtProps.orthographic = orthographic;\n    }\n    \n    try {\n      if (style !== undefined && style !== null && typeof style === 'object' && !Array.isArray(style)) {\n        builtProps.style = createCleanObject(style);\n      }\n      \n      if (camera !== undefined && camera !== null && typeof camera === 'object' && !Array.isArray(camera)) {\n        builtProps.camera = createCleanObject(camera);\n      }\n    } catch (e) {\n      console.error('[OptimizedCanvas] Error building canvasProps:', e);\n    }\n    \n    return builtProps;\n  }, [frameloop, style, camera, glConfig, orthographic]);\n\n  if (!canvasProps || typeof canvasProps !== 'object' || Array.isArray(canvasProps)) {\n    console.error('[OptimizedCanvas] Invalid canvasProps, using defaults:', canvasProps);\n    return (\n      <Canvas dpr={[1, 1.5]} frameloop=\"demand\">\n        {children}\n      </Canvas>\n    );\n  }\n\n  if (!Canvas) {\n    console.error('[OptimizedCanvas] Canvas component not available');\n    return null;\n  }\n\n  const safeCanvasProps = useMemo(() => {\n    const clean = createCleanObject(canvasProps);\n    \n    if (!clean.dpr || !Array.isArray(clean.dpr)) {\n      clean.dpr = [1, 1.5];\n    }\n    if (!clean.frameloop || typeof clean.frameloop !== 'string') {\n      clean.frameloop = 'demand';\n    }\n    if (!clean.gl || typeof clean.gl !== 'object' || Array.isArray(clean.gl)) {\n      clean.gl = glConfig;\n    }\n    \n    return clean;\n  }, [canvasProps, glConfig]);\n\n  try {\n    return (\n      <Canvas {...safeCanvasProps}>\n        {children}\n      </Canvas>\n    );\n  } catch (e) {\n    console.error('[OptimizedCanvas] Error rendering Canvas:', e, 'safeCanvasProps:', safeCanvasProps);\n    return (\n      <Canvas dpr={[1, 1.5]} frameloop=\"demand\">\n        {children}\n      </Canvas>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/nodeConnections.js"],"sourcesContent":["export const ARTICLE_CONNECTIONS = {\n  \"A1\": [\n    \"G10\",\n    \"G12\",\n    \"G13\",\n    \"G14\",\n    \"G16\",\n    \"G19\",\n    \"G20\",\n    \"G5\"\n  ],\n  \"A2\": [\n    \"G16\",\n    \"G19\",\n    \"G4\"\n  ],\n  \"A3\": [\n    \"G14\",\n    \"G16\",\n    \"G22\",\n    \"G5\",\n    \"G6\"\n  ],\n  \"A4\": [\n    \"G10\",\n    \"G14\",\n    \"G16\",\n    \"G5\"\n  ],\n  \"A5\": [\n    \"G13\",\n    \"G19\",\n    \"G2\"\n  ],\n  \"A6\": [\n    \"G19\",\n    \"G6\",\n    \"G8\"\n  ],\n  \"A7\": [\n  ],\n  \"A8\": [\n  ],\n  \"A9\": [\n    \"G24\"\n  ],\n  \"A10\": [\n    \"G2\",\n    \"G22\"\n  ],\n  \"A11\": [\n  ],\n  \"A12\": [\n    \"G16\",\n    \"G19\",\n    \"G7\"\n  ],\n  \"A13\": [\n    \"G14\",\n    \"G16\",\n    \"G22\",\n    \"G25\",\n    \"G27\"\n  ],\n  \"A14\": [\n    \"G13\",\n    \"G14\",\n    \"G16\",\n    \"G26\",\n    \"G6\"\n  ],\n  \"A15\": [\n    \"G14\",\n    \"G15\",\n    \"G20\",\n    \"G21\"\n  ],\n  \"A16\": [\n    \"G16\",\n    \"G17\"\n  ],\n  \"A17\": [\n    \"G14\",\n    \"G16\",\n    \"G25\",\n    \"G8\"\n  ],\n  \"A18\": [\n    \"G4\"\n  ],\n  \"A19\": [\n    \"G13\",\n    \"G16\",\n    \"G21\",\n    \"G25\",\n    \"G9\"\n  ],\n  \"A20\": [\n    \"G12\",\n    \"G13\",\n    \"G16\",\n    \"G25\",\n    \"G27\",\n    \"G8\"\n  ],\n  \"A21\": [\n    \"G11\",\n    \"G14\",\n    \"G16\"\n  ],\n  \"A22\": [\n    \"G16\",\n    \"G26\"\n  ],\n  \"A23\": [\n    \"G12\",\n    \"G16\",\n    \"G27\",\n    \"G29\",\n    \"G31\",\n    \"G5\"\n  ],\n  \"A24\": [\n    \"G11\",\n    \"G12\",\n    \"G13\",\n    \"G16\",\n    \"G19\",\n    \"G21\",\n    \"G22\"\n  ],\n  \"A25\": [\n    \"G14\",\n    \"G16\",\n    \"G17\",\n    \"G18\",\n    \"G22\",\n    \"G25\",\n    \"G27\"\n  ],\n  \"A26\": [\n    \"G12\",\n    \"G13\",\n    \"G14\",\n    \"G4\",\n    \"G8\"\n  ],\n};\n\nexport const KEYWORD_CONNECTIONS = {\n  \"G2\": [\n    \"A10\",\n    \"A5\"\n  ],\n  \"G4\": [\n    \"A18\",\n    \"A2\",\n    \"A26\"\n  ],\n  \"G5\": [\n    \"A1\",\n    \"A23\",\n    \"A3\",\n    \"A4\"\n  ],\n  \"G6\": [\n    \"A14\",\n    \"A3\",\n    \"A6\"\n  ],\n  \"G7\": [\n    \"A12\"\n  ],\n  \"G8\": [\n    \"A17\",\n    \"A20\",\n    \"A26\",\n    \"A6\"\n  ],\n  \"G9\": [\n    \"A19\"\n  ],\n  \"G10\": [\n    \"A1\",\n    \"A4\"\n  ],\n  \"G11\": [\n    \"A21\",\n    \"A24\"\n  ],\n  \"G12\": [\n    \"A1\",\n    \"A20\",\n    \"A23\",\n    \"A24\",\n    \"A26\"\n  ],\n  \"G13\": [\n    \"A1\",\n    \"A14\",\n    \"A19\",\n    \"A20\",\n    \"A24\",\n    \"A26\",\n    \"A5\"\n  ],\n  \"G14\": [\n    \"A1\",\n    \"A13\",\n    \"A14\",\n    \"A15\",\n    \"A17\",\n    \"A21\",\n    \"A25\",\n    \"A26\",\n    \"A3\",\n    \"A4\"\n  ],\n  \"G15\": [\n    \"A15\"\n  ],\n  \"G16\": [\n    \"A1\",\n    \"A12\",\n    \"A13\",\n    \"A14\",\n    \"A16\",\n    \"A17\",\n    \"A19\",\n    \"A2\",\n    \"A20\",\n    \"A21\",\n    \"A22\",\n    \"A23\",\n    \"A24\",\n    \"A25\",\n    \"A3\",\n    \"A4\"\n  ],\n  \"G17\": [\n    \"A16\",\n    \"A25\"\n  ],\n  \"G18\": [\n    \"A25\"\n  ],\n  \"G19\": [\n    \"A1\",\n    \"A12\",\n    \"A2\",\n    \"A24\",\n    \"A5\",\n    \"A6\"\n  ],\n  \"G20\": [\n    \"A1\",\n    \"A15\"\n  ],\n  \"G21\": [\n    \"A15\",\n    \"A19\",\n    \"A24\"\n  ],\n  \"G22\": [\n    \"A10\",\n    \"A13\",\n    \"A24\",\n    \"A25\",\n    \"A3\"\n  ],\n  \"G24\": [\n    \"A9\"\n  ],\n  \"G25\": [\n    \"A13\",\n    \"A17\",\n    \"A19\",\n    \"A20\",\n    \"A25\"\n  ],\n  \"G26\": [\n    \"A14\",\n    \"A22\"\n  ],\n  \"G27\": [\n    \"A13\",\n    \"A20\",\n    \"A23\",\n    \"A25\"\n  ],\n  \"G29\": [\n    \"A23\"\n  ],\n  \"G31\": [\n    \"A23\"\n  ],\n};\n\nexport function getConnectedNodes(nodeId) {\n  if (!nodeId) return [];\n  if (ARTICLE_CONNECTIONS[nodeId]) {\n    return ARTICLE_CONNECTIONS[nodeId];\n  }\n  if (KEYWORD_CONNECTIONS[nodeId]) {\n    return KEYWORD_CONNECTIONS[nodeId];\n  }\n  return [];\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAO,IAAM,sBAAsB;IACjC,IAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM,EACL;IACD,IAAM,EACL;IACD,IAAM;QACJ;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO,EACN;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;AACH;AAEO,IAAM,sBAAsB;IACjC,IAAM;QACJ;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;QACA;QACA;KACD;IACD,IAAM;QACJ;KACD;IACD,IAAM;QACJ;QACA;QACA;QACA;KACD;IACD,IAAM;QACJ;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;QACA;KACD;IACD,KAAO;QACL;QACA;QACA;QACA;KACD;IACD,KAAO;QACL;KACD;IACD,KAAO;QACL;KACD;AACH;AAEO,SAAS,kBAAkB,MAAM;IACtC,IAAI,CAAC,QAAQ,OAAO,EAAE;IACtB,IAAI,mBAAmB,CAAC,OAAO,EAAE;QAC/B,OAAO,mBAAmB,CAAC,OAAO;IACpC;IACA,IAAI,mBAAmB,CAAC,OAAO,EAAE;QAC/B,OAAO,mBAAmB,CAAC,OAAO;IACpC;IACA,OAAO,EAAE;AACX"}},
    {"offset": {"line": 612, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/radialPosition.js"],"sourcesContent":["const GOLDEN_ANGLE = Math.PI * (3 - Math.sqrt(5));\nconst OUTER_RADIUS_BASE = 22;\nconst OUTER_RADIUS_VARIATION = 6;\nconst INNER_RADIUS_BASE = 12;\nconst INNER_RADIUS_VARIATION = 3;\n\nfunction sphericalPosition(localIndex, localTotal, radius, useEvenDistribution = false) {\n  if (localTotal <= 1) {\n    return [0, 0, 0];\n  }\n\n  if (useEvenDistribution) {\n    const yRaw = 1 - (localIndex / (localTotal - 1)) * 2;\n    const y = Math.max(-0.9, Math.min(0.9, yRaw));\n    const r = Math.sqrt(Math.max(0, 1 - y * y)) * radius;\n    const theta = GOLDEN_ANGLE * localIndex;\n    const x = Math.cos(theta) * r;\n    const z = Math.sin(theta) * r;\n    return [x, y * radius, z];\n  } else {\n    const yRaw = 1 - (localIndex / (localTotal - 1)) * 2;\n    const y = Math.max(-0.85, Math.min(0.85, yRaw));\n    const r = Math.sqrt(Math.max(0, 1 - y * y)) * radius;\n    const theta = GOLDEN_ANGLE * localIndex;\n    const x = Math.cos(theta) * r;\n    const z = Math.sin(theta) * r;\n    return [x, y * radius * 0.8, z];\n  }\n}\n\nfunction getVariedRadius(index, baseRadius, variation) {\n  const variationFactor = Math.sin(index * 0.7) * 0.5 + Math.cos(index * 1.3) * 0.3;\n  const variedRadius = baseRadius + (variationFactor * variation);\n  return variedRadius;\n}\n\nexport function getRadialPosition(index, total, radius = 15, articlesCount = null, glossaryCount = null) {\n  if (articlesCount !== null && glossaryCount !== null && total === articlesCount + glossaryCount) {\n    if (index < articlesCount) {\n      const variedRadius = getVariedRadius(\n        index, \n        OUTER_RADIUS_BASE, \n        OUTER_RADIUS_VARIATION\n      );\n      return sphericalPosition(index, articlesCount, variedRadius, false);\n    }\n    const keywordIndex = index - articlesCount;\n    const variedRadius = getVariedRadius(\n      keywordIndex,\n      INNER_RADIUS_BASE,\n      INNER_RADIUS_VARIATION\n    );\n    return sphericalPosition(\n      keywordIndex,\n      glossaryCount,\n      variedRadius,\n      true\n    );\n  }\n\n  return sphericalPosition(index, total, radius);\n}\n\nexport function getCircularPosition(index, total, radius = 8, height = 0) {\n  const angle = (index / total) * Math.PI * 2;\n  const x = Math.cos(angle) * radius;\n  const z = Math.sin(angle) * radius;\n  return [x, height, z];\n}\n\n"],"names":[],"mappings":";;;;;;;;AAAA,IAAM,eAAe,KAAK,EAAE,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE;AAChD,IAAM,oBAAoB;AAC1B,IAAM,yBAAyB;AAC/B,IAAM,oBAAoB;AAC1B,IAAM,yBAAyB;AAE/B,SAAS,kBAAkB,UAAU,EAAE,UAAU,EAAE,MAAM;QAAE,sBAAA,iEAAsB;IAC/E,IAAI,cAAc,GAAG;QACnB,OAAO;YAAC;YAAG;YAAG;SAAE;IAClB;IAEA,IAAI,qBAAqB;QACvB,IAAM,OAAO,IAAI,AAAC,aAAa,CAAC,aAAa,CAAC,IAAK;QACnD,IAAM,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;QACvC,IAAM,IAAI,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,IAAI,MAAM;QAC9C,IAAM,QAAQ,eAAe;QAC7B,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;QAC5B,OAAO;YAAC;YAAG,IAAI;YAAQ;SAAE;IAC3B,OAAO;QACL,IAAM,QAAO,IAAI,AAAC,aAAa,CAAC,aAAa,CAAC,IAAK;QACnD,IAAM,KAAI,KAAK,GAAG,CAAC,CAAC,MAAM,KAAK,GAAG,CAAC,MAAM;QACzC,IAAM,KAAI,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,KAAI,OAAM;QAC9C,IAAM,SAAQ,eAAe;QAC7B,IAAM,KAAI,KAAK,GAAG,CAAC,UAAS;QAC5B,IAAM,KAAI,KAAK,GAAG,CAAC,UAAS;QAC5B,OAAO;YAAC;YAAG,KAAI,SAAS;YAAK;SAAE;IACjC;AACF;AAEA,SAAS,gBAAgB,KAAK,EAAE,UAAU,EAAE,SAAS;IACnD,IAAM,kBAAkB,KAAK,GAAG,CAAC,QAAQ,OAAO,MAAM,KAAK,GAAG,CAAC,QAAQ,OAAO;IAC9E,IAAM,eAAe,aAAc,kBAAkB;IACrD,OAAO;AACT;AAEO,SAAS,kBAAkB,KAAK,EAAE,KAAK;QAAE,SAAA,iEAAS,IAAI,gBAAA,iEAAgB,MAAM,gBAAA,iEAAgB;IACjG,IAAI,kBAAkB,QAAQ,kBAAkB,QAAQ,UAAU,gBAAgB,eAAe;QAC/F,IAAI,QAAQ,eAAe;YACzB,IAAM,eAAe,gBACnB,OACA,mBACA;YAEF,OAAO,kBAAkB,OAAO,eAAe,cAAc;QAC/D;QACA,IAAM,eAAe,QAAQ;QAC7B,IAAM,gBAAe,gBACnB,cACA,mBACA;QAEF,OAAO,kBACL,cACA,eACA,eACA;IAEJ;IAEA,OAAO,kBAAkB,OAAO,OAAO;AACzC;AAEO,SAAS,oBAAoB,KAAK,EAAE,KAAK;QAAE,SAAA,iEAAS,GAAG,SAAA,iEAAS;IACrE,IAAM,QAAQ,AAAC,QAAQ,QAAS,KAAK,EAAE,GAAG;IAC1C,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;IAC5B,IAAM,IAAI,KAAK,GAAG,CAAC,SAAS;IAC5B,OAAO;QAAC;QAAG;QAAQ;KAAE;AACvB"}},
    {"offset": {"line": 696, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/crossPositionTracker.js"],"sourcesContent":["import * as THREE from 'three';\n\nconst crossGroupRegistry = new Map();\nconst crossPositionCache = new Map();\nconst tempVec = new THREE.Vector3();\n\nexport function registerCrossGroup(nodeId, crossGroupRef) {\n  if (crossGroupRef) {\n    crossGroupRegistry.set(nodeId, crossGroupRef);\n    crossPositionCache.delete(nodeId);\n  } else {\n    crossGroupRegistry.delete(nodeId);\n    crossPositionCache.delete(nodeId);\n  }\n}\n\nexport function unregisterCrossGroup(nodeId) {\n  crossGroupRegistry.delete(nodeId);\n  crossPositionCache.delete(nodeId);\n}\n\nexport function updateCrossPosition(nodeId) {\n  const crossGroupRef = crossGroupRegistry.get(nodeId);\n  if (!crossGroupRef || !crossGroupRef.current) return null;\n\n  try {\n    const crossGroup = crossGroupRef.current;\n    crossGroup.getWorldPosition(tempVec);\n    const position = [tempVec.x, tempVec.y, tempVec.z];\n    crossPositionCache.set(nodeId, position);\n    return position;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function updateAllCrossPositions() {\n  const positions = {};\n  crossGroupRegistry.forEach((crossGroupRef, nodeId) => {\n    const pos = updateCrossPosition(nodeId);\n    if (pos) {\n      positions[nodeId] = pos;\n    }\n  });\n  return positions;\n}\n\nexport function getCachedCrossPosition(nodeId) {\n  return crossPositionCache.get(nodeId) || null;\n}\n\nexport function clearCache() {\n  crossPositionCache.clear();\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;;AAEA,IAAM,qBAAqB,IAAI;AAC/B,IAAM,qBAAqB,IAAI;AAC/B,IAAM,UAAU,IAAI,6JAAa;AAE1B,SAAS,mBAAmB,MAAM,EAAE,aAAa;IACtD,IAAI,eAAe;QACjB,mBAAmB,GAAG,CAAC,QAAQ;QAC/B,kBAAmB,CAAA,SAAM,CAAC;IAC5B,OAAO;QACL,kBAAmB,CAAA,SAAM,CAAC;QAC1B,kBAAmB,CAAA,SAAM,CAAC;IAC5B;AACF;AAEO,SAAS,qBAAqB,MAAM;IACzC,kBAAmB,CAAA,SAAM,CAAC;IAC1B,kBAAmB,CAAA,SAAM,CAAC;AAC5B;AAEO,SAAS,oBAAoB,MAAM;IACxC,IAAM,gBAAgB,mBAAmB,GAAG,CAAC;IAC7C,IAAI,CAAC,iBAAiB,CAAC,cAAc,OAAO,EAAE,OAAO;IAErD,IAAI;QACF,IAAM,aAAa,cAAc,OAAO;QACxC,WAAW,gBAAgB,CAAC;QAC5B,IAAM,WAAW;YAAC,QAAQ,CAAC;YAAE,QAAQ,CAAC;YAAE,QAAQ,CAAC;SAAC;QAClD,mBAAmB,GAAG,CAAC,QAAQ;QAC/B,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,SAAS;IACd,IAAM,YAAY,CAAC;IACnB,mBAAmB,OAAO,CAAC,SAAC,eAAe;QACzC,IAAM,MAAM,oBAAoB;QAChC,IAAI,KAAK;YACP,SAAS,CAAC,OAAO,GAAG;QACtB;IACF;IACA,OAAO;AACT;AAEO,SAAS,uBAAuB,MAAM;IAC3C,OAAO,mBAAmB,GAAG,CAAC,WAAW;AAC3C;AAEO,SAAS;IACd,mBAAmB,KAAK;AAC1B"}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/selectionStore.js"],"sourcesContent":["export {\n  selectedNodeStore,\n  highlightedNodesStore,\n  secondaryHighlightedArticlesStore,\n  elementOpacityStore,\n  connectionLinesVisibilityStore\n} from './appStores';\n\n"],"names":[],"mappings":";;AAAA"}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/connectionControler.jsx"],"sourcesContent":["import { CubicBezierLine } from \"@react-three/drei\";\nimport React, { useMemo, useEffect, useState, useRef } from \"react\";\nimport { useStore, getStore } from \"usestore-react\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\n\nimport { getConnectedNodes as getConnectedNodesStatic, ARTICLE_CONNECTIONS as ARTICLE_CONNECTIONS_STATIC, KEYWORD_CONNECTIONS as KEYWORD_CONNECTIONS_STATIC } from \"./utils/nodeConnections\";\nimport { getRadialPosition } from \"./utils/radialPosition\";\nimport { getCachedCrossPosition, clearCache } from \"./utils/crossPositionTracker\";\nimport \"./utils/selectionStore\";\n\n/**\n * Build connection maps from processedData.links (from nodes.json).\n * This makes nodes.json the single source of truth — no script needed.\n */\nfunction buildConnectionsFromProcessedData(processedData) {\n  if (!processedData?.links?.length) return null;\n  const articleConnections = {};\n  const keywordConnections = {};\n  processedData.links.forEach((link) => {\n    const src = typeof link.source === 'string' ? link.source : link.source?.id;\n    const tgt = typeof link.target === 'string' ? link.target : link.target?.id;\n    if (!src || !tgt) return;\n    if (src.startsWith('A')) {\n      if (!articleConnections[src]) articleConnections[src] = [];\n      if (!articleConnections[src].includes(tgt)) articleConnections[src].push(tgt);\n    }\n    if (tgt.startsWith('G')) {\n      if (!keywordConnections[tgt]) keywordConnections[tgt] = [];\n      if (!keywordConnections[tgt].includes(src)) keywordConnections[tgt].push(src);\n    }\n  });\n  const getConnectedNodes = (nodeId) => {\n    if (!nodeId) return [];\n    if (articleConnections[nodeId]) return articleConnections[nodeId];\n    if (keywordConnections[nodeId]) return keywordConnections[nodeId];\n    return [];\n  };\n  return { articleConnections, keywordConnections, getConnectedNodes };\n}\n\nfunction getRelatedArticles(articleId, articleConnections, keywordConnections) {\n  if (!articleId || !articleId.startsWith('A')) return [];\n  const ARTICLE_CONNECTIONS = articleConnections || ARTICLE_CONNECTIONS_STATIC;\n  const KEYWORD_CONNECTIONS = keywordConnections || KEYWORD_CONNECTIONS_STATIC;\n  const articleKeywords = ARTICLE_CONNECTIONS[articleId] || [];\n  if (articleKeywords.length === 0) return [];\n  const relatedArticles = new Set();\n  articleKeywords.forEach(keywordId => {\n    const articlesWithSameKeyword = KEYWORD_CONNECTIONS[keywordId] || [];\n    articlesWithSameKeyword.forEach(relatedArticleId => {\n      if (relatedArticleId !== articleId) relatedArticles.add(relatedArticleId);\n    });\n  });\n  return Array.from(relatedArticles);\n}\n\nfunction getSecondaryConnectionsForKeyword(keywordId, articleConnections, keywordConnections) {\n  if (!keywordId || !keywordId.startsWith('G')) return [];\n  const ARTICLE_CONNECTIONS = articleConnections || ARTICLE_CONNECTIONS_STATIC;\n  const KEYWORD_CONNECTIONS = keywordConnections || KEYWORD_CONNECTIONS_STATIC;\n  const connectedArticles = KEYWORD_CONNECTIONS[keywordId] || [];\n  if (connectedArticles.length === 0) return [];\n  const secondaryConnections = [];\n  connectedArticles.forEach(articleId => {\n    const articleKeywords = ARTICLE_CONNECTIONS[articleId] || [];\n    articleKeywords.forEach(articleKeywordId => {\n      if (articleKeywordId !== keywordId) {\n        secondaryConnections.push({ from: articleId, to: articleKeywordId });\n      }\n    });\n  });\n  return secondaryConnections;\n}\n\nconst ARTICLE_IDS = Array.from({ length: 29 }, (_, index) => `A${index + 1}`);\nconst KEYWORD_IDS = Array.from({ length: 54 }, (_, index) => `G${index + 1}`);\nconst TOTAL_NODES = ARTICLE_IDS.length + KEYWORD_IDS.length;\nconst BASE_RADIUS = 15;\n\nconst buildPositions = () => {\n  const positions = {};\n\n  ARTICLE_IDS.forEach((id, index) => {\n    positions[id] = getRadialPosition(index, TOTAL_NODES, BASE_RADIUS);\n  });\n\n  KEYWORD_IDS.forEach((id, index) => {\n    positions[id] = getRadialPosition(\n      ARTICLE_IDS.length + index,\n      TOTAL_NODES,\n      BASE_RADIUS\n    );\n  });\n\n  return positions;\n};\n\nfunction AnimatedConnectionLine({\n  start,\n  end,\n  v0,\n  v1,\n  index,\n  totalConnections,\n  color = \"#e9ff00\",\n  shouldHide = false\n}) {\n  const [opacity, setOpacity] = useState(0);\n  const [lineWidth, setLineWidth] = useState(0.5);\n  const revealStartTime = useRef(null);\n  const animationComplete = useRef(false);\n  const hasAnimatedRef = useRef(false);\n  const isInitialMountRef = useRef(true);\n  const lineKeyRef = useRef(`${start[0]}-${start[1]}-${end[0]}-${end[1]}-${v0?.[0]}-${v1?.[0]}`);\n\n  useEffect(() => {\n    const newKey = `${start[0].toFixed(1)}-${start[1].toFixed(1)}-${end[0].toFixed(1)}-${end[1].toFixed(1)}-${v0?.[0]?.toFixed(1)}-${v1?.[0]?.toFixed(1)}`;\n    if (newKey !== lineKeyRef.current) {\n      lineKeyRef.current = newKey;\n      if (isInitialMountRef.current) {\n        setOpacity(0);\n        revealStartTime.current = Date.now();\n        hasAnimatedRef.current = false;\n        isInitialMountRef.current = false;\n      }\n    }\n  }, [start, end, v0, v1]);\n\n  useEffect(() => {\n    if (shouldHide) {\n      setOpacity(0);\n      hasAnimatedRef.current = false;\n      return;\n    }\n\n    if (!hasAnimatedRef.current) {\n      revealStartTime.current = Date.now();\n      const delay = index * 20;\n\n      const timer = setTimeout(() => {\n        const startTime = Date.now();\n        const duration = 300;\n\n        const animate = () => {\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n\n          const eased = 1 - Math.pow(1 - progress, 3);\n          setOpacity(eased);\n          setLineWidth(0.5 + eased * 0.5);\n\n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            animationComplete.current = true;\n            hasAnimatedRef.current = true;\n          }\n        };\n\n        animate();\n      }, delay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [index, shouldHide]);\n\n  useEffect(() => {\n    if (hasAnimatedRef.current && !shouldHide && opacity < 0.9) {\n      setOpacity(1);\n      setLineWidth(1);\n    }\n  }, [start, end, v0, v1, shouldHide, opacity]);\n\n  const isValidControlPoint = (cp) => {\n    return cp && Array.isArray(cp) && cp.length === 3 &&\n      cp.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val));\n  };\n\n  const isValidPoint = (p) => {\n    return p && Array.isArray(p) && p.length === 3 &&\n      p.every(val => typeof val === 'number' && !isNaN(val) && isFinite(val));\n  };\n\n  if (!isValidPoint(start) || !isValidPoint(end) || !isValidControlPoint(v0) || !isValidControlPoint(v1)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn('[AnimatedConnectionLine] Invalid points:', { start, end, v0, v1 });\n    }\n    return null;\n  }\n\n  if (opacity === 0 && shouldHide) return null;\n\n  return (\n    <group renderOrder={4} frustumCulled={false}>\n      <CubicBezierLine\n        start={start}\n        end={end}\n        midA={v0} // First control point (goes down from article)\n        midB={v1} // Second control point (curves to keyword from down part)\n        color={color}\n        lineWidth={lineWidth}\n        opacity={opacity}\n        transparent\n        depthWrite={false}\n        depthTest={true}\n      />\n    </group>\n  );\n}\n\nexport function ConnectionController({ processedData }) {\n  const { camera } = useThree();\n  const [selectedNode] = useStore(\"selectedNodeStore\", null);\n  const [highlightedNodes] = useStore(\"highlightedNodesStore\", []);\n  const [linesVisible] = useStore(\"connectionLinesVisibilityStore\", true);\n\n  const connectionMaps = useMemo(() => buildConnectionsFromProcessedData(processedData), [processedData]);\n  const getConnectedNodes = connectionMaps ? connectionMaps.getConnectedNodes : getConnectedNodesStatic;\n  const articleConnections = connectionMaps ? connectionMaps.articleConnections : ARTICLE_CONNECTIONS_STATIC;\n  const keywordConnections = connectionMaps ? connectionMaps.keywordConnections : KEYWORD_CONNECTIONS_STATIC;\n\n  const getPositions = () => {\n    if (processedData && processedData.nodeMap) {\n      const posMap = {};\n      processedData.nodeMap.forEach((node, id) => {\n        posMap[id] = node.position || [0, 0, 0];\n      });\n      return posMap;\n    }\n    return buildPositions();\n  };\n\n  useEffect(() => {\n    const highlightedStore = getStore('highlightedNodesStore');\n    const secondaryHighlightedStore = getStore('secondaryHighlightedArticlesStore');\n    const highlighted = new Set();\n    const secondaryHighlighted = new Set();\n\n    if (selectedNode?.id) {\n      highlighted.add(selectedNode.id);\n      const connected = getConnectedNodes(selectedNode.id);\n      connected.forEach(nodeId => {\n        if (nodeId) {\n          highlighted.add(nodeId);\n        }\n      });\n\n      if (selectedNode.id.startsWith('A')) {\n        const relatedArticles = getRelatedArticles(selectedNode.id, articleConnections, keywordConnections);\n        relatedArticles.forEach(articleId => {\n          secondaryHighlighted.add(articleId);\n        });\n      }\n    }\n\n    requestAnimationFrame(() => {\n      highlightedStore.setState(Array.from(highlighted));\n      secondaryHighlightedStore.setState(Array.from(secondaryHighlighted));\n    });\n\n    crossPositionCache.current.clear();\n    clearCache();\n  }, [selectedNode]);\n\n  const lastCheckRef = useRef(0);\n  const lastPositionsRef = useRef({});\n  const lastCameraPosRef = useRef(null);\n  const [updateTrigger, setUpdateTrigger] = useState(0);\n\n  useFrame((state) => {\n    const now = Date.now();\n    if (now - lastCheckRef.current < 16) return;\n    lastCheckRef.current = now;\n\n    if (!processedData || !processedData.nodeMap || !selectedNode?.id) return;\n\n    const currentCameraPos = state.camera.position;\n    const cameraChanged = !lastCameraPosRef.current || \n      Math.abs(currentCameraPos.x - lastCameraPosRef.current.x) > 0.01 ||\n      Math.abs(currentCameraPos.y - lastCameraPosRef.current.y) > 0.01 ||\n      Math.abs(currentCameraPos.z - lastCameraPosRef.current.z) > 0.01;\n\n    if (cameraChanged) {\n      lastCameraPosRef.current = currentCameraPos.clone();\n    }\n\n\n    const currentPositions = getPositions();\n    const connectedIds = getConnectedNodes(selectedNode.id);\n    const allRelevantIds = [selectedNode.id, ...connectedIds];\n\n    let hasChanges = false;\n    allRelevantIds.forEach(nodeId => {\n      const currentPos = currentPositions[nodeId];\n      if (!currentPos) return;\n\n      const lastPos = lastPositionsRef.current[nodeId];\n      if (!lastPos) {\n        hasChanges = true;\n        lastPositionsRef.current[nodeId] = [...currentPos];\n      } else {\n        const threshold = 0.05;\n        const changed =\n          Math.abs(currentPos[0] - lastPos[0]) > threshold ||\n          Math.abs(currentPos[1] - lastPos[1]) > threshold ||\n          Math.abs(currentPos[2] - lastPos[2]) > threshold;\n\n        if (changed) {\n          hasChanges = true;\n          lastPositionsRef.current[nodeId] = [...currentPos];\n        }\n      }\n    });\n\n    if (hasChanges || cameraChanged) {\n      requestAnimationFrame(() => {\n        setUpdateTrigger(prev => prev + 1);\n      });\n    }\n  });\n\n  const tempVec1 = useRef(new THREE.Vector3());\n  const tempVec2 = useRef(new THREE.Vector3());\n  const tempVec3 = useRef(new THREE.Vector3());\n  const tempVec4 = useRef(new THREE.Vector3());\n  const worldUpVec = useRef(new THREE.Vector3(0, 1, 0));\n  const rightVec = useRef(new THREE.Vector3(1, 0, 0));\n\n  const generateControlPoints = (start, end, index, isArticleToKeyword, isKeywordSource = false) => {\n    if (!start || !end || !Array.isArray(start) || !Array.isArray(end) ||\n      start.length !== 3 || end.length !== 3 ||\n      start.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n      end.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      const mid = [\n        ((start?.[0] || 0) + (end?.[0] || 0)) / 2,\n        ((start?.[1] || 0) + (end?.[1] || 0)) / 2,\n        ((start?.[2] || 0) + (end?.[2] || 0)) / 2,\n      ];\n      return { v0: mid, v1: mid };\n    }\n\n    const dx = end[0] - start[0];\n    const dy = end[1] - start[1];\n    const dz = end[2] - start[2];\n    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n    if (distance < 0.001 || !isFinite(distance)) {\n      const mid = [\n        (start[0] + end[0]) / 2,\n        (start[1] + end[1]) / 2,\n        (start[2] + end[2]) / 2,\n      ];\n      return { v0: mid, v1: mid };\n    }\n\n    const direction = tempVec1.current.set(dx, dy, dz);\n\n    if (direction.length() < 0.001 || !isFinite(direction.length())) {\n      direction.set(1, 0, 0);\n    } else {\n      direction.normalize();\n    }\n\n    const worldUp = worldUpVec.current;\n    let perp = tempVec2.current.crossVectors(worldUp, direction);\n\n    if (perp.length() < 0.001) {\n      perp.crossVectors(rightVec.current, direction);\n    }\n    perp.normalize();\n\n    const perp2 = tempVec3.current.crossVectors(direction, perp).normalize();\n\n    const angleVariation = (index * 30) % 360;\n    const angle = (angleVariation * Math.PI) / 180;\n    const cosAngle = Math.cos(angle);\n    const sinAngle = Math.sin(angle);\n    const horizontalOffset = distance * 0.08 * cosAngle;\n    const horizontalOffset2 = distance * 0.08 * sinAngle;\n\n    const straightDownDistance = isKeywordSource ? 12.0 : 8.0;\n\n    const v0 = tempVec4.current.set(\n      start[0] - worldUp.x * straightDownDistance + perp.x * horizontalOffset * 0.1 + perp2.x * horizontalOffset2 * 0.1,\n      start[1] - worldUp.y * straightDownDistance,\n      start[2] - worldUp.z * straightDownDistance + perp.z * horizontalOffset * 0.1 + perp2.z * horizontalOffset2 * 0.1\n    );\n\n    const upOffset2 = distance * 0.70;\n    const verticalOffset2 = isKeywordSource ? -distance * 0.15 : -distance * 0.10;\n\n    const v1 = tempVec1.current.set(\n      start[0] + direction.x * upOffset2 + perp.x * horizontalOffset * 0.2 + perp2.x * horizontalOffset2 * 0.2,\n      start[1] + direction.y * upOffset2 + verticalOffset2 + perp.y * horizontalOffset * 0.2 + perp2.y * horizontalOffset2 * 0.2,\n      start[2] + direction.z * upOffset2 + perp.z * horizontalOffset * 0.2 + perp2.z * horizontalOffset2 * 0.2\n    );\n\n    const sanitize = (val) => (typeof val === 'number' && isFinite(val) && !isNaN(val)) ? val : 0;\n    const cp0 = [sanitize(v0.x), sanitize(v0.y), sanitize(v0.z)];\n    const cp1 = [sanitize(v1.x), sanitize(v1.y), sanitize(v1.z)];\n\n    return {\n      v0: cp0,\n      v1: cp1\n    };\n  };\n  const centerVec = useRef(new THREE.Vector3(0, 0, 0));\n  const worldUpCross = useRef(new THREE.Vector3(0, 1, 0));\n  const tempNodeVec = useRef(new THREE.Vector3());\n  const tempDirToCenter = useRef(new THREE.Vector3());\n  const tempRight = useRef(new THREE.Vector3());\n  const tempUp = useRef(new THREE.Vector3());\n  const tempResult = useRef(new THREE.Vector3());\n  const crossPositionCache = useRef(new Map());\n\n  const getCrossPosition = (nodeId, nodePosition, camera = null) => {\n    const trackedPosition = getCachedCrossPosition(nodeId);\n    if (trackedPosition) {\n      return trackedPosition;\n    }\n\n    let selectedNodeForCache = null;\n    let highlightedNodesForCache = [];\n    try {\n      selectedNodeForCache = getStore('selectedNodeStore', null);\n      const highlightedStoreValue = getStore('highlightedNodesStore', []);\n      highlightedNodesForCache = Array.isArray(highlightedStoreValue) ? highlightedStoreValue : [];\n    } catch (e) {\n      // Store not available\n    }\n\n    const isHighlightedForCache = selectedNodeForCache?.id === nodeId || highlightedNodesForCache.includes(nodeId);\n    let secondaryHighlightedForCache = [];\n    try {\n      const secondaryHighlightedStoreValue = getStore('secondaryHighlightedArticlesStore', []);\n      secondaryHighlightedForCache = Array.isArray(secondaryHighlightedStoreValue) ? secondaryHighlightedStoreValue : [];\n    } catch (e) {\n      // Store not available\n    }\n    const isSecondaryHighlightedForCache = secondaryHighlightedForCache.includes(nodeId);\n    const isDimmedForCache = selectedNodeForCache && selectedNodeForCache.id !== nodeId && !highlightedNodesForCache.includes(nodeId) && !isSecondaryHighlightedForCache;\n    const scaleState = isHighlightedForCache ? '1.3' : (isDimmedForCache ? '0.6' : '1.0');\n    const secondaryState = isSecondaryHighlightedForCache ? 'secondary' : 'normal';\n    const cameraState = camera ? `${camera.position.x.toFixed(3)}-${camera.position.y.toFixed(3)}-${camera.position.z.toFixed(3)}` : 'no-camera';\n\n    const cacheKey = `${nodeId}-${nodePosition[0].toFixed(3)}-${nodePosition[1].toFixed(3)}-${nodePosition[2].toFixed(3)}-${scaleState}-${secondaryState}-${cameraState}`;\n    const cached = crossPositionCache.current.get(cacheKey);\n    if (cached && !isHighlightedForCache && !isSecondaryHighlightedForCache) return cached;\n\n    const center = centerVec.current;\n    const nodeVec = tempNodeVec.current.set(nodePosition[0], nodePosition[1], nodePosition[2]);\n    \n    let directionToTarget = tempDirToCenter.current;\n    if ((isHighlightedForCache || isSecondaryHighlightedForCache) && camera) {\n      directionToTarget.subVectors(camera.position, nodeVec).normalize();\n    } else {\n      directionToTarget.subVectors(center, nodeVec).normalize();\n    }\n\n    const worldUp = worldUpCross.current;\n    let right = tempRight.current.crossVectors(worldUp, directionToTarget);\n    if (right.length() < 0.001) {\n      right.set(1, 0, 0);\n    }\n    right.normalize();\n\n    let up = tempUp.current.crossVectors(directionToTarget, right).normalize();\n\n    if (Math.abs(directionToTarget.dot(worldUp)) > 0.99) {\n      up.set(1, 0, 0);\n      right.set(0, 0, 1);\n    }\n\n    const isArticle = nodeId && nodeId.startsWith('A');\n    const result = tempResult.current;\n\n    if (isArticle) {\n      const trackedPosition = getCachedCrossPosition(nodeId);\n      if (trackedPosition) {\n        return trackedPosition;\n      }\n\n      const baseImageHeight = 14.4;\n      const borderWidth = 0.12;\n      const baseTotalHeight = baseImageHeight + (borderWidth * 2);\n      const nodeGroupScale = 0.5;\n\n      let selectedNode = null;\n      let highlightedNodes = [];\n      let secondaryHighlightedArticles = [];\n      try {\n        selectedNode = getStore('selectedNodeStore', null);\n        const highlightedStoreValue = getStore('highlightedNodesStore', []);\n        highlightedNodes = Array.isArray(highlightedStoreValue) ? highlightedStoreValue : [];\n        const secondaryHighlightedStoreValue = getStore('secondaryHighlightedArticlesStore', []);\n        secondaryHighlightedArticles = Array.isArray(secondaryHighlightedStoreValue) ? secondaryHighlightedStoreValue : [];\n      } catch (e) {\n        // Store not available, use defaults\n      }\n\n      if (!Array.isArray(highlightedNodes)) {\n        highlightedNodes = [];\n      }\n      if (!Array.isArray(secondaryHighlightedArticles)) {\n        secondaryHighlightedArticles = [];\n      }\n\n      const isHighlighted = selectedNode?.id === nodeId || highlightedNodes.includes(nodeId);\n      const isSecondaryHighlighted = secondaryHighlightedArticles.includes(nodeId);\n      const isDimmed = selectedNode && selectedNode.id !== nodeId && !highlightedNodes.includes(nodeId) && !isSecondaryHighlighted;\n\n      let articleScale = 1.0;\n      if (isHighlighted) {\n        articleScale = 1.3;\n      } else if (isDimmed) {\n        articleScale = 0.6;\n      }\n\n      const scaledTotalHeight = baseTotalHeight * articleScale;\n      \n      if ((isHighlighted || isSecondaryHighlighted) && camera) {\n        const directionToCamera = tempDirToCenter.current.subVectors(camera.position, nodeVec).normalize();\n        const worldUp = worldUpCross.current;\n        \n        let right = tempRight.current.crossVectors(worldUp, directionToCamera);\n        if (right.length() < 0.001) {\n          right.set(1, 0, 0);\n        }\n        right.normalize();\n        \n        let correctedUp = tempUp.current.crossVectors(directionToCamera, right).normalize();\n        \n        const basis = tempMatrix.current.makeBasis(right, correctedUp, directionToCamera);\n        const rotationQuat = tempQuat.current.setFromRotationMatrix(basis);\n        \n        const forwardVec = tempVec4.current.set(0, 0, 1);\n        forwardVec.applyQuaternion(rotationQuat);\n        const tiltAngle = Math.acos(Math.max(-1, Math.min(1, forwardVec.dot(worldUp)))) * (180 / Math.PI);\n        const tiltFromCamera = Math.acos(Math.max(-1, Math.min(1, directionToCamera.dot(worldUp)))) * (180 / Math.PI);\n        \n        let bottomCenterOffset;\n        if (isSecondaryHighlighted) {\n          const baseOffset = -(scaledTotalHeight / 2 + 0.1) * nodeGroupScale;\n          const tiltFactor = Math.cos(tiltAngle * Math.PI / 180);\n          bottomCenterOffset = baseOffset / Math.max(0.1, tiltFactor);\n        } else {\n          bottomCenterOffset = -(scaledTotalHeight / 1.2 + 0.1) * nodeGroupScale;\n        }\n        \n        const localBottom = tempLocalBottom.current.set(0, bottomCenterOffset, 0);\n        const rotatedBottom = tempRotatedBottom.current.copy(localBottom).applyQuaternion(rotationQuat);\n        \n        const offsetDiff = rotatedBottom.y - localBottom.y;\n        const horizontalOffset = Math.sqrt(rotatedBottom.x * rotatedBottom.x + rotatedBottom.z * rotatedBottom.z);\n        \n        if (isSecondaryHighlighted) {\n          console.log('%c[SECONDARY] Node: ' + nodeId, 'color: orange; font-weight: bold; font-size: 14px;', {\n            scaledTotalHeight: scaledTotalHeight.toFixed(3),\n            bottomCenterOffset: bottomCenterOffset.toFixed(3),\n            localBottom: `(${localBottom.x.toFixed(3)}, ${localBottom.y.toFixed(3)}, ${localBottom.z.toFixed(3)})`,\n            rotatedBottom: `(${rotatedBottom.x.toFixed(3)}, ${rotatedBottom.y.toFixed(3)}, ${rotatedBottom.z.toFixed(3)})`,\n            offsetDiff: offsetDiff.toFixed(3),\n            horizontalOffset: horizontalOffset.toFixed(3),\n            tiltAngle: tiltAngle.toFixed(2) + '°',\n            tiltFromCamera: tiltFromCamera.toFixed(2) + '°',\n            cameraPos: `(${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)})`,\n            nodePos: `(${nodeVec.x.toFixed(2)}, ${nodeVec.y.toFixed(2)}, ${nodeVec.z.toFixed(2)})`,\n            directionToCamera: `(${directionToCamera.x.toFixed(3)}, ${directionToCamera.y.toFixed(3)}, ${directionToCamera.z.toFixed(3)})`\n          });\n        }\n        if (isHighlighted) {\n          console.log('%c[HIGHLIGHTED] Node: ' + nodeId, 'color: green; font-weight: bold; font-size: 14px;', {\n            scaledTotalHeight: scaledTotalHeight.toFixed(3),\n            bottomCenterOffset: bottomCenterOffset.toFixed(3),\n            localBottom: `(${localBottom.x.toFixed(3)}, ${localBottom.y.toFixed(3)}, ${localBottom.z.toFixed(3)})`,\n            rotatedBottom: `(${rotatedBottom.x.toFixed(3)}, ${rotatedBottom.y.toFixed(3)}, ${rotatedBottom.z.toFixed(3)})`,\n            offsetDiff: offsetDiff.toFixed(3),\n            horizontalOffset: horizontalOffset.toFixed(3),\n            tiltAngle: tiltAngle.toFixed(2) + '°',\n            tiltFromCamera: tiltFromCamera.toFixed(2) + '°',\n            cameraPos: `(${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)})`,\n            nodePos: `(${nodeVec.x.toFixed(2)}, ${nodeVec.y.toFixed(2)}, ${nodeVec.z.toFixed(2)})`,\n            directionToCamera: `(${directionToCamera.x.toFixed(3)}, ${directionToCamera.y.toFixed(3)}, ${directionToCamera.z.toFixed(3)})`\n          });\n        }\n        \n        result.copy(nodeVec);\n        result.add(rotatedBottom);\n      } else {\n        let bottomCenterOffset;\n        if (isSecondaryHighlighted) {\n          bottomCenterOffset = -(scaledTotalHeight / 1.8 + 0.15) * nodeGroupScale;\n        } else {\n          bottomCenterOffset = -(scaledTotalHeight / 1.2 + 0.1) * nodeGroupScale;\n        }\n        result.copy(nodeVec);\n        result.addScaledVector(up, bottomCenterOffset);\n      }\n    } else {\n      const keywordHeight = 0.4;\n      const keywordOffset = -(keywordHeight / 2);\n      result.copy(nodeVec).addScaledVector(up, keywordOffset);\n    }\n\n    const resultArray = [result.x, result.y, result.z];\n    crossPositionCache.current.set(cacheKey, resultArray);\n    if (crossPositionCache.current.size > 200) {\n      crossPositionCache.current.clear();\n    }\n    return resultArray;\n  };\n\n  const tempStartVec = useRef(new THREE.Vector3());\n  const tempEndVec = useRef(new THREE.Vector3());\n  const tempLocalBottom = useRef(new THREE.Vector3());\n  const tempRotatedBottom = useRef(new THREE.Vector3());\n  const tempQuat = useRef(new THREE.Quaternion());\n  const tempMatrix = useRef(new THREE.Matrix4());\n\n  const createLine = (startPos, endPos, index, totalConnections, color, isArticleToKeyword, startId, endId) => {\n    const isKeywordSource = startId && startId.startsWith('G');\n    if (!startPos || !endPos || !Array.isArray(startPos) || !Array.isArray(endPos) ||\n      startPos.length !== 3 || endPos.length !== 3 ||\n      startPos.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n      endPos.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      return null;\n    }\n\n    const startPosVec = tempStartVec.current.set(startPos[0], startPos[1], startPos[2]);\n    const endPosVec = tempEndVec.current.set(endPos[0], endPos[1], endPos[2]);\n    const dx = endPosVec.x - startPosVec.x;\n    const dy = endPosVec.y - startPosVec.y;\n    const dz = endPosVec.z - startPosVec.z;\n    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n    if (distance < 0.01 || !isFinite(distance)) {\n      return null;\n    }\n\n    let controlPoints = generateControlPoints(startPos, endPos, index, isArticleToKeyword, isKeywordSource);\n\n    if (!controlPoints || !controlPoints.v0 || !controlPoints.v1 ||\n      !Array.isArray(controlPoints.v0) || !Array.isArray(controlPoints.v1) ||\n      controlPoints.v0.length !== 3 || controlPoints.v1.length !== 3 ||\n      controlPoints.v0.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v)) ||\n      controlPoints.v1.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      return null;\n    }\n\n    const key = `${startId}-${endId}-${index}`;\n\n    return (\n      <AnimatedConnectionLine\n        key={key}\n        start={startPos}\n        end={endPos}\n        v0={controlPoints.v0}\n        v1={controlPoints.v1}\n        index={index}\n        totalConnections={totalConnections}\n        color={color}\n        shouldHide={!linesVisible}\n      />\n    );\n  };\n\n  const lines = useMemo(() => {\n    if (!selectedNode?.id || !linesVisible) {\n      return [];\n    }\n\n    const positions = getPositions();\n    const nodePosition = positions[selectedNode.id];\n    if (!nodePosition || !Array.isArray(nodePosition) || nodePosition.length !== 3) {\n      return [];\n    }\n\n    const startPosition = getCrossPosition(selectedNode.id, nodePosition, camera);\n\n    if (!startPosition || !Array.isArray(startPosition) || startPosition.length !== 3 ||\n      startPosition.some(v => typeof v !== 'number' || isNaN(v) || !isFinite(v))) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[ConnectionController] Invalid start position for ${selectedNode.id}:`, startPosition);\n      }\n      return [];\n    }\n\n    const allLines = [];\n    const isArticle = selectedNode.id.startsWith('A');\n\n    const targets = getConnectedNodes(selectedNode.id) || [];\n    const targetsLength = targets ? targets.length : 0;\n    if (targetsLength > 0) {\n      for (let i = 0; i < targetsLength; i++) {\n        const targetId = targets[i];\n        const targetNodePosition = positions[targetId];\n        if (!targetNodePosition) continue;\n\n        const endPosition = getCrossPosition(targetId, targetNodePosition, camera);\n        const isArticleToKeyword = isArticle && targetId.startsWith('G');\n\n        const line = createLine(\n          startPosition,\n          endPosition,\n          i,\n          targetsLength,\n          \"#e9ff00\",\n          isArticleToKeyword,\n          selectedNode.id,\n          targetId\n        );\n\n        if (line) allLines.push(line);\n      }\n    }\n\n    if (isArticle) {\n      const relatedArticles = getRelatedArticles(selectedNode.id, articleConnections, keywordConnections);\n      const selectedArticleKeywords = articleConnections[selectedNode.id] || [];\n      const selectedKeywordsSet = new Set(selectedArticleKeywords);\n\n      let whiteLineIndex = 0;\n      let totalWhiteLines = 0;\n      for (let i = 0; i < relatedArticles.length; i++) {\n        const relatedArticleKeywords = articleConnections[relatedArticles[i]] || [];\n        totalWhiteLines += relatedArticleKeywords.filter(kw => selectedKeywordsSet.has(kw)).length;\n      }\n\n      for (let i = 0; i < relatedArticles.length; i++) {\n        const relatedArticleId = relatedArticles[i];\n        const relatedArticlePos = positions[relatedArticleId];\n        if (!relatedArticlePos) continue;\n\n        const relatedArticleKeywords = articleConnections[relatedArticleId] || [];\n        const sharedKeywords = relatedArticleKeywords.filter(kw => selectedKeywordsSet.has(kw));\n\n        for (let j = 0; j < sharedKeywords.length; j++) {\n          const sharedKeywordId = sharedKeywords[j];\n          const keywordPos = positions[sharedKeywordId];\n          if (!keywordPos) continue;\n\n          const relatedArticleStartPos = getCrossPosition(relatedArticleId, relatedArticlePos, camera);\n          const keywordEndPos = getCrossPosition(sharedKeywordId, keywordPos, camera);\n\n          const line = createLine(\n            relatedArticleStartPos,\n            keywordEndPos,\n            targetsLength + whiteLineIndex,\n            targetsLength + totalWhiteLines,\n            \"#444444\",\n            true,\n            relatedArticleId,\n            sharedKeywordId\n          );\n\n          if (line) {\n            allLines.push(line);\n            whiteLineIndex++;\n          }\n        }\n      }\n    }\n\n    return allLines;\n  }, [selectedNode?.id, updateTrigger, linesVisible, processedData, articleConnections, keywordConnections]);\n\n  useEffect(() => {\n    if (selectedNode?.id && linesVisible && lines.length === 0) {\n      requestAnimationFrame(() => {\n        setUpdateTrigger(prev => prev + 1);\n      });\n    }\n  }, [selectedNode, linesVisible, lines.length]);\n\n  if (!lines.length) {\n    return null;\n  }\n\n  return <group frustumCulled={false}>{lines}</group>;\n}\n\nexport default ConnectionController;\n"],"names":[],"mappings":";;;;;;AAyLQ;;;;;AAzLR;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAEA;;;CAGC,GACD,SAAS,kCAAkC,aAAa;QACjD;IAAL,IAAI,EAAC,0BAAA,qCAAA,uBAAA,cAAe,KAAK,cAApB,2CAAA,qBAAsB,MAAM,GAAE,OAAO;IAC1C,IAAM,qBAAqB,CAAC;IAC5B,IAAM,qBAAqB,CAAC;IAC5B,cAAc,KAAK,CAAC,OAAO,CAAC,SAAC;YACiC,cACA;QAD5D,IAAM,MAAM,OAAO,KAAK,MAAM,KAAK,WAAW,KAAK,MAAM,IAAG,eAAA,KAAK,MAAM,cAAX,mCAAA,aAAa,EAAE;QAC3E,IAAM,MAAM,OAAO,KAAK,MAAM,KAAK,WAAW,KAAK,MAAM,IAAG,eAAA,KAAK,MAAM,cAAX,mCAAA,aAAa,EAAE;QAC3E,IAAI,CAAC,OAAO,CAAC,KAAK;QAClB,IAAI,IAAI,UAAU,CAAC,MAAM;YACvB,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,kBAAkB,CAAC,IAAI,GAAG,EAAE;YAC1D,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC;QAC3E;QACA,IAAI,IAAI,UAAU,CAAC,MAAM;YACvB,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,kBAAkB,CAAC,IAAI,GAAG,EAAE;YAC1D,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC;QAC3E;IACF;IACA,IAAM,oBAAoB,SAAC;QACzB,IAAI,CAAC,QAAQ,OAAO,EAAE;QACtB,IAAI,kBAAkB,CAAC,OAAO,EAAE,OAAO,kBAAkB,CAAC,OAAO;QACjE,IAAI,kBAAkB,CAAC,OAAO,EAAE,OAAO,kBAAkB,CAAC,OAAO;QACjE,OAAO,EAAE;IACX;IACA,OAAO;QAAE,oBAAA;QAAoB,oBAAA;QAAoB,mBAAA;IAAkB;AACrE;AAEA,SAAS,mBAAmB,SAAS,EAAE,kBAAkB,EAAE,kBAAkB;IAC3E,IAAI,CAAC,aAAa,CAAC,UAAU,UAAU,CAAC,MAAM,OAAO,EAAE;IACvD,IAAM,sBAAsB,sBAAsB,gKAA0B;IAC5E,IAAM,sBAAsB,sBAAsB,gKAA0B;IAC5E,IAAM,kBAAkB,mBAAmB,CAAC,UAAU,IAAI,EAAE;IAC5D,IAAI,gBAAgB,MAAM,KAAK,GAAG,OAAO,EAAE;IAC3C,IAAM,kBAAkB,IAAI;IAC5B,gBAAgB,OAAO,CAAC,SAAA;QACtB,IAAM,0BAA0B,mBAAmB,CAAC,UAAU,IAAI,EAAE;QACpE,wBAAwB,OAAO,CAAC,SAAA;YAC9B,IAAI,qBAAqB,WAAW,gBAAgB,GAAG,CAAC;QAC1D;IACF;IACA,OAAO,MAAM,IAAI,CAAC;AACpB;AAEA,SAAS,kCAAkC,SAAS,EAAE,kBAAkB,EAAE,kBAAkB;IAC1F,IAAI,CAAC,aAAa,CAAC,UAAU,UAAU,CAAC,MAAM,OAAO,EAAE;IACvD,IAAM,sBAAsB,sBAAsB,gKAA0B;IAC5E,IAAM,sBAAsB,sBAAsB,gKAA0B;IAC5E,IAAM,oBAAoB,mBAAmB,CAAC,UAAU,IAAI,EAAE;IAC9D,IAAI,kBAAkB,MAAM,KAAK,GAAG,OAAO,EAAE;IAC7C,IAAM,uBAAuB,EAAE;IAC/B,kBAAkB,OAAO,CAAC,SAAA;QACxB,IAAM,kBAAkB,mBAAmB,CAAC,UAAU,IAAI,EAAE;QAC5D,gBAAgB,OAAO,CAAC,SAAA;YACtB,IAAI,qBAAqB,WAAW;gBAClC,qBAAqB,IAAI,CAAC;oBAAE,MAAM;oBAAW,IAAI;gBAAiB;YACpE;QACF;IACF;IACA,OAAO;AACT;AAEA,IAAM,cAAc,MAAM,IAAI,CAAC;IAAE,QAAQ;AAAG,GAAG,SAAC,GAAG;WAAU,AAAC,IAAa,OAAV,QAAQ;;AACzE,IAAM,cAAc,MAAM,IAAI,CAAC;IAAE,QAAQ;AAAG,GAAG,SAAC,GAAG;WAAU,AAAC,IAAa,OAAV,QAAQ;;AACzE,IAAM,cAAc,YAAY,MAAM,GAAG,YAAY,MAAM;AAC3D,IAAM,cAAc;AAEpB,IAAM,iBAAiB;IACrB,IAAM,YAAY,CAAC;IAEnB,YAAY,OAAO,CAAC,SAAC,IAAI;QACvB,SAAS,CAAC,GAAG,GAAG,IAAA,6JAAiB,EAAC,OAAO,aAAa;IACxD;IAEA,YAAY,OAAO,CAAC,SAAC,IAAI;QACvB,SAAS,CAAC,GAAG,GAAG,IAAA,6JAAiB,EAC/B,YAAY,MAAM,GAAG,OACrB,aACA;IAEJ;IAEA,OAAO;AACT;AAEA,SAAS,uBAAuB,KAS/B;QARC,QAD8B,MAC9B,OACA,MAF8B,MAE9B,KACA,KAH8B,MAG9B,IACA,KAJ8B,MAI9B,IACA,QAL8B,MAK9B,OACA,mBAN8B,MAM9B,iCAN8B,MAO9B,OAAA,kCAAQ,8CAPsB,MAQ9B,YAAA,4CAAa;;IAEb,IAA8B,qLAAA,IAAA,yKAAQ,EAAC,QAAhC,UAAuB,cAAd,aAAc;IAC9B,IAAkC,sLAAA,IAAA,yKAAQ,EAAC,UAApC,YAA2B,eAAhB,eAAgB;IAClC,IAAM,kBAAkB,IAAA,uKAAM,EAAC;IAC/B,IAAM,oBAAoB,IAAA,uKAAM,EAAC;IACjC,IAAM,iBAAiB,IAAA,uKAAM,EAAC;IAC9B,IAAM,oBAAoB,IAAA,uKAAM,EAAC;IACjC,IAAM,aAAa,IAAA,uKAAM,EAAC,AAlH5B,AAkH6B,GAAc,OAAZ,KAAK,CAAC,EAAE,EAAC,KAAe,OAAZ,KAAK,CAAC,EAAE,EAAC,KAAa,OAAV,GAAG,CAAC,EAAE,EAAC,YAAG,GAAG,CAAC,EAAE,EAAC,YAAG,eAAA,yBAAA,EAAI,CAAC,EAAE,EAAC,KAAW,OAAR,eAAA,yBAAA,EAAI,CAAC,EAAE;IAE3F,IAAA,0KAAS;4CAAC;gBACkG,MAAuB;YAAjI,IAAM,SAAS,AArHnB,AAqHoB,GAAyB,OAAvB,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,KAA0B,OAAvB,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,KAAwB,OAArB,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,YAAG,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,YAAG,eAAA,0BAAA,OAAA,EAAI,CAAC,EAAE,cAAP,2BAAA,KAAS,OAAO,CAAC,IAAG,KAAuB,OAApB,eAAA,0BAAA,OAAA,EAAI,CAAC,EAAE,cAAP,2BAAA,KAAS,OAAO,CAAC;YAClJ,IAAI,WAAW,WAAW,OAAO,EAAE;gBACjC,WAAW,OAAO,GAAG;gBACrB,IAAI,kBAAkB,OAAO,EAAE;oBAC7B,WAAW;oBACX,gBAAgB,OAAO,GAAG,KAAK,GAAG;oBAClC,eAAe,OAAO,GAAG;oBACzB,kBAAkB,OAAO,GAAG;gBAC9B;YACF;QACF;2CAAG;QAAC;QAAO;QAAK;QAAI;KAAG;IAEvB,IAAA,0KAAS;4CAAC;YACR,IAAI,YAAY;gBACd,WAAW;gBACX,eAAe,OAAO,GAAG;gBACzB;YACF;YAEA,IAAI,CAAC,eAAe,OAAO,EAAE;gBAC3B,gBAAgB,OAAO,GAAG,KAAK,GAAG;gBAClC,IAAM,QAAQ,QAAQ;gBAEtB,IAAM,QAAQ;8DAAW;wBACvB,IAAM,YAAY,KAAK,GAAG;wBAC1B,IAAM,WAAW;wBAEjB,IAAM;8EAAU;gCACd,IAAM,UAAU,KAAK,GAAG,KAAK;gCAC7B,IAAM,WAAW,KAAK,GAAG,CAAC,UAAU,UAAU;gCAE9C,IAAM,QAAQ,IAAI,KAAK,GAAG,CAAC,IAAI,UAAU;gCACzC,WAAW;gCACX,aAAa,MAAM,QAAQ;gCAE3B,IAAI,WAAW,GAAG;oCAChB,sBAAsB;gCACxB,OAAO;oCACL,kBAAkB,OAAO,GAAG;oCAC5B,eAAe,OAAO,GAAG;gCAC3B;4BACF;;wBAEA;oBACF;6DAAG;gBAEH;wDAAO;+BAAM,aAAa;;;YAC5B;QACF;2CAAG;QAAC;QAAO;KAAW;IAEtB,IAAA,0KAAS;4CAAC;YACR,IAAI,eAAe,OAAO,IAAI,CAAC,cAAc,UAAU,KAAK;gBAC1D,WAAW;gBACX,aAAa;YACf;QACF;2CAAG;QAAC;QAAO;QAAK;QAAI;QAAI;QAAY;KAAQ;IAE5C,IAAM,sBAAsB,SAAC;QAC3B,OAAO,MAAM,MAAM,OAAO,CAAC,OAAO,GAAG,MAAM,KAAK,KAC9C,GAAG,KAAK,CAAC,SAAA;mBAAO,OAAO,QAAQ,YAAY,CAAC,MAAM,QAAQ,SAAS;;IACvE;IAEA,IAAM,eAAe,SAAC;QACpB,OAAO,KAAK,MAAM,OAAO,CAAC,MAAM,EAAE,MAAM,KAAK,KAC3C,EAAE,KAAK,CAAC,SAAA;mBAAO,OAAO,QAAQ,YAAY,CAAC,MAAM,QAAQ,SAAS;;IACtE;IAEA,IAAI,CAAC,aAAa,UAAU,CAAC,aAAa,QAAQ,CAAC,oBAAoB,OAAO,CAAC,oBAAoB,KAAK;QACtG,wCAA4C;YAC1C,QAAQ,IAAI,CAAC,4CAA4C;gBAAE,OAAA;gBAAO,KAAA;gBAAK,IAAA;gBAAI,IAAA;YAAG;QAChF;QACA,OAAO;IACT;IAEA,IAAI,YAAY,KAAK,YAAY,OAAO;IAExC,qBACE,6LAAC;QAAM,aAAa;QAAG,eAAe;kBACpC,cAAA,6LAAC,yLAAe;YACd,OAAO;YACP,KAAK;YACL,MAAM;YACN,MAAM;YACN,OAAO;YACP,WAAW;YACX,SAAS;YACT,WAAW;YACX,YAAY;YACZ,WAAW;;;;;;;;;;;AAInB;GA/GS;KAAA;AAiHF,SAAS,qBAAqB,KAAiB;;QAAjB,AAAE,gBAAF,MAAE;;IACrC,IAAM,AAAE,SAAW,IAAA,8NAAQ,IAAnB;IACR,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAA2B,sLAAA,IAAA,iKAAQ,EAAC,yBAAyB,EAAE,OAAxD,mBAAoB;IAC3B,IAAuB,sLAAA,IAAA,iKAAQ,EAAC,kCAAkC,WAA3D,eAAgB;IAEvB,IAAM,iBAAiB,IAAA,wKAAO;wDAAC;mBAAM,kCAAkC;;uDAAgB;QAAC;KAAc;IACtG,IAAM,oBAAoB,iBAAiB,eAAe,iBAAiB,GAAG,8JAAuB;IACrG,IAAM,qBAAqB,iBAAiB,eAAe,kBAAkB,GAAG,gKAA0B;IAC1G,IAAM,qBAAqB,iBAAiB,eAAe,kBAAkB,GAAG,gKAA0B;IAE1G,IAAM,eAAe;QACnB,IAAI,iBAAiB,cAAc,OAAO,EAAE;YAC1C,IAAM,SAAS,CAAC;YAChB,cAAc,OAAO,CAAC,OAAO,CAAC,SAAC,MAAM;gBACnC,MAAM,CAAC,GAAG,GAAG,KAAK,QAAQ,IAAI;oBAAC;oBAAG;oBAAG;iBAAE;YACzC;YACA,OAAO;QACT;QACA,OAAO;IACT;IAEA,IAAA,0KAAS;0CAAC;YACR,IAAM,mBAAmB,IAAA,iKAAQ,EAAC;YAClC,IAAM,4BAA4B,IAAA,iKAAQ,EAAC;YAC3C,IAAM,cAAc,IAAI;YACxB,IAAM,uBAAuB,IAAI;YAEjC,IAAI,yBAAA,mCAAA,aAAc,EAAE,EAAE;gBACpB,YAAY,GAAG,CAAC,aAAa,EAAE;gBAC/B,IAAM,YAAY,kBAAkB,aAAa,EAAE;gBACnD,UAAU,OAAO;sDAAC,SAAA;wBAChB,IAAI,QAAQ;4BACV,YAAY,GAAG,CAAC;wBAClB;oBACF;;gBAEA,IAAI,aAAa,EAAE,CAAC,UAAU,CAAC,MAAM;oBACnC,IAAM,kBAAkB,mBAAmB,aAAa,EAAE,EAAE,oBAAoB;oBAChF,gBAAgB,OAAO;0DAAC,SAAA;4BACtB,qBAAqB,GAAG,CAAC;wBAC3B;;gBACF;YACF;YAEA;kDAAsB;oBACpB,iBAAiB,QAAQ,CAAC,MAAM,IAAI,CAAC;oBACrC,0BAA0B,QAAQ,CAAC,MAAM,IAAI,CAAC;gBAChD;;YAEA,mBAAmB,OAAO,CAAC,KAAK;YAChC,IAAA,4JAAU;QACZ;yCAAG;QAAC;KAAa;IAEjB,IAAM,eAAe,IAAA,uKAAM,EAAC;IAC5B,IAAM,mBAAmB,IAAA,uKAAM,EAAC,CAAC;IACjC,IAAM,mBAAmB,IAAA,uKAAM,EAAC;IAChC,IAA0C,qLAAA,IAAA,yKAAQ,EAAC,QAA5C,gBAAmC,cAApB,mBAAoB;IAE1C,IAAA,8NAAQ;yCAAC,SAAC;YACR,IAAM,MAAM,KAAK,GAAG;YACpB,IAAI,MAAM,aAAa,OAAO,GAAG,IAAI;YACrC,aAAa,OAAO,GAAG;YAEvB,IAAI,CAAC,iBAAiB,CAAC,cAAc,OAAO,IAAI,EAAC,yBAAA,mCAAA,aAAc,EAAE,GAAE;YAEnE,IAAM,mBAAmB,MAAM,MAAM,CAAC,QAAQ;YAC9C,IAAM,gBAAgB,CAAC,iBAAiB,OAAO,IAC7C,KAAK,GAAG,CAAC,iBAAiB,CAAC,GAAG,iBAAiB,OAAO,CAAC,CAAC,IAAI,QAC5D,KAAK,GAAG,CAAC,iBAAiB,CAAC,GAAG,iBAAiB,OAAO,CAAC,CAAC,IAAI,QAC5D,KAAK,GAAG,CAAC,iBAAiB,CAAC,GAAG,iBAAiB,OAAO,CAAC,CAAC,IAAI;YAE9D,IAAI,eAAe;gBACjB,iBAAiB,OAAO,GAAG,iBAAiB,KAAK;YACnD;YAGA,IAAM,mBAAmB;YACzB,IAAM,eAAe,kBAAkB,aAAa,EAAE;YACtD,IAAM,iBAAiB;gBAAC,aAAa,EAAE;aAAkB,CAAlC,OAAkB,6KAAG;YAE5C,IAAI,aAAa;YACjB,eAAe,OAAO;iDAAC,SAAA;oBACrB,IAAM,aAAa,gBAAgB,CAAC,OAAO;oBAC3C,IAAI,CAAC,YAAY;oBAEjB,IAAM,UAAU,iBAAiB,OAAO,CAAC,OAAO;oBAChD,IAAI,CAAC,SAAS;wBACZ,aAAa;wBACb,iBAAiB,OAAO,CAAC,OAAO,GAAI,6KAAG;oBACzC,OAAO;wBACL,IAAM,YAAY;wBAClB,IAAM,UACJ,KAAK,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,aACvC,KAAK,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,aACvC,KAAK,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI;wBAEzC,IAAI,SAAS;4BACX,aAAa;4BACb,iBAAiB,OAAO,CAAC,OAAO,GAAI,6KAAG;wBACzC;oBACF;gBACF;;YAEA,IAAI,cAAc,eAAe;gBAC/B;qDAAsB;wBACpB;6DAAiB,SAAA;uCAAQ,OAAO;;;oBAClC;;YACF;QACF;;IAEA,IAAM,WAAW,IAAA,uKAAM,EAAC,IAAI,6JAAa;IACzC,IAAM,WAAW,IAAA,uKAAM,EAAC,IAAI,6JAAa;IACzC,IAAM,WAAW,IAAA,uKAAM,EAAC,IAAI,6JAAa;IACzC,IAAM,WAAW,IAAA,uKAAM,EAAC,IAAI,6JAAa;IACzC,IAAM,aAAa,IAAA,uKAAM,EAAC,IAAI,6JAAa,CAAC,GAAG,GAAG;IAClD,IAAM,WAAW,IAAA,uKAAM,EAAC,IAAI,6JAAa,CAAC,GAAG,GAAG;IAEhD,IAAM,wBAAwB,SAAC,OAAO,KAAK,OAAO;YAAoB,mFAAkB;QACtF,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,OAAO,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,QAC5D,MAAM,MAAM,KAAK,KAAK,IAAI,MAAM,KAAK,KACrC,MAAM,IAAI,CAAC,SAAA;mBAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;cAC/D,IAAI,IAAI,CAAC,SAAA;mBAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;YAAK;YAClE,IAAM,MAAM;gBACV,CAAC,CAAC,CAAA,kBAAA,4BAAA,KAAO,CAAC,EAAE,KAAI,CAAC,IAAI,CAAC,CAAA,gBAAA,0BAAA,GAAK,CAAC,EAAE,KAAI,CAAC,CAAC,IAAI;gBACxC,CAAC,CAAC,CAAA,kBAAA,4BAAA,KAAO,CAAC,EAAE,KAAI,CAAC,IAAI,CAAC,CAAA,gBAAA,0BAAA,GAAK,CAAC,EAAE,KAAI,CAAC,CAAC,IAAI;gBACxC,CAAC,CAAC,CAAA,kBAAA,4BAAA,KAAO,CAAC,EAAE,KAAI,CAAC,IAAI,CAAC,CAAA,gBAAA,0BAAA,GAAK,CAAC,EAAE,KAAI,CAAC,CAAC,IAAI;aACzC;YACD,OAAO;gBAAE,IAAI;gBAAK,IAAI;YAAI;QAC5B;QAEA,IAAM,KAAK,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE;QAC5B,IAAM,KAAK,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE;QAC5B,IAAM,KAAK,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE;QAC5B,IAAM,WAAW,KAAK,IAAI,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK;QAEpD,IAAI,WAAW,SAAS,CAAC,SAAS,WAAW;YAC3C,IAAM,OAAM;gBACV,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,IAAI;gBACtB,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,IAAI;gBACtB,CAAC,KAAK,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,IAAI;aACvB;YACD,OAAO;gBAAE,IAAI;gBAAK,IAAI;YAAI;QAC5B;QAEA,IAAM,YAAY,SAAS,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI;QAE/C,IAAI,UAAU,MAAM,KAAK,SAAS,CAAC,SAAS,UAAU,MAAM,KAAK;YAC/D,UAAU,GAAG,CAAC,GAAG,GAAG;QACtB,OAAO;YACL,UAAU,SAAS;QACrB;QAEA,IAAM,UAAU,WAAW,OAAO;QAClC,IAAI,OAAO,SAAS,OAAO,CAAC,YAAY,CAAC,SAAS;QAElD,IAAI,KAAK,MAAM,KAAK,OAAO;YACzB,KAAK,YAAY,CAAC,SAAS,OAAO,EAAE;QACtC;QACA,KAAK,SAAS;QAEd,IAAM,QAAQ,SAAS,OAAO,CAAC,YAAY,CAAC,WAAW,MAAM,SAAS;QAEtE,IAAM,iBAAiB,AAAC,QAAQ,KAAM;QACtC,IAAM,QAAQ,AAAC,iBAAiB,KAAK,EAAE,GAAI;QAC3C,IAAM,WAAW,KAAK,GAAG,CAAC;QAC1B,IAAM,WAAW,KAAK,GAAG,CAAC;QAC1B,IAAM,mBAAmB,WAAW,OAAO;QAC3C,IAAM,oBAAoB,WAAW,OAAO;QAE5C,IAAM,uBAAuB,kBAAkB,OAAO;QAEtD,IAAM,KAAK,SAAS,OAAO,CAAC,GAAG,CAC7B,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,uBAAuB,KAAK,CAAC,GAAG,mBAAmB,MAAM,MAAM,CAAC,GAAG,oBAAoB,KAC9G,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,sBACvB,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,uBAAuB,KAAK,CAAC,GAAG,mBAAmB,MAAM,MAAM,CAAC,GAAG,oBAAoB;QAGhH,IAAM,YAAY,WAAW;QAC7B,IAAM,kBAAkB,kBAAkB,CAAC,WAAW,OAAO,CAAC,WAAW;QAEzE,IAAM,KAAK,SAAS,OAAO,CAAC,GAAG,CAC7B,KAAK,CAAC,EAAE,GAAG,UAAU,CAAC,GAAG,YAAY,KAAK,CAAC,GAAG,mBAAmB,MAAM,MAAM,CAAC,GAAG,oBAAoB,KACrG,KAAK,CAAC,EAAE,GAAG,UAAU,CAAC,GAAG,YAAY,kBAAkB,KAAK,CAAC,GAAG,mBAAmB,MAAM,MAAM,CAAC,GAAG,oBAAoB,KACvH,KAAK,CAAC,EAAE,GAAG,UAAU,CAAC,GAAG,YAAY,KAAK,CAAC,GAAG,mBAAmB,MAAM,MAAM,CAAC,GAAG,oBAAoB;QAGvG,IAAM,WAAW,SAAC;mBAAQ,AAAC,OAAO,QAAQ,YAAY,SAAS,QAAQ,CAAC,MAAM,OAAQ,MAAM;;QAC5F,IAAM,MAAM;YAAC,SAAS,GAAG,CAAC;YAAG,SAAS,GAAG,CAAC;YAAG,SAAS,GAAG,CAAC;SAAE;QAC5D,IAAM,MAAM;YAAC,SAAS,GAAG,CAAC;YAAG,SAAS,GAAG,CAAC;YAAG,SAAS,GAAG,CAAC;SAAE;QAE5D,OAAO;YACL,IAAI;YACJ,IAAI;QACN;IACF;IACA,IAAM,YAAY,IAAA,uKAAM,EAAC,IAAI,6JAAa,CAAC,GAAG,GAAG;IACjD,IAAM,eAAe,IAAA,uKAAM,EAAC,IAAI,6JAAa,CAAC,GAAG,GAAG;IACpD,IAAM,cAAc,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAC5C,IAAM,kBAAkB,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAChD,IAAM,YAAY,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAC1C,IAAM,SAAS,IAAA,uKAAM,EAAC,IAAI,6JAAa;IACvC,IAAM,aAAa,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAC3C,IAAM,qBAAqB,IAAA,uKAAM,EAAC,IAAI;IAEtC,IAAM,mBAAmB,SAAC,QAAQ;YAAc,0EAAS;QACvD,IAAM,kBAAkB,IAAA,wKAAsB,EAAC;QAC/C,IAAI,iBAAiB;YACnB,OAAO;QACT;QAEA,IAAI,uBAAuB;QAC3B,IAAI,2BAA2B,EAAE;QACjC,IAAI;YACF,uBAAuB,IAAA,iKAAQ,EAAC,qBAAqB;YACrD,IAAM,wBAAwB,IAAA,iKAAQ,EAAC,yBAAyB,EAAE;YAClE,2BAA2B,MAAM,OAAO,CAAC,yBAAyB,wBAAwB,EAAE;QAC9F,EAAE,OAAO,GAAG;QACV,sBAAsB;QACxB;QAEA,IAAM,wBAAwB,CAAA,iCAAA,2CAAA,qBAAsB,EAAE,MAAK,UAAU,yBAAyB,QAAQ,CAAC;QACvG,IAAI,+BAA+B,EAAE;QACrC,IAAI;YACF,IAAM,iCAAiC,IAAA,iKAAQ,EAAC,qCAAqC,EAAE;YACvF,+BAA+B,MAAM,OAAO,CAAC,kCAAkC,iCAAiC,EAAE;QACpH,EAAE,OAAO,GAAG;QACV,sBAAsB;QACxB;QACA,IAAM,iCAAiC,6BAA6B,QAAQ,CAAC;QAC7E,IAAM,mBAAmB,wBAAwB,qBAAqB,EAAE,KAAK,UAAU,CAAC,yBAAyB,QAAQ,CAAC,WAAW,CAAC;QACtI,IAAM,aAAa,wBAAwB,QAAS,mBAAmB,QAAQ;QAC/E,IAAM,iBAAiB,iCAAiC,cAAc;QACtE,IAAM,cAAc,SAAS,AAAC,GAAkC,OAAhC,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG,KAAmC,OAAhC,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG,KAAgC,OAA7B,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,MAAO;QAEjI,IAAM,WAAW,AAAC,GAAY,OAAV,QAAO,KAAiC,OAA9B,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,KAAiC,OAA9B,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,KAAiC,OAA9B,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,IAAG,KAAiB,OAAd,YAAW,KAAqB,OAAlB,gBAAe,KAAe,OAAZ;QACxJ,IAAM,SAAS,mBAAmB,OAAO,CAAC,GAAG,CAAC;QAC9C,IAAI,UAAU,CAAC,yBAAyB,CAAC,gCAAgC,OAAO;QAEhF,IAAM,SAAS,UAAU,OAAO;QAChC,IAAM,UAAU,YAAY,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE,EAAE,YAAY,CAAC,EAAE;QAEzF,IAAI,oBAAoB,gBAAgB,OAAO;QAC/C,IAAI,CAAC,yBAAyB,8BAA8B,KAAK,QAAQ;YACvE,kBAAkB,UAAU,CAAC,OAAO,QAAQ,EAAE,SAAS,SAAS;QAClE,OAAO;YACL,kBAAkB,UAAU,CAAC,QAAQ,SAAS,SAAS;QACzD;QAEA,IAAM,UAAU,aAAa,OAAO;QACpC,IAAI,QAAQ,UAAU,OAAO,CAAC,YAAY,CAAC,SAAS;QACpD,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,GAAG,CAAC,GAAG,GAAG;QAClB;QACA,MAAM,SAAS;QAEf,IAAI,KAAK,OAAO,OAAO,CAAC,YAAY,CAAC,mBAAmB,OAAO,SAAS;QAExE,IAAI,KAAK,GAAG,CAAC,kBAAkB,GAAG,CAAC,YAAY,MAAM;YACnD,GAAG,GAAG,CAAC,GAAG,GAAG;YACb,MAAM,GAAG,CAAC,GAAG,GAAG;QAClB;QAEA,IAAM,YAAY,UAAU,OAAO,UAAU,CAAC;QAC9C,IAAM,SAAS,WAAW,OAAO;QAEjC,IAAI,WAAW;YACb,IAAM,mBAAkB,IAAA,wKAAsB,EAAC;YAC/C,IAAI,kBAAiB;gBACnB,OAAO;YACT;YAEA,IAAM,kBAAkB;YACxB,IAAM,cAAc;YACpB,IAAM,kBAAkB,kBAAmB,cAAc;YACzD,IAAM,iBAAiB;YAEvB,IAAI,eAAe;YACnB,IAAI,mBAAmB,EAAE;YACzB,IAAI,+BAA+B,EAAE;YACrC,IAAI;gBACF,eAAe,IAAA,iKAAQ,EAAC,qBAAqB;gBAC7C,IAAM,yBAAwB,IAAA,iKAAQ,EAAC,yBAAyB,EAAE;gBAClE,mBAAmB,MAAM,OAAO,CAAC,0BAAyB,yBAAwB,EAAE;gBACpF,IAAM,kCAAiC,IAAA,iKAAQ,EAAC,qCAAqC,EAAE;gBACvF,+BAA+B,MAAM,OAAO,CAAC,mCAAkC,kCAAiC,EAAE;YACpH,EAAE,OAAO,GAAG;YACV,oCAAoC;YACtC;YAEA,IAAI,CAAC,MAAM,OAAO,CAAC,mBAAmB;gBACpC,mBAAmB,EAAE;YACvB;YACA,IAAI,CAAC,MAAM,OAAO,CAAC,+BAA+B;gBAChD,+BAA+B,EAAE;YACnC;YAEA,IAAM,gBAAgB,CAAA,yBAAA,mCAAA,aAAc,EAAE,MAAK,UAAU,iBAAiB,QAAQ,CAAC;YAC/E,IAAM,yBAAyB,6BAA6B,QAAQ,CAAC;YACrE,IAAM,WAAW,gBAAgB,aAAa,EAAE,KAAK,UAAU,CAAC,iBAAiB,QAAQ,CAAC,WAAW,CAAC;YAEtG,IAAI,eAAe;YACnB,IAAI,eAAe;gBACjB,eAAe;YACjB,OAAO,IAAI,UAAU;gBACnB,eAAe;YACjB;YAEA,IAAM,oBAAoB,kBAAkB;YAE5C,IAAI,CAAC,iBAAiB,sBAAsB,KAAK,QAAQ;gBACvD,IAAM,oBAAoB,gBAAgB,OAAO,CAAC,UAAU,CAAC,OAAO,QAAQ,EAAE,SAAS,SAAS;gBAChG,IAAM,WAAU,aAAa,OAAO;gBAEpC,IAAI,SAAQ,UAAU,OAAO,CAAC,YAAY,CAAC,UAAS;gBACpD,IAAI,OAAM,MAAM,KAAK,OAAO;oBAC1B,OAAM,GAAG,CAAC,GAAG,GAAG;gBAClB;gBACA,OAAM,SAAS;gBAEf,IAAI,cAAc,OAAO,OAAO,CAAC,YAAY,CAAC,mBAAmB,QAAO,SAAS;gBAEjF,IAAM,QAAQ,WAAW,OAAO,CAAC,SAAS,CAAC,QAAO,aAAa;gBAC/D,IAAM,eAAe,SAAS,OAAO,CAAC,qBAAqB,CAAC;gBAE5D,IAAM,aAAa,SAAS,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG;gBAC9C,WAAW,eAAe,CAAC;gBAC3B,IAAM,YAAY,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,eAAc,CAAC,MAAM,KAAK,EAAE;gBAChG,IAAM,iBAAiB,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,kBAAkB,GAAG,CAAC,eAAc,CAAC,MAAM,KAAK,EAAE;gBAE5G,IAAI;gBACJ,IAAI,wBAAwB;oBAC1B,IAAM,aAAa,CAAC,CAAC,oBAAoB,IAAI,GAAG,IAAI;oBACpD,IAAM,aAAa,KAAK,GAAG,CAAC,YAAY,KAAK,EAAE,GAAG;oBAClD,qBAAqB,aAAa,KAAK,GAAG,CAAC,KAAK;gBAClD,OAAO;oBACL,qBAAqB,CAAC,CAAC,oBAAoB,MAAM,GAAG,IAAI;gBAC1D;gBAEA,IAAM,cAAc,gBAAgB,OAAO,CAAC,GAAG,CAAC,GAAG,oBAAoB;gBACvE,IAAM,gBAAgB,kBAAkB,OAAO,CAAC,IAAI,CAAC,aAAa,eAAe,CAAC;gBAElF,IAAM,aAAa,cAAc,CAAC,GAAG,YAAY,CAAC;gBAClD,IAAM,mBAAmB,KAAK,IAAI,CAAC,cAAc,CAAC,GAAG,cAAc,CAAC,GAAG,cAAc,CAAC,GAAG,cAAc,CAAC;gBAExG,IAAI,wBAAwB;oBAC1B,QAAQ,GAAG,CAAC,yBAAyB,QAAQ,sDAAsD;wBACjG,mBAAmB,kBAAkB,OAAO,CAAC;wBAC7C,oBAAoB,mBAAmB,OAAO,CAAC;wBAC/C,aAAa,AAAC,IAAgC,OAA7B,YAAY,CAAC,CAAC,OAAO,CAAC,IAAG,MAAiC,OAA7B,YAAY,CAAC,CAAC,OAAO,CAAC,IAAG,MAA6B,OAAzB,YAAY,CAAC,CAAC,OAAO,CAAC,IAAG;wBACpG,eAAe,AAAC,IAAkC,OAA/B,cAAc,CAAC,CAAC,OAAO,CAAC,IAAG,MAAmC,OAA/B,cAAc,CAAC,CAAC,OAAO,CAAC,IAAG,MAA+B,OAA3B,cAAc,CAAC,CAAC,OAAO,CAAC,IAAG;wBAC5G,YAAY,WAAW,OAAO,CAAC;wBAC/B,kBAAkB,iBAAiB,OAAO,CAAC;wBAC3C,WAAW,UAAU,OAAO,CAAC,KAAK;wBAClC,gBAAgB,eAAe,OAAO,CAAC,KAAK;wBAC5C,WAAW,AAAC,IAAoC,OAAjC,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG,MAAqC,OAAjC,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG,MAAiC,OAA7B,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG;wBAC9G,SAAS,AAAC,IAA4B,OAAzB,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAG,MAA6B,OAAzB,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAG,MAAyB,OAArB,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAG;wBACpF,mBAAmB,AAAC,IAAsC,OAAnC,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAG,MAAuC,OAAnC,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAG,MAAmC,OAA/B,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAG;oBAC9H;gBACF;gBACA,IAAI,eAAe;oBACjB,QAAQ,GAAG,CAAC,2BAA2B,QAAQ,qDAAqD;wBAClG,mBAAmB,kBAAkB,OAAO,CAAC;wBAC7C,oBAAoB,mBAAmB,OAAO,CAAC;wBAC/C,aAAa,AAAC,IAAgC,OAA7B,YAAY,CAAC,CAAC,OAAO,CAAC,IAAG,MAAiC,OAA7B,YAAY,CAAC,CAAC,OAAO,CAAC,IAAG,MAA6B,OAAzB,YAAY,CAAC,CAAC,OAAO,CAAC,IAAG;wBACpG,eAAe,AAAC,IAAkC,OAA/B,cAAc,CAAC,CAAC,OAAO,CAAC,IAAG,MAAmC,OAA/B,cAAc,CAAC,CAAC,OAAO,CAAC,IAAG,MAA+B,OAA3B,cAAc,CAAC,CAAC,OAAO,CAAC,IAAG;wBAC5G,YAAY,WAAW,OAAO,CAAC;wBAC/B,kBAAkB,iBAAiB,OAAO,CAAC;wBAC3C,WAAW,UAAU,OAAO,CAAC,KAAK;wBAClC,gBAAgB,eAAe,OAAO,CAAC,KAAK;wBAC5C,WAAW,AAAC,IAAoC,OAAjC,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG,MAAqC,OAAjC,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG,MAAiC,OAA7B,OAAO,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,IAAG;wBAC9G,SAAS,AAAC,IAA4B,OAAzB,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAG,MAA6B,OAAzB,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAG,MAAyB,OAArB,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAG;wBACpF,mBAAmB,AAAC,IAAsC,OAAnC,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAG,MAAuC,OAAnC,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAG,MAAmC,OAA/B,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAG;oBAC9H;gBACF;gBAEA,OAAO,IAAI,CAAC;gBACZ,OAAO,GAAG,CAAC;YACb,OAAO;gBACL,IAAI;gBACJ,IAAI,wBAAwB;oBAC1B,sBAAqB,CAAC,CAAC,oBAAoB,MAAM,IAAI,IAAI;gBAC3D,OAAO;oBACL,sBAAqB,CAAC,CAAC,oBAAoB,MAAM,GAAG,IAAI;gBAC1D;gBACA,OAAO,IAAI,CAAC;gBACZ,OAAO,eAAe,CAAC,IAAI;YAC7B;QACF,OAAO;YACL,IAAM,gBAAgB;YACtB,IAAM,gBAAgB,CAAC,CAAC,gBAAgB,CAAC;YACzC,OAAO,IAAI,CAAC,SAAS,eAAe,CAAC,IAAI;QAC3C;QAEA,IAAM,cAAc;YAAC,OAAO,CAAC;YAAE,OAAO,CAAC;YAAE,OAAO,CAAC;SAAC;QAClD,mBAAmB,OAAO,CAAC,GAAG,CAAC,UAAU;QACzC,IAAI,mBAAmB,OAAO,CAAC,IAAI,GAAG,KAAK;YACzC,mBAAmB,OAAO,CAAC,KAAK;QAClC;QACA,OAAO;IACT;IAEA,IAAM,eAAe,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAC7C,IAAM,aAAa,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAC3C,IAAM,kBAAkB,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAChD,IAAM,oBAAoB,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAClD,IAAM,WAAW,IAAA,uKAAM,EAAC,IAAI,gKAAgB;IAC5C,IAAM,aAAa,IAAA,uKAAM,EAAC,IAAI,6JAAa;IAE3C,IAAM,aAAa,SAAC,UAAU,QAAQ,OAAO,kBAAkB,OAAO,oBAAoB,SAAS;QACjG,IAAM,kBAAkB,WAAW,QAAQ,UAAU,CAAC;QACtD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,aAAa,CAAC,MAAM,OAAO,CAAC,WACrE,SAAS,MAAM,KAAK,KAAK,OAAO,MAAM,KAAK,KAC3C,SAAS,IAAI,CAAC,SAAA;mBAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;cAClE,OAAO,IAAI,CAAC,SAAA;mBAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;YAAK;YACrE,OAAO;QACT;QAEA,IAAM,cAAc,aAAa,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAE;QAClF,IAAM,YAAY,WAAW,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE;QACxE,IAAM,KAAK,UAAU,CAAC,GAAG,YAAY,CAAC;QACtC,IAAM,KAAK,UAAU,CAAC,GAAG,YAAY,CAAC;QACtC,IAAM,KAAK,UAAU,CAAC,GAAG,YAAY,CAAC;QACtC,IAAM,WAAW,KAAK,IAAI,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK;QAEpD,IAAI,WAAW,QAAQ,CAAC,SAAS,WAAW;YAC1C,OAAO;QACT;QAEA,IAAI,gBAAgB,sBAAsB,UAAU,QAAQ,OAAO,oBAAoB;QAEvF,IAAI,CAAC,iBAAiB,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,IAC1D,CAAC,MAAM,OAAO,CAAC,cAAc,EAAE,KAAK,CAAC,MAAM,OAAO,CAAC,cAAc,EAAE,KACnE,cAAc,EAAE,CAAC,MAAM,KAAK,KAAK,cAAc,EAAE,CAAC,MAAM,KAAK,KAC7D,cAAc,EAAE,CAAC,IAAI,CAAC,SAAA;mBAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;cAC1E,cAAc,EAAE,CAAC,IAAI,CAAC,SAAA;mBAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;YAAK;YAC/E,OAAO;QACT;QAEA,IAAM,MAAM,AAAC,GAAa,OAAX,SAAQ,KAAY,OAAT,OAAM,KAAS,OAAN;QAEnC,qBACE,6LAAC;YAEC,OAAO;YACP,KAAK;YACL,IAAI,cAAc,EAAE;YACpB,IAAI,cAAc,EAAE;YACpB,OAAO;YACP,kBAAkB;YAClB,OAAO;YACP,YAAY,CAAC;WARR;;;;;IAWX;IAEA,IAAM,QAAQ,IAAA,wKAAO;+CAAC;YACpB,IAAI,EAAC,yBAAA,mCAAA,aAAc,EAAE,KAAI,CAAC,cAAc;gBACtC,OAAO,EAAE;YACX;YAEA,IAAM,YAAY;YAClB,IAAM,eAAe,SAAS,CAAC,aAAa,EAAE,CAAC;YAC/C,IAAI,CAAC,gBAAgB,CAAC,MAAM,OAAO,CAAC,iBAAiB,aAAa,MAAM,KAAK,GAAG;gBAC9E,OAAO,EAAE;YACX;YAEA,IAAM,gBAAgB,iBAAiB,aAAa,EAAE,EAAE,cAAc;YAEtE,IAAI,CAAC,iBAAiB,CAAC,MAAM,OAAO,CAAC,kBAAkB,cAAc,MAAM,KAAK,KAC9E,cAAc,IAAI;uDAAC,SAAA;2BAAK,OAAO,MAAM,YAAY,MAAM,MAAM,CAAC,SAAS;;uDAAK;gBAC5E,wCAA4C;oBAC1C,QAAQ,IAAI,CAAC,AAAC,qDAAoE,OAAhB,aAAa,EAAE,EAAC,MAAI;gBACxF;gBACA,OAAO,EAAE;YACX;YAEA,IAAM,WAAW,EAAE;YACnB,IAAM,YAAY,aAAa,EAAE,CAAC,UAAU,CAAC;YAE7C,IAAM,UAAU,kBAAkB,aAAa,EAAE,KAAK,EAAE;YACxD,IAAM,gBAAgB,uCAAU,QAAQ,MAAM,GAAG;YACjD,IAAI,gBAAgB,GAAG;gBACrB,IAAK,IAAI,IAAI,GAAG,IAAI,eAAe,IAAK;oBACtC,IAAM,WAAW,OAAO,CAAC,EAAE;oBAC3B,IAAM,qBAAqB,SAAS,CAAC,SAAS;oBAC9C,IAAI,CAAC,oBAAoB;oBAEzB,IAAM,cAAc,iBAAiB,UAAU,oBAAoB;oBACnE,IAAM,qBAAqB,aAAa,SAAS,UAAU,CAAC;oBAE5D,IAAM,OAAO,WACX,eACA,aACA,GACA,eACA,WACA,oBACA,aAAa,EAAE,EACf;oBAGF,IAAI,MAAM,SAAS,IAAI,CAAC;gBAC1B;YACF;YAEA,IAAI,WAAW;gBACb,IAAM,kBAAkB,mBAAmB,aAAa,EAAE,EAAE,oBAAoB;gBAChF,IAAM,0BAA0B,kBAAkB,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE;gBACzE,IAAM,sBAAsB,IAAI,IAAI;gBAEpC,IAAI,iBAAiB;gBACrB,IAAI,kBAAkB;gBACtB,IAAK,IAAI,KAAI,GAAG,KAAI,gBAAgB,MAAM,EAAE,KAAK;oBAC/C,IAAM,yBAAyB,kBAAkB,CAAC,eAAe,CAAC,GAAE,CAAC,IAAI,EAAE;oBAC3E,mBAAmB,uBAAuB,MAAM;+DAAC,SAAA;mCAAM,oBAAoB,GAAG,CAAC;;8DAAK,MAAM;gBAC5F;gBAEA,IAAK,IAAI,KAAI,GAAG,KAAI,gBAAgB,MAAM,EAAE,KAAK;oBAC/C,IAAM,mBAAmB,eAAe,CAAC,GAAE;oBAC3C,IAAM,oBAAoB,SAAS,CAAC,iBAAiB;oBACrD,IAAI,CAAC,mBAAmB;oBAExB,IAAM,0BAAyB,kBAAkB,CAAC,iBAAiB,IAAI,EAAE;oBACzE,IAAM,iBAAiB,wBAAuB,MAAM;8EAAC,SAAA;mCAAM,oBAAoB,GAAG,CAAC;;;oBAEnF,IAAK,IAAI,IAAI,GAAG,IAAI,eAAe,MAAM,EAAE,IAAK;wBAC9C,IAAM,kBAAkB,cAAc,CAAC,EAAE;wBACzC,IAAM,aAAa,SAAS,CAAC,gBAAgB;wBAC7C,IAAI,CAAC,YAAY;wBAEjB,IAAM,yBAAyB,iBAAiB,kBAAkB,mBAAmB;wBACrF,IAAM,gBAAgB,iBAAiB,iBAAiB,YAAY;wBAEpE,IAAM,QAAO,WACX,wBACA,eACA,gBAAgB,gBAChB,gBAAgB,iBAChB,WACA,MACA,kBACA;wBAGF,IAAI,OAAM;4BACR,SAAS,IAAI,CAAC;4BACd;wBACF;oBACF;gBACF;YACF;YAEA,OAAO;QACT;8CAAG;QAAC,yBAAA,mCAAA,aAAc,EAAE;QAAE;QAAe;QAAc;QAAe;QAAoB;KAAmB;IAEzG,IAAA,0KAAS;0CAAC;YACR,IAAI,CAAA,yBAAA,mCAAA,aAAc,EAAE,KAAI,gBAAgB,MAAM,MAAM,KAAK,GAAG;gBAC1D;sDAAsB;wBACpB;8DAAiB,SAAA;uCAAQ,OAAO;;;oBAClC;;YACF;QACF;yCAAG;QAAC;QAAc;QAAc,MAAM,MAAM;KAAC;IAE7C,IAAI,CAAC,MAAM,MAAM,EAAE;QACjB,OAAO;IACT;IAEA,qBAAO,6LAAC;QAAM,eAAe;kBAAQ;;;;;;AACvC;IAzjBgB;;QACK,8NAAQ;QACJ,iKAAQ;QACJ,iKAAQ;QACZ,iKAAQ;QAuD/B,8NAAQ;;;MA3DM;uCA2jBD"}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/ElementOpacityController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { useThree } from '@react-three/fiber';\nimport { getStore } from 'usestore-react';\nimport { getConnectedNodes } from './nodeConnections';\nimport './selectionStore';\n\nexport function ElementOpacityController() {\n  const { camera, gl } = useThree();\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n\n  const isUserMovingCameraRef = useRef(false);\n  const opacityStoreRef = useRef(null);\n  const animationInProgressRef = useRef(false);\n\n  useEffect(() => {\n    opacityStoreRef.current = getStore('elementOpacityStore');\n    if (!opacityStoreRef.current) {\n      const { createStore } = require('usestore-react');\n      opacityStoreRef.current = createStore('elementOpacityStore', {});\n    }\n  }, []);\n\n  useEffect(() => {\n    const handleStart = () => {\n      isUserMovingCameraRef.current = true;\n      animationInProgressRef.current = false;\n    };\n\n    const handleChange = () => {\n    };\n\n    const controls = gl.domElement.parentElement?.querySelector('canvas')?.__r3f?.controls;\n    if (controls) {\n      controls.addEventListener('start', handleStart);\n      controls.addEventListener('change', handleChange);\n\n      return () => {\n        controls.removeEventListener('start', handleStart);\n        controls.removeEventListener('change', handleChange);\n      };\n    }\n\n    const canvas = gl.domElement;\n    const handleMouseDown = () => {\n      isUserMovingCameraRef.current = true;\n      animationInProgressRef.current = false;\n    };\n\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('touchstart', handleMouseDown, { passive: true });\n\n    return () => {\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('touchstart', handleMouseDown);\n    };\n  }, [gl]);\n\n  useEffect(() => {\n    if (!opacityStoreRef.current) return;\n\n    if (!selectedNode?.id || !Array.isArray(highlightedNodes) || highlightedNodes.length === 0) {\n      opacityStoreRef.current.setState({});\n      return;\n    }\n\n    const secondaryHighlightedSet = new Set(Array.isArray(secondaryHighlightedArticles) ? secondaryHighlightedArticles : []);\n\n    const opacityMap = {};\n    const highlightedSet = new Set(highlightedNodes);\n    const selectedId = selectedNode?.id;\n\n    const ARTICLE_IDS = Array.from({ length: 29 }, (_, index) => `A${index + 1}`);\n    const KEYWORD_IDS = Array.from({ length: 54 }, (_, index) => `G${index + 1}`);\n\n    const directlyConnected = selectedId ? new Set(getConnectedNodes(selectedId)) : new Set();\n    directlyConnected.add(selectedId);\n\n    [...ARTICLE_IDS, ...KEYWORD_IDS].forEach(nodeId => {\n      const isKeyword = nodeId.startsWith('G');\n\n      if (nodeId === selectedId) {\n        opacityMap[nodeId] = 1.0;\n      } else if (highlightedSet.has(nodeId)) {\n        if (directlyConnected.has(nodeId)) {\n          opacityMap[nodeId] = 1.0;\n        } else {\n          opacityMap[nodeId] = isKeyword ? 1 : 1;\n        }\n      } else if (secondaryHighlightedSet.has(nodeId)) {\n        opacityMap[nodeId] = isKeyword ? 0.3 : 0.15;\n      } else {\n        opacityMap[nodeId] = isKeyword ? 0.3 : 0.15;\n      }\n    });\n\n    opacityStoreRef.current.setState(opacityMap);\n  }, [selectedNode, highlightedNodes, secondaryHighlightedArticles]);\n\n  useEffect(() => {\n    if (!animationInProgressRef.current) {\n      isUserMovingCameraRef.current = false;\n    }\n  }, [selectedNode]);\n\n  return null;\n}\n\nexport default ElementOpacityController;\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1779, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/treeComponents/styles.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"bottomButtons\": \"styles-module-scss-module__dJBWzG__bottomButtons\",\n  \"bottom_bar_wrapper\": \"styles-module-scss-module__dJBWzG__bottom_bar_wrapper\",\n  \"bottombarbutton\": \"styles-module-scss-module__dJBWzG__bottombarbutton\",\n  \"box_wrapper\": \"styles-module-scss-module__dJBWzG__box_wrapper\",\n  \"button\": \"styles-module-scss-module__dJBWzG__button\",\n  \"button_wrapper\": \"styles-module-scss-module__dJBWzG__button_wrapper\",\n  \"camera_modal\": \"styles-module-scss-module__dJBWzG__camera_modal\",\n  \"camera_modal_1\": \"styles-module-scss-module__dJBWzG__camera_modal_1\",\n  \"center_button\": \"styles-module-scss-module__dJBWzG__center_button\",\n  \"full\": \"styles-module-scss-module__dJBWzG__full\",\n  \"half\": \"styles-module-scss-module__dJBWzG__half\",\n  \"highlightedTerm\": \"styles-module-scss-module__dJBWzG__highlightedTerm\",\n  \"isDesktop\": \"styles-module-scss-module__dJBWzG__isDesktop\",\n  \"isMobile\": \"styles-module-scss-module__dJBWzG__isMobile\",\n  \"left\": \"styles-module-scss-module__dJBWzG__left\",\n  \"left_wrapper\": \"styles-module-scss-module__dJBWzG__left_wrapper\",\n  \"modal\": \"styles-module-scss-module__dJBWzG__modal\",\n  \"optionsbutton\": \"styles-module-scss-module__dJBWzG__optionsbutton\",\n  \"right\": \"styles-module-scss-module__dJBWzG__right\",\n  \"small_button\": \"styles-module-scss-module__dJBWzG__small_button\",\n  \"stoprotationbutton\": \"styles-module-scss-module__dJBWzG__stoprotationbutton\",\n  \"submenu\": \"styles-module-scss-module__dJBWzG__submenu\",\n  \"supplementbutton\": \"styles-module-scss-module__dJBWzG__supplementbutton\",\n  \"title\": \"styles-module-scss-module__dJBWzG__title\",\n  \"topbar_wrapper\": \"styles-module-scss-module__dJBWzG__topbar_wrapper\",\n  \"topbar_wrapper_mobile\": \"styles-module-scss-module__dJBWzG__topbar_wrapper_mobile\",\n  \"visible\": \"styles-module-scss-module__dJBWzG__visible\",\n  \"wrapper\": \"styles-module-scss-module__dJBWzG__wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1812, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/roomModal/style.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"close_button\": \"style-module-scss-module__CB8I9q__close_button\",\n  \"content\": \"style-module-scss-module__CB8I9q__content\",\n  \"modal_wrapper\": \"style-module-scss-module__CB8I9q__modal_wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1821, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/roomModal/index.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport styles from \"./style.module.scss\";\n\nexport default function RoomModal({ close }) {\n  const pathname = usePathname();\n  const [infoData, setInfoData] = React.useState(null);\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    const loadInfoData = async () => {\n      try {\n        const response = await fetch('/data/info.json');\n        if (!response.ok) {\n          throw new Error('Failed to load info data');\n        }\n        const data = await response.json();\n        \n        const routeKey = pathname === '/' ? '/' : pathname;\n        const routeInfo = data[routeKey] || data['/living-continuity'];\n        \n        setInfoData(routeInfo);\n      } catch (error) {\n        console.error('Error loading info data:', error);\n        setInfoData({\n          title: \"Welcome\",\n          content: \"To navigate in the digital exhibition, depending on the device you are currently browsing this space on you can use both your fingers or mouse. Zoom in or out, drag or pan to interact with the scene.\"\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadInfoData();\n  }, [pathname]);\n\n  // Helper function to render markdown-style emphasis\n  const renderText = (text) => {\n    if (!text) return null;\n    \n    // Convert *text* to <em>text</em>\n    const parts = text.split(/(\\*[^*]+\\*)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('*') && part.endsWith('*')) {\n        return <em key={index}>{part.slice(1, -1)}</em>;\n      }\n      return <React.Fragment key={index}>{part}</React.Fragment>;\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.modal_wrapper}>\n        <div className={styles.content}>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!infoData) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className={styles.modal_wrapper}>\n        {close && (\n          <div className={styles.close_button} onClick={close}>\n            <svg \n              width=\"24\" \n              height=\"24\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <line \n                x1=\"3\" \n                y1=\"3\" \n                x2=\"21\" \n                y2=\"21\" \n                stroke=\"#000000\" \n                strokeWidth=\"1.5\" \n                strokeLinecap=\"round\"\n              />\n              <line \n                x1=\"21\" \n                y1=\"3\" \n                x2=\"3\" \n                y2=\"21\" \n                stroke=\"#000000\" \n                strokeWidth=\"1.5\" \n                strokeLinecap=\"round\"\n              />\n            </svg>\n          </div>\n        )}\n        <div className={styles.content}>\n          {infoData.content && (\n            typeof infoData.content === 'string' ? (\n              <p>{renderText(infoData.content)}</p>\n            ) : Array.isArray(infoData.content) ? (\n              infoData.content.map((section, index) => (\n                <div key={index}>\n                  {section.text && <p>{renderText(section.text)}</p>}\n                </div>\n              ))\n            ) : null\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;;;;;;;AAJA;;;;AAMe,SAAS,UAAU,KAAS;;QAAT,AAAE,QAAF,MAAE;;IAClC,IAAM,WAAW,IAAA,oJAAW;IAC5B,IAAgC,2LAAA,yKAAc,CAAC,WAAxC,WAAyB,oBAAf,cAAe;IAChC,IAA8B,4LAAA,yKAAc,CAAC,WAAtC,UAAuB,qBAAd,aAAc;IAE9B,0KAAe;+BAAC;YACd,IAAM;oDAAe;;;gCAEX,UAIA,MAEA,UACA,WAGC;;;;;;;;;;;4CAVU;;gDAAM,MAAM;;;4CAAvB,WAAW;4CACjB,IAAI,CAAC,SAAS,EAAE,EAAE;gDAChB,MAAM,IAAI,MAAM;4CAClB;4CACa;;gDAAM,SAAS,IAAI;;;4CAA1B,OAAO;4CAEP,WAAW,aAAa,MAAM,MAAM;4CACpC,YAAY,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,qBAAqB;4CAE9D,YAAY;;;;;;4CACL;4CACP,QAAQ,KAAK,CAAC,4BAA4B;4CAC1C,YAAY;gDACV,OAAO;gDACP,SAAS;4CACX;;;;;;4CAEA,WAAW;;;;;;;;;;;wBAEf;;;;YAEA;QACF;8BAAG;QAAC;KAAS;IAEb,oDAAoD;IACpD,IAAM,aAAa,SAAC;QAClB,IAAI,CAAC,MAAM,OAAO;QAElB,kCAAkC;QAClC,IAAM,QAAQ,KAAK,KAAK,CAAC;QACzB,OAAO,MAAM,GAAG,CAAC,SAAC,MAAM;YACtB,IAAI,KAAK,UAAU,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM;gBAC9C,qBAAO,6LAAC;8BAAgB,KAAK,KAAK,CAAC,GAAG,CAAC;mBAAvB;;;;;YAClB;YACA,qBAAO,6LAAC,yKAAc;0BAAc;eAAR;;;;;QAC9B;IACF;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAW,2JAAM,CAAC,aAAa;sBAClC,cAAA,6LAAC;gBAAI,WAAW,2JAAM,CAAC,OAAO;0BAC5B,cAAA,6LAAC;8BAAE;;;;;;;;;;;;;;;;IAIX;IAEA,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAW,2JAAM,CAAC,aAAa;;gBACjC,uBACC,6LAAC;oBAAI,WAAW,2JAAM,CAAC,YAAY;oBAAE,SAAS;8BAC5C,cAAA,6LAAC;wBACC,OAAM;wBACN,QAAO;wBACP,SAAQ;wBACR,MAAK;wBACL,OAAM;;0CAEN,6LAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,eAAc;;;;;;0CAEhB,6LAAC;gCACC,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,IAAG;gCACH,QAAO;gCACP,aAAY;gCACZ,eAAc;;;;;;;;;;;;;;;;;8BAKtB,6LAAC;oBAAI,WAAW,2JAAM,CAAC,OAAO;8BAC3B,SAAS,OAAO,IAAI,CACnB,OAAO,SAAS,OAAO,KAAK,yBAC1B,6LAAC;kCAAG,WAAW,SAAS,OAAO;;;;;+BAC7B,MAAM,OAAO,CAAC,SAAS,OAAO,IAChC,SAAS,OAAO,CAAC,GAAG,CAAC,SAAC,SAAS;6CAC7B,6LAAC;sCACE,QAAQ,IAAI,kBAAI,6LAAC;0CAAG,WAAW,QAAQ,IAAI;;;;;;2BADpC;;;;;yBAIV,IACN;;;;;;;;;;;;;AAKV;GA7GwB;;QACL,oJAAW;;;KADN"}},
    {"offset": {"line": 2072, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/sceneModal/style.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"camera_modal\": \"style-module-scss-module__ALzo2W__camera_modal\",\n  \"camera_wrapper\": \"style-module-scss-module__ALzo2W__camera_wrapper\",\n  \"item\": \"style-module-scss-module__ALzo2W__item\",\n  \"link\": \"style-module-scss-module__ALzo2W__link\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 2082, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/sceneModal/index.jsx"],"sourcesContent":["import * as React from \"react\";\nimport styles from \"./style.module.scss\";\n\nexport default function SceneModal() {\n  return (\n    <>\n      <div className={styles.camera_wrapper}>\n        <div className={`${styles.camera_modal} button`}>\n          <a href=\"https://livingcontinuity.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Digital Exhibition</div>\n          </a>\n          <a href=\"https://glossary.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Glossary</div>\n          </a>\n          <a href=\"https://kitofparts.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Kit of Parts - Blended Home</div>\n          </a>\n\n          <a href=\"#\" className={styles.link}>\n            <div className={styles.item}>Kit of Parts - Blended Park (soon)</div>\n          </a>\n\n          <a href=\"https://supplement.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Supplement</div>\n          </a>\n\n          <a href=\"http://toolkit.publicdisplay.site/\" className={styles.link}>\n            <div className={styles.item}>Toolkit</div>\n          </a>\n          \n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;AAEe,SAAS;IACtB,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAW,4JAAM,CAAC,cAAc;sBACnC,cAAA,6LAAC;gBAAI,WAAW,AAAC,GAAsB,OAApB,4JAAM,CAAC,YAAY,EAAC;;kCACrC,6LAAC;wBAAE,MAAK;wBAA+C,WAAW,4JAAM,CAAC,IAAI;kCAC3E,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAE/B,6LAAC;wBAAE,MAAK;wBAAuC,WAAW,4JAAM,CAAC,IAAI;kCACnE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAE/B,6LAAC;wBAAE,MAAK;wBAAyC,WAAW,4JAAM,CAAC,IAAI;kCACrE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,6LAAC;wBAAE,MAAK;wBAAI,WAAW,4JAAM,CAAC,IAAI;kCAChC,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,6LAAC;wBAAE,MAAK;wBAAyC,WAAW,4JAAM,CAAC,IAAI;kCACrE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;kCAG/B,6LAAC;wBAAE,MAAK;wBAAqC,WAAW,4JAAM,CAAC,IAAI;kCACjE,cAAA,6LAAC;4BAAI,WAAW,4JAAM,CAAC,IAAI;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAOzC;KA/BwB"}},
    {"offset": {"line": 2220, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/treeComponents/topbar.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport styles from \"./styles.module.scss\";\nimport Link from \"next/link\";\nimport RoomModal from \"../roomModal/index\";\nimport Modal from \"react-modal\";\nimport SceneModal from \"../sceneModal\";\nimport './treeComponents.scss';\nexport default function TopBar({ title }) {\n  const [isDisplay, setDisplay] = React.useState(false);\n\n  React.useEffect(() => {\n    if (title == \"Title Of The Entry\" || title == \"\") {\n      setDisplay(false);\n    } else {\n      setDisplay(true);\n    }\n  }, [title]);\n\n  const [modalIsOpen, setOpen] = React.useState(false);\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n  const [sceneOpen, setSceneOpen] = React.useState(false);\n  return (\n    <>\n      <div className=\"isDesktop\">\n        <div className={styles.topbar_wrapper}>\n          <Link href=\"/living-continuity\">\n            <div className={`${styles.button} button`}>living continuity</div>\n          </Link>\n          <div className={`${styles.title} button`}>\n            {!(title == \"Title Of The Entry\" || title == \"\") &&\n              <span>{title}</span>\n            }\n          </div>\n          <div className={`${styles.button} button`}>\n            Living Continuity\n          </div>\n        </div>\n      </div>\n      <div className=\"isMobile\">\n        <div\n          className={`${styles.topbar_wrapper} ${styles.topbar_wrapper_mobile}`}\n        >\n          <div className={styles.wrapper} onClick={() => setSceneOpen(!sceneOpen)} role=\"button\" tabIndex={0} aria-label=\"Toggle scene modal\" onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') setSceneOpen(!sceneOpen); }}>\n            <div\n              className={`${styles.full} ${styles.button} button full_button`}\n            >\n              living continuity\n            </div>\n            <div className={`${sceneOpen ? 'closed' : 'open'}`}>\n              <SceneModal />\n            </div>\n\n            <div\n              className={`${styles.full} ${styles.button} button full_button`}\n            >\n              Living Continuity\n            </div>\n            <button className={`${styles.half} ${styles.button} button`} onClick={() => {\n              handleOpen();\n            }} aria-label=\"Open info modal\">info</button>\n          </div>\n          <div className={`${styles.title} button`}>\n            {!(title == \"Title Of The Entry\" || title == \"\") &&\n              <span>{title}</span>\n            }\n          </div>\n        </div>\n      </div>\n      <Modal\n        isOpen={modalIsOpen}\n        contentLabel=\"Example Modal\"\n        closeTimeoutMS={150}\n        shouldCloseOnOverlayClick={true}\n      >\n        <RoomModal\n          close={handleOpen}\n        />\n      </Modal>\n    </>\n    //inline css ?\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAPA;;;;;;;;AASe,SAAS,OAAO,KAAS;QAAT,AAAE,QAAF,MAAE;;IAC/B,IAAgC,2LAAA,yKAAc,CAAC,YAAxC,YAAyB,oBAAd,aAAc;IAEhC,0KAAe;4BAAC;YACd,IAAI,SAAS,wBAAwB,SAAS,IAAI;gBAChD,WAAW;YACb,OAAO;gBACL,WAAW;YACb;QACF;2BAAG;QAAC;KAAM;IAEV,IAA+B,4LAAA,yKAAc,CAAC,YAAvC,cAAwB,qBAAX,UAAW;IAC/B,SAAS;QACP,QAAQ,CAAC;IACX;IACA,IAAkC,4LAAA,yKAAc,CAAC,YAA1C,YAA2B,qBAAhB,eAAgB;IAClC,qBACE;;0BACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAW,iKAAM,CAAC,cAAc;;sCACnC,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC;gCAAI,WAAW,AAAC,GAAgB,OAAd,iKAAM,CAAC,MAAM,EAAC;0CAAU;;;;;;;;;;;sCAE7C,6LAAC;4BAAI,WAAW,AAAC,GAAe,OAAb,iKAAM,CAAC,KAAK,EAAC;sCAC7B,CAAC,CAAC,SAAS,wBAAwB,SAAS,EAAE,mBAC7C,6LAAC;0CAAM;;;;;;;;;;;sCAGX,6LAAC;4BAAI,WAAW,AAAC,GAAgB,OAAd,iKAAM,CAAC,MAAM,EAAC;sCAAU;;;;;;;;;;;;;;;;;0BAK/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,WAAW,AAAC,GAA2B,OAAzB,iKAAM,CAAC,cAAc,EAAC,KAAgC,OAA7B,iKAAM,CAAC,qBAAqB;;sCAEnE,6LAAC;4BAAI,WAAW,iKAAM,CAAC,OAAO;4BAAE,SAAS;uCAAM,aAAa,CAAC;;4BAAY,MAAK;4BAAS,UAAU;4BAAG,cAAW;4BAAqB,WAAW,SAAC;gCAAQ,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK,aAAa,CAAC;4BAAY;;8CACxN,6LAAC;oCACC,WAAW,AAAC,GAAiB,OAAf,iKAAM,CAAC,IAAI,EAAC,KAAiB,OAAd,iKAAM,CAAC,MAAM,EAAC;8CAC5C;;;;;;8CAGD,6LAAC;oCAAI,WAAW,AAAC,GAAgC,OAA9B,YAAY,WAAW;8CACxC,cAAA,6LAAC,gJAAU;;;;;;;;;;8CAGb,6LAAC;oCACC,WAAW,AAAC,GAAiB,OAAf,iKAAM,CAAC,IAAI,EAAC,KAAiB,OAAd,iKAAM,CAAC,MAAM,EAAC;8CAC5C;;;;;;8CAGD,6LAAC;oCAAO,WAAW,AAAC,GAAiB,OAAf,iKAAM,CAAC,IAAI,EAAC,KAAiB,OAAd,iKAAM,CAAC,MAAM,EAAC;oCAAU,SAAS;wCACpE;oCACF;oCAAG,cAAW;8CAAkB;;;;;;;;;;;;sCAElC,6LAAC;4BAAI,WAAW,AAAC,GAAe,OAAb,iKAAM,CAAC,KAAK,EAAC;sCAC7B,CAAC,CAAC,SAAS,wBAAwB,SAAS,EAAE,mBAC7C,6LAAC;0CAAM;;;;;;;;;;;;;;;;;;;;;;0BAKf,6LAAC,4JAAK;gBACJ,QAAQ;gBACR,cAAa;gBACb,gBAAgB;gBAChB,2BAA2B;0BAE3B,cAAA,6LAAC,+IAAS;oBACR,OAAO;;;;;;;;;;;;;AAMjB;GA5EwB;KAAA"}},
    {"offset": {"line": 2439, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/livingContinuityButton/index.jsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\n\nconst LivingContinuityButton = React.memo(({ onClick }) => {\n  return (\n    <div className=\"living_continuity_button\" onClick={onClick}>\n      <div className=\"black_box\">\n        <h1 className=\"main_text\">LIVING CONTINUITY</h1>\n      </div>\n      <span className=\"enter_text\">enter</span>\n    </div>\n  );\n});\n\nLivingContinuityButton.displayName = 'LivingContinuityButton';\n\nexport default LivingContinuityButton;\n\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;;;;AAIA,IAAM,uCAAyB,qKAAU,MAAC;QAAG,gBAAA;IAC3C,qBACE,6LAAC;QAAI,WAAU;QAA2B,SAAS;;0BACjD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAY;;;;;;;;;;;0BAE5B,6LAAC;gBAAK,WAAU;0BAAa;;;;;;;;;;;;AAGnC;;AAEA,uBAAuB,WAAW,GAAG;uCAEtB"}},
    {"offset": {"line": 2500, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/suppressTextureErrors.js"],"sourcesContent":["export function suppressTextureErrors() {\n  if (typeof window === 'undefined') return;\n\n  const originalError = console.error;\n\n  console.error = (...args) => {\n    const message = args[0];\n    const fullMessage = args.join(' ');\n    \n    if (\n      (typeof message === 'string' && (\n        message.includes('THREE.GLTFLoader') && message.includes('Couldn\\'t load texture') ||\n        message.includes('GLTFLoader') && message.includes('texture')\n      )) ||\n      (typeof fullMessage === 'string' && (\n        fullMessage.includes('THREE.GLTFLoader') && fullMessage.includes('texture') ||\n        fullMessage.includes('GLTFLoader') && fullMessage.includes('texture')\n      ))\n    ) {\n      return;\n    }\n    \n    originalError.apply(console, args);\n  };\n\n  return () => {\n    console.error = originalError;\n  };\n}\n\n"],"names":[],"mappings":";;;;;;AAAO,SAAS;IACd;;IAEA,IAAM,gBAAgB,QAAQ,KAAK;IAEnC,QAAQ,KAAK,GAAG;yCAAI;YAAA;;QAClB,IAAM,UAAU,IAAI,CAAC,EAAE;QACvB,IAAM,cAAc,KAAK,IAAI,CAAC;QAE9B,IACE,AAAC,OAAO,YAAY,YAAY,CAC9B,QAAQ,QAAQ,CAAC,uBAAuB,QAAQ,QAAQ,CAAC,6BACzD,QAAQ,QAAQ,CAAC,iBAAiB,QAAQ,QAAQ,CAAC,UACrD,KACC,OAAO,gBAAgB,YAAY,CAClC,YAAY,QAAQ,CAAC,uBAAuB,YAAY,QAAQ,CAAC,cACjE,YAAY,QAAQ,CAAC,iBAAiB,YAAY,QAAQ,CAAC,UAC7D,GACA;YACA;QACF;QAEA,cAAc,KAAK,CAAC,SAAS;IAC/B;IAEA,OAAO;QACL,QAAQ,KAAK,GAAG;IAClB;AACF"}},
    {"offset": {"line": 2532, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/d3DataManager.js"],"sourcesContent":["import * as d3 from 'd3';\nimport { getRadialPosition } from './radialPosition';\n\nconst BASE_RADIUS = 15;\n\nexport function processNodeData(jsonData) {\n  const allNodes = [];\n  const links = [];\n  const nodeMap = new Map();\n\n  const articlesCount = jsonData.articles?.length || 0;\n  const glossaryCount = jsonData.glossary?.length || 0;\n  const totalNodes = articlesCount + glossaryCount;\n\n  if (jsonData.articles) {\n    jsonData.articles.forEach((article, arrayIndex) => {\n      const position = getRadialPosition(\n        arrayIndex,\n        totalNodes,\n        BASE_RADIUS,\n        articlesCount,\n        glossaryCount\n      );\n      const node = {\n        ...article,\n        type: 'article',\n        position,\n        x: position[0],\n        y: position[1],\n        z: position[2],\n        vx: 0,\n        vy: 0,\n        vz: 0,\n        fx: null,\n        fy: null,\n        fz: null,\n      };\n      allNodes.push(node);\n      nodeMap.set(article.id, node);\n    });\n  }\n\n  if (jsonData.glossary) {\n    jsonData.glossary.forEach((keyword, arrayIndex) => {\n      const globalIndex = articlesCount + arrayIndex;\n      const position = getRadialPosition(\n        globalIndex,\n        totalNodes,\n        BASE_RADIUS,\n        articlesCount,\n        glossaryCount\n      );\n      const node = {\n        ...keyword,\n        type: 'glossary',\n        position,\n        x: position[0],\n        y: position[1],\n        z: position[2],\n        vx: 0,\n        vy: 0,\n        vz: 0,\n        fx: null,\n        fy: null,\n        fz: null,\n      };\n      allNodes.push(node);\n      nodeMap.set(keyword.id, node);\n    });\n  }\n\n  allNodes.forEach((node) => {\n    if (node.connections && node.connections.length > 0) {\n      node.connections.forEach((targetId) => {\n        const target = nodeMap.get(targetId);\n        if (target) {\n          links.push({\n            source: node.id,\n            target: targetId,\n            sourceNode: node,\n            targetNode: target,\n          });\n        }\n      });\n    }\n  });\n\n  return {\n    nodes: allNodes,\n    links,\n    nodeMap,\n  };\n}\n\nexport function createForceSimulation(nodes, links, options = {}) {\n  const {\n    chargeStrength = -300,\n    linkDistance = 50,\n    linkStrength = 0.1,\n    centerStrength = 0.1,\n  } = options;\n\n  const simulation = d3\n    .forceSimulation(nodes)\n    .force(\n      'link',\n      d3\n        .forceLink(links)\n        .id((d) => d.id)\n        .distance(linkDistance)\n        .strength(linkStrength)\n    )\n    .force('charge', d3.forceManyBody().strength(chargeStrength))\n    .force('center', d3.forceCenter(0, 0).strength(centerStrength))\n    .force(\n      'collision',\n      d3.forceCollide().radius((d) => (d.type === 'article' ? 3 : 2))\n    );\n\n  return simulation;\n}\n\nexport function getConnectedNodeIds(nodeId, links) {\n  return links\n    .filter((link) => link.source === nodeId || link.target === nodeId)\n    .map((link) => (link.source === nodeId ? link.target : link.source)  );\n}\n\nexport function getConnectedLinks(nodeId, links) {\n  return links.filter(\n    (link) => link.source === nodeId || link.target === nodeId\n  );\n}\n\n/**\n * Update node positions from simulation\n * @param {Array} nodes - Array of node objects\n */\nexport function updateNodePositions(nodes) {\n  nodes.forEach((node) => {\n    if (node.x !== undefined && node.y !== undefined) {\n      node.position = [node.x, node.y, node.z || 0];\n    }\n  });\n}\n\nexport function transitionNodePosition(node, targetPosition, duration = 1000) {\n  const [targetX, targetY, targetZ] = targetPosition;\n  const startX = node.x || node.position[0];\n  const startY = node.y || node.position[1];\n  const startZ = node.z || node.position[2];\n\n  return d3\n    .transition()\n    .duration(duration)\n    .ease(d3.easeCubicInOut)\n    .tween('position', function () {\n      const interpolateX = d3.interpolateNumber(startX, targetX);\n      const interpolateY = d3.interpolateNumber(startY, targetY);\n      const interpolateZ = d3.interpolateNumber(startZ, targetZ);\n      return function (t) {\n        node.x = interpolateX(t);\n        node.y = interpolateY(t);\n        node.z = interpolateZ(t);\n        node.position = [node.x, node.y, node.z];\n      };\n    });\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;AAEA,IAAM,cAAc;AAEb,SAAS,gBAAgB,QAAQ;QAKhB,oBACA;IALtB,IAAM,WAAW,EAAE;IACnB,IAAM,QAAQ,EAAE;IAChB,IAAM,UAAU,IAAI;IAEpB,IAAM,gBAAgB,EAAA,qBAAA,SAAS,QAAQ,cAAjB,yCAAA,mBAAmB,MAAM,KAAI;IACnD,IAAM,gBAAgB,EAAA,qBAAA,SAAS,QAAQ,cAAjB,yCAAA,mBAAmB,MAAM,KAAI;IACnD,IAAM,aAAa,gBAAgB;IAEnC,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,SAAC,SAAS;YAClC,IAAM,WAAW,IAAA,6JAAiB,EAChC,YACA,YACA,aACA,eACA;YAEF,IAAM,OAAO,wVACR;gBACH,MAAM;gBACN,UAAA;gBACA,GAAG,QAAQ,CAAC,EAAE;gBACd,GAAG,QAAQ,CAAC,EAAE;gBACd,GAAG,QAAQ,CAAC,EAAE;gBACd,IAAI;gBACJ,IAAI;gBACJ,IAAI;gBACJ,IAAI;gBACJ,IAAI;gBACJ,IAAI;;YAEN,SAAS,IAAI,CAAC;YACd,QAAQ,GAAG,CAAC,QAAQ,EAAE,EAAE;QAC1B;IACF;IAEA,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,SAAC,SAAS;YAClC,IAAM,cAAc,gBAAgB;YACpC,IAAM,WAAW,IAAA,6JAAiB,EAChC,aACA,YACA,aACA,eACA;YAEF,IAAM,OAAO,wVACR;gBACH,MAAM;gBACN,UAAA;gBACA,GAAG,QAAQ,CAAC,EAAE;gBACd,GAAG,QAAQ,CAAC,EAAE;gBACd,GAAG,QAAQ,CAAC,EAAE;gBACd,IAAI;gBACJ,IAAI;gBACJ,IAAI;gBACJ,IAAI;gBACJ,IAAI;gBACJ,IAAI;;YAEN,SAAS,IAAI,CAAC;YACd,QAAQ,GAAG,CAAC,QAAQ,EAAE,EAAE;QAC1B;IACF;IAEA,SAAS,OAAO,CAAC,SAAC;QAChB,IAAI,KAAK,WAAW,IAAI,KAAK,WAAW,CAAC,MAAM,GAAG,GAAG;YACnD,KAAK,WAAW,CAAC,OAAO,CAAC,SAAC;gBACxB,IAAM,SAAS,QAAQ,GAAG,CAAC;gBAC3B,IAAI,QAAQ;oBACV,MAAM,IAAI,CAAC;wBACT,QAAQ,KAAK,EAAE;wBACf,QAAQ;wBACR,YAAY;wBACZ,YAAY;oBACd;gBACF;YACF;QACF;IACF;IAEA,OAAO;QACL,OAAO;QACP,OAAA;QACA,SAAA;IACF;AACF;AAEO,SAAS,sBAAsB,KAAK,EAAE,KAAK;QAAE,UAAA,iEAAU,CAAC;IAC7D,8BAKI,QAJF,gBAAA,sDAAiB,CAAC,uDAIhB,QAHF,cAAA,kDAAe,oDAGb,QAFF,cAAA,kDAAe,uDAEb,QADF,gBAAA,sDAAiB;IAGnB,IAAM,aAAa,oNACD,CAAC,OAChB,KAAK,CACJ,QACA,kMACY,CAAC,OACV,EAAE,CAAC,SAAC;eAAM,EAAE,EAAE;OACd,QAAQ,CAAC,cACT,QAAQ,CAAC,eAEb,KAAK,CAAC,UAAU,8MAAgB,GAAG,QAAQ,CAAC,iBAC5C,KAAK,CAAC,UAAU,wMAAc,CAAC,GAAG,GAAG,QAAQ,CAAC,iBAC9C,KAAK,CACJ,aACA,2MAAe,GAAG,MAAM,CAAC,SAAC;eAAO,EAAE,IAAI,KAAK,YAAY,IAAI;;IAGhE,OAAO;AACT;AAEO,SAAS,oBAAoB,MAAM,EAAE,KAAK;IAC/C,OAAO,MACJ,MAAM,CAAC,SAAC;eAAS,KAAK,MAAM,KAAK,UAAU,KAAK,MAAM,KAAK;OAC3D,GAAG,CAAC,SAAC;eAAU,KAAK,MAAM,KAAK,SAAS,KAAK,MAAM,GAAG,KAAK,MAAM;;AACtE;AAEO,SAAS,kBAAkB,MAAM,EAAE,KAAK;IAC7C,OAAO,MAAM,MAAM,CACjB,SAAC;eAAS,KAAK,MAAM,KAAK,UAAU,KAAK,MAAM,KAAK;;AAExD;AAMO,SAAS,oBAAoB,KAAK;IACvC,MAAM,OAAO,CAAC,SAAC;QACb,IAAI,KAAK,CAAC,KAAK,aAAa,KAAK,CAAC,KAAK,WAAW;YAChD,KAAK,QAAQ,GAAG;gBAAC,KAAK,CAAC;gBAAE,KAAK,CAAC;gBAAE,KAAK,CAAC,IAAI;aAAE;QAC/C;IACF;AACF;AAEO,SAAS,uBAAuB,IAAI,EAAE,cAAc;QAAE,WAAA,iEAAW;IACtE,IAAoC,2LAAA,oBAA7B,UAA6B,oBAApB,UAAoB,oBAAX,UAAW;IACpC,IAAM,SAAS,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,EAAE;IACzC,IAAM,SAAS,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,EAAE;IACzC,IAAM,SAAS,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,EAAE;IAEzC,OAAO,iKACM,GACV,QAAQ,CAAC,UACT,IAAI,CAAC,+MAAiB,EACtB,KAAK,CAAC,YAAY;QACjB,IAAM,eAAe,0NAAoB,CAAC,QAAQ;QAClD,IAAM,eAAe,0NAAoB,CAAC,QAAQ;QAClD,IAAM,eAAe,0NAAoB,CAAC,QAAQ;QAClD,OAAO,SAAU,CAAC;YAChB,KAAK,CAAC,GAAG,aAAa;YACtB,KAAK,CAAC,GAAG,aAAa;YACtB,KAAK,CAAC,GAAG,aAAa;YACtB,KAAK,QAAQ,GAAG;gBAAC,KAAK,CAAC;gBAAE,KAAK,CAAC;gBAAE,KAAK,CAAC;aAAC;QAC1C;IACF;AACJ"}},
    {"offset": {"line": 2699, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/whiteMaterial.js"],"sourcesContent":["import * as THREE from \"three\";\n\nexport function createWhiteMaterial() {\n  return new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 0.9,\n    metalness: 0.1,\n    roughness: 0.8,\n  });\n}\n\nexport function createWhiteWireframeMaterial() {\n  return new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    wireframe: true,\n    transparent: true,\n    opacity: 0.7,\n  });\n}\n\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAEO,SAAS;IACd,OAAO,IAAI,0KAA0B,CAAC;QACpC,OAAO;QACP,aAAa;QACb,SAAS;QACT,WAAW;QACX,WAAW;IACb;AACF;AAEO,SAAS;IACd,OAAO,IAAI,0KAA0B,CAAC;QACpC,OAAO;QACP,WAAW;QACX,aAAa;QACb,SAAS;IACX;AACF"}},
    {"offset": {"line": 2733, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/useConnectionHighlight.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\nimport { getConnectedNodes } from './nodeConnections';\nimport './selectionStore';\n\nexport function useConnectionHighlight(nodeId, isActive) {\n  const [, setSelectedNode] = useStore('selectedNodeStore', null);\n  const hasConnections = getConnectedNodes(nodeId).length > 0;\n  const wasActiveRef = useRef(false);\n  const nodeIdRef = useRef(nodeId);\n\n  useEffect(() => {\n    nodeIdRef.current = nodeId;\n  }, [nodeId]);\n\n  useEffect(() => {\n    if (!nodeId) {\n      return undefined;\n    }\n\n    if (isActive && !wasActiveRef.current) {\n      requestAnimationFrame(() => {\n        setSelectedNode({ id: nodeId, ts: Date.now() });\n      });\n    }\n\n    if (!isActive && wasActiveRef.current) {\n      requestAnimationFrame(() => {\n        setSelectedNode(prev => {\n          if (prev?.id === nodeIdRef.current) {\n            return null;\n          }\n          return prev;\n        });\n      });\n    }\n\n    wasActiveRef.current = isActive;\n\n    return () => {\n      if (wasActiveRef.current && nodeIdRef.current === nodeId) {\n        requestAnimationFrame(() => {\n          setSelectedNode(prev => {\n            if (prev?.id === nodeIdRef.current) {\n              return null;\n            }\n            return prev;\n          });\n        });\n      }\n    };\n  }, [isActive, nodeId, setSelectedNode]);\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;;;;AAEO,SAAS,uBAAuB,MAAM,EAAE,QAAQ;;IACrD,IAA4B,qLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAAjD,kBAAmB;IAC5B,IAAM,iBAAiB,IAAA,8JAAiB,EAAC,QAAQ,MAAM,GAAG;IAC1D,IAAM,eAAe,IAAA,uKAAM,EAAC;IAC5B,IAAM,YAAY,IAAA,uKAAM,EAAC;IAEzB,IAAA,0KAAS;4CAAC;YACR,UAAU,OAAO,GAAG;QACtB;2CAAG;QAAC;KAAO;IAEX,IAAA,0KAAS;4CAAC;YACR,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YAEA,IAAI,YAAY,CAAC,aAAa,OAAO,EAAE;gBACrC;wDAAsB;wBACpB,gBAAgB;4BAAE,IAAI;4BAAQ,IAAI,KAAK,GAAG;wBAAG;oBAC/C;;YACF;YAEA,IAAI,CAAC,YAAY,aAAa,OAAO,EAAE;gBACrC;wDAAsB;wBACpB;gEAAgB,SAAA;gCACd,IAAI,CAAA,iBAAA,2BAAA,KAAM,EAAE,MAAK,UAAU,OAAO,EAAE;oCAClC,OAAO;gCACT;gCACA,OAAO;4BACT;;oBACF;;YACF;YAEA,aAAa,OAAO,GAAG;YAEvB;oDAAO;oBACL,IAAI,aAAa,OAAO,IAAI,UAAU,OAAO,KAAK,QAAQ;wBACxD;gEAAsB;gCACpB;wEAAgB,SAAA;wCACd,IAAI,CAAA,iBAAA,2BAAA,KAAM,EAAE,MAAK,UAAU,OAAO,EAAE;4CAClC,OAAO;wCACT;wCACA,OAAO;oCACT;;4BACF;;oBACF;gBACF;;QACF;2CAAG;QAAC;QAAU;QAAQ;KAAgB;AACxC;GA/CgB;;QACc,iKAAQ"}},
    {"offset": {"line": 2830, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/useShouldShowTitle.js"],"sourcesContent":["import { useStore } from 'usestore-react';\nimport { useMemo } from 'react';\nimport './selectionStore';\n\nexport function useShouldShowTitle(nodeId) {\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  \n  return useMemo(() => {\n    if (!nodeId || !Array.isArray(highlightedNodes)) {\n      return false;\n    }\n    return highlightedNodes.includes(nodeId);\n  }, [nodeId, highlightedNodes]);\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;AAEO,SAAS,mBAAmB,MAAM;;IACvC,IAA2B,qLAAA,IAAA,iKAAQ,EAAC,yBAAyB,EAAE,OAAxD,mBAAoB;IAE3B,OAAO,IAAA,wKAAO;sCAAC;YACb,IAAI,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,mBAAmB;gBAC/C,OAAO;YACT;YACA,OAAO,iBAAiB,QAAQ,CAAC;QACnC;qCAAG;QAAC;QAAQ;KAAiB;AAC/B;GATgB;;QACa,iKAAQ"}},
    {"offset": {"line": 2872, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/rotatingImage/index.jsx"],"sourcesContent":["import React, { useRef, useMemo, useState, useEffect } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { Image, Html } from '@react-three/drei';\nimport * as THREE from 'three';\nimport { COLOR_ACCENT } from '../_setup/colors';\nimport { registerCrossGroup, unregisterCrossGroup, updateCrossPosition } from '../utils/crossPositionTracker';\nimport { useStore } from 'usestore-react';\nimport './RotatingImage.scss';\nimport '../templates/ArticleNodeTemplate.scss';\n\nexport function RotatingImage({\n  imageUrl,\n  position,\n  scale = [10.8, 10.8, 1],\n  tiltAmount = 0.15,\n  opacity = 1.0,\n  faceCamera = false,\n  showCross = false,\n  title = \"\",\n  showTitle = false,\n  showReadButton = false,\n  onReadClick = null,\n  onCloseCross = null,\n  onClick = null,\n  highlightState = { isSelected: false, isHighlighted: false, isSecondaryHighlighted: false, hasSelection: false },\n  nodeId = null,\n}) {\n  const meshRef = useRef();\n  const imageMeshRef = useRef();\n  const rotatingWrapperRef = useRef();\n  const groupRef = useRef();\n  const crossGroupRef = useRef();\n  const secondaryConnectionPointRef = useRef();\n  const titleWrapperRefFront = useRef(null);\n  const titleWrapperRefBack = useRef(null);\n  const [imageError, setImageError] = useState(false);\n  const [currentImageUrl, setCurrentImageUrl] = useState(imageUrl);\n  const [htmlElementsVisible, setHtmlElementsVisible] = useState(true);\n  const [backHtmlElementsVisible, setBackHtmlElementsVisible] = useState(false);\n  const [crossVisible, setCrossVisible] = useState(true);\n  const [measuredTitleHeightFront, setMeasuredTitleHeightFront] = useState(0);\n  const [measuredTitleHeightBack, setMeasuredTitleHeightBack] = useState(0);\n  const [isMeasurementReadyFront, setIsMeasurementReadyFront] = useState(false);\n  const [isMeasurementReadyBack, setIsMeasurementReadyBack] = useState(false);\n\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n  \n  const isSelected = highlightState?.isSelected || (nodeId && selectedNode?.id === nodeId);\n  const isHighlighted = highlightState?.isHighlighted || (nodeId && highlightedNodes.includes(nodeId));\n  const isSecondaryHighlighted = highlightState?.isSecondaryHighlighted || (nodeId && secondaryHighlightedArticles.includes(nodeId));\n  const hasSelection = highlightState?.hasSelection || (selectedNode !== null);\n  const isDimmed = hasSelection && !isSelected && !isHighlighted && !isSecondaryHighlighted;\n  const displayOpacity = isDimmed ? opacity * 0.2 : opacity;\n  const borderColor = isSelected || isHighlighted ? COLOR_ACCENT : (isSecondaryHighlighted ? \"#ffffff\" : \"#ffffff\");\n\n  /** When secondary highlighted, image uses same values as text: same renderOrder and depth, so they occlude together (no READ through plane). */\n  const textRenderOrder = isSecondaryHighlighted ? 2 : (isSelected || isHighlighted) ? 13 : 7;\n  const textDepthOn = isSecondaryHighlighted;\n\n  const center = useMemo(() => new THREE.Vector3(0, 0, 0), []);\n\n  useEffect(() => {\n    if (!imageUrl) {\n      setImageError(true);\n      return;\n    }\n\n    const encodedUrl = imageUrl.includes(' ') ? imageUrl.split('/').map(part => encodeURIComponent(part)).join('/') : imageUrl;\n\n    const img = new window.Image();\n    img.onload = () => {\n      setImageError(false);\n      setCurrentImageUrl(encodedUrl);\n    };\n    img.onerror = (error) => {\n      console.warn(`Failed to load image: ${imageUrl}`, error);\n      if (imageUrl && (imageUrl.startsWith('http://') || imageUrl.startsWith('https://'))) {\n        const placeholderUrl = '/entriesImages/placeholder.svg';\n        const placeholderImg = new window.Image();\n        placeholderImg.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(placeholderUrl);\n          console.warn(`Using placeholder for external image: ${imageUrl}`);\n        };\n        placeholderImg.onerror = () => {\n          setImageError(true);\n          setCurrentImageUrl(null);\n        };\n        placeholderImg.src = placeholderUrl;\n        return;\n      }\n\n      if (imageUrl.endsWith('.jpg')) {\n        const pngUrl = imageUrl.replace('.jpg', '.png');\n        const encodedPngUrl = pngUrl.includes(' ') ? pngUrl.split('/').map(part => encodeURIComponent(part)).join('/') : pngUrl;\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(encodedPngUrl);\n        };\n        img2.onerror = () => {\n          const placeholderUrl = '/entriesImages/placeholder.svg';\n          const img3 = new window.Image();\n          img3.onload = () => {\n            setImageError(false);\n            setCurrentImageUrl(placeholderUrl);\n            console.warn(`Using placeholder for missing image: ${imageUrl}`);\n          };\n          img3.onerror = () => {\n            console.warn(`Could not load image: ${imageUrl} or ${pngUrl} or placeholder`);\n            setImageError(true);\n          };\n          img3.src = placeholderUrl;\n        };\n        img2.src = encodedPngUrl;\n      } else if (imageUrl.endsWith('.png')) {\n        const jpgUrl = imageUrl.replace('.png', '.jpg');\n        const encodedJpgUrl = jpgUrl.includes(' ') ? jpgUrl.split('/').map(part => encodeURIComponent(part)).join('/') : jpgUrl;\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(encodedJpgUrl);\n        };\n        img2.onerror = () => {\n          const placeholderUrl = '/entriesImages/placeholder.svg';\n          const img3 = new window.Image();\n          img3.onload = () => {\n            setImageError(false);\n            setCurrentImageUrl(placeholderUrl);\n            console.warn(`Using placeholder for missing image: ${imageUrl}`);\n          };\n          img3.onerror = () => {\n            console.warn(`Could not load image: ${imageUrl} or ${jpgUrl} or placeholder`);\n            setImageError(true);\n          };\n          img3.src = placeholderUrl;\n        };\n        img2.src = encodedJpgUrl;\n      } else {\n        const placeholderUrl = '/entriesImages/placeholder.svg';\n        const img2 = new window.Image();\n        img2.onload = () => {\n          setImageError(false);\n          setCurrentImageUrl(placeholderUrl);\n          console.warn(`Using placeholder for missing image: ${imageUrl}`);\n        };\n        img2.onerror = () => {\n          console.warn(`Could not load image: ${imageUrl} or placeholder`);\n          setImageError(true);\n        };\n        img2.src = placeholderUrl;\n      }\n    };\n    img.src = encodedUrl;\n  }, [imageUrl]);\n\n  const tempVec1 = useRef(new THREE.Vector3());\n  const tempVec2 = useRef(new THREE.Vector3());\n  const tempVec3 = useRef(new THREE.Vector3());\n  const tempVec4 = useRef(new THREE.Vector3());\n  const tempVec5 = useRef(new THREE.Vector3());\n  const tempQuat = useRef(new THREE.Quaternion());\n  const tempQuat2 = useRef(new THREE.Quaternion());\n  const tempMatrix = useRef(new THREE.Matrix4());\n  const worldUp = useRef(new THREE.Vector3(0, 1, 0));\n\n  useFrame((state, delta) => {\n    if (!groupRef.current || !rotatingWrapperRef.current) return;\n\n    let targetQuaternion = tempQuat.current;\n\n    if (faceCamera) {\n      const camera = state.camera;\n      const currentPos = tempVec1.current;\n      groupRef.current.getWorldPosition(currentPos);\n\n      const directionToCamera = tempVec2.current.subVectors(camera.position, currentPos).normalize();\n\n      const cameraY = camera.position.y;\n      const articleY = currentPos.y;\n      const verticalDistance = Math.abs(cameraY - articleY);\n      const isTopOrBottomView = verticalDistance > 8;\n\n      let right, correctedUp;\n\n      if (isTopOrBottomView) {\n        tempVec5.current.set(1, 0, 0);\n        tempVec5.current.applyQuaternion(camera.quaternion);\n        \n        const cameraRightXZ = tempVec3.current.set(tempVec5.current.x, 0, tempVec5.current.z);\n        \n        if (cameraRightXZ.length() < 0.001) {\n          right = tempVec3.current.set(1, 0, 0);\n        } else {\n          right = tempVec3.current.normalize();\n        }\n\n        correctedUp = tempVec4.current.crossVectors(directionToCamera, right).normalize();\n      } else {\n        right = tempVec3.current.crossVectors(worldUp.current, directionToCamera);\n\n        if (right.length() < 0.001) {\n          right.set(1, 0, 0);\n        }\n        right.normalize();\n\n        correctedUp = tempVec4.current.crossVectors(directionToCamera, right).normalize();\n      }\n\n      const basis = tempMatrix.current.makeBasis(right, correctedUp, directionToCamera);\n      targetQuaternion.setFromRotationMatrix(basis);\n    } else {\n      const currentPos = tempVec1.current;\n      groupRef.current.getWorldPosition(currentPos);\n\n      const directionToCenter = tempVec2.current.subVectors(center, currentPos);\n      const distance = directionToCenter.length();\n      if (distance < 0.001) return;\n      directionToCenter.normalize();\n\n      const right = tempVec3.current.crossVectors(worldUp.current, directionToCenter);\n      if (right.length() < 0.001) {\n        right.set(1, 0, 0);\n      }\n      right.normalize();\n\n      const stableUp = tempVec4.current.crossVectors(directionToCenter, right).normalize();\n\n      const basis = tempMatrix.current.makeBasis(right, stableUp, directionToCenter);\n      targetQuaternion.setFromRotationMatrix(basis);\n\n      if (tiltAmount !== 0) {\n        const tiltQuaternion = tempQuat2.current.setFromAxisAngle(right, tiltAmount);\n        targetQuaternion.multiply(tiltQuaternion);\n      }\n    }\n\n    const currentQuaternion = rotatingWrapperRef.current.quaternion;\n    const rotationLerp = Math.min(1, 8.0 * delta);\n    currentQuaternion.slerp(targetQuaternion, rotationLerp);\n\n    const camera = state.camera;\n    const cardPosition = tempVec1.current;\n    groupRef.current.getWorldPosition(cardPosition);\n\n    const forward = tempVec2.current.set(0, 0, 1);\n    forward.applyQuaternion(currentQuaternion);\n\n    const toCamera = tempVec3.current.subVectors(camera.position, cardPosition).normalize();\n\n    const dotProduct = forward.dot(toCamera);\n\n    setHtmlElementsVisible(dotProduct > 0);\n    setBackHtmlElementsVisible(dotProduct <= 0);\n    setCrossVisible(dotProduct > 0);\n  });\n\n  const borderWidth = 0.2;\n  const borderScale = useMemo(() => [\n    scale[0] + (borderWidth * 2),\n    scale[1] + (borderWidth * 2),\n    scale[2]\n  ], [scale]);\n\n  const showPlaceholder = !imageUrl || (imageError && !currentImageUrl);\n\n  const imageWidth = scale[0];\n  const imageHeight = scale[1];\n  const totalWidth = imageWidth + (borderWidth * 2);\n  const totalHeight = imageHeight + (borderWidth * 2);\n\n  const topLeft = useMemo(() => new THREE.Vector3(-totalWidth / 2, totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const topRight = useMemo(() => new THREE.Vector3(totalWidth / 2, totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const bottomLeft = useMemo(() => new THREE.Vector3(-totalWidth / 2, -totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const bottomRight = useMemo(() => new THREE.Vector3(totalWidth / 2, -totalHeight / 2, 0), [totalWidth, totalHeight]);\n  const imageCenter = center;\n  const topCenter = useMemo(() => new THREE.Vector3(0, totalHeight / 2, 0), [totalHeight]);\n  const bottomCenter = useMemo(() => new THREE.Vector3(0, -totalHeight / 2, 0), [totalHeight]);\n  const leftCenter = useMemo(() => new THREE.Vector3(-totalWidth / 2, 0, 0), [totalWidth]);\n  const rightCenter = useMemo(() => new THREE.Vector3(totalWidth / 2, 0, 0), [totalWidth]);\n\n  const crossSize = 1.5;\n  const crossLineWidth = 0.1;\n  const crossBottomPosition = -totalHeight / 2 - 0.1;\n  const crossZPosition = 0.001;\n  const circleRadius = crossSize * 0.7;\n\n  const titleAndReadWrapperZPosition = -0.08;\n\n  const wrapperWidthMultiplier = 2.14;\n  const wrapperHeightMultiplier = 2.07;\n  const wrapperWidth = useMemo(() => scale[0] * wrapperWidthMultiplier, [scale]);\n  const wrapperHeight = useMemo(() => scale[1] * wrapperHeightMultiplier, [scale]);\n  const wrapperWidthPx = useMemo(() => Math.round(wrapperWidth * 20), [wrapperWidth]);\n  const wrapperHeightPx = useMemo(() => Math.round(wrapperHeight * 20), [wrapperHeight]);\n  const titleWidthPx = useMemo(() => Math.round(wrapperWidthPx * 0.95), [wrapperWidthPx]);\n\n  const truncateTitle = useMemo(() => {\n    if (!title || title.length <= 96) return title;\n    const truncated = title.substring(0, 96);\n    const lastSpaceIndex = truncated.lastIndexOf(' ');\n    if (lastSpaceIndex > 0) {\n      return truncated.substring(0, lastSpaceIndex) + '...';\n    }\n    return truncated + '...';\n  }, [title]);\n\n  const articleHeightPx = useMemo(() => Math.round(scale[1] * 41), [scale]);\n  \n  const measureTitle = (titleWrapperElement) => {\n    if (!titleWrapperElement) return null;\n    \n    const titleContainer = titleWrapperElement.querySelector('.titleContainer');\n    const elementToMeasure = titleContainer || titleWrapperElement;\n    \n    const computedStyle = window.getComputedStyle(elementToMeasure);\n    let height = elementToMeasure.offsetHeight || elementToMeasure.scrollHeight || elementToMeasure.clientHeight;\n    \n    if (height === 0) {\n      const rect = elementToMeasure.getBoundingClientRect();\n      height = rect.height;\n    }\n    \n    if (height === 0) return null;\n    \n    const marginTop = parseFloat(computedStyle.marginTop) || 0;\n    const marginBottom = parseFloat(computedStyle.marginBottom) || 0;\n    \n    const wrapperStyle = window.getComputedStyle(titleWrapperElement);\n    const wrapperMarginTop = parseFloat(wrapperStyle.marginTop) || 0;\n    const wrapperMarginBottom = parseFloat(wrapperStyle.marginBottom) || 0;\n    \n    const totalHeight = height + marginTop + marginBottom + wrapperMarginTop + wrapperMarginBottom;\n    \n    return totalHeight > 0 ? Math.round(totalHeight) : null;\n  };\n\n  useEffect(() => {\n    if (!showTitle || !title) {\n      setMeasuredTitleHeightFront(0);\n      setMeasuredTitleHeightBack(0);\n      if (showReadButton) {\n        setIsMeasurementReadyFront(true);\n        setIsMeasurementReadyBack(true);\n      } else {\n        setIsMeasurementReadyFront(false);\n        setIsMeasurementReadyBack(false);\n      }\n      return;\n    }\n\n    setIsMeasurementReadyFront(false);\n    setIsMeasurementReadyBack(false);\n\n    const performMeasurement = () => {\n      let frontMeasured = false;\n      let backMeasured = false;\n\n      if (titleWrapperRefFront.current) {\n        const frontHeight = measureTitle(titleWrapperRefFront.current);\n        if (frontHeight !== null && frontHeight > 0) {\n          setMeasuredTitleHeightFront(frontHeight);\n          frontMeasured = true;\n          setTimeout(() => {\n            setIsMeasurementReadyFront(true);\n          }, 150);\n        }\n      }\n\n      if (titleWrapperRefBack.current) {\n        const backHeight = measureTitle(titleWrapperRefBack.current);\n        if (backHeight !== null && backHeight > 0) {\n          setMeasuredTitleHeightBack(backHeight);\n          backMeasured = true;\n          setTimeout(() => {\n            setIsMeasurementReadyBack(true);\n          }, 150);\n        }\n      }\n\n      return frontMeasured && backMeasured;\n    };\n\n    const resizeObserver = new ResizeObserver(() => {\n      requestAnimationFrame(() => {\n        performMeasurement();\n      });\n    });\n\n    const setupObservers = () => {\n      const elementsToObserve = [];\n      if (titleWrapperRefFront.current) {\n        elementsToObserve.push(titleWrapperRefFront.current);\n      }\n      if (titleWrapperRefBack.current) {\n        elementsToObserve.push(titleWrapperRefBack.current);\n      }\n\n      if (elementsToObserve.length > 0) {\n        elementsToObserve.forEach(element => {\n          resizeObserver.observe(element);\n        });\n        return true;\n      }\n      return false;\n    };\n\n    if (setupObservers()) {\n      let measurementAttempts = 0;\n      const maxAttempts = 30;\n      \n      const tryMeasurement = () => {\n        const success = performMeasurement();\n        measurementAttempts++;\n        \n        if (!success && measurementAttempts < maxAttempts) {\n          setTimeout(tryMeasurement, 100);\n        } else if (measurementAttempts >= maxAttempts && showReadButton) {\n          setIsMeasurementReadyFront(true);\n          setIsMeasurementReadyBack(true);\n        }\n      };\n\n      setTimeout(() => {\n        tryMeasurement();\n      }, 200);\n\n      const checkInterval = setInterval(() => {\n        performMeasurement();\n      }, 300);\n\n      const maxTimeout = setTimeout(() => {\n        clearInterval(checkInterval);\n        if (showReadButton) {\n          setIsMeasurementReadyFront(true);\n          setIsMeasurementReadyBack(true);\n        }\n      }, 2000);\n\n      return () => {\n        clearTimeout(maxTimeout);\n        clearInterval(checkInterval);\n        resizeObserver.disconnect();\n      };\n    } else {\n      let checkCount = 0;\n      const checkInterval = setInterval(() => {\n        if (setupObservers()) {\n          clearInterval(checkInterval);\n          setTimeout(() => {\n            performMeasurement();\n          }, 100);\n          \n          const measurementInterval = setInterval(() => {\n            performMeasurement();\n          }, 200);\n          \n          const maxTimeout = setTimeout(() => {\n            clearInterval(measurementInterval);\n            if (showReadButton) {\n              setIsMeasurementReadyFront(true);\n              setIsMeasurementReadyBack(true);\n            }\n          }, 1500);\n\n          return () => {\n            clearTimeout(maxTimeout);\n            clearInterval(measurementInterval);\n            resizeObserver.disconnect();\n          };\n        }\n        checkCount++;\n        if (checkCount > 40) {\n          clearInterval(checkInterval);\n          if (showReadButton) {\n            setIsMeasurementReadyFront(true);\n            setIsMeasurementReadyBack(true);\n          }\n        }\n      }, 50);\n\n      const maxTimeout = setTimeout(() => {\n        clearInterval(checkInterval);\n        if (showReadButton) {\n          setIsMeasurementReadyFront(true);\n          setIsMeasurementReadyBack(true);\n        }\n      }, 2000);\n\n      return () => {\n        clearTimeout(maxTimeout);\n        clearInterval(checkInterval);\n        resizeObserver.disconnect();\n      };\n    }\n  }, [showTitle, title, truncateTitle, titleWidthPx, showReadButton]);\n\n  const readWrapperHeightPxFront = useMemo(() => {\n    let titleHeight = measuredTitleHeightFront || 0;\n    \n    if (showTitle && title && titleHeight === 0) {\n      const estimatedTitleHeight = Math.min(articleHeightPx * 0.3, 120);\n      titleHeight = estimatedTitleHeight;\n    }\n    \n    const calculatedHeight = Math.max(0, articleHeightPx - titleHeight);\n    return calculatedHeight;\n  }, [articleHeightPx, measuredTitleHeightFront, showTitle, title]);\n\n  const readWrapperHeightPxBack = useMemo(() => {\n    let titleHeight = measuredTitleHeightBack || 0;\n    \n    if (showTitle && title && titleHeight === 0) {\n      const estimatedTitleHeight = Math.min(articleHeightPx * 0.3, 120);\n      titleHeight = estimatedTitleHeight;\n    }\n    \n    const calculatedHeight = Math.max(0, articleHeightPx - titleHeight);\n    return calculatedHeight;\n  }, [articleHeightPx, measuredTitleHeightBack, showTitle, title]);\n\n  useEffect(() => {\n    if (!nodeId) return;\n\n    if (showCross && crossVisible && crossGroupRef.current) {\n      registerCrossGroup(nodeId, crossGroupRef);\n    } else if (isSecondaryHighlighted && !showCross && secondaryConnectionPointRef.current) {\n      registerCrossGroup(nodeId, secondaryConnectionPointRef);\n    } else {\n      unregisterCrossGroup(nodeId);\n    }\n\n    return () => {\n      unregisterCrossGroup(nodeId);\n    };\n  }, [nodeId, showCross, crossVisible, isSecondaryHighlighted]);\n\n  useFrame(() => {\n    if (nodeId && showCross && crossVisible && crossGroupRef.current) {\n      updateCrossPosition(nodeId);\n    } else if (nodeId && isSecondaryHighlighted && !showCross && secondaryConnectionPointRef.current) {\n      updateCrossPosition(nodeId);\n    }\n  });\n\n  return (\n    <group ref={groupRef} position={position}>\n      <group ref={rotatingWrapperRef}>\n        <mesh position={[0, 0, -0.15]} renderOrder={isSecondaryHighlighted ? textRenderOrder : (isSelected || isHighlighted || isSecondaryHighlighted) ? 11 : 1} frustumCulled={false}>\n          <planeGeometry args={[borderScale[0], borderScale[1]]} />\n          <meshBasicMaterial\n            color=\"#000000\"\n            transparent\n            opacity={1.0 * displayOpacity}\n            side={THREE.DoubleSide}\n            depthWrite={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n            depthTest={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n          />\n        </mesh>\n        <mesh position={[0, 0, -0.10]} renderOrder={isSecondaryHighlighted ? textRenderOrder : (isSelected || isHighlighted || isSecondaryHighlighted) ? 12 : 2} frustumCulled={false}>\n          <planeGeometry args={[borderScale[0], borderScale[1]]} />\n          <meshBasicMaterial\n            color={borderColor}\n            transparent\n            opacity={1.0 * displayOpacity}\n            side={THREE.DoubleSide}\n            depthWrite={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n            depthTest={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n          />\n        </mesh>\n        {isSelected && (\n          <mesh position={[0, 0, -0.05]} renderOrder={isSecondaryHighlighted ? textRenderOrder : (isSelected || isHighlighted || isSecondaryHighlighted) ? 12.5 : 2.5} frustumCulled={false}>\n            <planeGeometry args={[borderScale[0], borderScale[1]]} />\n            <meshBasicMaterial\n              color={COLOR_ACCENT}\n              transparent\n              opacity={0.18 * displayOpacity}\n              side={THREE.DoubleSide}\n              depthWrite={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n              depthTest={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n            />\n          </mesh>\n        )}\n        {showPlaceholder ? (\n          <mesh \n            ref={meshRef} \n            position={[0, 0, 0]} \n            renderOrder={isSecondaryHighlighted ? textRenderOrder : (isSelected || isHighlighted || isSecondaryHighlighted) ? 10 : 3} \n            frustumCulled={false}\n            {...(onClick ? { onClick } : {})}\n          >\n            <planeGeometry args={[scale[0], scale[1]]} />\n            <meshBasicMaterial\n              color={COLOR_ACCENT}\n              transparent\n              opacity={(isSelected || isHighlighted || isSecondaryHighlighted) ? 1.0 * displayOpacity : 0.98 * displayOpacity}\n              side={THREE.DoubleSide}\n              depthWrite={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n              depthTest={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n            />\n          </mesh>\n        ) : currentImageUrl && !imageError && (\n          <group ref={imageMeshRef} position={[0, 0, 0]} renderOrder={isSecondaryHighlighted ? textRenderOrder : (isSelected || isHighlighted || isSecondaryHighlighted) ? 10 : 3}>\n            <mesh\n              position={[0, 0, 0]}\n              {...(onClick ? { onClick } : {})}\n            >\n              <planeGeometry args={[scale[0], scale[1]]} />\n              <meshBasicMaterial\n                transparent\n                opacity={0}\n                side={THREE.DoubleSide}\n                depthWrite={false}\n                depthTest={false}\n              />\n            </mesh>\n            {currentImageUrl && (\n              <>\n                <Image\n                  url={currentImageUrl}\n                  scale={scale}\n                  transparent\n                  opacity={(isSelected || isHighlighted || isSecondaryHighlighted) ? 1.0 * displayOpacity : 0.98 * displayOpacity}\n                  depthWrite={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n                  depthTest={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n                  frustumCulled={false}\n                  onError={(error) => {\n                    console.warn(`Image component failed to load: ${currentImageUrl}`, error);\n                    setImageError(true);\n                    setCurrentImageUrl(null);\n                  }}\n                />\n                <Image\n                  url={currentImageUrl}\n                  scale={scale}\n                  transparent\n                  opacity={(isSelected || isHighlighted || isSecondaryHighlighted) ? 1.0 * displayOpacity : 0.98 * displayOpacity}\n                  depthWrite={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n                  depthTest={isSecondaryHighlighted ? textDepthOn : !(isSelected || isHighlighted || isSecondaryHighlighted)}\n                  frustumCulled={false}\n                  rotation={[0, Math.PI, 0]}\n                  onError={(error) => {\n                    console.warn(`Image component failed to load (back): ${currentImageUrl}`, error);\n                    setImageError(true);\n                    setCurrentImageUrl(null);\n                  }}\n                />\n              </>\n            )}\n          </group>\n        )}\n\n        {((showTitle && title) || showReadButton) && htmlElementsVisible && (\n          <group position={[0, 0, titleAndReadWrapperZPosition]} renderOrder={textRenderOrder}>\n            <mesh \n              renderOrder={textRenderOrder} \n              frustumCulled={false}\n              {...(onClick ? { onClick } : {})}\n            >\n              <planeGeometry args={[wrapperWidth, wrapperHeight]} />\n              <meshBasicMaterial\n                color=\"#000000\"\n                transparent\n                opacity={0}\n                side={THREE.FrontSide}\n                depthWrite={textDepthOn}\n                depthTest={textDepthOn}\n              />\n            </mesh>\n            <Html\n              center={false}\n              className=\"titleAndReadWrapper\"\n              style={{\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n                transform: 'translate(-50%, -30%)',\n                width: `${wrapperWidthPx}px`,\n                height: `${wrapperHeightPx}px`,\n                minWidth: `${wrapperWidthPx}px`,\n                minHeight: `${wrapperHeightPx}px`,\n                maxWidth: 'none',\n                maxHeight: 'none',\n                margin: 0,\n                padding: 0,\n                pointerEvents: 'none',\n              }}\n              transform\n              occlude={isSecondaryHighlighted || (hasSelection && !isSelected && !isHighlighted) ? true : false}\n            >\n              <div\n                className=\"titleAndReadContainer\"\n                style={{\n                  width: `${wrapperWidthPx}px`,\n                  height: `${articleHeightPx}px`,\n                  minWidth: `${wrapperWidthPx}px`,\n                  minHeight: `${articleHeightPx}px`,\n                  maxWidth: 'none',\n                  maxHeight: 'none',\n                  opacity: displayOpacity,\n                  margin: 0,\n                  padding: 0,\n                  position: 'relative',\n                  pointerEvents: 'none',\n                  transform: 'translateY(-20%)',\n                }}\n              >\n                {showReadButton && (\n                  <div \n                    className=\"readWrapper\"\n                    style={{\n                      position: 'absolute',\n                      top: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                      height: `${readWrapperHeightPxFront}px`,\n                      opacity: isMeasurementReadyFront ? 1 : 0,\n                      transition: 'opacity 0.3s ease-in-out',\n                      pointerEvents: isMeasurementReadyFront ? 'auto' : 'none',\n                    }}\n                  >\n                    <div\n                      className=\"readButton\"\n                      onClick={onReadClick}\n                      style={{ pointerEvents: 'auto' }}\n                    >\n                      <span className=\"readButtonText\">\n                        READ\n                      </span>\n                    </div>\n                  </div>\n                )}\n                {showTitle && title && (\n                  <div \n                    ref={titleWrapperRefFront}\n                    className=\"titleWrapper\"\n                    style={{\n                      position: 'absolute',\n                      bottom: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                    }}\n                  >\n                    <div\n                      className=\"titleContainer\"\n                      style={{\n                        width: `${titleWidthPx}px`,\n                      }}\n                    >\n                      {truncateTitle}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </Html>\n          </group>\n        )}\n        {((showTitle && title) || showReadButton) && backHtmlElementsVisible && (\n          <group position={[0, 0, titleAndReadWrapperZPosition]} rotation={[0, Math.PI, 0]} renderOrder={textRenderOrder}>\n            <mesh \n              renderOrder={textRenderOrder} \n              frustumCulled={false}\n              {...(onClick ? { onClick } : {})}\n            >\n              <planeGeometry args={[wrapperWidth, wrapperHeight]} />\n              <meshBasicMaterial\n                color=\"#000000\"\n                transparent\n                opacity={0}\n                side={THREE.FrontSide}\n                depthWrite={textDepthOn}\n                depthTest={textDepthOn}\n              />\n            </mesh>\n            <Html\n              center={false}\n              className=\"titleAndReadWrapper\"\n              style={{\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n                transform: 'translate(-50%, -30%)',\n                width: `${wrapperWidthPx}px`,\n                height: `${wrapperHeightPx}px`,\n                minWidth: `${wrapperWidthPx}px`,\n                minHeight: `${wrapperHeightPx}px`,\n                maxWidth: 'none',\n                maxHeight: 'none',\n                margin: 0,\n                padding: 0,\n                pointerEvents: 'none',\n              }}\n              transform\n              occlude={isSecondaryHighlighted || (hasSelection && !isSelected && !isHighlighted) ? true : false}\n            >\n              <div\n                className=\"titleAndReadContainer\"\n                style={{\n                  width: `${wrapperWidthPx}px`,\n                  height: `${articleHeightPx}px`,\n                  minWidth: `${wrapperWidthPx}px`,\n                  minHeight: `${articleHeightPx}px`,\n                  maxWidth: 'none',\n                  maxHeight: 'none',\n                  opacity: displayOpacity,\n                  margin: 0,\n                  padding: 0,\n                  position: 'relative',\n                  pointerEvents: 'none',\n                  transform: 'translateY(-20%)',\n                }}\n              >\n                {showReadButton && (\n                  <div \n                    className=\"readWrapper\"\n                    style={{\n                      position: 'absolute',\n                      top: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                      height: `${readWrapperHeightPxBack}px`,\n                      opacity: isMeasurementReadyBack ? 1 : 0,\n                      transition: 'opacity 0.3s ease-in-out',\n                      pointerEvents: isMeasurementReadyBack ? 'auto' : 'none',\n                    }}\n                  >\n                    <div\n                      className=\"readButton\"\n                      onClick={onReadClick}\n                      style={{ pointerEvents: 'auto' }}\n                    >\n                      <span className=\"readButtonText\">\n                        READ\n                      </span>\n                    </div>\n                  </div>\n                )}\n                {showTitle && title && (\n                  <div \n                    ref={titleWrapperRefBack}\n                    className=\"titleWrapper\"\n                    style={{\n                      position: 'absolute',\n                      bottom: '0',\n                      left: '50%',\n                      transform: 'translateX(-50%)',\n                      width: '100%',\n                    }}\n                  >\n                    <div\n                      className=\"titleContainer\"\n                      style={{\n                        width: `${titleWidthPx}px`,\n                      }}\n                    >\n                      {truncateTitle}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </Html>\n          </group>\n        )}\n\n        {showCross && crossVisible && (\n          <group ref={crossGroupRef} position={[0, crossBottomPosition, crossZPosition]} renderOrder={1000}>\n            <Html\n              center\n              className=\"crossHtml\"\n              transform\n              occlude={false}\n            >\n              <div\n                className=\"crossContainer\"\n                style={{\n                  opacity: isSecondaryHighlighted ? 0 : displayOpacity,\n                }}\n                onClick={onCloseCross || undefined}\n              >\n                <div className=\"crossBackground\" />\n                <div className=\"crossBorder\" />\n                <div className=\"crossLines\">\n                  <div className=\"crossLine line1\" />\n                  <div className=\"crossLine line2\" />\n                </div>\n              </div>\n            </Html>\n          </group>\n        )}\n        {isSecondaryHighlighted && !showCross && (\n          <group ref={secondaryConnectionPointRef} position={[0, crossBottomPosition, crossZPosition]} renderOrder={1000}>\n            {crossVisible && (\n              <mesh>\n                <planeGeometry args={[0.01, 0.01]} />\n                <meshBasicMaterial color=\"#ff0000\" transparent opacity={1} side={THREE.DoubleSide} depthWrite={false} depthTest={true} />\n              </mesh>\n            )}\n          </group>\n        )}\n      </group>\n    </group>\n  );\n}\n\nexport default RotatingImage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4300, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/LoadingStateManager.jsx"],"sourcesContent":["import { useStore, getStore } from 'usestore-react';\nimport { useEffect, useState } from 'react';\n\nexport function useLoadingState() {\n  const [loadingState] = useStore('loadingState', {\n    nodesLoaded: 0,\n    totalNodes: 0,\n    isLoading: true,\n    nodesVisible: [],\n  });\n\n  return loadingState;\n}\n\nexport function useNodeVisibility(nodeId, index, totalNodes) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [opacity, setOpacity] = useState(0);\n  const [loadingState] = useStore('loadingState', {\n    nodesLoaded: 0,\n    totalNodes: 0,\n    isLoading: true,\n    nodesVisible: [],\n  });\n\n  useEffect(() => {\n    const baseDelay = 50;\n    const staggerDelay = index * baseDelay;\n    const maxDelay = totalNodes * baseDelay;\n    \n    if (!loadingState.isLoading && loadingState.totalNodes > 0) {\n      const timer = setTimeout(() => {\n        setIsVisible(true);\n        \n        const fadeDuration = 800;\n        const startTime = Date.now();\n        \n        const animate = () => {\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / fadeDuration, 1);\n          \n          const eased = 1 - Math.pow(1 - progress, 3);\n          setOpacity(eased);\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          }\n        };\n        \n        animate();\n      }, staggerDelay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [loadingState.isLoading, loadingState.totalNodes, index, totalNodes]);\n\n  return { isVisible, opacity: Math.max(opacity, 0.1) };\n}\n\nexport function initializeLoadingState(totalNodes) {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState({\n    nodesLoaded: 0,\n    totalNodes,\n    isLoading: true,\n      nodesVisible: [],\n  });\n  }\n}\n\nexport function completeLoading() {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState(prev => ({\n    ...prev,\n    isLoading: false,\n  }));\n  }\n}\n\nexport function markNodeLoaded(nodeId) {\n  const store = getStore('loadingState');\n  if (store) {\n  store.setState(prev => ({\n    ...prev,\n    nodesLoaded: prev.nodesLoaded + 1,\n      nodesVisible: [...(prev.nodesVisible || []), nodeId],\n  }));\n  }\n}\n\nexport default { useLoadingState, useNodeVisibility, initializeLoadingState, completeLoading, markNodeLoaded };\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;;;;;;;;;AAEO,SAAS;;IACd,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,gBAAgB;QAC9C,aAAa;QACb,YAAY;QACZ,WAAW;QACX,cAAc,EAAE;IAClB,QALO,eAAgB;IAOvB,OAAO;AACT;GATgB;;QACS,iKAAQ;;;AAU1B,SAAS,kBAAkB,MAAM,EAAE,KAAK,EAAE,UAAU;;IACzD,IAAkC,qLAAA,IAAA,yKAAQ,EAAC,YAApC,YAA2B,cAAhB,eAAgB;IAClC,IAA8B,sLAAA,IAAA,yKAAQ,EAAC,QAAhC,UAAuB,eAAd,aAAc;IAC9B,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,gBAAgB;QAC9C,aAAa;QACb,YAAY;QACZ,WAAW;QACX,cAAc,EAAE;IAClB,QALO,eAAgB;IAOvB,IAAA,0KAAS;uCAAC;YACR,IAAM,YAAY;YAClB,IAAM,eAAe,QAAQ;YAC7B,IAAM,WAAW,aAAa;YAE9B,IAAI,CAAC,aAAa,SAAS,IAAI,aAAa,UAAU,GAAG,GAAG;gBAC1D,IAAM,QAAQ;yDAAW;wBACvB,aAAa;wBAEb,IAAM,eAAe;wBACrB,IAAM,YAAY,KAAK,GAAG;wBAE1B,IAAM;yEAAU;gCACd,IAAM,UAAU,KAAK,GAAG,KAAK;gCAC7B,IAAM,WAAW,KAAK,GAAG,CAAC,UAAU,cAAc;gCAElD,IAAM,QAAQ,IAAI,KAAK,GAAG,CAAC,IAAI,UAAU;gCACzC,WAAW;gCAEX,IAAI,WAAW,GAAG;oCAChB,sBAAsB;gCACxB;4BACF;;wBAEA;oBACF;wDAAG;gBAEH;mDAAO;+BAAM,aAAa;;;YAC5B;QACF;sCAAG;QAAC,aAAa,SAAS;QAAE,aAAa,UAAU;QAAE;QAAO;KAAW;IAEvE,OAAO;QAAE,WAAA;QAAW,SAAS,KAAK,GAAG,CAAC,SAAS;IAAK;AACtD;IA1CgB;;QAGS,iKAAQ;;;AAyC1B,SAAS,uBAAuB,UAAU;IAC/C,IAAM,QAAQ,IAAA,iKAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC;YACb,aAAa;YACb,YAAA;YACA,WAAW;YACT,cAAc,EAAE;QACpB;IACA;AACF;AAEO,SAAS;IACd,IAAM,QAAQ,IAAA,iKAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC,SAAA;mBAAS,wVACnB;gBACH,WAAW;;;IAEb;AACF;AAEO,SAAS,eAAe,MAAM;IACnC,IAAM,QAAQ,IAAA,iKAAQ,EAAC;IACvB,IAAI,OAAO;QACX,MAAM,QAAQ,CAAC,SAAA;mBAAS,wVACnB;gBACH,aAAa,KAAK,WAAW,GAAG;gBAC9B,cAAc,AAAC,6KAAI,KAAK,YAAY,IAAI,EAAE,SAA5B;oBAA+B;iBAAO;;;IAExD;AACF;uCAEe;IAAE,iBAAA;IAAiB,mBAAA;IAAmB,wBAAA;IAAwB,iBAAA;IAAiB,gBAAA;AAAe"}},
    {"offset": {"line": 4450, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/templates/ArticleNodeTemplate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, useCallback, Suspense } from \"react\";\nimport {\n  Line,\n  useGLTF,\n  Html,\n} from \"@react-three/drei\";\nimport { useStore } from \"usestore-react\";\nimport * as THREE from \"three\";\nimport Modal from \"react-modal\";\nimport ArchiveModal from \"../../components/treeModals/archiveModal\";\nimport \"../../components/treeModals/archive.scss\";\nimport { createWhiteMaterial } from \"../utils/whiteMaterial\";\nimport { useConnectionHighlight } from \"../utils/useConnectionHighlight\";\nimport { useShouldShowTitle } from \"../utils/useShouldShowTitle\";\nimport { RotatingImage } from \"../rotatingImage\";\nimport { useNodeVisibility } from \"../utils/LoadingStateManager\";\nimport \"./ArticleNodeTemplate.scss\";\n\nfunction ArticleNodeWithModel({ nodeData, ...props }) {\n  const { nodes, materials } = useGLTF(nodeData.modelPath);\n  return <ArticleNodeContent nodeData={nodeData} nodes={nodes} materials={materials} {...props} />;\n}\n\nfunction ArticleNodeWithoutModel({ nodeData, ...props }) {\n  return <ArticleNodeContent nodeData={nodeData} nodes={{}} materials={{}} {...props} />;\n}\n\nfunction ArticleNodeContent({\n  nodeData,\n  nodes,\n  materials,\n  showAllLines,\n  props,\n  setTitle,\n  setDefault,\n  selectedComponent,\n}) {\n  const objectRef = useRef();\n  const [linesActive, setLinesActive] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [modalIsOpen, setOpen] = useState(false);\n  const [Store, setStore] = useStore(`${nodeData.id}Store`, false);\n  const isSelectingRef = useRef(false);\n\n  const position = nodeData.position || [0, 0, 0];\n  const centerPoint = position;\n  const whiteMaterial = useMemo(() => createWhiteMaterial(), []);\n  useConnectionHighlight(nodeData.id, linesActive);\n  const shouldShowTitle = useShouldShowTitle(nodeData.id);\n  const [opacityMap] = useStore('elementOpacityStore', {});\n  const opacity = opacityMap[nodeData.id] !== undefined ? opacityMap[nodeData.id] : 1.0;\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [secondaryHighlightedArticles] = useStore('secondaryHighlightedArticlesStore', []);\n\n  const nodeIndex = nodeData.index !== undefined ? nodeData.index : 0;\n  const totalNodes = 83;\n  const { isVisible, opacity: loadingOpacity } = useNodeVisibility(nodeData.id, nodeIndex, totalNodes);\n\n  const isSecondaryHighlighted = secondaryHighlightedArticles?.includes(nodeData.id);\n\n  const finalOpacity = useMemo(() => {\n    if (!isVisible) return 0;\n    const baseOpacity = opacity * loadingOpacity;\n    return baseOpacity;\n  }, [isVisible, opacity, loadingOpacity]);\n\n  const [selectedNode, setSelectedNode] = useStore('selectedNodeStore', null);\n  const [, setWalkThroughActive] = useStore('walkThroughActive', false);\n\n  const isDimmed = useMemo(() => {\n    return selectedNode && selectedNode.id !== nodeData.id && !highlightedNodes?.includes(nodeData.id) && !isSecondaryHighlighted;\n  }, [selectedNode, nodeData.id, highlightedNodes, isSecondaryHighlighted]);\n\n  const isHighlighted = useMemo(() => {\n    return selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'));\n  }, [selectedNode, nodeData.id, highlightedNodes]);\n\n  const articleScale = useMemo(() => {\n    if (isDimmed) {\n      return [10.8 * 0.6, 14.4 * 0.6, 1];\n    }\n    if (isHighlighted) {\n      return [10.8 * 1.3, 14.4 * 1.3, 1];\n    }\n    return [10.8, 14.4, 1];\n  }, [isDimmed, isHighlighted]);\n  const [, setHighlightedNodes] = useStore('highlightedNodesStore', []);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  useEffect(() => {\n    if (isSelectingRef.current) {\n      return;\n    }\n    \n    if (selectedNode && selectedNode.id !== nodeData.id && linesActive) {\n      requestAnimationFrame(() => {\n        if (!isSelectingRef.current) {\n          setClickCount(0);\n          setClicked(false);\n          setLinesActive(false);\n          setStore(false);\n        }\n      });\n    }\n  }, [selectedNode, linesActive, nodeData.id, setStore]);\n\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n\n  const [modelState, setModelState] = useState(false);\n  useEffect(() => {\n    if (!nodeData.connections || nodeData.connections.length === 0) {\n      setModelState(false);\n      return;\n    }\n\n    const checkConnections = () => {\n      const { getStore } = require('usestore-react');\n      const anyActive = nodeData.connections.some(connId => {\n        try {\n          const store = getStore(`${connId}Store`, false);\n          return store === true;\n        } catch (e) {\n          return false;\n        }\n      });\n      setModelState(anyActive);\n    };\n\n    checkConnections();\n    const interval = setInterval(checkConnections, 500);\n    return () => clearInterval(interval);\n  }, [nodeData.connections]);\n\n  function handleCloseModal() {\n    setOpen(false);\n    setDefault();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setStore(false);\n    if (window.location.hash === `#${nodeData.id}`) {\n      window.history.pushState(null, '', window.location.pathname);\n    }\n  }\n\n  const handleClick = useCallback((e) => {\n    if (e) {\n      e.stopPropagation();\n    }\n    \n    setClickCount(prev => {\n      const newCount = prev === 0 ? 1 : 0;\n      \n      if (newCount === 1) {\n        isSelectingRef.current = true;\n        requestAnimationFrame(() => {\n          setClicked(true);\n          setLinesActive(true);\n          setStore(true);\n          if (setTitle) setTitle();\n          setTimeout(() => {\n            isSelectingRef.current = false;\n          }, 100);\n        });\n      } else {\n        setClicked(false);\n        setLinesActive(false);\n        setDefault();\n        setStore(false);\n      }\n      \n      return newCount;\n    });\n  }, [setStore, setTitle, setDefault]);\n\n  function handleReadClick(e) {\n    e.stopPropagation();\n    setOpen(true);\n    if (nodeData.id) {\n      window.history.pushState(null, '', `#${nodeData.id}`);\n    }\n  }\n\n  function closeAll() {\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setDefault();\n    setStore(false);\n  }\n\n  const handleCloseCross = useCallback((e) => {\n    e.stopPropagation();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setStore(false);\n    setSelectedNode(null);\n    setHighlightedNodes([]);\n    setWalkThroughActive(false); // Pause dynamic view when closing connection\n    if (setDefault) setDefault();\n  }, [setStore, setSelectedNode, setHighlightedNodes, setWalkThroughActive, setDefault]);\n\n  useEffect(() => {\n    if (clickCount === 1) {\n      setLinesActive(true);\n      if (setTitle) setTitle();\n      setStore(true);\n    }\n  }, [clicked, setTitle, setStore]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined' || !nodeData.id) return;\n\n    const checkHash = () => {\n      const hash = window.location.hash.substring(1);\n      if (hash === nodeData.id && !modalIsOpen) {\n        setTimeout(() => {\n          setOpen(true);\n        }, 1000);\n      } else if (hash !== nodeData.id && modalIsOpen && hash !== '') {\n        setOpen(false);\n        setDefault();\n        setClickCount(0);\n        setClicked(false);\n        setLinesActive(false);\n        setStore(false);\n      } else if (hash === '' && modalIsOpen) {\n        setOpen(false);\n        setDefault();\n        setClickCount(0);\n        setClicked(false);\n        setLinesActive(false);\n        setStore(false);\n      }\n    };\n\n    checkHash();\n\n    window.addEventListener('hashchange', checkHash);\n    return () => {\n      window.removeEventListener('hashchange', checkHash);\n    };\n  }, [nodeData.id, modalIsOpen, setDefault, setStore]);\n\n  return (\n    <>\n      <group {...props} dispose={null} frustumCulled={false}>\n        <group\n          position={position}\n          scale={[0.5, 0.5, 0.5]}\n          onClick={handleClick}\n          opacity={finalOpacity}\n          ref={objectRef}\n          className=\"articleNodeGroup\"\n          frustumCulled={false}\n        >\n          {!modelState && (\n            <RotatingImage\n              imageUrl={nodeData.imageUrl}\n              position={[0, 0, 0]}\n              scale={articleScale}\n              tiltAmount={0.15}\n              opacity={finalOpacity}\n              faceCamera={isHighlighted || isSecondaryHighlighted}\n              showCross={selectedNode?.id === nodeData.id && !isSecondaryHighlighted}\n              title={nodeData.title}\n              showTitle={selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'))}\n              showReadButton={selectedNode?.id === nodeData.id || (highlightedNodes?.includes(nodeData.id) && selectedNode?.id?.startsWith('G'))}\n              onReadClick={handleReadClick}\n              onCloseCross={handleCloseCross}\n              onClick={handleClick}\n              nodeId={nodeData.id}\n              highlightState={{\n                isSelected: selectedNode?.id === nodeData.id,\n                isHighlighted: highlightedNodes?.includes(nodeData.id),\n                isSecondaryHighlighted: isSecondaryHighlighted,\n                hasSelection: !!selectedNode,\n              }}\n            />\n          )}\n\n          <Html center>\n            <Modal\n              isOpen={modalIsOpen}\n              contentLabel=\"Article Modal\"\n              className=\"archive-modal-content\"\n              overlayClassName=\"archive-modal-overlay\"\n              bodyOpenClassName=\"archive-modal-open\"\n              htmlOpenClassName=\"archive-modal-open\"\n            >\n              <ArchiveModal\n                closeModal={() => handleCloseModal()}\n                connect1={nodeData.connectionKeywords?.[0] || \"\"}\n                connect2={nodeData.connectionKeywords?.[1] || \"\"}\n                connect3={nodeData.connectionKeywords?.[2] || \"\"}\n                connect4={nodeData.connectionKeywords?.[3] || \"\"}\n                img={nodeData.imageUrl}\n                title={nodeData.title}\n                author={nodeData.author}\n                content={nodeData.content}\n                authorBio={nodeData.authorBio}\n                keywords={nodeData.keywords}\n                photoCredit={nodeData.photoCredit}\n              />\n            </Modal>\n          </Html>\n\n        </group>\n      </group>\n    </>\n  );\n}\n\nconst ArticleNodeTemplate = React.memo(function ArticleNodeTemplate({ nodeData, ...props }) {\n  const hasModel = !!nodeData.modelPath && nodeData.modelPath.trim() !== '';\n\n  if (hasModel) {\n    return (\n      <Suspense fallback={null}>\n        <ArticleNodeWithModel nodeData={nodeData} {...props} />\n      </Suspense>\n    );\n  } else {\n    return <ArticleNodeWithoutModel nodeData={nodeData} {...props} />;\n  }\n}, (prevProps, nextProps) => {\n  const prevPos = prevProps.nodeData.position || [0, 0, 0];\n  const nextPos = nextProps.nodeData.position || [0, 0, 0];\n  const positionChanged = prevPos[0] !== nextPos[0] || prevPos[1] !== nextPos[1] || prevPos[2] !== nextPos[2];\n\n  if (positionChanged) return false;\n\n  return (\n    prevProps.nodeData.id === nextProps.nodeData.id &&\n    prevProps.showAllLines === nextProps.showAllLines\n  );\n});\n\nexport default ArticleNodeTemplate;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4994, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/templates/GlossaryNodeTemplate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, useCallback, Suspense } from \"react\";\nimport { useGLTF, Html, Line } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { createStore, useStore } from \"usestore-react\";\nimport { createWhiteMaterial } from \"../utils/whiteMaterial\";\nimport { useConnectionHighlight } from \"../utils/useConnectionHighlight\";\nimport { useShouldShowTitle } from \"../utils/useShouldShowTitle\";\nimport { useNodeVisibility } from \"../utils/LoadingStateManager\";\nimport \"./GlossaryNodeTemplate.scss\";\n\nfunction GlossaryNodeWithModel({ nodeData, ...props }) {\n  const { nodes, materials } = useGLTF(nodeData.modelPath);\n  return <GlossaryNodeContent nodeData={nodeData} nodes={nodes} materials={materials} {...props} />;\n}\n\nfunction GlossaryNodeWithoutModel({ nodeData, ...props }) {\n  return <GlossaryNodeContent nodeData={nodeData} nodes={{}} materials={{}} {...props} />;\n}\n\nfunction GlossaryNodeContent({\n  nodeData,\n  nodes,\n  materials,\n  showAllLines,\n  title,\n  active,\n  props,\n  setTitle,\n  setDefault,\n  glossaryShellComponent,\n}) {\n  const objectRef = useRef();\n  const [linesActive, setLinesActive] = useState(false);\n  const [clicked, setClicked] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [modalIsOpen, setOpen] = useState(false);\n  const isSelectingRef = useRef(false);\n\n  const position = nodeData.position || [0, 0, 0];\n  const centerPoint = position;\n  const [opacityMap] = useStore('elementOpacityStore', {});\n  const opacity = opacityMap[nodeData.id] !== undefined ? opacityMap[nodeData.id] : 1.0;\n  \n  const crossBottomOffset = useMemo(() => {\n    return 1.93; // Offset downward from keyword center (matches connectionController with 0.35 scale)\n  }, []);\n  \n  const nodeIndex = nodeData.index !== undefined ? nodeData.index : 0;\n  const totalNodes = 83;\n  const { isVisible, opacity: loadingOpacity } = useNodeVisibility(nodeData.id, nodeIndex, totalNodes);\n  \n  const finalOpacity = useMemo(() => {\n    if (!isVisible) return 0;\n    return opacity * loadingOpacity;\n  }, [isVisible, opacity, loadingOpacity]);\n\n  const isDimmed = useMemo(() => {\n    const isKeyword = nodeData.id && nodeData.id.startsWith('G');\n    return isKeyword && Math.abs(finalOpacity - 0.3) < 0.01;\n  }, [finalOpacity, nodeData.id]);\n  \n  const whiteMaterial = useMemo(() => {\n    const material = createWhiteMaterial();\n    material.opacity = finalOpacity;\n    material.transparent = finalOpacity < 1.0;\n    return material;\n  }, [finalOpacity]);\n  \n  useConnectionHighlight(nodeData.id, linesActive);\n  const shouldShowTitle = useShouldShowTitle(nodeData.id);\n  \n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const isHighlighted = useMemo(() => {\n    return Array.isArray(highlightedNodes) && highlightedNodes.includes(nodeData.id);\n  }, [highlightedNodes, nodeData.id]);\n\n  const [selectedNode, setSelectedNode] = useStore('selectedNodeStore', null);\n  const [, setWalkThroughActive] = useStore('walkThroughActive', false);\n  const isSelected = useMemo(() => {\n    return selectedNode?.id === nodeData.id;\n  }, [selectedNode, nodeData.id]);\n  \n  const [, setHighlightedNodes] = useStore('highlightedNodesStore', []);\n\n  const isSecondaryHighlighted = useMemo(() => {\n    return isHighlighted && !isSelected && !linesActive;\n  }, [isHighlighted, isSelected, linesActive]);\n\n  const [clickCounter4, setClickCounter4] = useStore(`${nodeData.id}Store`, false);\n  useEffect(() => {\n    if (isSelectingRef.current) {\n      return;\n    }\n    \n    if (selectedNode && selectedNode.id !== nodeData.id && linesActive) {\n      requestAnimationFrame(() => {\n        if (!isSelectingRef.current) {\n          setClickCount(0);\n          setClicked(false);\n          setLinesActive(false);\n        }\n      });\n    }\n  }, [selectedNode, linesActive, nodeData.id]);\n\n  useEffect(() => {\n    if (materials && Object.keys(materials).length > 0) {\n      Object.values(materials).forEach(material => {\n        if (material) {\n          material.opacity = finalOpacity;\n          material.transparent = finalOpacity < 1.0;\n        }\n      });\n    }\n  }, [finalOpacity, materials]);\n\n  function handleOpen() {\n    setOpen(!modalIsOpen);\n  }\n\n  function handleCloseModal() {\n    setOpen(false);\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n  }\n\n  const handleClick = useCallback((e) => {\n    if (e) {\n      e.stopPropagation();\n    }\n    \n    isSelectingRef.current = true;\n    requestAnimationFrame(() => {\n      setClicked(prev => !prev);\n      setClickCount(prev => prev + 1);\n      setClickCounter4(false);\n      setTimeout(() => {\n        isSelectingRef.current = false;\n      }, 100);\n    });\n  }, [setClickCounter4]);\n\n  function closeAll() {\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n  }\n\n  const handleCloseCross = useCallback((e) => {\n    e.stopPropagation();\n    setClickCount(0);\n    setClicked(false);\n    setLinesActive(false);\n    setClickCounter4(false);\n    setSelectedNode(null);\n    setHighlightedNodes([]);\n    setWalkThroughActive(false); // Pause dynamic view when closing connection\n    if (setDefault) setDefault();\n  }, [setClickCounter4, setSelectedNode, setHighlightedNodes, setWalkThroughActive, setDefault]);\n\n  useEffect(() => {\n    if (clickCount === 1) {\n      setLinesActive(true);\n      if (setTitle) setTitle();\n      setClickCounter4(true);\n    } else if (clickCount === 2) {\n      setLinesActive(false);\n      setClickCount(0);\n      if (setDefault) setDefault();\n    }\n  }, [clicked, setTitle, setDefault, setClickCounter4]);\n\n  useEffect(() => {\n    if (showAllLines) {\n      setClickCount(1);\n    } else if (!showAllLines) {\n      setClickCount(0);\n    }\n  }, [showAllLines]);\n\n  return (\n    <>\n      <group\n        {...props}\n        dispose={null}\n        position={position}\n        scale={[1, 1, 1]}\n        onClick={handleClick}\n        ref={objectRef}\n        opacity={finalOpacity}\n        className=\"glossaryNodeGroup\"\n        frustumCulled={false}\n      >\n        <mesh position={[0, 0, 0]} visible={false}>\n          <planeGeometry args={[5, 2]} />\n          <meshBasicMaterial transparent opacity={0} side={THREE.DoubleSide} />\n        </mesh>\n        <Html center>\n          <div className=\"glossaryContainer\">\n            <div\n              className={`glossaryPill ${(isSelected || isHighlighted || linesActive) ? 'selected' : ''} ${isSecondaryHighlighted ? 'secondaryHighlighted' : ''} ${isHighlighted || linesActive ? 'highlighted' : ''} ${isDimmed ? 'dimmed' : ''}`}\n              onClick={(e) => {\n                e.stopPropagation();\n                handleClick();\n              }}\n              style={{ opacity: finalOpacity }}\n            >\n              <span className=\"glossaryPillTitle\">\n                {(title || nodeData.title || \"\").toUpperCase()}\n              </span>\n              {(isSelected || isHighlighted || linesActive) && nodeData.hasOpenButton && (\n                <span\n                  className=\"glossaryPillOpenButton\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    const slugifyTitle = (title) => {\n                      return title\n                        .toLowerCase()\n                        .trim()\n                        .replace(/[^\\w\\s-]/g, '')\n                        .replace(/[\\s_-]+/g, '-')\n                        .replace(/^-+|-+$/g, '');\n                    };\n                    const keywordSlug = slugifyTitle(nodeData.title || '');\n                    if (typeof window !== 'undefined') {\n                      sessionStorage.setItem('fromLivingContinuity', Date.now().toString());\n                    }\n                    window.location.href = `/glossary#${keywordSlug}`;\n                  }}\n                >\n                  OPEN\n                </span>\n              )}\n            </div>\n            {(isSelected || linesActive) && !isSecondaryHighlighted && (\n              <div \n                className={`glossaryCross ${(isSelected || linesActive) ? 'selected' : ''}`} \n                style={{ opacity: finalOpacity }}\n                onClick={handleCloseCross}\n              >\n                <div className=\"glossaryCrossBackground\" />\n                <div className=\"glossaryCrossBorder\" />\n                <div className=\"glossaryCrossLines\">\n                  <div className=\"glossaryCrossLine line1\" />\n                  <div className=\"glossaryCrossLine line2\" />\n                </div>\n              </div>\n            )}\n          </div>\n        </Html>\n      </group>\n      {linesActive == true && (\n        <group>\n          <Line\n            points={[...position, ...centerPoint]}\n            color={\"#ffffff\"}\n            lineWidth={1}\n          />\n        </group>\n      )}\n\n      {showAllLines == true && (\n        <group>\n          <Line\n            points={[...position, ...centerPoint]}\n            color={\"#ffffff\"}\n            lineWidth={1}\n          />\n        </group>\n      )}\n    </>\n  );\n}\n\nexport const GlossaryNodeTemplate = React.memo(function GlossaryNodeTemplate({ nodeData, ...props }) {\n  const hasModel = !!nodeData.modelPath && nodeData.modelPath.trim() !== '';\n  \n  if (hasModel) {\n    return (\n      <Suspense fallback={null}>\n        <GlossaryNodeWithModel nodeData={nodeData} {...props} />\n      </Suspense>\n    );\n  } else {\n    return <GlossaryNodeWithoutModel nodeData={nodeData} {...props} />;\n  }\n}, (prevProps, nextProps) => {\n  const prevPos = prevProps.nodeData.position || [0, 0, 0];\n  const nextPos = nextProps.nodeData.position || [0, 0, 0];\n  const positionChanged = prevPos[0] !== nextPos[0] || prevPos[1] !== nextPos[1] || prevPos[2] !== nextPos[2];\n  \n  if (positionChanged) return false;\n  \n  return (\n    prevProps.nodeData.id === nextProps.nodeData.id &&\n    prevProps.showAllLines === nextProps.showAllLines\n  );\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5555, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/CameraInteractionTracker.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\n\nexport function CameraInteractionTracker() {\n  const [, setCameraInteraction] = useStore('cameraInteractionStore', false);\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const interactionTimeoutRef = useRef(null);\n  const isInteractingRef = useRef(false);\n  \n  useEffect(() => {\n    if (selectedNode?.id) {\n      setCameraInteraction(false);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n        interactionTimeoutRef.current = null;\n      }\n      isInteractingRef.current = false;\n    }\n  }, [selectedNode, setCameraInteraction]);\n\n  useEffect(() => {\n    const canvas = document.querySelector('canvas');\n    if (!canvas) return;\n\n    let dragStartPos = null;\n    let isDragging = false;\n    \n    const handlePointerDown = (e) => {\n      dragStartPos = { x: e.clientX, y: e.clientY };\n      isDragging = false;\n    };\n    \n    const handlePointerMove = (e) => {\n      if (dragStartPos && !isDragging) {\n        const dx = Math.abs(e.clientX - dragStartPos.x);\n        const dy = Math.abs(e.clientY - dragStartPos.y);\n        if (dx > 5 || dy > 5) {\n          isDragging = true;\n          isInteractingRef.current = true;\n          setCameraInteraction(true);\n          \n          if (interactionTimeoutRef.current) {\n            clearTimeout(interactionTimeoutRef.current);\n            interactionTimeoutRef.current = null;\n          }\n        }\n      } else if (isDragging) {\n        isInteractingRef.current = true;\n        setCameraInteraction(true);\n      }\n    };\n    \n    const handlePointerUp = () => {\n      if (isDragging) {\n        isInteractingRef.current = false;\n        if (interactionTimeoutRef.current) {\n          clearTimeout(interactionTimeoutRef.current);\n        }\n        interactionTimeoutRef.current = setTimeout(() => {\n          if (!isInteractingRef.current) {\n            setCameraInteraction(false);\n          }\n        }, 1500);\n      }\n      dragStartPos = null;\n      isDragging = false;\n    };\n    \n    const handleWheel = () => {\n      isInteractingRef.current = true;\n      setCameraInteraction(true);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n      }\n      interactionTimeoutRef.current = setTimeout(() => {\n        if (!isInteractingRef.current) {\n          setCameraInteraction(false);\n        }\n      }, 2000);\n    };\n    \n    canvas.addEventListener('pointerdown', handlePointerDown, { passive: true });\n    canvas.addEventListener('pointermove', handlePointerMove, { passive: true });\n    canvas.addEventListener('pointerup', handlePointerUp, { passive: true });\n    canvas.addEventListener('wheel', handleWheel, { passive: true });\n\n    return () => {\n      canvas.removeEventListener('pointerdown', handlePointerDown);\n      canvas.removeEventListener('pointermove', handlePointerMove);\n      canvas.removeEventListener('pointerup', handlePointerUp);\n      canvas.removeEventListener('wheel', handleWheel);\n      if (interactionTimeoutRef.current) {\n        clearTimeout(interactionTimeoutRef.current);\n      }\n    };\n  }, [setCameraInteraction]);\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;AAEO,SAAS;;IACd,IAAiC,qLAAA,IAAA,iKAAQ,EAAC,0BAA0B,YAA3D,uBAAwB;IACjC,IAAuB,sLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAAM,wBAAwB,IAAA,uKAAM,EAAC;IACrC,IAAM,mBAAmB,IAAA,uKAAM,EAAC;IAEhC,IAAA,0KAAS;8CAAC;YACR,IAAI,yBAAA,mCAAA,aAAc,EAAE,EAAE;gBACpB,qBAAqB;gBACrB,IAAI,sBAAsB,OAAO,EAAE;oBACjC,aAAa,sBAAsB,OAAO;oBAC1C,sBAAsB,OAAO,GAAG;gBAClC;gBACA,iBAAiB,OAAO,GAAG;YAC7B;QACF;6CAAG;QAAC;QAAc;KAAqB;IAEvC,IAAA,0KAAS;8CAAC;YACR,IAAM,SAAS,SAAS,aAAa,CAAC;YACtC,IAAI,CAAC,QAAQ;YAEb,IAAI,eAAe;YACnB,IAAI,aAAa;YAEjB,IAAM;wEAAoB,SAAC;oBACzB,eAAe;wBAAE,GAAG,EAAE,OAAO;wBAAE,GAAG,EAAE,OAAO;oBAAC;oBAC5C,aAAa;gBACf;;YAEA,IAAM;wEAAoB,SAAC;oBACzB,IAAI,gBAAgB,CAAC,YAAY;wBAC/B,IAAM,KAAK,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,aAAa,CAAC;wBAC9C,IAAM,KAAK,KAAK,GAAG,CAAC,EAAE,OAAO,GAAG,aAAa,CAAC;wBAC9C,IAAI,KAAK,KAAK,KAAK,GAAG;4BACpB,aAAa;4BACb,iBAAiB,OAAO,GAAG;4BAC3B,qBAAqB;4BAErB,IAAI,sBAAsB,OAAO,EAAE;gCACjC,aAAa,sBAAsB,OAAO;gCAC1C,sBAAsB,OAAO,GAAG;4BAClC;wBACF;oBACF,OAAO,IAAI,YAAY;wBACrB,iBAAiB,OAAO,GAAG;wBAC3B,qBAAqB;oBACvB;gBACF;;YAEA,IAAM;sEAAkB;oBACtB,IAAI,YAAY;wBACd,iBAAiB,OAAO,GAAG;wBAC3B,IAAI,sBAAsB,OAAO,EAAE;4BACjC,aAAa,sBAAsB,OAAO;wBAC5C;wBACA,sBAAsB,OAAO,GAAG;kFAAW;gCACzC,IAAI,CAAC,iBAAiB,OAAO,EAAE;oCAC7B,qBAAqB;gCACvB;4BACF;iFAAG;oBACL;oBACA,eAAe;oBACf,aAAa;gBACf;;YAEA,IAAM;kEAAc;oBAClB,iBAAiB,OAAO,GAAG;oBAC3B,qBAAqB;oBACrB,IAAI,sBAAsB,OAAO,EAAE;wBACjC,aAAa,sBAAsB,OAAO;oBAC5C;oBACA,sBAAsB,OAAO,GAAG;0EAAW;4BACzC,IAAI,CAAC,iBAAiB,OAAO,EAAE;gCAC7B,qBAAqB;4BACvB;wBACF;yEAAG;gBACL;;YAEA,OAAO,gBAAgB,CAAC,eAAe,mBAAmB;gBAAE,SAAS;YAAK;YAC1E,OAAO,gBAAgB,CAAC,eAAe,mBAAmB;gBAAE,SAAS;YAAK;YAC1E,OAAO,gBAAgB,CAAC,aAAa,iBAAiB;gBAAE,SAAS;YAAK;YACtE,OAAO,gBAAgB,CAAC,SAAS,aAAa;gBAAE,SAAS;YAAK;YAE9D;sDAAO;oBACL,OAAO,mBAAmB,CAAC,eAAe;oBAC1C,OAAO,mBAAmB,CAAC,eAAe;oBAC1C,OAAO,mBAAmB,CAAC,aAAa;oBACxC,OAAO,mBAAmB,CAAC,SAAS;oBACpC,IAAI,sBAAsB,OAAO,EAAE;wBACjC,aAAa,sBAAsB,OAAO;oBAC5C;gBACF;;QACF;6CAAG;QAAC;KAAqB;IAEzB,OAAO;AACT;GA/FgB;;QACmB,iKAAQ;QAClB,iKAAQ;;;KAFjB"}},
    {"offset": {"line": 5704, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/ConnectionTransitionController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore, getStore } from 'usestore-react';\n\nexport function ConnectionTransitionController() {\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  const prevSelectedNodeRef = useRef(null);\n  const transitionTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    const visibilityStore = getStore('connectionLinesVisibilityStore');\n    \n    if (transitionTimeoutRef.current) {\n      clearTimeout(transitionTimeoutRef.current);\n    }\n\n    if (selectedNode?.id !== prevSelectedNodeRef.current?.id) {\n      const isNewSelection = selectedNode?.id && !prevSelectedNodeRef.current?.id;\n      const isDeselection = !selectedNode?.id && prevSelectedNodeRef.current?.id;\n\n      if (isNewSelection) {\n        visibilityStore.setState(false);\n        \n        transitionTimeoutRef.current = setTimeout(() => {\n          visibilityStore.setState(true);\n        }, 1500);\n        \n      } else if (isDeselection) {\n        visibilityStore.setState(false);\n        \n        transitionTimeoutRef.current = setTimeout(() => {\n          visibilityStore.setState(true);\n        }, 1000);\n      }\n      \n      prevSelectedNodeRef.current = selectedNode;\n    }\n\n    if (cameraInteraction && selectedNode?.id) {\n      visibilityStore.setState(false);\n      \n      transitionTimeoutRef.current = setTimeout(() => {\n        visibilityStore.setState(true);\n      }, 1200);\n    }\n\n    return () => {\n      if (transitionTimeoutRef.current) {\n        clearTimeout(transitionTimeoutRef.current);\n      }\n    };\n  }, [selectedNode, cameraInteraction]);\n\n  return null;\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;AAEO,SAAS;;IACd,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAA4B,sLAAA,IAAA,iKAAQ,EAAC,0BAA0B,YAAxD,oBAAqB;IAC5B,IAAM,sBAAsB,IAAA,uKAAM,EAAC;IACnC,IAAM,uBAAuB,IAAA,uKAAM,EAAC;IAEpC,IAAA,0KAAS;oDAAC;gBAOiB;YANzB,IAAM,kBAAkB,IAAA,iKAAQ,EAAC;YAEjC,IAAI,qBAAqB,OAAO,EAAE;gBAChC,aAAa,qBAAqB,OAAO;YAC3C;YAEA,IAAI,CAAA,yBAAA,mCAAA,aAAc,EAAE,QAAK,+BAAA,oBAAoB,OAAO,cAA3B,mDAAA,6BAA6B,EAAE,GAAE;oBACZ,+BACD;gBAD3C,IAAM,iBAAiB,CAAA,yBAAA,mCAAA,aAAc,EAAE,KAAI,GAAC,gCAAA,oBAAoB,OAAO,cAA3B,oDAAA,8BAA6B,EAAE;gBAC3E,IAAM,gBAAgB,EAAC,yBAAA,mCAAA,aAAc,EAAE,OAAI,gCAAA,oBAAoB,OAAO,cAA3B,oDAAA,8BAA6B,EAAE;gBAE1E,IAAI,gBAAgB;oBAClB,gBAAgB,QAAQ,CAAC;oBAEzB,qBAAqB,OAAO,GAAG;oEAAW;4BACxC,gBAAgB,QAAQ,CAAC;wBAC3B;mEAAG;gBAEL,OAAO,IAAI,eAAe;oBACxB,gBAAgB,QAAQ,CAAC;oBAEzB,qBAAqB,OAAO,GAAG;oEAAW;4BACxC,gBAAgB,QAAQ,CAAC;wBAC3B;mEAAG;gBACL;gBAEA,oBAAoB,OAAO,GAAG;YAChC;YAEA,IAAI,sBAAqB,yBAAA,mCAAA,aAAc,EAAE,GAAE;gBACzC,gBAAgB,QAAQ,CAAC;gBAEzB,qBAAqB,OAAO,GAAG;gEAAW;wBACxC,gBAAgB,QAAQ,CAAC;oBAC3B;+DAAG;YACL;YAEA;4DAAO;oBACL,IAAI,qBAAqB,OAAO,EAAE;wBAChC,aAAa,qBAAqB,OAAO;oBAC3C;gBACF;;QACF;mDAAG;QAAC;QAAc;KAAkB;IAEpC,OAAO;AACT;GAnDgB;;QACS,iKAAQ;QACH,iKAAQ;;;KAFtB"}},
    {"offset": {"line": 5789, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/ModelPreloader.js"],"sourcesContent":["import { useGLTF } from \"@react-three/drei\";\n\nconst preloadedModels = new Set();\nconst failedModels = new Set();\n\nexport function preloadGLBModel(path) {\n  if (!path || preloadedModels.has(path) || failedModels.has(path)) {\n    return;\n  }\n  \n  preloadedModels.add(path);\n  \n  try {\n    useGLTF.preload(path);\n  } catch (error) {\n    failedModels.add(path);\n    preloadedModels.delete(path);\n  }\n}\n\nexport async function preloadGLBModelAsync(path) {\n  if (!path || preloadedModels.has(path) || failedModels.has(path)) {\n    return Promise.resolve();\n  }\n  \n  return new Promise((resolve) => {\n    preloadedModels.add(path);\n    \n    try {\n      useGLTF.preload(path);\n      resolve();\n    } catch (error) {\n      failedModels.add(path);\n      preloadedModels.delete(path);\n      resolve();\n    }\n  });\n}\n\nexport function preloadAllModels(nodeData) {\n  if (!nodeData) return;\n  \n  if (nodeData.articles) {\n    nodeData.articles.forEach(article => {\n      if (article.modelPath && article.modelPath.trim() !== '') {\n        preloadGLBModel(article.modelPath);\n      }\n    });\n  }\n  \n  if (nodeData.glossary) {\n    nodeData.glossary.forEach(glossary => {\n      if (glossary.modelPath && glossary.modelPath.trim() !== '') {\n        preloadGLBModel(glossary.modelPath);\n      }\n    });\n  }\n}\n\nexport function preloadImages(nodeData) {\n  if (!nodeData) return Promise.resolve();\n  \n  const imagePromises = [];\n  const batchSize = 6;\n  const articles = nodeData.articles || [];\n  \n  for (let i = 0; i < articles.length; i += batchSize) {\n    const batch = articles.slice(i, i + batchSize);\n    batch.forEach(article => {\n      if (article.imageUrl) {\n        const img = new Image();\n        img.crossOrigin = 'anonymous';\n        const promise = new Promise((resolve) => {\n          img.onload = resolve;\n          img.onerror = resolve;\n          img.src = article.imageUrl;\n        });\n        imagePromises.push(promise);\n      }\n    });\n    \n    if (i + batchSize < articles.length) {\n      imagePromises.push(new Promise(resolve => setTimeout(resolve, 10)));\n    }\n  }\n  \n  return Promise.allSettled(imagePromises);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;;;;;AAEA,IAAM,kBAAkB,IAAI;AAC5B,IAAM,eAAe,IAAI;AAElB,SAAS,gBAAgB,IAAI;IAClC,IAAI,CAAC,QAAQ,gBAAgB,GAAG,CAAC,SAAS,aAAa,GAAG,CAAC,OAAO;QAChE;IACF;IAEA,gBAAgB,GAAG,CAAC;IAEpB,IAAI;QACF,sKAAO,CAAC,OAAO,CAAC;IAClB,EAAE,OAAO,OAAO;QACd,aAAa,GAAG,CAAC;QACjB,eAAgB,CAAA,SAAM,CAAC;IACzB;AACF;AAEO,SAAe,qBAAqB,IAAI;;;YAC7C,IAAI,CAAC,QAAQ,gBAAgB,GAAG,CAAC,SAAS,aAAa,GAAG,CAAC,OAAO;gBAChE;;oBAAO,QAAQ,OAAO;;YACxB;YAEA;;gBAAO,IAAI,QAAQ,SAAC;oBAClB,gBAAgB,GAAG,CAAC;oBAEpB,IAAI;wBACF,sKAAO,CAAC,OAAO,CAAC;wBAChB;oBACF,EAAE,OAAO,OAAO;wBACd,aAAa,GAAG,CAAC;wBACjB,eAAgB,CAAA,SAAM,CAAC;wBACvB;oBACF;gBACF;;;IACF;;AAEO,SAAS,iBAAiB,QAAQ;IACvC,IAAI,CAAC,UAAU;IAEf,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,SAAA;YACxB,IAAI,QAAQ,SAAS,IAAI,QAAQ,SAAS,CAAC,IAAI,OAAO,IAAI;gBACxD,gBAAgB,QAAQ,SAAS;YACnC;QACF;IACF;IAEA,IAAI,SAAS,QAAQ,EAAE;QACrB,SAAS,QAAQ,CAAC,OAAO,CAAC,SAAA;YACxB,IAAI,SAAS,SAAS,IAAI,SAAS,SAAS,CAAC,IAAI,OAAO,IAAI;gBAC1D,gBAAgB,SAAS,SAAS;YACpC;QACF;IACF;AACF;AAEO,SAAS,cAAc,QAAQ;IACpC,IAAI,CAAC,UAAU,OAAO,QAAQ,OAAO;IAErC,IAAM,gBAAgB,EAAE;IACxB,IAAM,YAAY;IAClB,IAAM,WAAW,SAAS,QAAQ,IAAI,EAAE;IAExC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,KAAK,UAAW;QACnD,IAAM,QAAQ,SAAS,KAAK,CAAC,GAAG,IAAI;QACpC,MAAM,OAAO,CAAC,SAAA;YACZ,IAAI,QAAQ,QAAQ,EAAE;gBACpB,IAAM,MAAM,IAAI;gBAChB,IAAI,WAAW,GAAG;gBAClB,IAAM,UAAU,IAAI,QAAQ,SAAC;oBAC3B,IAAI,MAAM,GAAG;oBACb,IAAI,OAAO,GAAG;oBACd,IAAI,GAAG,GAAG,QAAQ,QAAQ;gBAC5B;gBACA,cAAc,IAAI,CAAC;YACrB;QACF;QAEA,IAAI,IAAI,YAAY,SAAS,MAAM,EAAE;YACnC,cAAc,IAAI,CAAC,IAAI,QAAQ,SAAA;uBAAW,WAAW,SAAS;;QAChE;IACF;IAEA,OAAO,QAAQ,UAAU,CAAC;AAC5B"}},
    {"offset": {"line": 5898, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/WalkThroughController.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useStore } from 'usestore-react';\n\nexport function WalkThroughController({ nodeData, processedData, isActive }) {\n  const [, setSelectedNode] = useStore('selectedNodeStore', null);\n  const intervalRef = useRef(null);\n  const currentArticleRef = useRef(null);\n  const visitedArticlesRef = useRef(new Set());\n  const wasActiveBeforePauseRef = useRef(false);\n  const hasInitialRunRef = useRef(false);\n  const isActiveRef = useRef(isActive);\n  const nodeDataRef = useRef(nodeData);\n  const processedDataRef = useRef(processedData);\n\n  // Keep refs in sync with props\n  useEffect(() => {\n    isActiveRef.current = isActive;\n    nodeDataRef.current = nodeData;\n    processedDataRef.current = processedData;\n  }, [isActive, nodeData, processedData]);\n\n  useEffect(() => {\n    if (!isActive || !nodeData || !processedData) {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      if (!isActive) {\n        setSelectedNode(null);\n        currentArticleRef.current = null;\n        visitedArticlesRef.current.clear();\n        wasActiveBeforePauseRef.current = false;\n        hasInitialRunRef.current = false; // Allow animation to start again when user clicks dynamic view\n      }\n      return;\n    }\n\n    const allArticles = nodeData.articles || [];\n    const allGlossary = nodeData.glossary || [];\n    const allNodes = [...allArticles, ...allGlossary];\n    if (allNodes.length === 0) return;\n\n    const getRandomNode = () => {\n      const availableNodes = allNodes.filter(node => {\n        if (visitedArticlesRef.current.size >= allNodes.length) {\n          return true;\n        }\n        return !visitedArticlesRef.current.has(node.id);\n      });\n\n      if (availableNodes.length === 0) {\n        visitedArticlesRef.current.clear();\n        return allNodes[Math.floor(Math.random() * allNodes.length)];\n      }\n\n      return availableNodes[Math.floor(Math.random() * availableNodes.length)];\n    };\n\n    const visitNode = (nodeItem) => {\n      setSelectedNode({ id: nodeItem.id, ts: Date.now() });\n    };\n\n    const nextNode = () => {\n      const randomNode = getRandomNode();\n      if (randomNode) {\n        currentArticleRef.current = randomNode;\n        visitedArticlesRef.current.add(randomNode.id);\n        visitNode(randomNode);\n      }\n    };\n\n    const startWalkThrough = () => {\n      // Check if we still have valid data before starting\n      if (!isActiveRef.current || !nodeDataRef.current || !processedDataRef.current) {\n        return;\n      }\n\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n\n      const currentNodes = [...(nodeDataRef.current.articles || []), ...(nodeDataRef.current.glossary || [])];\n      if (currentNodes.length === 0) return;\n\n      if (!currentArticleRef.current) {\n        currentArticleRef.current = currentNodes[Math.floor(Math.random() * currentNodes.length)];\n        visitedArticlesRef.current.add(currentArticleRef.current.id);\n        visitNode(currentArticleRef.current);\n      }\n\n      intervalRef.current = setInterval(() => {\n        // Double-check we're still active before each iteration\n        if (!isActiveRef.current || !nodeDataRef.current || !processedDataRef.current) {\n          if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n          }\n          return;\n        }\n        nextNode();\n      }, 8000);\n    };\n\n    // Start the walk-through only on initial run\n    if (!hasInitialRunRef.current) {\n      hasInitialRunRef.current = true;\n      startWalkThrough();\n    }\n\n    // Handle visibility change (pause when tab is hidden, resume when visible)\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'hidden') {\n        // Tab is hidden - pause the walk-through\n        wasActiveBeforePauseRef.current = intervalRef.current !== null;\n        if (intervalRef.current) {\n          clearInterval(intervalRef.current);\n          intervalRef.current = null;\n        }\n      } else if (document.visibilityState === 'visible') {\n        // Tab is visible again - resume the walk-through if it was active\n        // Use ref to get the latest isActive value\n        if (wasActiveBeforePauseRef.current && isActiveRef.current && nodeDataRef.current && processedDataRef.current) {\n          startWalkThrough();\n        }\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [isActive, nodeData, processedData, setSelectedNode]);\n\n  return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6081, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/components/utils/CameraFOVController.jsx"],"sourcesContent":["'use client';\n\nimport { useFrame, useThree } from '@react-three/fiber';\nimport { useStore } from 'usestore-react';\nimport { useMemo } from 'react';\n\nexport function CameraFOVController() {\n  const { camera } = useThree();\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [highlightedNodes] = useStore('highlightedNodesStore', []);\n  const [walkThroughActive] = useStore('walkThroughActive', false);\n\n  const hasHighlightedElements = useMemo(() => {\n    return !!selectedNode || (Array.isArray(highlightedNodes) && highlightedNodes.length > 0);\n  }, [selectedNode, highlightedNodes]);\n\n  const targetFOV = useMemo(() => {\n    if (walkThroughActive) {\n      return hasHighlightedElements ? 47.5 : 50;\n    }\n    return hasHighlightedElements ? 45 : 50;\n  }, [hasHighlightedElements, walkThroughActive]);\n\n  useFrame(() => {\n    if (camera && camera.isPerspectiveCamera) {\n      const currentFOV = camera.fov;\n      const difference = targetFOV - currentFOV;\n      \n      if (Math.abs(difference) > 0.1) {\n        camera.fov += difference * 0.1;\n        camera.updateProjectionMatrix();\n      } else if (Math.abs(difference) > 0.01) {\n        camera.fov = targetFOV;\n        camera.updateProjectionMatrix();\n      }\n    }\n  });\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAAA;AACA;AACA;;;;AAJA;;;;AAMO,SAAS;;IACd,IAAM,AAAE,SAAW,IAAA,8NAAQ,IAAnB;IACR,IAAuB,qLAAA,IAAA,iKAAQ,EAAC,qBAAqB,WAA9C,eAAgB;IACvB,IAA2B,sLAAA,IAAA,iKAAQ,EAAC,yBAAyB,EAAE,OAAxD,mBAAoB;IAC3B,IAA4B,sLAAA,IAAA,iKAAQ,EAAC,qBAAqB,YAAnD,oBAAqB;IAE5B,IAAM,yBAAyB,IAAA,wKAAO;+DAAC;YACrC,OAAO,CAAC,CAAC,gBAAiB,MAAM,OAAO,CAAC,qBAAqB,iBAAiB,MAAM,GAAG;QACzF;8DAAG;QAAC;QAAc;KAAiB;IAEnC,IAAM,YAAY,IAAA,wKAAO;kDAAC;YACxB,IAAI,mBAAmB;gBACrB,OAAO,yBAAyB,OAAO;YACzC;YACA,OAAO,yBAAyB,KAAK;QACvC;iDAAG;QAAC;QAAwB;KAAkB;IAE9C,IAAA,8NAAQ;wCAAC;YACP,IAAI,UAAU,OAAO,mBAAmB,EAAE;gBACxC,IAAM,aAAa,OAAO,GAAG;gBAC7B,IAAM,aAAa,YAAY;gBAE/B,IAAI,KAAK,GAAG,CAAC,cAAc,KAAK;oBAC9B,OAAO,GAAG,IAAI,aAAa;oBAC3B,OAAO,sBAAsB;gBAC/B,OAAO,IAAI,KAAK,GAAG,CAAC,cAAc,MAAM;oBACtC,OAAO,GAAG,GAAG;oBACb,OAAO,sBAAsB;gBAC/B;YACF;QACF;;IAEA,OAAO;AACT;GAjCgB;;QACK,8NAAQ;QACJ,iKAAQ;QACJ,iKAAQ;QACP,iKAAQ;QAapC,8NAAQ;;;KAjBM"}},
    {"offset": {"line": 6159, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/github/living-continuity-2026/app/page.js"],"sourcesContent":["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { Environment } from \"@react-three/drei\";\nimport PassiveOrbitControls from \"../components/utils/PassiveOrbitControls\";\nimport { useThree } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport React, { useEffect, Suspense, useMemo, useCallback, useState, startTransition } from \"react\";\nimport OptimizedCanvas from \"../components/utils/OptimizedCanvas\";\nimport ConnectionController from \"../components/connectionControler\";\nimport ElementOpacityController from \"../components/utils/ElementOpacityController\";\nimport Modal from \"react-modal\";\nimport { useStore } from \"usestore-react\";\nimport TopBar from \"../components/treeComponents/topbar\";\nimport LivingContinuityButton from \"../components/livingContinuityButton\";\nimport { suppressTextureErrors } from \"../components/utils/suppressTextureErrors\";\nimport { processNodeData } from \"../components/utils/d3DataManager\";\nimport ArticleNodeTemplate from \"../components/templates/ArticleNodeTemplate\";\nimport { GlossaryNodeTemplate } from \"../components/templates/GlossaryNodeTemplate\";\nimport { initializeLoadingState, completeLoading } from \"../components/utils/LoadingStateManager\";\nimport { CameraInteractionTracker } from \"../components/utils/CameraInteractionTracker\";\nimport { ConnectionTransitionController } from \"../components/utils/ConnectionTransitionController\";\nimport { preloadAllModels, preloadImages, preloadGLBModel } from \"../components/utils/ModelPreloader\";\nimport { WalkThroughController } from \"../components/utils/WalkThroughController\";\nimport { CameraFOVController } from \"../components/utils/CameraFOVController\";\nimport \"../components/livingContinuityButton/welcomeModal.scss\";\n\nconst selectedComponents = {};\nconst glossaryShellComponents = {};\nlet initialCameraHasBeenSet = false;\n\nconst getSelectedComponent = async (id) => {\n  if (!selectedComponents[id]) {\n    try {\n      const lowerId = id.toLowerCase();\n      const module = await import(`../models/entries_selected/${lowerId}`);\n      const exportName = `${id}Selected2`;\n      selectedComponents[id] = module[exportName] || module.default || module[`${id}Selected`];\n    } catch (e) {\n      console.warn(`Could not load selected component for ${id}:`, e);\n      return null;\n    }\n  }\n  return selectedComponents[id];\n};\n\nconst getGlossaryShellComponent = async (path) => {\n  if (!path) return null;\n  let key = path.replace('../glossaryShell/', '');\n  if (!glossaryShellComponents[key]) {\n    try {\n      let module;\n      try {\n        module = await import(`../models/glossaryShell/${key}`);\n      } catch (e1) {\n        const normalizedKey = key.replace(/-/g, '');\n        try {\n          module = await import(`../models/glossaryShell/${normalizedKey}`);\n          key = normalizedKey;\n        } catch (e2) {\n          throw e2;\n        }\n      }\n      const pascalCase = key\n        .split(/[-_]/)\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join('');\n      glossaryShellComponents[key] = module.default || module[pascalCase] || Object.values(module).find(v => typeof v === 'function');\n    } catch (e) {\n      console.warn(`Could not load glossary shell for ${key}:`, e);\n      return null;\n    }\n  }\n  return glossaryShellComponents[key];\n};\n\n\nconst HomePage = () => {\n  const [cameraOptions] = useStore('cameraOptions');\n  const [sceneRotation] = useStore('livingContinuity_sceneRotation', false);\n  const [walkThroughActive, setWalkThroughActive] = useStore('walkThroughActive', false);\n  const showAllLines = false;\n  const [camera, setCamera] = useState(true);\n  const [modalIsOpen, setOpen] = useState(true);\n  const [title, setTitle] = useState(\"\");\n  const [nodeData, setNodeData] = useState(null);\n  const [processedData, setProcessedData] = useState(null);\n  const [selectedComponentsMap, setSelectedComponentsMap] = useState({});\n  const [glossaryShellComponentsMap, setGlossaryShellComponentsMap] = useState({});\n  const [selectedNode] = useStore('selectedNodeStore', null);\n  const [cameraInteraction] = useStore('cameraInteractionStore', false);\n  const [environmentLoaded, setEnvironmentLoaded] = useState(false);\n  const [initialLoad, setInitialLoad] = useState(true);\n  const [modalInitialized, setModalInitialized] = useState(typeof window !== 'undefined');\n  const getInitialCameraPosition = () => {\n    const radius = 28;\n    const height = 6;\n    const theta = Math.random() * Math.PI * 2;\n    const x = radius * Math.cos(theta);\n    const z = radius * Math.sin(theta);\n    return [x, height, z];\n  };\n  \n  const [initialCameraPosition] = useState(() => getInitialCameraPosition());\n  \n  const frameloopMode = camera || cameraInteraction || initialLoad ? 'always' : 'demand';\n  \n\n  useEffect(() => {\n    fetch(`/data/nodes.json?t=${Date.now()}`)\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(`HTTP error! status: ${res.status}`);\n        }\n        return res.json();\n      })\n      .then(data => {\n        startTransition(() => {\n          setNodeData(data);\n          const processed = processNodeData(data);\n          setProcessedData(processed);\n        });\n        \n        const totalNodes = (data.articles?.length || 0) + (data.glossary?.length || 0);\n        initializeLoadingState(totalNodes);\n        \n        const scheduleIdleWork = (callback) => {\n          if (typeof window !== 'undefined' && 'requestIdleCallback' in window) {\n            requestIdleCallback(callback, { timeout: 2000 });\n          } else {\n            setTimeout(callback, 100);\n          }\n        };\n        \n        const loadComponentsInBatches = async () => {\n          const batchSize = 5;\n          const allArticles = data.articles || [];\n          const allGlossary = data.glossary || [];\n          \n          const loadBatch = async (items, loader, setter, type) => {\n            for (let i = 0; i < items.length; i += batchSize) {\n              await new Promise(resolve => {\n                scheduleIdleWork(async () => {\n                  const batch = items.slice(i, i + batchSize);\n                  const results = await Promise.allSettled(\n                    batch.map(async (item) => {\n                      try {\n                        const component = await loader(item);\n                        return { id: item.id, component };\n                      } catch (e) {\n                        console.warn(`Failed to load ${type} component for ${item.id}:`, e);\n                        return { id: item.id, component: null };\n                      }\n                    })\n                  );\n                  \n                  startTransition(() => {\n                    setter(prev => {\n                      const updated = { ...prev };\n                      results.forEach((result) => {\n                        if (result.status === 'fulfilled' && result.value?.component) {\n                          updated[result.value.id] = result.value.component;\n                        }\n                      });\n                      return updated;\n                    });\n                  });\n                  \n                  setTimeout(resolve, 50);\n                });\n              });\n            }\n          };\n          \n          const articleLoader = (article) => {\n            if (article.selectedModelPath) {\n              return getSelectedComponent(article.id);\n            }\n            return Promise.resolve(null);\n          };\n          \n          const glossaryLoader = (glossary) => {\n            if (glossary.glossaryShellPath) {\n              return getGlossaryShellComponent(glossary.glossaryShellPath);\n            }\n            return Promise.resolve(null);\n          };\n          \n          await Promise.all([\n            loadBatch(allArticles, articleLoader, setSelectedComponentsMap, 'article'),\n            loadBatch(allGlossary, glossaryLoader, setGlossaryShellComponentsMap, 'glossary')\n          ]);\n          \n          completeLoading();\n        };\n        \n        scheduleIdleWork(() => {\n          preloadAllModels(data);\n          preloadImages(data).catch(() => {});\n        });\n        \n        scheduleIdleWork(() => {\n          loadComponentsInBatches().catch(err => {\n            console.error('Error loading components:', err);\n            completeLoading();\n          });\n        });\n      })\n      .catch(err => {\n        console.error('Failed to load node data:', err);\n        startTransition(() => {\n          setNodeData({ articles: [], glossary: [] });\n          setProcessedData({ nodes: [], links: [], nodeMap: new Map() });\n        });\n      });\n  }, []);\n\n  useEffect(() => {\n    let timer2;\n    const timer = setTimeout(() => {\n      setEnvironmentLoaded(true);\n      timer2 = setTimeout(() => {\n        setInitialLoad(false);\n      }, 20);\n    }, 10);\n    return () => {\n      clearTimeout(timer);\n      if (timer2) clearTimeout(timer2);\n    };\n  }, []);\n\n  useEffect(() => {\n    const cleanup = suppressTextureErrors();\n    return cleanup;\n  }, []);\n\n  const handleOpen = useCallback(() => {\n    setOpen(prev => !prev);\n  }, []);\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.key === 'Enter' && modalIsOpen) {\n        handleOpen();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [modalIsOpen, handleOpen]);\n\n  useEffect(() => {\n    if (!modalIsOpen && processedData && nodeData) {\n      const timer = setTimeout(() => {\n        setWalkThroughActive(true);\n      }, 8000);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [modalIsOpen, processedData, nodeData, setWalkThroughActive]);\n\n  const titleSetters = useMemo(() => {\n    if (!nodeData) return {};\n    const setters = {};\n    \n    nodeData.articles.forEach(article => {\n      setters[article.id] = () => setTitle(article.title);\n    });\n    \n    nodeData.glossary.forEach(glossary => {\n      setters[glossary.id] = () => setTitle(glossary.title || '');\n    });\n    \n    return setters;\n  }, [nodeData]);\n\n  const setTitleDefault = useCallback(() => setTitle(\"\"), []);\n\n  const SceneBackground = React.memo(() => {\n    const { scene } = useThree();\n    useEffect(() => {\n      scene.background = new THREE.Color(0x1C1C1C);\n    }, [scene]);\n    return null;\n  });\n  SceneBackground.displayName = 'SceneBackground';\n\n  const CameraDolly = React.memo(({ cameraOptions }) => {\n    const state = useThree();\n    const [selectedNode] = useStore('selectedNodeStore', null);\n    \n    useEffect(() => {\n      if (selectedNode) {\n        return;\n      }\n      \n      if (!cameraOptions) {\n        return;\n      }\n      \n      if (!initialCameraHasBeenSet) {\n        return;\n      }\n      \n      const presets = {\n        top: [0.267, 14.68, 0.6],\n        reset: [5.29, -1.59, 6],\n        overview: [0, 6, 18],\n      };\n\n      const nextPosition = presets[cameraOptions];\n      if (!nextPosition) {\n        return;\n      }\n\n      state.camera.position.set(...nextPosition);\n      state.camera.lookAt(0, 0, 0);\n      state.camera.updateProjectionMatrix();\n    }, [cameraOptions, state.camera, selectedNode]);\n    return null;\n  });\n\n  const InitialCameraSetup = React.memo(({ initialPosition }) => {\n    const { camera, set } = useThree();\n    const initialPositionRef = React.useRef(initialPosition);\n    \n    useEffect(() => {\n      if (!initialCameraHasBeenSet && initialPositionRef.current) {\n        const timer = setTimeout(() => {\n          if (!initialCameraHasBeenSet) {\n            camera.position.set(...initialPositionRef.current);\n            camera.lookAt(0, 0, 0);\n            camera.updateProjectionMatrix();\n            set({ camera });\n            initialCameraHasBeenSet = true;\n          }\n        }, 50);\n        return () => clearTimeout(timer);\n      }\n    }, []);\n    \n    return null;\n  });\n  InitialCameraSetup.displayName = 'InitialCameraSetup';\n  \n  CameraDolly.displayName = 'CameraDolly';\n\n  return (\n    <>\n      <Modal \n        isOpen={modalIsOpen} \n        contentLabel=\"Welcome Modal\"\n        shouldCloseOnOverlayClick={true}\n        shouldCloseOnEsc={false}\n        ariaHideApp={false}\n        className=\"welcomeModalContent\"\n        overlayClassName=\"welcomeModalOverlay\"\n        onRequestClose={handleOpen}\n        closeTimeoutMS={150}\n        preventScroll={true}\n      >\n        <div onClick={handleOpen}>\n          <LivingContinuityButton onClick={handleOpen} />\n        </div>\n      </Modal>\n      {(!processedData || !nodeData) && (\n        <div className=\"welcomeLoading\">\n          Loading...\n        </div>\n      )}\n      <div className=\"welcomeTopbarWrapper\">\n        <TopBar title={title} />\n      </div>\n\n      <div className=\"welcomeCanvasWrapper\">\n        <OptimizedCanvas\n          frameloop={frameloopMode}\n        >\n        <SceneBackground />\n        <InitialCameraSetup initialPosition={initialCameraPosition} />\n        <ambientLight intensity={1} />\n        {environmentLoaded && (\n          <Suspense fallback={null}>\n            <Environment preset=\"city\" />\n          </Suspense>\n        )}\n        <CameraDolly cameraOptions={cameraOptions} />\n        {processedData && nodeData && (\n          <>\n            <WalkThroughController \n              nodeData={nodeData} \n              processedData={processedData} \n              isActive={walkThroughActive}\n            />\n            <ElementOpacityController />\n            <CameraInteractionTracker />\n            <ConnectionTransitionController />\n            <CameraFOVController />\n\n            {nodeData.articles.map((article) => {\n              const node = processedData.nodeMap.get(article.id);\n              if (!node) return null;\n              \n              const SelectedComponent = selectedComponentsMap[article.id];\n              const setTitleFn = titleSetters[article.id] || setTitleDefault;\n              \n              return (\n                <Suspense key={article.id} fallback={null}>\n                  <ArticleNodeTemplate\n                    nodeData={node}\n                    showAllLines={showAllLines}\n                    setTitle={setTitleFn}\n                    setDefault={setTitleDefault}\n                    selectedComponent={SelectedComponent}\n                  />\n                </Suspense>\n              );\n            })}\n\n            {nodeData.glossary.map((glossary) => {\n              const node = processedData.nodeMap.get(glossary.id);\n              if (!node) return null;\n              \n              const GlossaryShellComponent = glossaryShellComponentsMap[glossary.id];\n              const setTitleFn = titleSetters[glossary.id] || setTitleDefault;\n              \n              return (\n                <Suspense key={glossary.id} fallback={null}>\n                  <GlossaryNodeTemplate\n                    nodeData={node}\n                    showAllLines={showAllLines}\n                    title={glossary.title}\n                    setTitle={setTitleFn}\n                    setDefault={setTitleDefault}\n                    glossaryShellComponent={GlossaryShellComponent}\n                  />\n                </Suspense>\n              );\n            })}\n\n            <ConnectionController processedData={processedData} />\n          </>\n        )}\n\n        <PassiveOrbitControls\n          autoRotate={sceneRotation && !walkThroughActive ? true : false}\n          autoRotateSpeed={0.5}\n          minDistance={1}\n          maxDistance={60}\n          enableDamping={true}\n          dampingFactor={0.08}\n          enablePan={true}\n          makeDefault={false}\n          rotateSpeed={0.8}\n          panSpeed={0.8}\n          zoomSpeed={0.8}\n          enableRotate={true}\n        />\n        </OptimizedCanvas>\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;\n"],"names":[],"mappings":"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"}}]
}