{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Applications/MAMP/htdocs/35-SAT/SAT/app/kit-of-parts/KitPartsScene.jsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, Suspense } from \"react\";\nimport { Canvas, useThree } from \"@react-three/fiber\";\nimport { OrbitControls, Grid } from \"@react-three/drei\";\nimport { useStore } from \"usestore-react\";\nimport dynamic from \"next/dynamic\";\n\nconst Floor = dynamic(() => import(\"../../components/new/ground.jsx\"), { ssr: false });\nconst B1 = dynamic(() => import(\"../../components/new/b1\"), { ssr: false });\nconst Bb = dynamic(() => import(\"../../components/new/bb\"), { ssr: false });\nconst FP = dynamic(() => import(\"../../components/new/FP\"), { ssr: false });\nconst K1 = dynamic(() => import(\"../../components/new/K1\"), { ssr: false });\nconst K2 = dynamic(() => import(\"../../components/new/K2\"), { ssr: false });\nconst S1 = dynamic(() => import(\"../../components/new/S1\"), { ssr: false });\nconst ST1 = dynamic(() => import(\"../../components/new/ST1\"), { ssr: false });\n\nconst DeselectHandler = ({ children, draggingMode }) => {\n  const [, setSelectedObjectId] = useStore(\"selectedObjectId\", null);\n  \n  return (\n    <group\n      onClick={(e) => {\n        if (draggingMode && e.target === e.currentTarget) {\n          setSelectedObjectId(null);\n        }\n      }}\n    >\n      {children}\n    </group>\n  );\n};\n\nconst OrbitControlsWithDeselect = ({ draggingMode }) => {\n  const [, setSelectedObjectId] = useStore(\"selectedObjectId\", null);\n  \n  return null;\n};\n\nconst CameraDolly = ({ isZoom, draggingMode, guiMode, disableRotation, sceneRotation }) => {\n  const state = useThree();\n\n  useEffect(() => {\n    if (draggingMode === true) {\n        state.camera.position.set(0, 27, 0);\n        state.camera.zoom=17\n    }\n      if (guiMode === true) {\n          state.camera.position.set(-5.16, 19.9, 8.7);\n          state.camera.zoom=17\n\n      }\n      if (disableRotation === true || sceneRotation === true) {\n\n          state.camera.zoom=17\n      }\n  }, [draggingMode, guiMode, disableRotation, sceneRotation, state.camera]);\n\n  return null;\n};\n\nconst SceneBackground = React.memo(() => {\n  const { scene } = useThree();\n  useEffect(() => {\n    scene.background = null;\n  }, [scene]);\n  return null;\n});\nSceneBackground.displayName = 'SceneBackground';\n\nexport default function KitPartsScene({\n  bathroom,\n  boxbed,\n  front,\n  kitchen,\n  k2,\n  s1,\n  st1,\n  isZoom,\n  draggingMode,\n  guiMode,\n  disableRotation,\n  sceneRotation,\n  selectedObjectId\n}) {\n  useEffect(() => {\n    console.log('[KitPartsScene] Setting up WebGL context handlers');\n    const handleContextLost = (event) => {\n      event.preventDefault();\n      console.error('[KitPartsScene] WebGL context lost! Attempting to restore...');\n      console.error('[KitPartsScene] Context lost event details:', {\n        cancelable: event.cancelable,\n        defaultPrevented: event.defaultPrevented\n      });\n    };\n\n    const handleContextRestored = () => {\n      console.log('[KitPartsScene] WebGL context restored successfully');\n      console.log('[KitPartsScene] Reloading page to restore scene...');\n      window.location.reload();\n    };\n\n    const canvas = document.querySelector('canvas');\n    if (canvas) {\n      console.log('[KitPartsScene] Canvas found, attaching event listeners');\n      canvas.addEventListener('webglcontextlost', handleContextLost);\n      canvas.addEventListener('webglcontextrestored', handleContextRestored);\n    } else {\n      console.warn('[KitPartsScene] Canvas element not found');\n    }\n\n    return () => {\n      if (canvas) {\n        console.log('[KitPartsScene] Cleaning up WebGL context handlers');\n        canvas.removeEventListener('webglcontextlost', handleContextLost);\n        canvas.removeEventListener('webglcontextrestored', handleContextRestored);\n      }\n    };\n  }, []);\n\n  return (\n    <Canvas\n        dpr={[1, 2]} \n        orthographic \n        camera={{ position: [-14, 11, 15], zoom: 13 }}\n        gl={{\n          antialias: true,\n          alpha: false,\n          powerPreference: 'high-performance',\n          preserveDrawingBuffer: false,\n          failIfMajorPerformanceCaveat: false,\n        }}\n        style={{\n          background: \"transparent\",\n          height: \"100vh\",\n          width: \"100vw\",\n          position: \"relative\",\n          zIndex: 1,\n          pointerEvents: \"auto\",\n        }}\n        onCreated={(state) => {\n          console.log('[KitPartsScene] Canvas created successfully');\n          console.log('[KitPartsScene] Canvas state:', {\n            gl: state.gl ? 'WebGL context created' : 'No WebGL context',\n            scene: state.scene ? 'Scene created' : 'No scene',\n            camera: state.camera ? 'Camera created' : 'No camera',\n            size: state.size\n          });\n        }}\n        onError={(error) => {\n          console.error('[KitPartsScene] Canvas error occurred:', error);\n          console.error('[KitPartsScene] Error details:', {\n            message: error?.message,\n            stack: error?.stack,\n            name: error?.name\n          });\n        }}\n      >\n        <ambientLight intensity={0.6} />\n        <directionalLight \n          position={[10, 10, 5]} \n          intensity={0.5}\n        />\n        <directionalLight \n          position={[-10, 5, -5]} \n          intensity={0.3}\n        />\n\n        <SceneBackground />\n        <DeselectHandler draggingMode={draggingMode}>\n          <group rotation={[0, 0, 0]}>\n            <Grid\n              position={[0, 1.01, 0]}\n              followCamera={false}\n              args={[32, 26]}\n              cellColor={\"#6f6f6f\"}\n              cellSize={5}\n              cellThickness={0.2}\n              sectionColor={\"#9d4b4b\"}\n              sectionSize={1}\n            />\n            <Suspense fallback={null}>\n              {bathroom && <B1 show={bathroom} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              {boxbed && <Bb show={boxbed} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              {front && <FP show={front} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              {kitchen && <K1 show={kitchen} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              {k2 && <K2 show={k2} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              {s1 && <S1 show={s1} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              {st1 && <ST1 show={st1} isZoomState={isZoom} isMouseDragging={guiMode} isAxio={draggingMode} freeView={sceneRotation}/>}\n              <Floor />\n            </Suspense>\n          </group>\n        </DeselectHandler>\n        <OrbitControls \n          autoRotate={sceneRotation} \n          enableRotate={disableRotation && !(draggingMode && selectedObjectId)}\n          enablePan={!(draggingMode && selectedObjectId)}\n          enableZoom={!(draggingMode && selectedObjectId)}\n          autoRotateSpeed={0.5}\n        />\n        <OrbitControlsWithDeselect draggingMode={draggingMode} />\n        <CameraDolly isZoom={isZoom} draggingMode={draggingMode} guiMode={guiMode} disableRotation={disableRotation} sceneRotation={sceneRotation}/>\n    </Canvas>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}