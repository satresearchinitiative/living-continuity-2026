module.exports=[11909,a=>{"use strict";var b,c,d,e,f,g=a.i(87924),h=a.i(72131),i=a.i(10129),j=a.i(65521),k=a.i(98754),l=a.i(82140),m=a.i(9715);function n(){let{camera:a}=(0,j.useThree)(),[b]=(0,m.useStore)("kitOfParts_captureMode",!1),c=(0,h.useRef)(0),d=(0,h.useRef)(b);return(0,k.useFrame)(()=>{if(!a?.isOrthographicCamera)return;let e=!!d.current;d.current=b,e&&!b&&(c.current=15),c.current>0&&(c.current--,a.position.set(-14,11,15),a.zoom=17,a.lookAt(0,0,0),a.updateProjectionMatrix())}),null}var o=a.i(35258);let p={ambient:{intensity:1.5,color:new o.Color(0xffffff)},directional:[{position:[20,25,15],intensity:1.5,color:new o.Color(0xffffff),castShadow:!0,shadow:{mapSize:[2048,2048],camera:{near:.5,far:100,left:-50,right:50,top:50,bottom:-50}}},{position:[-20,20,-15],intensity:.8,color:new o.Color(0xffffff),castShadow:!1},{position:[0,15,0],intensity:.5,color:new o.Color(0xffffff),castShadow:!1},{position:[10,10,-20],intensity:.4,color:new o.Color(0xffffff),castShadow:!1}],hemisphere:{skyColor:new o.Color(0xffffff),groundColor:new o.Color(8947848),intensity:.8}};function q(){let a=(0,h.useRef)();return(0,h.useEffect)(()=>{if(a.current&&p.directional[0]?.shadow){let b=p.directional[0].shadow;a.current.shadow.mapSize.width=b.mapSize[0],a.current.shadow.mapSize.height=b.mapSize[1],a.current.shadow.camera.near=b.camera.near,a.current.shadow.camera.far=b.camera.far,a.current.shadow.camera.left=b.camera.left,a.current.shadow.camera.right=b.camera.right,a.current.shadow.camera.top=b.camera.top,a.current.shadow.camera.bottom=b.camera.bottom}},[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("ambientLight",{intensity:p.ambient.intensity,color:p.ambient.color}),(0,g.jsx)("hemisphereLight",{skyColor:p.hemisphere.skyColor,groundColor:p.hemisphere.groundColor,intensity:p.hemisphere.intensity}),p.directional.map((b,c)=>(0,g.jsx)("directionalLight",{ref:0===c?a:null,position:b.position,intensity:b.intensity,color:b.color,castShadow:b.castShadow},c))]})}var r=a.i(19163);function s(a,b=!0){a&&Object.values(a).forEach(a=>{a&&a.isMaterial&&function(a,b=!0){if(!a||!a.isMaterial)return;let c=b?{color:a.color?.clone(),emissive:a.emissive?.clone(),roughness:a.roughness,metalness:a.metalness,opacity:a.opacity,transparent:a.transparent,side:a.side}:null;["map","normalMap","roughnessMap","metalnessMap","aoMap","emissiveMap","bumpMap","displacementMap","alphaMap","clearcoatMap","clearcoatNormalMap","clearcoatRoughnessMap","iridescenceMap","iridescenceThicknessMap","sheenColorMap","sheenRoughnessMap","specularColorMap","specularIntensityMap","transmissionMap","thicknessMap"].forEach(b=>{let c=a[b];c&&c.isTexture&&(c.image&&!c.image.complete&&c.image.addEventListener("load",()=>{c.needsUpdate=!0}),(void 0===c.flipY||!0===c.flipY)&&(c.flipY=!1),c.wrapS&&c.wrapS!==o.ClampToEdgeWrapping||(c.wrapS=o.RepeatWrapping),c.wrapT&&c.wrapT!==o.ClampToEdgeWrapping||(c.wrapT=o.RepeatWrapping),!1!==c.generateMipmaps&&(c.generateMipmaps=!0,c.minFilter=o.LinearMipmapLinearFilter),c.magFilter=o.LinearFilter,"normalMap"===b||b.includes("Normal")?c.colorSpace!==o.NoColorSpace&&(c.colorSpace=o.NoColorSpace):"map"===b||"emissiveMap"===b||"aoMap"===b?c.colorSpace!==o.SRGBColorSpace&&(c.colorSpace=o.SRGBColorSpace):c.colorSpace!==o.NoColorSpace&&(c.colorSpace=o.NoColorSpace),c.needsUpdate=!0)}),b&&c&&(c.color&&!a.color.equals(c.color)&&a.color.copy(c.color),c.emissive&&a.emissive&&a.emissive.copy(c.emissive),void 0!==c.roughness&&(a.roughness=c.roughness),void 0!==c.metalness&&(a.metalness=c.metalness),void 0!==c.opacity&&(a.opacity=c.opacity),void 0!==c.transparent&&(a.transparent=c.transparent),void 0!==c.side&&(a.side=c.side)),(a.isMeshStandardMaterial||a.isMeshPhysicalMaterial)&&(a.needsUpdate=!0)}(a,b)})}function t(a){let{nodes:b,materials:c}=(0,r.useGLTF)("/models/gbl_update/floor.glb");(0,h.useEffect)(()=>{c&&(s(c,!0),Object.values(c).forEach(a=>{a&&a.isMaterial&&(a.color.setHex(0xffffff),a.emissive&&(a.emissive.setHex(0xffffff),void 0!==a.emissiveIntensity&&(a.emissiveIntensity=.2)),(a.isMeshStandardMaterial||a.isMeshPhysicalMaterial)&&(a.roughness=.5,a.metalness=0),a.needsUpdate=!0)}))},[c]);let[,d]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),e=(0,h.useMemo)(()=>b?Object.entries(b).filter(([a,b])=>!(!b||!b.geometry||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))):[],[b]),f=(0,h.useMemo)(()=>{if(!b)return{width:144,height:192,cellSize:12,centerX:0,centerZ:0};let a=new o.Box3,c=!1;if(Object.values(b).forEach(b=>{if(b&&b.geometry&&b.geometry.attributes&&b.geometry.attributes.position){let d=b.geometry;if(d.computeBoundingBox(),d.boundingBox){let e=d.boundingBox.clone();b.matrix&&!b.matrix.equals(new o.Matrix4)&&e.applyMatrix4(b.matrix),c?a.union(e):(a.copy(e),c=!0)}}}),!c||a.isEmpty())return{width:144,height:192,cellSize:12,centerX:0,centerZ:0};let d=a.getSize(new o.Vector3),e=a.getCenter(new o.Vector3),f=Math.max(d.x/12,d.z/16);return{width:12*f,height:16*f,cellSize:f,centerX:e.x,centerZ:e.z}},[b]);(0,h.useEffect)(()=>{d(f)},[f,d]);let i=c&&Object.values(c)[0];return(0,g.jsxs)("group",{children:[(0,g.jsx)(({width:a,height:b,cellSize:c,centerX:d,centerZ:e,yPosition:f})=>{let i=(0,h.useMemo)(()=>{let g=new o.BufferGeometry,h=[],i=a/2,j=b/2,k=d-i,l=d+i,m=e-j,n=e+j,p=Math.floor(a/c)+1,q=Math.floor(b/c)+1;for(let a=0;a<=p;a++){let b=k+a*c;h.push(b,f,m,b,f,n)}for(let a=0;a<=q;a++){let b=m+a*c;h.push(k,f,b,l,f,b)}return g.setAttribute("position",new o.Float32BufferAttribute(h,3)),g},[a,b,c,d,e,f]),j=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:"#1C1C1C",linewidth:1,opacity:.5,transparent:!0}),[]);return(0,g.jsx)("lineSegments",{geometry:i,material:j,renderOrder:1})},{width:f.width,height:f.height,cellSize:f.cellSize,centerX:f.centerX||0,centerZ:f.centerZ||0,yPosition:1.1}),(0,g.jsx)("group",{...a,dispose:null,children:e.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes||!b.geometry.attributes.position||b.type&&"Mesh"!==b.type)return null;let c=b.material||i;return c?(!b.geometry.attributes.normal&&b.geometry.computeVertexNormals&&b.geometry.computeVertexNormals(),(0,g.jsx)("mesh",{geometry:b.geometry,material:c,position:[0,.99,0],castShadow:!1,receiveShadow:!1},a)):null})})]})}function u(){let[a]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),{nodes:b}=(0,r.useGLTF)("/models/gbl_update/frontPorch.glb"),{nodes:c}=(0,r.useGLTF)("/models/gbl_update/floor.glb"),d=(0,h.useMemo)(()=>{if(!b)return 10;let a=new o.Box3,c=!1;return(Object.values(b).forEach(b=>{if(b&&b.geometry&&b.geometry.attributes&&b.geometry.attributes.position){let d=b.geometry;if(d.computeBoundingBox(),d.boundingBox){let e=d.boundingBox.clone();b.matrix&&!b.matrix.equals(new o.Matrix4)&&e.applyMatrix4(b.matrix),c?a.union(e):(a.copy(e),c=!0)}}}),!c||a.isEmpty())?10:a.getSize(new o.Vector3).y},[b]),e=(0,h.useMemo)(()=>{if(!c)return{bottom:.99,height:0};let a=new o.Box3,b=!1;return(Object.values(c).forEach(d=>{if(d&&d.geometry&&d.geometry.attributes&&d.geometry.attributes.position){if(d.type&&"Mesh"!==d.type)return;let e=Object.keys(c).find(a=>c[a]===d);if(e&&(e.toLowerCase().includes("line")||e.toLowerCase().includes("edge")||e.toLowerCase().includes("wireframe")))return;let f=d.geometry;if(f.computeBoundingBox(),f.boundingBox){let c=f.boundingBox.clone();d.matrix&&!d.matrix.equals(new o.Matrix4)&&c.applyMatrix4(d.matrix),b?a.union(c):(a.copy(c),b=!0)}}}),!b||a.isEmpty())?{bottom:.99,height:0}:{bottom:a.min.y+.99,height:a.max.y-a.min.y}},[c]),{width:f,height:i,centerX:j,centerZ:k}=a,l=d+e.height,n=e.bottom,p=(0,h.useMemo)(()=>{let a=f/2,b=i/2,c=l/2;return{corners:[[-a,-c,-b],[a,-c,-b],[a,-c,b],[-a,-c,b],[-a,c,-b],[a,c,-b],[a,c,b],[-a,c,b]],edgeLines:[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]]}},[f,i,l]),q=new o.LineBasicMaterial({color:65535,linewidth:1});return(0,g.jsx)("group",{position:[j,n+l/2,k],children:p.edgeLines.map(([a,b],c)=>{let d=p.corners[a],e=p.corners[b],f=new o.BufferGeometry().setFromPoints([new o.Vector3(...d),new o.Vector3(...e)]);return(0,g.jsx)("line",{geometry:f,material:q},c)})})}r.useGLTF.preload("/models/gbl_update/floor.glb");var v=a.i(70033);function w(a,b){return a.map(function(a,c){return a+b[c]})}function x(a,b){return a.map(function(a,c){return a-b[c]})}function y(a){return Math.hypot.apply(Math,a)}function z(a,b){void 0===b&&(b=a);var c=y(b),d=0===c?0:1/c,e=b.map(function(a){return d*a});return{distance:y(a),direction:e}}function A(a,b,c){var d=y(b),e=0===d?0:1/d,f=0===c?0:1/c,g=b.map(function(a){return f*a}),h=b.map(function(a){return e*a});return{velocities:g,velocity:f*d,distance:y(a),direction:h}}function B(a){return Math.sign?Math.sign(a):Number(a>0)-Number(a<0)||+a}function C(a,b,c){return 0===b||Math.abs(b)===1/0?Math.pow(a,5*c):a*b*c/(b+c*a)}function D(a,b,c,d){return(void 0===d&&(d=.15),0===d)?Math.max(b,Math.min(a,c)):a<b?-C(b-a,c-b,d)+b:a>c?+C(a-c,c-b,d)+c:a}function E(){return(E=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function F(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function G(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function H(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function I(a,b){var c;if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=function(a,b){if(a){if("string"==typeof a)return H(a,void 0);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return H(a,void 0)}}(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0;return function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(c=a[Symbol.iterator]()).next.bind(c)}function J(){}function K(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return 0===b.length?J:1===b.length?b[0]:function(){for(var a,c,d=I(b);!(c=d()).done;)a=c.value.apply(this,arguments)||a;return a}}function L(a,b){if(void 0===a){if(void 0===b)throw Error("Must define fallback value if undefined is expected");a=b}return Array.isArray(a)?a:[a,a]}function M(a,b){return Object.assign({},b,a||{})}function N(a){if("function"!=typeof a)return a;for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(void 0,c)}function O(a,b){void 0===a&&(a={});for(var c={},d=0,e=Object.entries(b);d<e.length;d++){var f=e[d],g=f[0],h=f[1];switch(typeof h){case"function":c[g]=h.call(c,a[g],g,a);break;case"object":c[g]=O(a[g],h);break;case"boolean":h&&(c[g]=a[g])}}return c}function P(a){return"pointerId"in a?null:"touchend"===a.type?a.changedTouches:a.targetTouches}function Q(a){return Array.from(P(a)).map(function(a){return a.identifier})}function R(a){return{buttons:"buttons"in a?a.buttons:0,shiftKey:a.shiftKey,altKey:a.altKey,metaKey:a.metaKey,ctrlKey:a.ctrlKey}}var S=function(a){return a};function T(a,b){void 0===b&&(b=S);var c=P(a),d=c?c[0]:a;return b([d.clientX,d.clientY])}function U(a,b,c){void 0===c&&(c=S);var d=Array.from(a.touches).filter(function(a){return b.includes(a.identifier)}),e=d[0],f=d[1];if(!e||!f)throw Error("The event doesn't have two pointers matching the pointerIds");var g=f.clientX-e.clientX,h=f.clientY-e.clientY,i=(f.clientX+e.clientX)/2,j=(f.clientY+e.clientY)/2;return{values:c([Math.hypot(g,h),-(180*Math.atan2(g,h))/Math.PI]),origin:c([i,j])}}function V(a,b){void 0===b&&(b=S);var c=a.deltaX,d=a.deltaY,e=a.deltaMode;return 1===e?(c*=40,d*=40):2===e&&(c*=800,d*=800),b([c,d])}function W(a,b){return void 0===b&&(b=S),b([a.scale,a.rotation])}var X={threshold:function(a){return void 0===a&&(a=0),L(a)},rubberband:function(a){switch(void 0===a&&(a=0),a){case!0:return L(.15);case!1:return L(0);default:return L(a)}},enabled:function(a){return void 0===a&&(a=!0),a},triggerAllEvents:function(a){return void 0===a&&(a=!1),a},initial:function(a){return(void 0===a&&(a=0),"function"==typeof a)?a:L(a)},transform:!0},Y=E({},X,{axis:!0,lockDirection:function(a){return void 0===a&&(a=!1),a},bounds:function(a){if(void 0===a&&(a={}),"function"==typeof a)return function(b){return Y.bounds(a(b))};var b=a,c=b.left,d=b.right,e=b.top,f=b.bottom;return[[void 0===c?-1/0:c,void 0===d?1/0:d],[void 0===e?-1/0:e,void 0===f?1/0:f]]}}),Z={enabled:function(a){return void 0===a&&(a=!0),a},domTarget:!0,window:function(a){function b(b){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return void 0===a&&(a=void 0),a}),eventOptions:function(a){var b=void 0===a?{}:a,c=b.passive,d=b.capture;return{passive:void 0===c||c,capture:void 0!==d&&d}},transform:!0},$=E({},X,{bounds:function(a,b,c){var d=c.distanceBounds,e=void 0===d?{}:d,f=c.angleBounds,g=void 0===f?{}:f,h=function(a){var b=M(N(e,a),{min:-1/0,max:1/0});return[b.min,b.max]},i=function(a){var b=M(N(g,a),{min:-1/0,max:1/0});return[b.min,b.max]};return"function"!=typeof e&&"function"!=typeof g?[h(),i()]:function(a){return[h(a),i(a)]}}}),_=E({},Y,{useTouch:function(a){return void 0===a&&(a=!1),!1},experimental_preventWindowScrollY:function(a){return void 0===a&&(a=!1),a},threshold:function(a,b,c){var d=c.filterTaps,e=void 0!==d&&d,f=c.lockDirection,g=c.axis,h=L(a,e?3:void 0!==f&&f?1:+!!(void 0===g?void 0:g));return this.filterTaps=e,h},swipeVelocity:function(a){return void 0===a&&(a=.5),L(a)},swipeDistance:function(a){return void 0===a&&(a=50),L(a)},swipeDuration:function(a){return void 0===a&&(a=250),a},delay:function(a){switch(void 0===a&&(a=0),a){case!0:return 180;case!1:return 0;default:return a}}});function aa(a){return void 0===a&&(a={}),O(a,Y)}function ab(a){return E({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:J,canceled:!1,memo:void 0,args:void 0},a)}function ac(){return{shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},drag:ab({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),pinch:ab({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),wheel:ab({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),move:ab({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),scroll:ab({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0})}}var ad=new Map,ae=function(a){return a},af=function(){function a(a,b){var c=this;void 0===b&&(b=[]),this.controller=a,this.args=b,this.debounced=!0,this.setTimeout=function(a,b){var d;void 0===b&&(b=140),clearTimeout(c.controller.timeouts[c.stateKey]);for(var e=arguments.length,f=Array(e>2?e-2:0),g=2;g<e;g++)f[g-2]=arguments[g];c.controller.timeouts[c.stateKey]=(d=window).setTimeout.apply(d,[a,b].concat(f))},this.clearTimeout=function(){clearTimeout(c.controller.timeouts[c.stateKey])},this.fireGestureHandler=function(a){if(void 0===a&&(a=!1),c.state._blocked)return c.debounced||(c.state._active=!1,c.clean()),null;if(!a&&!c.state.intentional&&!c.config.triggerAllEvents)return null;if(c.state.intentional){var b=c.state.active,d=c.state._active;c.state.active=d,c.state.first=d&&!b,c.state.last=b&&!d,c.controller.state.shared[c.ingKey]=d}var e=c.controller.pointerIds.size||c.controller.touchIds.size,f=c.controller.state.shared.buttons>0||e>0,g=E({},c.controller.state.shared,c.state,c.mapStateValues(c.state),{locked:!!document.pointerLockElement,touches:e,down:f}),h=c.handler(g);return c.state.memo=void 0!==h?h:c.state.memo,g},this.controller=a,this.args=b}var b,c=a.prototype;return c.updateSharedState=function(a){Object.assign(this.controller.state.shared,a)},c.updateGestureState=function(a){Object.assign(this.state,a)},c.checkIntentionality=function(a,b){return{_intentional:a,_blocked:!1}},c.getMovement=function(a){var b=this.config.rubberband,c=this.state,d=c._bounds,e=c._initial,f=c._active,g=c._intentional,h=c.lastOffset,i=c.movement,j=c._threshold,k=this.getInternalMovement(a,this.state),l=!1===g[0]?ag(k[0],j[0]):g[0],m=!1===g[1]?ag(k[1],j[1]):g[1],n=this.checkIntentionality([l,m],k);if(n._blocked)return E({},n,{_movement:k,delta:[0,0]});var o=n._intentional,p=[!1!==o[0]?k[0]-o[0]:0,!1!==o[1]?k[1]-o[1]:0],q=w(p,h),r=f?b:[0,0];return p=ah(d,w(p,e),r),E({},n,{intentional:!1!==o[0]||!1!==o[1],_initial:e,_movement:k,movement:p,values:a,offset:ah(d,q,r),delta:x(p,i)})},c.clean=function(){this.clearTimeout()},b=[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||ae}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}();function ag(a,b){return Math.abs(a)>=b&&B(a)*b}function ah(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=h[0],j=h[1],k=a[1],l=k[0],m=k[1];return[D(d,i,j,f),D(e,l,m,g)]}function ai(a,b,c){var d=a.state,e=b.timeStamp,f=b.type,g=d.values,h=c?0:e-d.startTime;return{_lastEventType:f,event:b,timeStamp:e,elapsedTime:h,previous:g}}function aj(a,b,c,d){var e=a.state,f=a.config,g=a.stateKey,h=a.args,i=a.transform,j=e.offset,k=c.timeStamp,l=f.initial,m=f.bounds,n=x(i(f.threshold),i([0,0])).map(Math.abs),o=E({},ac()[g],{_active:!0,args:h,values:b,initial:null!=d?d:b,_threshold:n,offset:j,lastOffset:j,startTime:k});return E({},o,{_initial:N(l,o),_bounds:N(m,o)})}var ak=function(a){var b=this;this.classes=a,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=!1,this.supportsGestureEvents=function(){try{return"constructor"in GestureEvent}catch(a){return!1}}(),this.bind=function(){for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];for(var e,f={},g=I(b.classes);!(e=g()).done;)new e.value(b,c).addBindings(f);var h=function(a){ap(f,a,function(d){return b.nativeRefs[a](E({},b.state.shared,{event:d,args:c}))})};for(var i in b.nativeRefs)h(i);return b.config.domTarget?function(a,b){var c=a.config,d=a.domListeners,e=ao(c);if(!e)throw Error("domTarget must be defined");var f=c.eventOptions;ar(e,an(d),f);for(var g=0,h=Object.entries(b);g<h.length;g++){var i=h[g],j=i[0],k=i[1],l=j.slice(2).toLowerCase();d.push([l,K.apply(void 0,k)])}aq(e,d,f)}(b,f):function(a,b){for(var c=a.config,d={},e=c.eventOptions.capture?"Capture":"",f=0,g=Object.entries(b);f<g.length;f++){var h=g[f],i=h[0],j=h[1],k=Array.isArray(j)?j:[j];d[i+e]=K.apply(void 0,k)}return d}(b,f)},this.effect=function(){return b.config.domTarget&&b.bind(),b.clean},this.clean=function(){var a=ao(b.config),c=b.config.eventOptions;a&&ar(a,an(b.domListeners),c),Object.values(b.timeouts).forEach(clearTimeout),function(a){var b=a.config,c=b.window,d=b.eventOptions,e=a.windowListeners;if(c){for(var f in e)ar(c,e[f],d);a.windowListeners={}}}(b)},this.classes=a,this.state=ac(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function al(a,b){"pointerId"in b?a.pointerIds.add(b.pointerId):a.touchIds=new Set(Q(b))}function am(a,b){"pointerId"in b?a.pointerIds.delete(b.pointerId):Q(b).forEach(function(b){return a.touchIds.delete(b)})}function an(a){return void 0===a&&(a=[]),a.splice(0,a.length)}function ao(a){var b=a.domTarget;return b&&"current"in b?b.current:b}function ap(a,b,c){a[b]||(a[b]=[]),a[b].push(c)}function aq(a,b,c){void 0===b&&(b=[]),void 0===c&&(c={});for(var d,e=I(b);!(d=e()).done;){var f=d.value,g=f[0],h=f[1];a.addEventListener(g,h,c)}}function ar(a,b,c){void 0===b&&(b=[]),void 0===c&&(c={});for(var d,e=I(b);!(d=e()).done;){var f=d.value,g=f[0],h=f[1];a.removeEventListener(g,h,c)}}function as(){}var at=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);var c=b.prototype;return c.getInternalMovement=function(a,b){return x(a,b.initial)},c.checkIntentionality=function(a,b){if(!1===a[0]&&!1===a[1])return{_intentional:a,axis:this.state.axis};var c=b.map(Math.abs),d=c[0],e=c[1],f=this.state.axis||(d>e?"x":d<e?"y":void 0);return this.config.axis||this.config.lockDirection?f?this.config.axis&&f!==this.config.axis?{_intentional:a,_blocked:!0,axis:f}:(a[+("x"===f)]=!1,{_intentional:a,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}:{_intentional:a,_blocked:!1,axis:f}},c.getKinematics=function(a,b){var c=this.getMovement(a);if(!c._blocked){var d=b.timeStamp-this.state.timeStamp;Object.assign(c,A(c.movement,c.delta,d))}return c},c.mapStateValues=function(a){return{xy:a.values,vxvy:a.velocities}},b}(af);function au(a){"persist"in a&&"function"==typeof a.persist&&a.persist()}var av=function(a){function b(){var b;return b=a.apply(this,arguments)||this,b.ingKey="dragging",b.stateKey="drag",b.setPointerCapture=function(a){if(!b.config.useTouch&&!document.pointerLockElement){var c=a.target,d=a.pointerId;c&&"setPointerCapture"in c&&c.setPointerCapture(d),b.updateGestureState({_dragTarget:c,_dragPointerId:d})}},b.releasePointerCapture=function(){if(!b.config.useTouch&&!document.pointerLockElement){var a=b.state,c=a._dragTarget,d=a._dragPointerId;if(d&&c&&"releasePointerCapture"in c&&(!("hasPointerCapture"in c)||c.hasPointerCapture(d)))try{c.releasePointerCapture(d)}catch(a){}}},b.preventScroll=function(a){b.state._dragPreventScroll&&a.cancelable&&a.preventDefault()},b.getEventId=function(a){return b.config.useTouch?a.changedTouches[0].identifier:a.pointerId},b.isValidEvent=function(a){return b.state._pointerId===b.getEventId(a)},b.shouldPreventWindowScrollY=b.config.experimental_preventWindowScrollY&&b.controller.supportsTouchEvents,b.setUpWindowScrollDetection=function(a){var c,d,e,f,g,h;au(a),c=b.controller,d=b.stateKey,e=[["touchmove",b.preventScroll],["touchend",b.clean.bind(G(b))],["touchcancel",b.clean.bind(G(b))]],f={passive:!1},g=c.config,h=c.windowListeners,void 0===e&&(e=[]),void 0===f&&(f=g.eventOptions),g.window&&(ar(g.window,h[d],f),aq(g.window,h[d]=e,f)),b.setTimeout(b.startDrag.bind(G(b)),250,a)},b.setUpDelayedDragTrigger=function(a){b.state._dragDelayed=!0,au(a),b.setTimeout(b.startDrag.bind(G(b)),b.config.delay,a)},b.setStartState=function(a){var c=T(a,b.transform);b.updateSharedState(R(a)),b.updateGestureState(E({},aj(G(b),c,a),ai(G(b),a,!0),{_pointerId:b.getEventId(a)})),b.updateGestureState(b.getMovement(c))},b.onDragStart=function(a){al(b.controller,a),b.enabled&&!b.state._active&&(b.setStartState(a),b.setPointerCapture(a),b.shouldPreventWindowScrollY?b.setUpWindowScrollDetection(a):b.config.delay>0?b.setUpDelayedDragTrigger(a):b.startDrag(a,!0))},b.onDragChange=function(a){if(!b.state.canceled&&b.state._active&&b.isValidEvent(a)&&(b.state._lastEventType!==a.type||a.timeStamp!==b.state.timeStamp)){if(document.pointerLockElement){var c,d=a.movementX,e=a.movementY;c=w(b.transform([d,e]),b.state.values)}else c=T(a,b.transform);var f=b.getKinematics(c,a);if(!b.state._dragStarted){if(b.state._dragDelayed)return void b.startDrag(a);if(!b.shouldPreventWindowScrollY)return;if(b.state._dragPreventScroll||!f.axis)return;if("x"===f.axis)b.startDrag(a);else{b.state._active=!1;return}}var g=R(a);b.updateSharedState(g);var h=ai(G(b),a),i=y(f._movement),j=b.state._dragIsTap;j&&i>=3&&(j=!1),b.updateGestureState(E({},h,f,{_dragIsTap:j})),b.fireGestureHandler()}},b.onDragEnd=function(a){if((am(b.controller,a),b.isValidEvent(a))&&(b.clean(),b.state._active)){b.state._active=!1;var c=b.state._dragIsTap,d=b.state.velocities,e=d[0],f=d[1],g=b.state.movement,h=g[0],i=g[1],j=b.state._intentional,k=j[0],l=j[1],m=b.config.swipeVelocity,n=m[0],o=m[1],p=b.config.swipeDistance,q=p[0],r=p[1],s=b.config.swipeDuration,t=E({},ai(G(b),a),b.getMovement(b.state.values)),u=[0,0];t.elapsedTime<s&&(!1!==k&&Math.abs(e)>n&&Math.abs(h)>q&&(u[0]=B(e)),!1!==l&&Math.abs(f)>o&&Math.abs(i)>r&&(u[1]=B(f))),b.updateSharedState({buttons:0}),b.updateGestureState(E({},t,{tap:c,swipe:u})),b.fireGestureHandler(b.config.filterTaps&&!0===c)}},b.clean=function(){var c,d,e,f,g;a.prototype.clean.call(G(b)),b.state._dragStarted=!1,b.releasePointerCapture(),c=b.controller,d=b.stateKey,f=c.config,g=c.windowListeners,void 0===e&&(e=f.eventOptions),f.window&&(ar(f.window,g[d],e),delete g[d])},b.onCancel=function(){b.state.canceled||(b.updateGestureState({canceled:!0,_active:!1}),b.updateSharedState({buttons:0}),setTimeout(function(){return b.fireGestureHandler()},0))},b.onClick=function(a){b.state._dragIsTap||a.stopPropagation()},b}F(b,a);var c=b.prototype;return c.startDrag=function(a,b){void 0===b&&(b=!1),this.state._active&&!this.state._dragStarted&&(b||this.setStartState(a),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},c.addBindings=function(a){this.config.useTouch?(ap(a,"onTouchStart",this.onDragStart),ap(a,"onTouchMove",this.onDragChange),ap(a,"onTouchEnd",this.onDragEnd),ap(a,"onTouchCancel",this.onDragEnd)):(ap(a,"onPointerDown",this.onDragStart),ap(a,"onPointerMove",this.onDragChange),ap(a,"onPointerUp",this.onDragEnd),ap(a,"onPointerCancel",this.onDragEnd)),this.config.filterTaps&&ap(a,this.controller.config.eventOptions.capture?"onClick":"onClickCapture",this.onClick)},b}(at),aw=function(a){function b(){var b;return b=a.apply(this,arguments)||this,b.ingKey="pinching",b.stateKey="pinch",b.onPinchStart=function(a){al(b.controller,a);var c=b.controller.touchIds;if(!(!b.enabled||b.state._active&&b.state._pointerIds.every(function(a){return c.has(a)}))&&!(c.size<2)){var d=Array.from(c).slice(0,2),e=U(a,d,b.transform),f=e.values,g=e.origin;b.updateSharedState(R(a)),b.updateGestureState(E({},aj(G(b),f,a),ai(G(b),a,!0),{_pointerIds:d,cancel:b.onCancel,origin:g})),b.updateGestureState(b.getMovement(f)),b.fireGestureHandler()}},b.onPinchChange=function(a){var c=b.state,d=c.canceled,e=c._active;if(!d&&e&&a.timeStamp!==b.state.timeStamp){var f=R(a);b.updateSharedState(f);try{var g=U(a,b.state._pointerIds,b.transform),h=g.values,i=g.origin,j=b.getKinematics(h,a);b.updateGestureState(E({},ai(G(b),a),j,{origin:i})),b.fireGestureHandler()}catch(c){b.onPinchEnd(a)}}},b.onPinchEnd=function(a){am(b.controller,a);var c=Q(a);b.state._pointerIds.every(function(a){return!c.includes(a)})||(b.clean(),b.state._active&&(b.updateGestureState(E({},ai(G(b),a),b.getMovement(b.state.values),{_active:!1})),b.fireGestureHandler()))},b.onCancel=function(){b.state.canceled||(b.updateGestureState({_active:!1,canceled:!0}),setTimeout(function(){return b.fireGestureHandler()},0))},b.onGestureStart=function(a){if(b.enabled){a.preventDefault();var c=W(a,b.transform);b.updateSharedState(R(a)),b.updateGestureState(E({},aj(G(b),c,a),ai(G(b),a,!0),{origin:[a.clientX,a.clientY],cancel:b.onCancel})),b.updateGestureState(b.getMovement(c)),b.fireGestureHandler()}},b.onGestureChange=function(a){var c=b.state,d=c.canceled,e=c._active;if(!d&&e){a.preventDefault();var f=R(a);b.updateSharedState(f);var g=W(a,b.transform);g[0]=(g[0]-b.state.event.scale)*260+b.state.values[0];var h=b.getKinematics(g,a);b.updateGestureState(E({},ai(G(b),a),h,{origin:[a.clientX,a.clientY]})),b.fireGestureHandler()}},b.onGestureEnd=function(a){b.clean(),b.state._active&&(b.updateGestureState(E({},ai(G(b),a),b.getMovement(b.state.values),{_active:!1,origin:[a.clientX,a.clientY]})),b.fireGestureHandler())},b.wheelShouldRun=function(a){return b.enabled&&a.ctrlKey},b.getWheelValuesFromEvent=function(a){var c=V(a,b.transform)[1],d=b.state.values,e=d[0],f=d[1],g=-(7*c),h=void 0!==f?f:0;return{values:[e+g,h],origin:[a.clientX,a.clientY],delta:[g,h]}},b.onWheel=function(a){b.wheelShouldRun(a)&&(b.setTimeout(b.onWheelEnd),b.state._active?b.onWheelChange(a):b.onWheelStart(a))},b.onWheelStart=function(a){var c=b.getWheelValuesFromEvent(a),d=c.values,e=c.delta,f=c.origin;a.cancelable&&a.preventDefault(),b.updateSharedState(R(a)),b.updateGestureState(E({},aj(G(b),d,a,b.state.values),ai(G(b),a,!0),{offset:d,delta:e,origin:f})),b.updateGestureState(b.getMovement(d)),b.fireGestureHandler()},b.onWheelChange=function(a){a.cancelable&&a.preventDefault(),b.updateSharedState(R(a));var c=b.getWheelValuesFromEvent(a),d=c.values,e=c.origin,f=c.delta;b.updateGestureState(E({},ai(G(b),a),b.getKinematics(d,a),{origin:e,delta:f})),b.fireGestureHandler()},b.onWheelEnd=function(){b.clean(),b.state._active&&(b.state._active=!1,b.updateGestureState(b.getMovement(b.state.values)),b.fireGestureHandler())},b}return F(b,a),b.prototype.addBindings=function(a){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(ap(a,"onGestureStart",this.onGestureStart),ap(a,"onGestureChange",this.onGestureChange),ap(a,"onGestureEnd",this.onGestureEnd)):(ap(a,"onTouchStart",this.onPinchStart),ap(a,"onTouchMove",this.onPinchChange),ap(a,"onTouchEnd",this.onPinchEnd),ap(a,"onTouchCancel",this.onPinchEnd),ap(a,"onWheel",this.onWheel))},b}(function(a){function b(){return a.apply(this,arguments)||this}F(b,a);var c=b.prototype;return c.getInternalMovement=function(a,b){var c=b.values[1],d=a[0],e=a[1],f=void 0===e?c:e,g=f-c,h=b.turns;return Math.abs(g)>270&&(h+=B(g)),x([d,f-360*h],b.initial)},c.getKinematics=function(a,b){var c=this.getMovement(a),d=(a[1]-c._movement[1]-this.state.initial[1])/360,e=b.timeStamp-this.state.timeStamp,f=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)b.indexOf(c=f[d])>=0||(e[c]=a[c]);return e}(A(c.movement,c.delta,e),["distance","velocity"]);return E({turns:d},c,f)},c.mapStateValues=function(a){return{da:a.values,vdva:a.velocities}},b}(af)),ax=function(a){function b(){var b;return b=a.apply(this,arguments)||this,b.ingKey="wheeling",b.stateKey="wheel",b.debounced=!0,b.handleEvent=function(a){if((!a.ctrlKey||!("pinch"in b.controller.handlers))&&b.enabled){b.setTimeout(b.onEnd),b.updateSharedState(R(a));var c=w(V(a,b.transform),b.state.values);if(b.state._active)b.updateGestureState(E({},ai(G(b),a),b.getKinematics(c,a)));else{b.updateGestureState(E({},aj(G(b),c,a,b.state.values),ai(G(b),a,!0)));var d=b.getMovement(c),e=z(d.delta);b.updateGestureState(d),b.updateGestureState(e)}b.fireGestureHandler()}},b.onEnd=function(){if(b.clean(),b.state._active){var a=b.getMovement(b.state.values);b.updateGestureState(a),b.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),b.fireGestureHandler()}},b}return F(b,a),b.prototype.addBindings=function(a){ap(a,"onWheel",this.handleEvent)},b}(at),ay=function(a){function b(){var b;return b=a.apply(this,arguments)||this,b.ingKey="moving",b.stateKey="move",b.debounced=!0,b.onMove=function(a){b.enabled&&(b.setTimeout(b.onMoveEnd),b.state._active?b.onMoveChange(a):b.onMoveStart(a))},b.onMoveStart=function(a){b.updateSharedState(R(a));var c=T(a,b.transform);b.updateGestureState(E({},aj(G(b),c,a),ai(G(b),a,!0))),b.updateGestureState(b.getMovement(c)),b.fireGestureHandler()},b.onMoveChange=function(a){b.updateSharedState(R(a));var c=T(a,b.transform);b.updateGestureState(E({},ai(G(b),a),b.getKinematics(c,a))),b.fireGestureHandler()},b.onMoveEnd=function(){if(b.clean(),b.state._active){var a=b.state.values;b.updateGestureState(b.getMovement(a)),b.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),b.fireGestureHandler()}},b.hoverTransform=function(){return b.controller.config.hover.transform||b.controller.config.transform},b.onPointerEnter=function(a){if(b.controller.state.shared.hovering=!0,b.controller.config.enabled){if(b.controller.config.hover.enabled){var c=T(a,b.hoverTransform()),d=E({},b.controller.state.shared,b.state,ai(G(b),a,!0),{args:b.args,values:c,active:!0,hovering:!0});b.controller.handlers.hover(E({},d,b.mapStateValues(d)))}"move"in b.controller.handlers&&b.onMoveStart(a)}},b.onPointerLeave=function(a){if(b.controller.state.shared.hovering=!1,"move"in b.controller.handlers&&b.onMoveEnd(),b.controller.config.hover.enabled){var c=T(a,b.hoverTransform()),d=E({},b.controller.state.shared,b.state,ai(G(b),a),{args:b.args,values:c,active:!1});b.controller.handlers.hover(E({},d,b.mapStateValues(d)))}},b}return F(b,a),b.prototype.addBindings=function(a){"move"in this.controller.handlers&&ap(a,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(ap(a,"onPointerEnter",this.onPointerEnter),ap(a,"onPointerLeave",this.onPointerLeave))},b}(at),az=function(a){function b(){var b;return b=a.apply(this,arguments)||this,b.ingKey="scrolling",b.stateKey="scroll",b.debounced=!0,b.handleEvent=function(a){if(b.enabled){b.clearTimeout(),b.setTimeout(b.onEnd);var c,d,e,f,g,h,i=(void 0===(c=b.transform)&&(c=S),e=(d=a.currentTarget).scrollX,f=d.scrollY,g=d.scrollLeft,h=d.scrollTop,c([e||g||0,f||h||0]));if(b.updateSharedState(R(a)),b.state._active)b.updateGestureState(E({},ai(G(b),a),b.getKinematics(i,a)));else{b.updateGestureState(E({},aj(G(b),i,a,b.state.values),ai(G(b),a,!0)));var j=b.getMovement(i),k=z(j.delta);b.updateGestureState(j),b.updateGestureState(k)}b.fireGestureHandler()}},b.onEnd=function(){b.clean(),b.state._active&&(b.updateGestureState(E({},b.getMovement(b.state.values),{_active:!1,velocities:[0,0],velocity:0})),b.fireGestureHandler())},b}return F(b,a),b.prototype.addBindings=function(a){ap(a,"onScroll",this.handleEvent)},b}(at),aA=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function aB(a,b){void 0===b&&(b={});var c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=function(a){var b={},c={},d=new Set;for(var e in a)aA.test(e)?(d.add(RegExp.lastMatch),c[e]=a[e]):b[e]=a[e];return[c,b,d]}(a),y=x[0],z=x[1],A=x[2];ad.set("drag",av),ad.set("hover",ay),ad.set("move",ay),ad.set("pinch",aw),ad.set("scroll",az),ad.set("wheel",ax);var B=(void 0===(e=b)&&(e={}),void 0===(f=A)&&(f=new Set),i=(g=e).drag,j=g.wheel,k=g.move,l=g.scroll,m=g.pinch,n=g.hover,o=g.eventOptions,p=g.window,q=g.transform,r=O({domTarget:g.domTarget,eventOptions:o,transform:q,window:p,enabled:g.enabled},Z),f.has("onDrag")&&(void 0===(s=i)&&(s={}),r.drag=O(s,_)),f.has("onWheel")&&(r.wheel=aa(j)),f.has("onScroll")&&(r.scroll=aa(l)),f.has("onMove")&&(r.move=aa(k)),f.has("onPinch")&&(void 0===(t=m)&&(t={}),r.pinch=O(t,$)),f.has("onHover")&&(r.hover=E({enabled:!0},n)),r),C={};return A.has("onDrag")&&(C.drag=aC(y,"onDrag")),A.has("onWheel")&&(C.wheel=aC(y,"onWheel")),A.has("onScroll")&&(C.scroll=aC(y,"onScroll")),A.has("onMove")&&(C.move=aC(y,"onMove")),A.has("onPinch")&&(C.pinch=aC(y,"onPinch")),A.has("onHover")&&(C.hover=y.onHover),void 0===(u=z)&&(u={}),c=C,d=new Set,c.drag&&d.add(ad.get("drag")),c.wheel&&d.add(ad.get("wheel")),c.scroll&&d.add(ad.get("scroll")),c.move&&d.add(ad.get("move")),c.pinch&&d.add(ad.get("pinch")),c.hover&&d.add(ad.get("hover")),v=d,((w=h.default.useMemo(function(){return new ak(v)},[])).config=B,w.handlers=C,w.nativeRefs=u,h.default.useEffect(w.effect,[]),w.config.domTarget)?as:w.bind}function aC(a,b){var c=b+"Start",d=b+"End";return function(e){var f=void 0;return e.first&&c in a&&a[c](e),b in a&&(f=a[b](e)),e.last&&d in a&&a[d](e),f}}var aD=a.i(24042),aE=a.i(2293),aE=aE,aF=aV(),aG=a=>aR(a,aF),aH=aV();aG.write=a=>aR(a,aH);var aI=aV();aG.onStart=a=>aR(a,aI);var aJ=aV();aG.onFrame=a=>aR(a,aJ);var aK=aV();aG.onFinish=a=>aR(a,aK);var aL=[];aG.setTimeout=(a,b)=>{let c=aG.now()+b,d=()=>{let a=aL.findIndex(a=>a.cancel==d);~a&&aL.splice(a,1),aP-=!!~a},e={time:c,handler:a,cancel:d};return aL.splice(aM(c),0,e),aP+=1,aS(),e};var aM=a=>~(~aL.findIndex(b=>b.time>a)||~aL.length);aG.cancel=a=>{aI.delete(a),aJ.delete(a),aK.delete(a),aF.delete(a),aH.delete(a)},aG.sync=a=>{aQ=!0,aG.batchedUpdates(a),aQ=!1},aG.throttle=a=>{let b;function c(){try{a(...b)}finally{b=null}}function d(...a){b=a,aG.onStart(c)}return d.handler=a,d.cancel=()=>{aI.delete(c),b=null},d};var aN=()=>{};aG.use=a=>aN=a,aG.now="undefined"!=typeof performance?()=>performance.now():Date.now,aG.batchedUpdates=a=>a(),aG.catch=console.error,aG.frameLoop="always",aG.advance=()=>{"demand"!==aG.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):aU()};var aO=-1,aP=0,aQ=!1;function aR(a,b){aQ?(b.delete(a),a(0)):(b.add(a),aS())}function aS(){aO<0&&(aO=0,"demand"!==aG.frameLoop&&aN(aT))}function aT(){~aO&&(aN(aT),aG.batchedUpdates(aU))}function aU(){let a=aO,b=aM(aO=aG.now());(b&&(aW(aL.splice(0,b),a=>a.handler()),aP-=b),aP)?(aI.flush(),aF.flush(a?Math.min(64,aO-a):16.667),aJ.flush(),aH.flush(),aK.flush()):aO=-1}function aV(){let a=new Set,b=a;return{add(c){aP+=+!(b!=a||a.has(c)),a.add(c)},delete:c=>(aP-=b==a&&a.has(c)?1:0,a.delete(c)),flush(c){b.size&&(a=new Set,aP-=b.size,aW(b,b=>b(c)&&a.add(b)),aP+=a.size,b=a)}}}function aW(a,b){a.forEach(a=>{try{b(a)}catch(a){aG.catch(a)}})}var aX=Object.defineProperty,aY={},aZ={assign:()=>a9,colors:()=>a6,createStringInterpolator:()=>b,skipAnimation:()=>a7,to:()=>c,willAdvance:()=>a8};for(var a$ in aZ)aX(aY,a$,{get:aZ[a$],enumerable:!0});function a_(){}var a0={arr:Array.isArray,obj:a=>!!a&&"Object"===a.constructor.name,fun:a=>"function"==typeof a,str:a=>"string"==typeof a,num:a=>"number"==typeof a,und:a=>void 0===a};function a1(a,b){if(a0.arr(a)){if(!a0.arr(b)||a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return a===b}function a2(a,b,c){if(a0.arr(a)){for(let d=0;d<a.length;d++)b.call(c,a[d],`${d}`);return}for(let d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d)}var a3=a=>a0.und(a)?[]:a0.arr(a)?a:[a];function a4(a,b){if(a.size){let c=Array.from(a);a.clear(),c.forEach(b)}}var a5=(a,...b)=>a4(a,a=>a(...b)),a6=null,a7=!1,a8=a_,a9=a=>{a.to&&(c=a.to),a.now&&(aG.now=a.now),void 0!==a.colors&&(a6=a.colors),null!=a.skipAnimation&&(a7=a.skipAnimation),a.createStringInterpolator&&(b=a.createStringInterpolator),a.requestAnimationFrame&&aG.use(a.requestAnimationFrame),a.batchedUpdates&&(aG.batchedUpdates=a.batchedUpdates),a.willAdvance&&(a8=a.willAdvance),a.frameLoop&&(aG.frameLoop=a.frameLoop)},ba=new Set,bb=[],bc=[],bd=0,be={get idle(){return!ba.size&&!bb.length},start(a){bd>a.priority?(ba.add(a),aG.onStart(bf)):(bg(a),aG(bi))},advance:bi,sort(a){if(bd)aG.onFrame(()=>be.sort(a));else{let b=bb.indexOf(a);~b&&(bb.splice(b,1),bh(a))}},clear(){bb=[],ba.clear()}};function bf(){ba.forEach(bg),ba.clear(),aG(bi)}function bg(a){bb.includes(a)||bh(a)}function bh(a){var b,c;let d;bb.splice((b=bb,c=b=>b.priority>a.priority,(d=b.findIndex(c))<0?b.length:d),0,a)}function bi(a){let b=bc;for(let c=0;c<bb.length;c++){let d=bb[c];bd=d.priority,!d.idle&&(a8(d),d.advance(a),d.idle||b.push(d))}return bd=0,(bc=bb).length=0,(bb=b).length>0}var bj="[-+]?\\d*\\.?\\d+",bk=bj+"%";function bl(...a){return"\\(\\s*("+a.join(")\\s*,\\s*(")+")\\s*\\)"}var bm=RegExp("rgb"+bl(bj,bj,bj)),bn=RegExp("rgba"+bl(bj,bj,bj,bj)),bo=RegExp("hsl"+bl(bj,bk,bk)),bp=RegExp("hsla"+bl(bj,bk,bk,bj)),bq=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,br=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,bs=/^#([0-9a-fA-F]{6})$/,bt=/^#([0-9a-fA-F]{8})$/;function bu(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function bv(a,b,c){let d=c<.5?c*(1+b):c+b-c*b,e=2*c-d;return Math.round(255*bu(e,d,a+1/3))<<24|Math.round(255*bu(e,d,a))<<16|Math.round(255*bu(e,d,a-1/3))<<8}function bw(a){let b=parseInt(a,10);return b<0?0:b>255?255:b}function bx(a){return(parseFloat(a)%360+360)%360/360}function by(a){let b=parseFloat(a);return b<0?0:b>1?255:Math.round(255*b)}function bz(a){let b=parseFloat(a);return b<0?0:b>100?1:b/100}function bA(a){let b,c="number"==typeof a?a>>>0===a&&a>=0&&a<=0xffffffff?a:null:(b=bs.exec(a))?parseInt(b[1]+"ff",16)>>>0:a6&&void 0!==a6[a]?a6[a]:(b=bm.exec(a))?(bw(b[1])<<24|bw(b[2])<<16|bw(b[3])<<8|255)>>>0:(b=bn.exec(a))?(bw(b[1])<<24|bw(b[2])<<16|bw(b[3])<<8|by(b[4]))>>>0:(b=bq.exec(a))?parseInt(b[1]+b[1]+b[2]+b[2]+b[3]+b[3]+"ff",16)>>>0:(b=bt.exec(a))?parseInt(b[1],16)>>>0:(b=br.exec(a))?parseInt(b[1]+b[1]+b[2]+b[2]+b[3]+b[3]+b[4]+b[4],16)>>>0:(b=bo.exec(a))?(255|bv(bx(b[1]),bz(b[2]),bz(b[3])))>>>0:(b=bp.exec(a))?(bv(bx(b[1]),bz(b[2]),bz(b[3]))|by(b[4]))>>>0:null;if(null===c)return a;let d=(0xff000000&(c=c||0))>>>24,e=(0xff0000&c)>>>16,f=(65280&c)>>>8,g=(255&c)/255;return`rgba(${d}, ${e}, ${f}, ${g})`}var bB=(a,c,d)=>{if(a0.fun(a))return a;if(a0.arr(a))return bB({range:a,output:c,extrapolate:d});if(a0.str(a.output[0]))return b(a);let e=a.output,f=a.range||[0,1],g=a.extrapolateLeft||a.extrapolate||"extend",h=a.extrapolateRight||a.extrapolate||"extend",i=a.easing||(a=>a);return b=>{let c=function(a,b){for(var c=1;c<b.length-1&&!(b[c]>=a);++c);return c-1}(b,f);return function(a,b,c,d,e,f,g,h,i){let j=i?i(a):a;if(j<b)if("identity"===g)return j;else"clamp"===g&&(j=b);if(j>c)if("identity"===h)return j;else"clamp"===h&&(j=c);return d===e?d:b===c?a<=b?d:e:(b===-1/0?j=-j:c===1/0?j-=b:j=(j-b)/(c-b),j=f(j),d===-1/0?j=-j:e===1/0?j+=d:j=j*(e-d)+d,j)}(b,f[c],f[c+1],e[c],e[c+1],i,g,h,a.map)}},bC=Symbol.for("FluidValue.get"),bD=Symbol.for("FluidValue.observers"),bE=a=>!!(a&&a[bC]),bF=a=>a&&a[bC]?a[bC]():a,bG=a=>a[bD]||null;function bH(a,b){let c=a[bD];c&&c.forEach(a=>{a.eventObserved?a.eventObserved(b):a(b)})}var bI=class{constructor(a){if(!a&&!(a=this.get))throw Error("Unknown getter");bJ(this,a)}},bJ=(a,b)=>bM(a,bC,b);function bK(a,b){if(a[bC]){let c=a[bD];c||bM(a,bD,c=new Set),!c.has(b)&&(c.add(b),a.observerAdded&&a.observerAdded(c.size,b))}return b}function bL(a,b){let c=a[bD];if(c&&c.has(b)){let d=c.size-1;d?c.delete(b):a[bD]=null,a.observerRemoved&&a.observerRemoved(d,b)}}var bM=(a,b,c)=>Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0}),bN=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bO=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,bP=RegExp(`(${bN.source})(%|[a-z]+)`,"i"),bQ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,bR=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,bS=a=>{let[b,c]=bT(a);return a},bT=a=>{let b=bR.exec(a);if(!b)return[,];let[,c,d]=b;return[c,d]},bU=(a,b,c,d,e)=>`rgba(${Math.round(b)}, ${Math.round(c)}, ${Math.round(d)}, ${e})`,bV=a=>{d||(d=a6?RegExp(`(${Object.keys(a6).join("|")})(?!\\w)`,"g"):/^\b$/);let b=a.output.map(a=>bF(a).replace(bR,bS).replace(bO,bA).replace(d,bA)),c=b.map(a=>a.match(bN).map(Number)),e=c[0].map((a,b)=>c.map(a=>{if(!(b in a))throw Error('The arity of each "output" value must be equal');return a[b]})).map(b=>bB({...a,output:b}));return a=>{let c=!bP.test(b[0])&&b.find(a=>bP.test(a))?.replace(bN,""),d=0;return b[0].replace(bN,()=>`${e[d++](a)}${c||""}`).replace(bQ,bU)}},bW="react-spring: ",bX=a=>{let b=!1;if("function"!=typeof a)throw TypeError(`${bW}once requires a function parameter`);return(...c)=>{b||(a(...c),b=!0)}},bY=bX(console.warn);function bZ(){bY(`${bW}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var b$=bX(console.warn);function b_(a){return a0.str(a)&&("#"==a[0]||/\d/.test(a)||a in(a6||{}))}var b0=new WeakMap,b1=a=>a.forEach(({target:a,contentRect:b})=>b0.get(a)?.forEach(a=>a(b))),b2=new Set,b3=(a,{container:b=document.documentElement}={})=>{let c;if(b===document.documentElement){let b;return b2.add(a),f||(b=()=>{b2.forEach(a=>a({width:window.innerWidth,height:window.innerHeight}))},window.addEventListener("resize",b),f=()=>{window.removeEventListener("resize",b)}),()=>{b2.delete(a),!b2.size&&f&&(f(),f=void 0)}}return e||"undefined"==typeof ResizeObserver||(e=new ResizeObserver(b1)),(c=b0.get(b))||(c=new Set,b0.set(b,c)),c.add(a),e&&e.observe(b),()=>{let c=b0.get(b);c&&(c.delete(a),!c.size&&e&&e.unobserve(b))}},b4={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},b5=class{constructor(a,b){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=a=>{let b,c,d=this.info[a],{length:e,position:f}=b4[a];d.current=this.container[`scroll${f}`],d.scrollLength=this.container[`scroll${e}`]-this.container[`client${e}`],b=d.scrollLength,c=d.current,d.progress=b-0==0?1:(c-0)/(b-0)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=a,this.container=b,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},b6=new WeakMap,b7=new WeakMap,b8=new WeakMap,b9=a=>a===document.documentElement?window:a,ca=h.useEffect;function cb(){let a,b=(0,h.useState)()[1],c=(a=(0,h.useRef)(!1),ca(()=>(a.current=!0,()=>{a.current=!1}),[]),a);return()=>{c.current&&b(Math.random())}}var cc=a=>(0,h.useEffect)(a,cd),cd=[];function ce(a){let b=(0,h.useRef)(void 0);return(0,h.useEffect)(()=>{b.current=a}),b.current}var cf=Symbol.for("Animated:node"),cg=a=>a&&a[cf],ch=(a,b)=>Object.defineProperty(a,cf,{value:b,writable:!0,configurable:!0}),ci=a=>a&&a[cf]&&a[cf].getPayload(),cj=class{constructor(){ch(this,this)}getPayload(){return this.payload||[]}},ck=class a extends cj{constructor(a){super(),this._value=a,this.done=!0,this.durationProgress=0,a0.num(this._value)&&(this.lastPosition=this._value)}static create(b){return new a(b)}getPayload(){return[this]}getValue(){return this._value}setValue(a,b){return a0.num(a)&&(this.lastPosition=a,b&&(a=Math.round(a/b)*b,this.done&&(this.lastPosition=a))),this._value!==a&&(this._value=a,!0)}reset(){let{done:a}=this;this.done=!1,a0.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,a&&(this.lastVelocity=null),this.v0=null)}},cl=class a extends ck{constructor(a){super(0),this._string=null,this._toString=bB({output:[a,a]})}static create(b){return new a(b)}getValue(){let a=this._string;return null==a?this._string=this._toString(this._value):a}setValue(a){if(a0.str(a)){if(a==this._string)return!1;this._string=a,this._value=1}else{if(!super.setValue(a))return!1;this._string=null}return!0}reset(a){a&&(this._toString=bB({output:[this.getValue(),a]})),this._value=0,super.reset()}},cm={dependencies:null},cn=class extends cj{constructor(a){super(),this.source=a,this.setValue(a)}getValue(a){let b={};return a2(this.source,(c,d)=>{c&&c[cf]===c?b[d]=c.getValue(a):bE(c)?b[d]=bF(c):a||(b[d]=c)}),b}setValue(a){this.source=a,this.payload=this._makePayload(a)}reset(){let a;this.payload&&(a=this.payload,a.forEach(a=>a.reset()))}_makePayload(a){if(a){let b=new Set;return a2(a,this._addToPayload,b),Array.from(b)}}_addToPayload(a){let b;cm.dependencies&&bE(a)&&cm.dependencies.add(a);let c=ci(a);c&&(b=a=>this.add(a),c.forEach(b))}},co=class a extends cn{constructor(a){super(a)}static create(b){return new a(b)}getValue(){return this.source.map(a=>a.getValue())}setValue(a){let b=this.getPayload();return a.length==b.length?b.map((b,c)=>b.setValue(a[c])).some(Boolean):(super.setValue(a.map(cp)),!0)}};function cp(a){return(b_(a)?cl:ck).create(a)}function cq(a){let b=cg(a);return b?b.constructor:a0.arr(a)?co:b_(a)?cl:ck}var cr=(a,b)=>{let c=!a0.fun(a)||a.prototype&&a.prototype.isReactComponent;return(0,h.forwardRef)((d,e)=>{var f,g;let i,j=(0,h.useRef)(null),k=c&&(0,h.useCallback)(a=>{var b,c;b=e,c=a,b&&(a0.fun(b)?b(c):b.current=c),j.current=c},[e]),[l,m]=(f=d,g=b,cm.dependencies=i=new Set,f.style&&(f={...f,style:g.createAnimatedStyle(f.style)}),f=new cn(f),cm.dependencies=null,[f,i]),n=cb(),o=()=>{let a=j.current;c&&!a||!1===(!!a&&b.applyAnimatedValues(a,l.getValue(!0)))&&n()},p=new cs(o,m),q=(0,h.useRef)(void 0);ca(()=>{let a;return q.current=p,a=a=>bK(a,p),m.forEach(a),()=>{if(q.current){let a;a=q.current.deps,a.forEach(a=>bL(a,q.current)),aG.cancel(q.current.update)}}}),(0,h.useEffect)(o,[]),cc(()=>()=>{let a,b=q.current;a=b.deps,a.forEach(a=>bL(a,b))});let r=b.getComponentProps(l.getValue());return h.createElement(a,{...r,ref:k})})},cs=class{constructor(a,b){this.update=a,this.deps=b}eventObserved(a){"change"==a.type&&aG.write(this.update)}},ct=Symbol.for("AnimatedComponent"),cu=a=>a0.str(a)?a:a&&a0.str(a.displayName)?a.displayName:a0.fun(a)&&a.name||null,cv=class{};function cw(a,...b){return a0.fun(a)?a(...b):a}a.s(["Any",()=>cv],87771);var cx=(a,b)=>!0===a||!!(b&&a&&(a0.fun(a)?a(b):a3(a).includes(b))),cy=(a,b)=>a0.obj(a)?b&&a[b]:a,cz=(a,b)=>!0===a.default?a[b]:a.default?a.default[b]:void 0,cA=a=>a,cB=(a,b=cA)=>{let c=cC;a.default&&!0!==a.default&&(c=Object.keys(a=a.default));let d={};for(let e of c){let c=b(a[e],e);a0.und(c)||(d[e]=c)}return d},cC=["config","onProps","onStart","onChange","onPause","onResume","onRest"],cD={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function cE(a){let b=function(a){let b={},c=0;if(a2(a,(a,d)=>{!cD[d]&&(b[d]=a,c++)}),c)return b}(a);if(b){let c={to:b};return a2(a,(a,d)=>d in b||(c[d]=a)),c}return{...a}}function cF(a){return a=bF(a),a0.arr(a)?a.map(cF):b_(a)?aY.createStringInterpolator({range:[0,1],output:[a,a]})(1):a}function cG(a){for(let b in a)return!0;return!1}function cH(a){return a0.fun(a)||a0.arr(a)&&a0.obj(a[0])}function cI(a,b){a.ref?.delete(a),b?.delete(a)}function cJ(a,b){b&&a.ref!==b&&(a.ref?.delete(a),b.add(a),a.ref=b)}function cK(a,b,c=1e3){ca(()=>{if(b){let d=0;a.forEach((a,e)=>{let f=a.current;if(f.length){let g=c*b[e];isNaN(g)?g=d:d=g,f.forEach(a=>{let b;b=a.queue,b.forEach(a=>{let b=a.delay;a.delay=a=>g+cw(b||0,a)})}),a.start()}})}else{let b=Promise.resolve();a.forEach(a=>{let c=a.current;if(c.length){let d=c.map(a=>{let b=a.queue;return a.queue=[],b});b=b.then(()=>{let b;return b=(a,b)=>{let c,e;return c=d[b]||[],e=b=>a.queue.push(b),c.forEach(e)},c.forEach(b),Promise.all(a.start())})}})}})}var cL={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},cM={...cL.default,mass:1,damping:1,easing:a=>a,clamp:!1},cN=class{constructor(){this.velocity=0,Object.assign(this,cM)}};function cO(a,b){if(a0.und(b.decay)){let c=!a0.und(b.tension)||!a0.und(b.friction);!c&&a0.und(b.frequency)&&a0.und(b.damping)&&a0.und(b.mass)||(a.duration=void 0,a.decay=void 0),c&&(a.frequency=void 0)}else a.duration=void 0}var cP=[],cQ=class{constructor(){this.changed=!1,this.values=cP,this.toValues=null,this.fromValues=cP,this.config=new cN,this.immediate=!1}};function cR(a,{key:b,props:c,defaultProps:d,state:e,actions:f}){return new Promise((g,h)=>{let i,j,k=cx(c.cancel??d?.cancel,b);if(k)n();else{a0.und(c.pause)||(e.paused=cx(c.pause,b));let a=d?.pause;!0!==a&&(a=e.paused||cx(a,b)),i=cw(c.delay||0,b),a?(e.resumeQueue.add(m),f.pause()):(f.resume(),m())}function l(){e.resumeQueue.add(m),e.timeouts.delete(j),j.cancel(),i=j.time-aG.now()}function m(){i>0&&!aY.skipAnimation?(e.delayed=!0,j=aG.setTimeout(n,i),e.pauseQueue.add(l),e.timeouts.add(j)):n()}function n(){e.delayed&&(e.delayed=!1),e.pauseQueue.delete(l),e.timeouts.delete(j),a<=(e.cancelId||0)&&(k=!0);try{f.start({...c,callId:a,cancel:k},g)}catch(a){h(a)}}})}var cS=(a,b)=>1==b.length?b[0]:b.some(a=>a.cancelled)?cV(a.get()):b.every(a=>a.noop)?cT(a.get()):cU(a.get(),b.every(a=>a.finished)),cT=a=>({value:a,noop:!0,finished:!0,cancelled:!1}),cU=(a,b,c=!1)=>({value:a,finished:b,cancelled:c}),cV=a=>({value:a,cancelled:!0,finished:!1});function cW(a,b,c,d){let{callId:e,parentId:f,onRest:g}=b,{asyncTo:h,promise:i}=c;return f||a!==h||b.reset?c.promise=(async()=>{let j,k,l;c.asyncId=e,c.asyncTo=a;let m=cB(b,(a,b)=>"onRest"===b?void 0:a),n=new Promise((a,b)=>(j=a,k=b)),o=a=>{let b=e<=(c.cancelId||0)&&cV(d)||e!==c.asyncId&&cU(d,!1);if(b)throw a.result=b,k(a),a},p=(a,b)=>{let f=new cY,g=new cZ;return(async()=>{if(aY.skipAnimation)throw cX(c),g.result=cU(d,!1),k(g),g;o(f);let h=a0.obj(a)?{...a}:{...b,to:a};h.parentId=e,a2(m,(a,b)=>{a0.und(h[b])&&(h[b]=a)});let i=await d.start(h);return o(f),c.paused&&await new Promise(a=>{c.resumeQueue.add(a)}),i})()};if(aY.skipAnimation)return cX(c),cU(d,!1);try{let b;b=a0.arr(a)?(async a=>{for(let b of a)await p(b)})(a):Promise.resolve(a(p,d.stop.bind(d))),await Promise.all([b.then(j),n]),l=cU(d.get(),!0,!1)}catch(a){if(a instanceof cY)l=a.result;else if(a instanceof cZ)l=a.result;else throw a}finally{e==c.asyncId&&(c.asyncId=f,c.asyncTo=f?h:void 0,c.promise=f?i:void 0)}return a0.fun(g)&&aG.batchedUpdates(()=>{g(l,d,d.item)}),l})():i}function cX(a,b){a4(a.timeouts,a=>a.cancel()),a.pauseQueue.clear(),a.resumeQueue.clear(),a.asyncId=a.asyncTo=a.promise=void 0,b&&(a.cancelId=b)}var cY=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},cZ=class extends Error{constructor(){super("SkipAnimationSignal")}},c$=1,c_=class extends bI{constructor(){super(...arguments),this.id=c$++,this._priority=0}get priority(){return this._priority}set priority(a){this._priority!=a&&(this._priority=a,this._onPriorityChange(a))}get(){let a=cg(this);return a&&a.getValue()}to(...a){return aY.to(this,a)}interpolate(...a){return bZ(),aY.to(this,a)}toJSON(){return this.get()}observerAdded(a){1==a&&this._attach()}observerRemoved(a){0==a&&this._detach()}_attach(){}_detach(){}_onChange(a,b=!1){bH(this,{type:"change",parent:this,value:a,idle:b})}_onPriorityChange(a){this.idle||be.sort(this),bH(this,{type:"priority",parent:this,priority:a})}},c0=Symbol.for("SpringPhase"),c1=a=>(1&a[c0])>0,c2=a=>(2&a[c0])>0,c3=a=>(4&a[c0])>0,c4=(a,b)=>b?a[c0]|=3:a[c0]&=-3,c5=(a,b)=>b?a[c0]|=4:a[c0]&=-5,c6=class extends c_{constructor(a,b){if(super(),this.animation=new cQ,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!a0.und(a)||!a0.und(b)){const c=a0.obj(a)?{...a}:{...b,from:a};a0.und(c.default)&&(c.default=!0),this.start(c)}}get idle(){return!(c2(this)||this._state.asyncTo)||c3(this)}get goal(){return bF(this.animation.to)}get velocity(){let a=cg(this);return a instanceof ck?a.lastVelocity||0:a.getPayload().map(a=>a.lastVelocity||0)}get hasAnimated(){return c1(this)}get isAnimating(){return c2(this)}get isPaused(){return c3(this)}get isDelayed(){return this._state.delayed}advance(a){let b=!0,c=!1,d=this.animation,{toValues:e}=d,{config:f}=d,g=ci(d.to);!g&&bE(d.to)&&(e=a3(bF(d.to))),d.values.forEach((h,i)=>{if(h.done)return;let j=h.constructor==cl?1:g?g[i].lastPosition:e[i],k=d.immediate,l=j;if(!k){let b;if(l=h.lastPosition,f.tension<=0){h.done=!0;return}let c=h.elapsedTime+=a,e=d.fromValues[i],g=null!=h.v0?h.v0:h.v0=a0.arr(f.velocity)?f.velocity[i]:f.velocity,m=f.precision||(e==j?.005:Math.min(1,.001*Math.abs(j-e)));if(a0.und(f.duration))if(f.decay){let a=!0===f.decay?.998:f.decay,d=Math.exp(-(1-a)*c);l=e+g/(1-a)*(1-d),k=Math.abs(h.lastPosition-l)<=m,b=g*d}else{b=null==h.lastVelocity?g:h.lastVelocity;let c=f.restVelocity||m/10,d=f.clamp?0:f.bounce,i=!a0.und(d),n=e==j?h.v0>0:e<j,o=Math.ceil(a/1);for(let a=0;a<o&&!(!(Math.abs(b)>c)&&(k=Math.abs(j-l)<=m));++a){i&&(l==j||l>j==n)&&(b=-b*d,l=j);let a=(-(1e-6*f.tension)*(l-j)+-(.001*f.friction)*b)/f.mass;b+=+a,l+=+b}}else{let d=1;f.duration>0&&(this._memoizedDuration!==f.duration&&(this._memoizedDuration=f.duration,h.durationProgress>0&&(h.elapsedTime=f.duration*h.durationProgress,c=h.elapsedTime+=a)),h.durationProgress=d=(d=(f.progress||0)+c/this._memoizedDuration)>1?1:d<0?0:d),b=((l=e+f.easing(d)*(j-e))-h.lastPosition)/a,k=1==d}h.lastVelocity=b,Number.isNaN(l)&&(console.warn("Got NaN while animating:",this),k=!0)}g&&!g[i].done&&(k=!1),k?h.done=!0:b=!1,h.setValue(l,f.round)&&(c=!0)});let h=cg(this),i=h.getValue();if(b){let a=bF(d.to);(i!==a||c)&&!f.decay?(h.setValue(a),this._onChange(a)):c&&f.decay&&this._onChange(i),this._stop()}else c&&this._onChange(i)}set(a){return aG.batchedUpdates(()=>{this._stop(),this._focus(a),this._set(a)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(c2(this)){let{to:a,config:b}=this.animation;aG.batchedUpdates(()=>{this._onStart(),b.decay||this._set(a,!1),this._stop()})}return this}update(a){return(this.queue||(this.queue=[])).push(a),this}start(a,b){let c;return a0.und(a)?(c=this.queue||[],this.queue=[]):c=[a0.obj(a)?a:{...b,to:a}],Promise.all(c.map(a=>this._update(a))).then(a=>cS(this,a))}stop(a){let{to:b}=this.animation;return this._focus(this.get()),cX(this._state,a&&this._lastCallId),aG.batchedUpdates(()=>this._stop(b,a)),this}reset(){this._update({reset:!0})}eventObserved(a){"change"==a.type?this._start():"priority"==a.type&&(this.priority=a.priority+1)}_prepareNode(a){let b=this.key||"",{to:c,from:d}=a;(null==(c=a0.obj(c)?c[b]:c)||cH(c))&&(c=void 0),null==(d=a0.obj(d)?d[b]:d)&&(d=void 0);let e={to:c,from:d};return!c1(this)&&(a.reverse&&([c,d]=[d,c]),d=bF(d),a0.und(d)?cg(this)||this._set(c):this._set(d)),e}_update({...a},b){let{key:c,defaultProps:d}=this;a.default&&Object.assign(d,cB(a,(a,b)=>/^on/.test(b)?cy(a,c):a)),dc(this,a,"onProps"),dd(this,"onProps",a,this);let e=this._prepareNode(a);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let f=this._state;return cR(++this._lastCallId,{key:c,props:a,defaultProps:d,state:f,actions:{pause:()=>{c3(this)||(c5(this,!0),a5(f.pauseQueue),dd(this,"onPause",cU(this,c7(this,this.animation.to)),this))},resume:()=>{c3(this)&&(c5(this,!1),c2(this)&&this._resume(),a5(f.resumeQueue),dd(this,"onResume",cU(this,c7(this,this.animation.to)),this))},start:this._merge.bind(this,e)}}).then(c=>{if(a.loop&&c.finished&&!(b&&c.noop)){let b=c8(a);if(b)return this._update(b,!0)}return c})}_merge(a,b,c){if(b.cancel)return this.stop(!0),c(cV(this));let d=!a0.und(a.to),e=!a0.und(a.from);if(d||e)if(!(b.callId>this._lastToId))return c(cV(this));else this._lastToId=b.callId;let{key:f,defaultProps:g,animation:h}=this,{to:i,from:j}=h,{to:k=i,from:l=j}=a;e&&!d&&(!b.default||a0.und(k))&&(k=l),b.reverse&&([k,l]=[l,k]);let m=!a1(l,j);m&&(h.from=l),l=bF(l);let n=!a1(k,i);n&&this._focus(k);let o=cH(b.to),{config:p}=h,{decay:q,velocity:r}=p;(d||e)&&(p.velocity=0),b.config&&!o&&function(a,b,c){for(let d in c&&(cO(c={...c},b),b={...c,...b}),cO(a,b),Object.assign(a,b),cM)null==a[d]&&(a[d]=cM[d]);let{frequency:d,damping:e}=a,{mass:f}=a;a0.und(d)||(d<.01&&(d=.01),e<0&&(e=0),a.tension=Math.pow(2*Math.PI/d,2)*f,a.friction=4*Math.PI*e*f/d)}(p,cw(b.config,f),b.config!==g.config?cw(g.config,f):void 0);let s=cg(this);if(!s||a0.und(k))return c(cU(this,!0));let t=a0.und(b.reset)?e&&!b.default:!a0.und(l)&&cx(b.reset,f),u=t?l:this.get(),v=cF(k),w=a0.num(v)||a0.arr(v)||b_(v),x=!o&&(!w||cx(g.immediate||b.immediate,f));if(n){let a=cq(k);if(a!==s.constructor)if(x)s=this._set(v);else throw Error(`Cannot animate between ${s.constructor.name} and ${a.name}, as the "to" prop suggests`)}let y=s.constructor,z=bE(k),A=!1;if(!z){let a=t||!c1(this)&&m;(n||a)&&(z=!(A=a1(cF(u),v))),(a1(h.immediate,x)||x)&&a1(p.decay,q)&&a1(p.velocity,r)||(z=!0)}if(A&&c2(this)&&(h.changed&&!t?z=!0:z||this._stop(i)),!o&&((z||bE(i))&&(h.values=s.getPayload(),h.toValues=bE(k)?null:y==cl?[1]:a3(v)),h.immediate!=x&&(h.immediate=x,x||t||this._set(i)),z)){let a,{onRest:d}=h;a=a=>dc(this,b,a),db.forEach(a);let e=cU(this,c7(this,i));a5(this._pendingCalls,e),this._pendingCalls.add(c),h.changed&&aG.batchedUpdates(()=>{h.changed=!t,d?.(e,this),t?cw(g.onRest,e):h.onStart?.(e,this)})}t&&this._set(u),o?c(cW(b.to,b,this._state,this)):z?this._start():c2(this)&&!n?this._pendingCalls.add(c):c(cT(u))}_focus(a){let b=this.animation;a!==b.to&&(bG(this)&&this._detach(),b.to=a,bG(this)&&this._attach())}_attach(){let a=0,{to:b}=this.animation;bE(b)&&(bK(b,this),b instanceof c_&&(a=b.priority+1)),this.priority=a}_detach(){let{to:a}=this.animation;bE(a)&&bL(a,this)}_set(a,b=!0){let c=bF(a);if(!a0.und(c)){let a=cg(this);if(!a||!a1(c,a.getValue())){let d=cq(c);a&&a.constructor==d?a.setValue(c):ch(this,d.create(c)),a&&aG.batchedUpdates(()=>{this._onChange(c,b)})}}return cg(this)}_onStart(){let a=this.animation;a.changed||(a.changed=!0,dd(this,"onStart",cU(this,c7(this,a.to)),this))}_onChange(a,b){b||(this._onStart(),cw(this.animation.onChange,a,this)),cw(this.defaultProps.onChange,a,this),super._onChange(a,b)}_start(){let a=this.animation;cg(this).reset(bF(a.to)),a.immediate||(a.fromValues=a.values.map(a=>a.lastPosition)),!c2(this)&&(c4(this,!0),c3(this)||this._resume())}_resume(){aY.skipAnimation?this.finish():be.start(this)}_stop(a,b){if(c2(this)){let c;c4(this,!1);let d=this.animation;c=d.values,c.forEach(a=>{a.done=!0}),d.toValues&&(d.onChange=d.onPause=d.onResume=void 0),bH(this,{type:"idle",parent:this});let e=b?cV(this.get()):cU(this.get(),c7(this,a??d.to));a5(this._pendingCalls,e),d.changed&&(d.changed=!1,dd(this,"onRest",e,this))}}};function c7(a,b){let c=cF(b);return a1(cF(a.get()),c)}function c8(a,b=a.loop,c=a.to){let d=cw(b);if(d){let e=!0!==d&&cE(d),f=(e||a).reverse,g=!e||e.reset;return c9({...a,loop:b,default:!1,pause:void 0,to:!f||cH(c)?c:void 0,from:g?a.from:void 0,reset:g,...e})}}function c9(a){let{to:b,from:c}=a=cE(a),d=new Set;return a0.obj(b)&&da(b,d),a0.obj(c)&&da(c,d),a.keys=d.size?Array.from(d):null,a}function da(a,b){a2(a,(a,c)=>null!=a&&b.add(c))}var db=["onStart","onRest","onChange","onPause","onResume"];function dc(a,b,c){a.animation[c]=b[c]!==cz(b,c)?cy(b[c],a.key):void 0}function dd(a,b,...c){a.animation[b]?.(...c),a.defaultProps[b]?.(...c)}var de=["onStart","onChange","onRest"],df=1,dg=class{constructor(a,b){this.id=df++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),b&&(this._flush=b),a&&this.start({default:!0,...a})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(a=>a.idle&&!a.isDelayed&&!a.isPaused)}get item(){return this._item}set item(a){this._item=a}get(){let a={};return this.each((b,c)=>a[c]=b.get()),a}set(a){for(let b in a){let c=a[b];a0.und(c)||this.springs[b].set(c)}}update(a){return a&&this.queue.push(c9(a)),this}start(a){let{queue:b}=this;return(a?b=a3(a).map(c9):this.queue=[],this._flush)?this._flush(this,b):(dn(this,b),dh(this,b))}stop(a,b){if(!!a!==a&&(b=a),b){let c,d=this.springs;c=a3(b),c.forEach(b=>d[b].stop(!!a))}else cX(this._state,this._lastAsyncId),this.each(b=>b.stop(!!a));return this}pause(a){if(a0.und(a))this.start({pause:!0});else{let b,c=this.springs;b=a3(a),b.forEach(a=>c[a].pause())}return this}resume(a){if(a0.und(a))this.start({pause:!1});else{let b,c=this.springs;b=a3(a),b.forEach(a=>c[a].resume())}return this}each(a){a2(this.springs,a)}_onFrame(){let{onStart:a,onChange:b,onRest:c}=this._events,d=this._active.size>0,e=this._changed.size>0;(d&&!this._started||e&&!this._started)&&(this._started=!0,a4(a,([a,b])=>{b.value=this.get(),a(b,this,this._item)}));let f=!d&&this._started,g=e||f&&c.size?this.get():null;e&&b.size&&a4(b,([a,b])=>{b.value=g,a(b,this,this._item)}),f&&(this._started=!1,a4(c,([a,b])=>{b.value=g,a(b,this,this._item)}))}eventObserved(a){if("change"==a.type)this._changed.add(a.parent),a.idle||this._active.add(a.parent);else{if("idle"!=a.type)return;this._active.delete(a.parent)}aG.onFrame(this._onFrame)}};function dh(a,b){return Promise.all(b.map(b=>di(a,b))).then(b=>cS(a,b))}async function di(a,b,c){let{keys:d,to:e,from:f,loop:g,onRest:h,onResolve:i}=b,j=a0.obj(b.default)&&b.default;g&&(b.loop=!1),!1===e&&(b.to=null),!1===f&&(b.from=null);let k=a0.arr(e)||a0.fun(e)?e:void 0;if(k)b.to=void 0,b.onRest=void 0,j&&(j.onRest=void 0);else de.forEach(c=>{let d=b[c];if(a0.fun(d)){let e=a._events[c];b[c]=({finished:a,cancelled:b})=>{let c=e.get(d);c?(a||(c.finished=!1),b&&(c.cancelled=!0)):e.set(d,{value:null,finished:a||!1,cancelled:b||!1})},j&&(j[c]=b[c])}});let l=a._state;!l.paused===b.pause?(l.paused=b.pause,a5(b.pause?l.pauseQueue:l.resumeQueue)):l.paused&&(b.pause=!0);let m=(d||Object.keys(a.springs)).map(c=>a.springs[c].start(b)),n=!0===b.cancel||!0===cz(b,"cancel");(k||n&&l.asyncId)&&m.push(cR(++a._lastAsyncId,{props:b,state:l,actions:{pause:a_,resume:a_,start(b,c){n?(cX(l,a._lastAsyncId),c(cV(a))):(b.onRest=h,c(cW(k,b,l,a)))}}})),l.paused&&await new Promise(a=>{l.resumeQueue.add(a)});let o=cS(a,await Promise.all(m));if(g&&o.finished&&!(c&&o.noop)){let c=c8(b,g,e);if(c)return dn(a,[c]),di(a,c,!0)}return i&&aG.batchedUpdates(()=>i(o,a,a.item)),o}function dj(a,b){let c,d,e={...a.springs};return b&&(c=a3(b),d=a=>{a0.und(a.keys)&&(a=c9(a)),a0.obj(a.to)||(a={...a,to:void 0}),dm(e,a,a=>dl(a))},c.forEach(d)),dk(a,e),e}function dk(a,b){a2(b,(b,c)=>{a.springs[c]||(a.springs[c]=b,bK(b,a))})}function dl(a,b){let c=new c6;return c.key=a,b&&bK(c,b),c}function dm(a,b,c){let d;b.keys&&(d=b.keys,d.forEach(d=>{(a[d]||(a[d]=c(d)))._prepareNode(b)}))}function dn(a,b){b.forEach(b=>{dm(a.springs,b,b=>dl(b,a))})}var dp=h.createContext({pause:!1,immediate:!1}),dq=()=>{let a=[],b=function(b){let d;b$(`${bW}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);let e=[];return d=(a,d)=>{if(a0.und(b))e.push(a.start());else{let f=c(b,a,d);f&&e.push(a.start(f))}},a.forEach(d),e};b.current=a,b.add=function(b){a.includes(b)||a.push(b)},b.delete=function(b){let c=a.indexOf(b);~c&&a.splice(c,1)},b.pause=function(){let b;return b=a=>a.pause(...arguments),a.forEach(b),this},b.resume=function(){let b;return b=a=>a.resume(...arguments),a.forEach(b),this},b.set=function(b){a.forEach((a,c)=>{let d=a0.fun(b)?b(c,a):b;d&&a.set(d)})},b.start=function(b){let c,d=[];return c=(a,c)=>{if(a0.und(b))d.push(a.start());else{let e=this._getProps(b,a,c);e&&d.push(a.start(e))}},a.forEach(c),d},b.stop=function(){let b;return b=a=>a.stop(...arguments),a.forEach(b),this},b.update=function(b){let c;return c=(a,c)=>a.update(this._getProps(b,a,c)),a.forEach(c),this};let c=function(a,b,c){return a0.fun(a)?a(c,b):a};return b._getProps=c,b};function dr(a,b,c){let d=a0.fun(b)&&b;d&&!c&&(c=[]);let e=(0,h.useMemo)(()=>d||3==arguments.length?dq():void 0,[]),f=(0,h.useRef)(0),g=cb(),i=(0,h.useMemo)(()=>({ctrls:[],queue:[],flush(a,b){let c=dj(a,b);return!(f.current>0)||i.queue.length||Object.keys(c).some(b=>!a.springs[b])?new Promise(d=>{dk(a,c),i.queue.push(()=>{d(dh(a,b))}),g()}):dh(a,b)}}),[]),j=(0,h.useRef)([...i.ctrls]),k=(0,h.useRef)([]),l=ce(a)||0;function m(a,c){for(let e=a;e<c;e++){let a=j.current[e]||(j.current[e]=new dg(null,i.flush)),c=d?d(e,a):b[e];c&&(k.current[e]=function(a){let b=c9(a);return a0.und(b.default)&&(b.default=cB(b)),b}(c))}}(0,h.useMemo)(()=>{let b;b=j.current.slice(a,l),b.forEach(a=>{cI(a,e),a.stop(!0)}),j.current.length=a,m(l,a)},[a]),(0,h.useMemo)(()=>{m(0,Math.min(l,a))},c);let n=j.current.map((a,b)=>dj(a,k.current[b])),o=(0,h.useContext)(dp),p=ce(o),q=o!==p&&cG(o);ca(()=>{let a;f.current++,i.ctrls=j.current;let{queue:b}=i;b.length&&(i.queue=[],b.forEach(a=>a()));a=j.current,a.forEach((a,b)=>{e?.add(a),q&&a.start({default:o});let c=k.current[b];c&&(cJ(a,c.ref),a.ref?a.queue.push(c):a.start(c))})}),cc(()=>()=>{let a;a=i.ctrls,a.forEach(a=>a.stop(!0))});let r=n.map(a=>({...a}));return e?[r,e]:r}function ds(a,b){let c=a0.fun(a),[[d],e]=dr(1,c?a:[a],c?b||[]:b);return c||2==arguments.length?[d,e]:d}var dt=()=>dq(),du=()=>(0,h.useState)(dt)[0],dv=(a,b)=>{var c;let d,e=(c=()=>new c6(a,b),null===(d=(0,h.useRef)(null)).current&&(d.current=c()),d.current);return cc(()=>()=>{e.stop()}),e};function dw(a,b,c){let d,e=a0.fun(b)&&b;e&&!c&&(c=[]);let f=!0,g=dr(a,(a,c)=>{let g=e?e(a,c):b;return d=g.ref,f=f&&g.reverse,g},c||[{}]);if(ca(()=>{let a;a=g[1].current,a.forEach((a,b)=>{let c=g[1].current[b+(f?1:-1)];if(cJ(a,d),a.ref){c&&a.update({to:c.springs});return}c?a.start({to:c.springs}):a.start()})},c),e||3==arguments.length){let a=d??g[1];return a._getProps=(b,c,d)=>{let e=a0.fun(b)?b(d,c):b;if(e){let b=a.current[d+(e.reverse?1:-1)];return b&&(e.to=b.springs),e}},g}return g[0]}function dx(a,b,c){let d,e=a0.fun(b)&&b,{reset:f,sort:g,trail:i=0,expires:j=!0,exitBeforeEnter:k=!1,onDestroyed:l,ref:m,config:n}=e?e():b,o=(0,h.useMemo)(()=>e||3==arguments.length?dq():void 0,[]),p=a3(a),q=[],r=(0,h.useRef)(null),s=f?null:r.current;ca(()=>{r.current=q}),cc(()=>{let a;return a=a=>{o?.add(a.ctrl),a.ctrl.ref=o},q.forEach(a),()=>{let a;a=r.current,a.forEach(a=>{a.expired&&clearTimeout(a.expirationId),cI(a.ctrl,o),a.ctrl.stop(!0)})}});let t=function(a,{key:b,keys:c=b},d){if(null===c){let b=new Set;return a.map(a=>{let c=d&&d.find(c=>c.item===a&&"leave"!==c.phase&&!b.has(c));return c?(b.add(c),c.key):dy++})}return a0.und(c)?a:a0.fun(c)?a.map(c):a3(c)}(p,e?e():b,s),u=f&&r.current||[];ca(()=>{let a;return a=({ctrl:a,item:b,key:c})=>{cI(a,o),cw(l,b,c)},u.forEach(a)});let v=[];if(s&&s.forEach((a,b)=>{a.expired?(clearTimeout(a.expirationId),u.push(a)):~(b=v[b]=t.indexOf(a.key))&&(q[b]=a)}),d=(a,b)=>{q[b]||(q[b]={key:t[b],item:a,phase:"mount",ctrl:new dg},q[b].ctrl.item=a)},p.forEach(d),v.length){let a=-1,{leave:c}=e?e():b;v.forEach((b,d)=>{let e=s[d];~b?(a=q.indexOf(e),q[a]={...e,item:p[b]}):c&&q.splice(++a,0,e)})}a0.fun(g)&&q.sort((a,b)=>g(a.item,b.item));let w=-i,x=cb(),y=cB(b),z=new Map,A=(0,h.useRef)(new Map),B=(0,h.useRef)(!1);q.forEach((a,c)=>{let d,f,g=a.key,h=a.phase,l=e?e():b,o=cw(l.delay||0,g);if("mount"==h)d=l.enter,f="enter";else{let a=0>t.indexOf(g);if("leave"!=h)if(a)d=l.leave,f="leave";else{if(!(d=l.update))return;f="update"}else{if(a)return;d=l.enter,f="enter"}}if(d=cw(d,a.item,c),!(d=a0.obj(d)?cE(d):{to:d}).config){let b=n||y.config;d.config=cw(b,a.item,c,f)}w+=i;let p={...y,delay:o+w,ref:m,immediate:l.immediate,reset:!1,...d};if("enter"==f&&a0.und(p.from)){let d=e?e():b;p.from=cw(a0.und(d.initial)||s?d.from:d.initial,a.item,c)}let{onResolve:q}=p;p.onResolve=a=>{cw(q,a);let b=r.current,c=b.find(a=>a.key===g);if(c&&(!a.cancelled||"update"==c.phase)&&c.ctrl.idle){let a=b.every(a=>a.ctrl.idle);if("leave"==c.phase){let b=cw(j,c.item);if(!1!==b){let d=!0===b?0:b;if(c.expired=!0,!a&&d>0){d<=0x7fffffff&&(c.expirationId=setTimeout(x,d));return}}}a&&b.some(a=>a.expired)&&(A.current.delete(c),k&&(B.current=!0),x())}};let u=dj(a.ctrl,p);"leave"===f&&k?A.current.set(a,{phase:f,springs:u,payload:p}):z.set(a,{phase:f,springs:u,payload:p})});let C=(0,h.useContext)(dp),D=ce(C),E=C!==D&&cG(C);ca(()=>{E&&q.forEach(a=>{a.ctrl.start({default:C})})},[C]),z.forEach((a,b)=>{if(A.current.size){let a=q.findIndex(a=>a.key===b.key);q.splice(a,1)}}),ca(()=>{let a;a=A.current.size?A.current:z,a.forEach(({phase:a,payload:b},c)=>{let{ctrl:d}=c;c.phase=a,o?.add(d),E&&"enter"==a&&d.start({default:C}),b&&(cJ(d,b.ref),(d.ref||o)&&!B.current?d.update(b):(d.start(b),B.current&&(B.current=!1)))})},f?void 0:c);let F=a=>h.createElement(h.Fragment,null,q.map((b,c)=>{let{springs:d}=z.get(b)||b.ctrl,e=a({...d},b.item,b,c),f=a0.str(b.key)||a0.num(b.key)?b.key:b.ctrl.id,g=h.version<"19.0.0",i=e?.props??{},j=g?e?.ref:i?.ref;return e&&e.type?h.createElement(e.type,{...i,key:f,ref:j}):e}));return o?[F,o]:F}var dy=1,dz=({container:a,...b}={})=>{let[c,d]=ds(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...b}),[]);return ca(()=>{let b=((a,{container:b=document.documentElement}={})=>{let c=b8.get(b);c||(c=new Set,b8.set(b,c));let d=new b5(a,b);if(c.add(d),!b6.has(b)){let a=()=>(c?.forEach(a=>a.advance()),!0);b6.set(b,a);let d=b9(b);window.addEventListener("resize",a,{passive:!0}),b!==document.documentElement&&b7.set(b,b3(a,{container:b})),d.addEventListener("scroll",a,{passive:!0})}let e=b6.get(b);return aG(e),()=>{aG.cancel(e);let a=b8.get(b);if(!a||(a.delete(d),a.size))return;let c=b6.get(b);b6.delete(b),c&&(b9(b).removeEventListener("scroll",c),window.removeEventListener("resize",c),b7.get(b)?.())}})(({x:a,y:b})=>{d.start({scrollX:a.current,scrollXProgress:a.progress,scrollY:b.current,scrollYProgress:b.progress})},{container:a?.current||void 0});return()=>{let a;a=Object.values(c),a.forEach(a=>a.stop()),b()}},[]),c},dA=({container:a,...b})=>{let[c,d]=ds(()=>({width:0,height:0,...b}),[]);return ca(()=>{let e=b3(({width:a,height:e})=>{d.start({width:a,height:e,immediate:0===c.width.get()||0===c.height.get()||!0===b.immediate})},{container:a?.current||void 0});return()=>{let a;a=Object.values(c),a.forEach(a=>a.stop()),e()}},[]),c},dB={any:0,all:1};function dC(a,b){let[c,d]=(0,h.useState)(!1),e=(0,h.useRef)(void 0),f=a0.fun(a)&&a,{to:g={},from:i={},...j}=f?f():{},k=f?b:a,[l,m]=ds(()=>({from:i,...j}),[]);return(ca(()=>{let a=e.current,{root:b,once:f,amount:h="any",...j}=k??{};if(!a||f&&c||"undefined"==typeof IntersectionObserver)return;let l=new WeakMap,n=new IntersectionObserver(a=>{a.forEach(a=>{let b=l.get(a.target);if(!!b!==a.isIntersecting)if(a.isIntersecting){let b=(g&&m.start(g),d(!0),f?void 0:()=>{i&&m.start(i),d(!1)});a0.fun(b)?l.set(a.target,b):n.unobserve(a.target)}else b&&(b(),l.delete(a.target))})},{root:b&&b.current||void 0,threshold:"number"==typeof h||Array.isArray(h)?h:dB[h],...j});return n.observe(a),()=>n.unobserve(a)},[k]),f)?[e,l]:[e,c]}function dD({children:a,...b}){return a(ds(b))}function dE({items:a,children:b,...c}){let d=dw(a.length,c);return a.map((a,c)=>{let e=b(a,c);return a0.fun(e)?e(d[c]):e})}function dF({items:a,children:b,...c}){return dx(a,c)(b)}var dG=class extends c_{constructor(a,b){super(),this.source=a,this.idle=!0,this._active=new Set,this.calc=bB(...b);const c=this._get();ch(this,cq(c).create(c))}advance(a){let b=this._get();a1(b,this.get())||(cg(this).setValue(b),this._onChange(b,this.idle)),!this.idle&&dI(this._active)&&dJ(this)}_get(){let a=a0.arr(this.source)?this.source.map(bF):a3(bF(this.source));return this.calc(...a)}_start(){if(this.idle&&!dI(this._active)){let a;this.idle=!1,a=ci(this),a.forEach(a=>{a.done=!1}),aY.skipAnimation?(aG.batchedUpdates(()=>this.advance()),dJ(this)):be.start(this)}}_attach(){let a,b,c=1;a=a3(this.source),b=a=>{bE(a)&&bK(a,this),a instanceof c_&&(a.idle||this._active.add(a),c=Math.max(c,a.priority+1))},a.forEach(b),this.priority=c,this._start()}_detach(){let a,b;a=a3(this.source),b=a=>{bE(a)&&bL(a,this)},a.forEach(b),this._active.clear(),dJ(this)}eventObserved(a){"change"==a.type?a.idle?this.advance():(this._active.add(a.parent),this._start()):"idle"==a.type?this._active.delete(a.parent):"priority"==a.type&&(this.priority=a3(this.source).reduce((a,b)=>Math.max(a,(b instanceof c_?b.priority:0)+1),0))}};function dH(a){return!1!==a.idle}function dI(a){return!a.size||Array.from(a).every(dH)}function dJ(a){if(!a.idle){let b;a.idle=!0,b=ci(a),b.forEach(a=>{a.done=!0}),bH(a,{type:"idle",parent:a})}}var dK=(a,...b)=>new dG(a,b),dL=(a,...b)=>(bZ(),new dG(a,b));aY.assign({createStringInterpolator:bV,to:(a,b)=>new dG(a,b)});var dM=be.advance;a.s(["BailSignal",()=>cY,"Controller",()=>dg,"FrameValue",()=>c_,"Interpolation",()=>dG,"Spring",()=>dD,"SpringContext",()=>dp,"SpringRef",()=>dq,"SpringValue",()=>c6,"Trail",()=>dE,"Transition",()=>dF,"config",()=>cL,"inferTo",()=>cE,"interpolate",()=>dL,"to",()=>dK,"update",()=>dM,"useChain",()=>cK,"useInView",()=>dC,"useResize",()=>dA,"useScroll",()=>dz,"useSpring",()=>ds,"useSpringRef",()=>du,"useSpringValue",()=>dv,"useSprings",()=>dr,"useTrail",()=>dw,"useTransition",()=>dx],25887);var dN=["primitive"].concat(Object.keys(a.i(98167)).filter(a=>/^[A-Z]/.test(a)).map(a=>a[0].toLowerCase()+a.slice(1)));aY.assign({createStringInterpolator:bV,colors:{transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff},frameLoop:"demand"}),(0,aE.j)(()=>{aG.advance()});var dO=((a,{applyAnimatedValues:b=()=>!1,createAnimatedStyle:c=a=>new cn(a),getComponentProps:d=a=>a}={})=>{let e={applyAnimatedValues:b,createAnimatedStyle:c,getComponentProps:d},f=a=>{let b=cu(a)||"Anonymous";return(a=a0.str(a)?f[a]||(f[a]=cr(a,e)):a[ct]||(a[ct]=cr(a,e))).displayName=`Animated(${b})`,a};return a2(a,(b,c)=>{a0.arr(a)&&(c=cu(b)),f[c]=f(b)}),{animated:f}})(dN,{applyAnimatedValues:aD.applyProps}).animated;a.i(25887),a.i(87771);let dP={gridX:4,gridZ:14},dQ={gridX:10,gridZ:15.5},dR={gridX:10,gridZ:10.5},dS={gridX:10,gridZ:9},dT={gridX:2,gridZ:5},dU={gridX:7.5,gridZ:2},dV={gridX:6.5,gridZ:2},dW={gridX:7,gridZ:5};function dX(a,b,c){let{cellSize:d,centerX:e,centerZ:f,width:g,height:h}=c;return{x:e-g/2+a*d,y:1.01,z:f-h/2+b*d}}function dY({isSelected:a,onRotate:b,onMoveRight:c,onMoveLeft:d,onMoveTop:e,onMoveBottom:f,onPlace:h=()=>{},title:i}){return a?(0,g.jsxs)(v.Html,{position:[0,5.5,0],center:!0,children:[i&&(0,g.jsx)("div",{className:"object-controls__title",children:i}),(0,g.jsxs)("div",{className:"object-controls",children:[(0,g.jsxs)("div",{className:"object-controls__row object-controls__row--first",children:[(0,g.jsx)("button",{className:"object-controls__action object-controls__action--rotate",onClick:b,title:"Rotate",children:(0,g.jsx)("svg",{width:"22",height:"19",viewBox:"0 0 22 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{d:"M7.29373 16.8632L6.9055 18.3121L7.29373 16.8632ZM15.4147 10.9498C15.2003 11.75 15.6752 12.5725 16.4754 12.787C17.2756 13.0014 18.0981 12.5265 18.3125 11.7263L16.8636 11.3381L15.4147 10.9498ZM12.6883 17.9981C13.4604 17.6977 13.8426 16.8282 13.5422 16.0562C13.2417 15.2842 12.3723 14.9019 11.6003 15.2024L12.1443 16.6002L12.6883 17.9981ZM19.5808 9.6161L20.6414 10.6768C21.0704 10.2478 21.1988 9.60259 20.9666 9.04208C20.7344 8.48156 20.1875 8.1161 19.5808 8.1161L19.5808 9.6161ZM16.9762 12.2207L15.9155 13.2814C16.5013 13.8671 17.4511 13.8671 18.0369 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 8.1161C13.7649 8.1161 13.2179 8.48157 12.9858 9.04208C12.7536 9.60259 12.8819 10.2478 13.3109 10.6768L14.3716 9.6161ZM7.29373 16.8632L7.68196 15.4143C4.31377 14.5118 2.31494 11.0498 3.21744 7.68159L1.76855 7.29336L0.319665 6.90513C-1.01166 11.8737 1.93692 16.9808 6.9055 18.3121L7.29373 16.8632ZM1.76855 7.29336L3.21744 7.68159C4.11994 4.3134 7.58202 2.31457 10.9502 3.21708L11.3384 1.76819L11.7267 0.319298C6.75808 -1.01203 1.65099 1.93655 0.319665 6.90513L1.76855 7.29336ZM11.3384 1.76819L10.9502 3.21708C14.3184 4.11958 16.3172 7.58165 15.4147 10.9498L16.8636 11.3381L18.3125 11.7263C19.6438 6.75771 16.6953 1.65063 11.7267 0.319298L11.3384 1.76819ZM12.1443 16.6002L11.6003 15.2024C10.3925 15.6724 9.03186 15.776 7.68196 15.4143L7.29373 16.8632L6.9055 18.3121C8.89247 18.8445 10.9059 18.6918 12.6883 17.9981L12.1443 16.6002ZM19.5808 9.6161L18.5201 8.55544L15.9155 11.16L16.9762 12.2207L18.0369 13.2814L20.6414 10.6768L19.5808 9.6161ZM16.9762 12.2207L18.0368 11.16L15.4323 8.55544L14.3716 9.6161L13.3109 10.6768L15.9155 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 11.1161L19.5808 11.1161L19.5808 9.6161L19.5808 8.1161L14.3716 8.1161L14.3716 9.6161Z",fill:"currentColor"})})}),(0,g.jsx)("button",{className:"object-controls__action object-controls__action--save",onClick:h,title:"Place",children:(0,g.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{d:"M1.5 1.5L11.9184 11.9184M12.3368 1.50001L1.91841 11.9184",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})})})]}),(0,g.jsx)("div",{className:"object-controls__row",children:(0,g.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--up",onClick:e,title:"Move Top",children:(0,g.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})})}),(0,g.jsxs)("div",{className:"object-controls__row",children:[(0,g.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--left",onClick:d,title:"Move Left",children:(0,g.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})}),(0,g.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--right",onClick:c,title:"Move Right",children:(0,g.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})})]}),(0,g.jsx)("div",{className:"object-controls__row",children:(0,g.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--down",onClick:f,title:"Move Bottom",children:(0,g.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})})})]})]}):null}function dZ({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/bath.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]);let p=(0,h.useRef)(),[q,t]=(0,h.useState)("cameraState"),[u,w]=(0,h.useState)(0),[x]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[y,z]=(0,h.useState)(!1),[A]=(0,m.useStore)("objectPositionResetTrigger",0),B=dX(dS.gridX,dS.gridZ,x),[C,D]=(0,h.useState)({x:B.x,y:B.y,z:B.z}),[E,F]=(0,h.useState)({gridX:dS.gridX,gridZ:dS.gridZ}),G=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&x&&x.width>0){let a=dX(dS.gridX,dS.gridZ,x);D({x:a.x,y:a.y,z:a.z}),y||(F({gridX:dS.gridX,gridZ:dS.gridZ}),z(!0))}},[b,x,dS,y]),(0,h.useEffect)(()=>{if(A>0&&x&&x.width>0){let a=dX(dS.gridX,dS.gridZ,x);D({x:a.x,y:a.y,z:a.z}),F({gridX:dS.gridX,gridZ:dS.gridZ}),w(0)}},[A,x,dS]);let H=(a,b)=>{if(!x||0===x.width)return;let c=G.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),F(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,x);return D({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[I,J]=(0,h.useState)(),[K,L]=(0,m.useStore)("selectedObjectId",null),[M,N]=(0,m.useStore)("kitOfParts_sceneRotation",!1),[O]=(0,m.useStore)("objectRotationTrigger",0),P="b1"===K,Q=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!P,linewidth:P?4:2,depthTest:!0}),[P]);(0,h.useEffect)(()=>{P&&O>0&&w(a=>a+Math.PI/2)},[O,P]);let{size:R,viewport:S}=(0,j.useThree)();R.width,S.width;let[T,U]=ds(()=>({position:[C.x,C.y,C.z],rotation:[0,0,0],config:{friction:40}})),[V,W]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&W({opacity:1})},[b,W]),aB({onDrag:({offset:[b,c,d]})=>{a&&D({x:Math.min(Math.max(Math.round(C.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(C.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{},[G]),(0,h.useEffect)(()=>{I?D({...C,y:1}):D({...C,y:0})},[I]);let X=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!X.current&&(L("b1"),e&&N(!1)),X.current=b},[b,e,L,N]),(0,h.useEffect)(()=>{k&&Object.keys(k).length>0&&b&&Object.values(k).forEach(a=>{a&&a.isMaterial&&(!P&&K&&null!==K&&e?(void 0===a.userData.originalOpacity&&(a.userData.originalOpacity=void 0!==a.opacity?a.opacity:1),a.opacity=.4,a.transparent=!0):(void 0!==a.userData.originalOpacity?a.opacity=a.userData.originalOpacity:a.opacity=1,a.transparent=!1))})},[P,K,k,b,e]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:V.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,u,0],onClick:b=>{b.stopPropagation(),L("b1"),!0===e&&N(!1),!0===a&&J(!0)},position:[C.x,C.y,C.z],children:[n.map(([a,b],c)=>{if(!b||!b.geometry)return null;let d=b.material||k&&Object.values(k)[0];return d&&b.geometry.attributes?(0,g.jsx)("mesh",{ref:0===c?p:null,castShadow:!1,receiveShadow:!1,geometry:b.geometry,material:d},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),P)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:Q,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:Q},a)}),P&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:P,title:"BATHROOM",onRotate:()=>{w(a=>a+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>L(null)})}),I&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{w(u+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{console.log(c),"Top"===c?C.z>-13&&D({...C,z:C.z-1}):"One"===c?C.z<-13&&D({...C,z:C.z-1}):"Two"===c?C.x<16&&D({...C,x:C.x+1}):"Three"===c?C.z<13&&D({...C,z:C.z+1}):"Four"===c?C.z>-13&&D({...C,x:C.x-1}):C.z>-13&&D({...C,z:C.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{w(u-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?C.x>-16&&D({...C,x:C.x-1}):"Two"===c?C.z>-13&&D({...C,z:C.z-1}):"Three"===c?C.x<16&&D({...C,x:C.x+1}):"Four"===c?C.z<13&&D({...C,z:C.z+1}):C.x>-16&&D({...C,x:C.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?C.z<13&&D({...C,z:C.z+1}):"Two"===c?C.x>-16&&D({...C,x:C.x-1}):"Three"===c?C.z>-13&&D({...C,z:C.z-1}):"Four"===c?C.z>-13&&D({...C,x:C.x+1}):C.z<13&&D({...C,z:C.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?C.x<16&&D({...C,x:C.x+1}):"Two"===c?C.z<13&&D({...C,z:C.z+1}):"Three"===c?C.x>-16&&D({...C,x:C.x-1}):"Four"===c?C.z>-13&&D({...C,z:C.z-1}):C.x<16&&D({...C,x:C.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{J(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d$({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/boxbed.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[t,u]=(0,h.useState)(0),[w]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[x,y]=(0,h.useState)(!1),[z]=(0,m.useStore)("objectPositionResetTrigger",0),A=dX(dT.gridX,dT.gridZ,w),[B,C]=(0,h.useState)({x:A.x,y:A.y,z:A.z}),[D,E]=(0,h.useState)({gridX:dT.gridX,gridZ:dT.gridZ}),F=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&w&&w.width>0){let a=dX(dT.gridX,dT.gridZ,w);C({x:a.x,y:a.y,z:a.z}),x||(E({gridX:dT.gridX,gridZ:dT.gridZ}),y(!0))}},[b,w,dT,x]),(0,h.useEffect)(()=>{if(z>0&&w&&w.width>0){let a=dX(dT.gridX,dT.gridZ,w);C({x:a.x,y:a.y,z:a.z}),E({gridX:dT.gridX,gridZ:dT.gridZ}),u(0)}},[z,w,dT]);let G=(a,b)=>{if(!w||0===w.width)return;let c=F.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),E(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,w);return C({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[H,I]=(0,m.useStore)("selectedObjectId",null),[J]=(0,m.useStore)("objectRotationTrigger",0),K="bb"===H,L=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!K,linewidth:K?4:2,depthTest:!0}),[K]);(0,h.useEffect)(()=>{K&&J>0&&u(a=>a+Math.PI/2)},[J,K]);let[M,N]=(0,h.useState)(),{size:O,viewport:P}=(0,j.useThree)();O.width,P.width;let[Q,R]=ds(()=>({position:[B.x,B.y,B.z],rotation:[0,0,0],config:{friction:40}})),[S,T]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&T({opacity:1})},[b,T]);let U=aB({onDrag:({offset:[b,c,d]})=>{a&&C({x:Math.min(Math.max(Math.round(B.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(B.z+c/99),-13),13)})}});(0,h.useEffect)(()=>{},[F]),(0,h.useEffect)(()=>{M?C({...B,y:1}):C({...B,y:0})},[M]);let V=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!V.current&&I("bb"),V.current=b},[b,I]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:S.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,t,0],onClick:b=>{b&&b.stopPropagation(),I("bb"),(!0===e||!0===a)&&N(!0)},...U(),position:[B.x,B.y,B.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),K)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:L,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:L},a)}),K&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:K,title:"BOXBED",onRotate:()=>{u(a=>a+Math.PI/2)},onMoveRight:()=>G(0,-1),onMoveLeft:()=>G(0,1),onMoveTop:()=>G(1,0),onMoveBottom:()=>G(-1,0),onPlace:()=>I(null)})}),M&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{console.log(c),"Top"===c?B.z>-13&&C({...B,z:B.z-1}):"One"===c?B.z<-13&&C({...B,z:B.z-1}):"Two"===c?B.x<16&&C({...B,x:B.x+1}):"Three"===c?B.z<13&&C({...B,z:B.z+1}):"Four"===c?B.z>-13&&C({...B,x:B.x-1}):B.z>-13&&C({...B,z:B.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?B.x>-16&&C({...B,x:B.x-1}):"Two"===c?B.z>-13&&C({...B,z:B.z-1}):"Three"===c?B.x<16&&C({...B,x:B.x+1}):"Four"===c?B.z<13&&C({...B,z:B.z+1}):B.x>-16&&C({...B,x:B.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?B.z<13&&C({...B,z:B.z+1}):"Two"===c?B.x>-16&&C({...B,x:B.x-1}):"Three"===c?B.z>-13&&C({...B,z:B.z-1}):"Four"===c?B.z>-13&&C({...B,x:B.x+1}):B.z<13&&C({...B,z:B.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?B.x<16&&C({...B,x:B.x+1}):"Two"===c?B.z<13&&C({...B,z:B.z+1}):"Three"===c?B.x>-16&&C({...B,x:B.x-1}):"Four"===c?B.z>-13&&C({...B,z:B.z-1}):B.x<16&&C({...B,x:B.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d_({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/frontPorch.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[t,u]=(0,h.useState)(0),[w]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[x,y]=(0,h.useState)(!1),[z]=(0,m.useStore)("objectPositionResetTrigger",0),A=dX(dP.gridX,dP.gridZ,w),[B,C]=(0,h.useState)({x:A.x,y:A.y,z:A.z}),[D,E]=(0,h.useState)({gridX:dP.gridX,gridZ:dP.gridZ}),F=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&w&&w.width>0){let a=dX(dP.gridX,dP.gridZ,w);C({x:a.x,y:a.y,z:a.z}),x||(E({gridX:dP.gridX,gridZ:dP.gridZ}),y(!0))}},[b,w,dP,x]),(0,h.useEffect)(()=>{if(z>0&&w&&w.width>0){let a=dX(dP.gridX,dP.gridZ,w);C({x:a.x,y:a.y,z:a.z}),E({gridX:dP.gridX,gridZ:dP.gridZ}),u(0)}},[z,w,dP]);let G=(a,b)=>{if(!w||0===w.width)return;let c=F.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),E(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,w);return C({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[H,I]=(0,m.useStore)("selectedObjectId",null),[J]=(0,m.useStore)("objectRotationTrigger",0),K="fp"===H,L=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!K,linewidth:K?4:2,depthTest:!0}),[K]);(0,h.useEffect)(()=>{K&&J>0&&u(a=>a+Math.PI/2)},[J,K]);let[M,N]=(0,h.useState)(),{size:O,viewport:P}=(0,j.useThree)();O.width,P.width;let[Q,R]=ds(()=>({position:[B.x,B.y,B.z],rotation:[0,0,0],config:{friction:40}}));aB({onDrag:({offset:[b,c,d]})=>{a&&C({x:Math.min(Math.max(Math.round(B.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(B.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{},[F]),(0,h.useEffect)(()=>{M?C({...B,y:1}):C({...B,y:0})},[M]);let S=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!S.current&&I("fp"),S.current=b},[b,I]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)("group",{children:(0,g.jsxs)(dO.group,{rotation:[0,t,0],onClick:b=>{b&&b.stopPropagation(),I("fp"),(!0===e||!0===a)&&N(!0)},position:[B.x,B.y,B.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),K)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:L,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:L},a)}),K&&(0,g.jsx)(dY,{isSelected:K,title:"FRONT PORCH",onRotate:()=>{u(a=>a+Math.PI/2)},onMoveRight:()=>G(0,-1),onMoveLeft:()=>G(0,1),onMoveTop:()=>G(1,0),onMoveBottom:()=>G(-1,0),onPlace:()=>I(null)}),M&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{console.log(c),"Top"===c?B.z>-13&&C({...B,z:B.z-1}):"One"===c?B.z<-13&&C({...B,z:B.z-1}):"Two"===c?B.x<16&&C({...B,x:B.x+1}):"Three"===c?B.z<13&&C({...B,z:B.z+1}):"Four"===c?B.z>-13&&C({...B,x:B.x-1}):B.z>-13&&C({...B,z:B.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?B.x>-16&&C({...B,x:B.x-1}):"Two"===c?B.z>-13&&C({...B,z:B.z-1}):"Three"===c?B.x<16&&C({...B,x:B.x+1}):"Four"===c?B.z<13&&C({...B,z:B.z+1}):B.x>-16&&C({...B,x:B.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?B.z<13&&C({...B,z:B.z+1}):"Two"===c?B.x>-16&&C({...B,x:B.x-1}):"Three"===c?B.z>-13&&C({...B,z:B.z-1}):"Four"===c?B.z>-13&&C({...B,x:B.x+1}):B.z<13&&C({...B,z:B.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?B.x<16&&C({...B,x:B.x+1}):"Two"===c?B.z<13&&C({...B,z:B.z+1}):"Three"===c?B.x>-16&&C({...B,x:B.x-1}):"Four"===c?B.z>-13&&C({...B,z:B.z-1}):B.x<16&&C({...B,x:B.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d0({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/kitchen1.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[t,u]=(0,h.useState)(0),[w]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[x,y]=(0,h.useState)(!1),[z]=(0,m.useStore)("objectPositionResetTrigger",0),A=dX(dQ.gridX,dQ.gridZ,w),[B,C]=(0,h.useState)({x:A.x,y:A.y,z:A.z}),[D,E]=(0,h.useState)({gridX:dQ.gridX,gridZ:dQ.gridZ}),F=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&w&&w.width>0){let a=dX(dQ.gridX,dQ.gridZ,w);C({x:a.x,y:a.y,z:a.z}),x||(E({gridX:dQ.gridX,gridZ:dQ.gridZ}),y(!0))}},[b,w,dQ,x]),(0,h.useEffect)(()=>{if(z>0&&w&&w.width>0){let a=dX(dQ.gridX,dQ.gridZ,w);C({x:a.x,y:a.y,z:a.z}),E({gridX:dQ.gridX,gridZ:dQ.gridZ}),u(0)}},[z,w,dQ]);let G=(a,b)=>{if(!w||0===w.width)return;let c=F.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),E(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,w);return C({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[H,I]=(0,m.useStore)("selectedObjectId",null),[J]=(0,m.useStore)("objectRotationTrigger",0),K="k1"===H,L=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!K,linewidth:K?4:2,depthTest:!0}),[K]);(0,h.useEffect)(()=>{K&&J>0&&u(a=>a+Math.PI/2)},[J,K]);let[M,N]=(0,h.useState)(),{size:O,viewport:P}=(0,j.useThree)();O.width,P.width;let[Q,R]=ds(()=>({position:[B.x,B.y,B.z],rotation:[0,0,0],config:{friction:40}})),[S,T]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&T({opacity:1})},[b,T]),aB({onDrag:({offset:[b,c,d]})=>{a&&C({x:Math.min(Math.max(Math.round(B.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(B.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{},[F]),(0,h.useEffect)(()=>{M?C({...B,y:1}):C({...B,y:0})},[M]);let U=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!U.current&&I("k1"),U.current=b},[b,I]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:S.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,t,0],onClick:b=>{b&&b.stopPropagation(),I("k1"),(!0===e||!0===a)&&N(!0)},position:[B.x,B.y,B.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!1,receiveShadow:!1,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),K)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:L,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:L},a)}),K&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:K,title:"KITCHEN",onRotate:()=>{u(a=>a+Math.PI/2)},onMoveRight:()=>G(0,-1),onMoveLeft:()=>G(0,1),onMoveTop:()=>G(1,0),onMoveBottom:()=>G(-1,0),onPlace:()=>I(null)})}),M&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t+Math.PI/2)},children:(0,g.jsx)("svg",{width:"22",height:"19",viewBox:"0 0 22 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{d:"M7.29373 16.8632L6.9055 18.3121L7.29373 16.8632ZM15.4147 10.9498C15.2003 11.75 15.6752 12.5725 16.4754 12.787C17.2756 13.0014 18.0981 12.5265 18.3125 11.7263L16.8636 11.3381L15.4147 10.9498ZM12.6883 17.9981C13.4604 17.6977 13.8426 16.8282 13.5422 16.0562C13.2417 15.2842 12.3723 14.9019 11.6003 15.2024L12.1443 16.6002L12.6883 17.9981ZM19.5808 9.6161L20.6414 10.6768C21.0704 10.2478 21.1988 9.60259 20.9666 9.04208C20.7344 8.48156 20.1875 8.1161 19.5808 8.1161L19.5808 9.6161ZM16.9762 12.2207L15.9155 13.2814C16.5013 13.8671 17.4511 13.8671 18.0369 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 8.1161C13.7649 8.1161 13.2179 8.48157 12.9858 9.04208C12.7536 9.60259 12.8819 10.2478 13.3109 10.6768L14.3716 9.6161ZM7.29373 16.8632L7.68196 15.4143C4.31377 14.5118 2.31494 11.0498 3.21744 7.68159L1.76855 7.29336L0.319665 6.90513C-1.01166 11.8737 1.93692 16.9808 6.9055 18.3121L7.29373 16.8632ZM1.76855 7.29336L3.21744 7.68159C4.11994 4.3134 7.58202 2.31457 10.9502 3.21708L11.3384 1.76819L11.7267 0.319298C6.75808 -1.01203 1.65099 1.93655 0.319665 6.90513L1.76855 7.29336ZM11.3384 1.76819L10.9502 3.21708C14.3184 4.11958 16.3172 7.58165 15.4147 10.9498L16.8636 11.3381L18.3125 11.7263C19.6438 6.75771 16.6953 1.65063 11.7267 0.319298L11.3384 1.76819ZM12.1443 16.6002L11.6003 15.2024C10.3925 15.6724 9.03186 15.776 7.68196 15.4143L7.29373 16.8632L6.9055 18.3121C8.89247 18.8445 10.9059 18.6918 12.6883 17.9981L12.1443 16.6002ZM19.5808 9.6161L18.5201 8.55544L15.9155 11.16L16.9762 12.2207L18.0369 13.2814L20.6414 10.6768L19.5808 9.6161ZM16.9762 12.2207L18.0368 11.16L15.4323 8.55544L14.3716 9.6161L13.3109 10.6768L15.9155 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 11.1161L19.5808 11.1161L19.5808 9.6161L19.5808 8.1161L14.3716 8.1161L14.3716 9.6161Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{console.log(c),"Top"===c?B.z>-13&&C({...B,z:B.z-1}):"One"===c?B.z<-13&&C({...B,z:B.z-1}):"Two"===c?B.x<16&&C({...B,x:B.x+1}):"Three"===c?B.z<13&&C({...B,z:B.z+1}):"Four"===c?B.z>-13&&C({...B,x:B.x-1}):B.z>-13&&C({...B,z:B.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t-Math.PI/2)},children:(0,g.jsx)("svg",{width:"22",height:"19",viewBox:"0 0 22 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scaleX(-1)"},children:(0,g.jsx)("path",{d:"M7.29373 16.8632L6.9055 18.3121L7.29373 16.8632ZM15.4147 10.9498C15.2003 11.75 15.6752 12.5725 16.4754 12.787C17.2756 13.0014 18.0981 12.5265 18.3125 11.7263L16.8636 11.3381L15.4147 10.9498ZM12.6883 17.9981C13.4604 17.6977 13.8426 16.8282 13.5422 16.0562C13.2417 15.2842 12.3723 14.9019 11.6003 15.2024L12.1443 16.6002L12.6883 17.9981ZM19.5808 9.6161L20.6414 10.6768C21.0704 10.2478 21.1988 9.60259 20.9666 9.04208C20.7344 8.48156 20.1875 8.1161 19.5808 8.1161L19.5808 9.6161ZM16.9762 12.2207L15.9155 13.2814C16.5013 13.8671 17.4511 13.8671 18.0369 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 8.1161C13.7649 8.1161 13.2179 8.48157 12.9858 9.04208C12.7536 9.60259 12.8819 10.2478 13.3109 10.6768L14.3716 9.6161ZM7.29373 16.8632L7.68196 15.4143C4.31377 14.5118 2.31494 11.0498 3.21744 7.68159L1.76855 7.29336L0.319665 6.90513C-1.01166 11.8737 1.93692 16.9808 6.9055 18.3121L7.29373 16.8632ZM1.76855 7.29336L3.21744 7.68159C4.11994 4.3134 7.58202 2.31457 10.9502 3.21708L11.3384 1.76819L11.7267 0.319298C6.75808 -1.01203 1.65099 1.93655 0.319665 6.90513L1.76855 7.29336ZM11.3384 1.76819L10.9502 3.21708C14.3184 4.11958 16.3172 7.58165 15.4147 10.9498L16.8636 11.3381L18.3125 11.7263C19.6438 6.75771 16.6953 1.65063 11.7267 0.319298L11.3384 1.76819ZM12.1443 16.6002L11.6003 15.2024C10.3925 15.6724 9.03186 15.776 7.68196 15.4143L7.29373 16.8632L6.9055 18.3121C8.89247 18.8445 10.9059 18.6918 12.6883 17.9981L12.1443 16.6002ZM19.5808 9.6161L18.5201 8.55544L15.9155 11.16L16.9762 12.2207L18.0369 13.2814L20.6414 10.6768L19.5808 9.6161ZM16.9762 12.2207L18.0368 11.16L15.4323 8.55544L14.3716 9.6161L13.3109 10.6768L15.9155 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 11.1161L19.5808 11.1161L19.5808 9.6161L19.5808 8.1161L14.3716 8.1161L14.3716 9.6161Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?B.x>-16&&C({...B,x:B.x-1}):"Two"===c?B.z>-13&&C({...B,z:B.z-1}):"Three"===c?B.x<16&&C({...B,x:B.x+1}):"Four"===c?B.z<13&&C({...B,z:B.z+1}):B.x>-16&&C({...B,x:B.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?B.z<13&&C({...B,z:B.z+1}):"Two"===c?B.x>-16&&C({...B,x:B.x-1}):"Three"===c?B.z>-13&&C({...B,z:B.z-1}):"Four"===c?B.z>-13&&C({...B,x:B.x+1}):B.z<13&&C({...B,z:B.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?B.x<16&&C({...B,x:B.x+1}):"Two"===c?B.z<13&&C({...B,z:B.z+1}):"Three"===c?B.x>-16&&C({...B,x:B.x-1}):"Four"===c?B.z>-13&&C({...B,z:B.z-1}):B.x<16&&C({...B,x:B.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d1({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/kitchen2.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[t,u]=(0,h.useState)(0),[w]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[x,y]=(0,h.useState)(!1),[z]=(0,m.useStore)("objectPositionResetTrigger",0),A=dX(dR.gridX,dR.gridZ,w),[B,C]=(0,h.useState)({x:A.x,y:A.y,z:A.z}),[D,E]=(0,h.useState)({gridX:dR.gridX,gridZ:dR.gridZ}),F=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&w&&w.width>0){let a=dX(dR.gridX,dR.gridZ,w);C({x:a.x,y:a.y,z:a.z}),x||(E({gridX:dR.gridX,gridZ:dR.gridZ}),y(!0))}},[b,w,dR,x]),(0,h.useEffect)(()=>{if(z>0&&w&&w.width>0){let a=dX(dR.gridX,dR.gridZ,w);C({x:a.x,y:a.y,z:a.z}),E({gridX:dR.gridX,gridZ:dR.gridZ}),u(0)}},[z,w,dR]);let G=(a,b)=>{if(!w||0===w.width)return;let c=F.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),E(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,w);return C({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[H,I]=(0,m.useStore)("selectedObjectId",null),[J]=(0,m.useStore)("objectRotationTrigger",0),K="k2"===H,L=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!K,linewidth:K?4:2,depthTest:!0}),[K]);(0,h.useEffect)(()=>{K&&J>0&&u(a=>a+Math.PI/2)},[J,K]);let[M,N]=(0,h.useState)(),{size:O,viewport:P}=(0,j.useThree)();O.width,P.width;let[Q,R]=ds(()=>({position:[B.x,B.y,B.z],rotation:[0,0,0],config:{friction:40}})),[S,T]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&T({opacity:1})},[b,T]),aB({onDrag:({offset:[b,c,d]})=>{a&&C({x:Math.min(Math.max(Math.round(B.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(B.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{},[F]),(0,h.useEffect)(()=>{M?C({...B,y:1}):C({...B,y:0})},[M]);let U=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!U.current&&I("k2"),U.current=b},[b,I]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:S.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,t,0],onClick:b=>{b&&b.stopPropagation(),I("k2"),(!0===e||!0===a)&&N(!0)},position:[B.x,B.y,B.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!1,receiveShadow:!1,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),K)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:L,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:L},a)}),K&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:K,title:"KITCHEN (STORAGE)",onRotate:()=>{u(a=>a+Math.PI/2)},onMoveRight:()=>G(0,-1),onMoveLeft:()=>G(0,1),onMoveTop:()=>G(1,0),onMoveBottom:()=>G(-1,0),onPlace:()=>I(null)})}),M&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{console.log(c),"Top"===c?B.z>-13&&C({...B,z:B.z-1}):"One"===c?B.z<-13&&C({...B,z:B.z-1}):"Two"===c?B.x<16&&C({...B,x:B.x+1}):"Three"===c?B.z<13&&C({...B,z:B.z+1}):"Four"===c?B.z>-13&&C({...B,x:B.x-1}):B.z>-13&&C({...B,z:B.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?B.x>-16&&C({...B,x:B.x-1}):"Two"===c?B.z>-13&&C({...B,z:B.z-1}):"Three"===c?B.x<16&&C({...B,x:B.x+1}):"Four"===c?B.z<13&&C({...B,z:B.z+1}):B.x>-16&&C({...B,x:B.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?B.z<13&&C({...B,z:B.z+1}):"Two"===c?B.x>-16&&C({...B,x:B.x-1}):"Three"===c?B.z>-13&&C({...B,z:B.z-1}):"Four"===c?B.z>-13&&C({...B,x:B.x+1}):B.z<13&&C({...B,z:B.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?B.x<16&&C({...B,x:B.x+1}):"Two"===c?B.z<13&&C({...B,z:B.z+1}):"Three"===c?B.x>-16&&C({...B,x:B.x-1}):"Four"===c?B.z>-13&&C({...B,z:B.z-1}):B.x<16&&C({...B,x:B.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d2({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/storage1.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[t,u]=(0,h.useState)(0),[w]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[x,y]=(0,h.useState)(!1),[z]=(0,m.useStore)("objectPositionResetTrigger",0),A=dX(dU.gridX,dU.gridZ,w),[B,C]=(0,h.useState)({x:A.x,y:A.y,z:A.z}),[D,E]=(0,h.useState)({gridX:dU.gridX,gridZ:dU.gridZ}),F=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&w&&w.width>0){let a=dX(dU.gridX,dU.gridZ,w);C({x:a.x,y:a.y,z:a.z}),x||(E({gridX:dU.gridX,gridZ:dU.gridZ}),y(!0))}},[b,w,dU,x]),(0,h.useEffect)(()=>{if(z>0&&w&&w.width>0){let a=dX(dU.gridX,dU.gridZ,w);C({x:a.x,y:a.y,z:a.z}),E({gridX:dU.gridX,gridZ:dU.gridZ}),u(0)}},[z,w,dU]);let G=(a,b)=>{if(!w||0===w.width)return;let c=F.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(a):p=Math.sign(m)*Math.sign(a)),0!==b&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(b):p=Math.sign(k)*Math.sign(b)),E(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,w);return C({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[H,I]=(0,m.useStore)("selectedObjectId",null),[J]=(0,m.useStore)("objectRotationTrigger",0),K="st1"===H,L=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!K,linewidth:K?4:2,depthTest:!0}),[K]);(0,h.useEffect)(()=>{K&&J>0&&u(a=>a+Math.PI/2)},[J,K]);let[M,N]=(0,h.useState)(),{size:O,viewport:P}=(0,j.useThree)();O.width,P.width;let[Q,R]=ds(()=>({position:[B.x,B.y,B.z],rotation:[0,0,0],config:{friction:40}})),[S,T]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&T({opacity:1})},[b,T]),aB({onDrag:({offset:[b,c,d]})=>{a&&C({x:Math.min(Math.max(Math.round(B.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(B.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{},[F]),(0,h.useEffect)(()=>{M?C({...B,y:1}):C({...B,y:0})},[M]);let U=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!U.current&&I("st1"),U.current=b},[b,I]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:S.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,t,0],onClick:b=>{b&&b.stopPropagation(),I("st1"),(!0===e||!0===a)&&N(!0)},position:[B.x,B.y,B.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),K)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:L,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:L},a)}),K&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:K,title:"STORAGE 1",onRotate:()=>{u(a=>a+Math.PI/2)},onMoveRight:()=>G(0,-1),onMoveLeft:()=>G(0,1),onMoveTop:()=>G(1,0),onMoveBottom:()=>G(-1,0),onPlace:()=>I(null)})}),M&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{console.log(c),"Top"===c?B.z>-13&&C({...B,z:B.z-1}):"One"===c?B.z<-13&&C({...B,z:B.z-1}):"Two"===c?B.x<16&&C({...B,x:B.x+1}):"Three"===c?B.z<13&&C({...B,z:B.z+1}):"Four"===c?B.z>-13&&C({...B,x:B.x-1}):B.z>-13&&C({...B,z:B.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?B.x>-16&&C({...B,x:B.x-1}):"Two"===c?B.z>-13&&C({...B,z:B.z-1}):"Three"===c?B.x<16&&C({...B,x:B.x+1}):"Four"===c?B.z<13&&C({...B,z:B.z+1}):B.x>-16&&C({...B,x:B.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?B.z<13&&C({...B,z:B.z+1}):"Two"===c?B.x>-16&&C({...B,x:B.x-1}):"Three"===c?B.z>-13&&C({...B,z:B.z-1}):"Four"===c?B.z>-13&&C({...B,x:B.x+1}):B.z<13&&C({...B,z:B.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?B.x<16&&C({...B,x:B.x+1}):"Two"===c?B.z<13&&C({...B,z:B.z+1}):"Three"===c?B.x>-16&&C({...B,x:B.x-1}):"Four"===c?B.z>-13&&C({...B,z:B.z-1}):B.x<16&&C({...B,x:B.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d3({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/storage2.glb");(0,h.useEffect)(()=>{k&&s(k,!0)},[k]);let l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[t,u]=(0,h.useState)(0),[w]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[x,y]=(0,h.useState)(!1),[z]=(0,m.useStore)("objectPositionResetTrigger",0),A=dV||{gridX:7.5,gridZ:2},B=dX(A.gridX,A.gridZ,w),[C,D]=(0,h.useState)({x:B.x,y:B.y,z:B.z}),[E,F]=(0,h.useState)({gridX:A.gridX,gridZ:A.gridZ}),G=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&w&&w.width>0&&A){let a=dX(A.gridX,A.gridZ,w);D({x:a.x,y:a.y,z:a.z}),x||(F({gridX:A.gridX,gridZ:A.gridZ}),y(!0))}},[b,w,A,x]),(0,h.useEffect)(()=>{if(z>0&&w&&w.width>0&&A){let a=dX(A.gridX,A.gridZ,w);D({x:a.x,y:a.y,z:a.z}),F({gridX:A.gridX,gridZ:A.gridZ}),u(0)}},[z,w,A]);let H=(a,b)=>{if(!w||0===w.width)return;let c=G.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),F(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,w);return D({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[I,J]=(0,m.useStore)("selectedObjectId",null),[K]=(0,m.useStore)("objectRotationTrigger",0),L="st2"===I,M=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!L,linewidth:L?4:2,depthTest:!0}),[L]);(0,h.useEffect)(()=>{L&&K>0&&u(a=>a+Math.PI/2)},[K,L]);let[N,O]=(0,h.useState)(),{size:P,viewport:Q}=(0,j.useThree)();P.width,Q.width;let[R,S]=ds(()=>({position:[C.x,C.y,C.z],rotation:[0,0,0],config:{friction:40}})),[T,U]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&U({opacity:1})},[b,U]),aB({onDrag:({offset:[b,c,d]})=>{a&&D({x:Math.min(Math.max(Math.round(C.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(C.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{N?D({...C,y:1}):D({...C,y:0})},[N]),(0,h.useEffect)(()=>{k&&Object.keys(k).length>0&&b&&Object.values(k).forEach(a=>{a&&a.isMaterial&&(!L&&I&&null!==I&&e?(void 0===a.userData.originalOpacity&&(a.userData.originalOpacity=void 0!==a.opacity?a.opacity:1),a.opacity=.4,a.transparent=!0):(void 0!==a.userData.originalOpacity?a.opacity=a.userData.originalOpacity:a.opacity=1,a.transparent=!1))})},[L,I,k,b,e]);let V=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!V.current&&J("st2"),V.current=b},[b,J]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:T.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,t,0],onClick:b=>{b&&b.stopPropagation(),J("st2"),(!0===e||!0===a)&&O(!0)},position:[C.x,C.y,C.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),L)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:M,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:M},a)}),L&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:L,title:"STORAGE 2",onRotate:()=>{u(a=>a+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>J(null)})}),N&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{"Top"===c?C.z>-13&&D({...C,z:C.z-1}):"One"===c?C.z<-13&&D({...C,z:C.z-1}):"Two"===c?C.x<16&&D({...C,x:C.x+1}):"Three"===c?C.z<13&&D({...C,z:C.z+1}):"Four"===c?C.z>-13&&D({...C,x:C.x-1}):C.z>-13&&D({...C,z:C.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{u(t-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?C.x>-16&&D({...C,x:C.x-1}):"Two"===c?C.z>-13&&D({...C,z:C.z-1}):"Three"===c?C.x<16&&D({...C,x:C.x+1}):"Four"===c?C.z<13&&D({...C,z:C.z+1}):C.x>-16&&D({...C,x:C.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?C.z<13&&D({...C,z:C.z+1}):"Two"===c?C.x>-16&&D({...C,x:C.x-1}):"Three"===c?C.z>-13&&D({...C,z:C.z-1}):"Four"===c?C.z>-13&&D({...C,x:C.x+1}):C.z<13&&D({...C,z:C.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?C.x<16&&D({...C,x:C.x+1}):"Two"===c?C.z<13&&D({...C,z:C.z+1}):"Three"===c?C.x>-16&&D({...C,x:C.x-1}):"Four"===c?C.z>-13&&D({...C,z:C.z-1}):C.x<16&&D({...C,x:C.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{O(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}function d4({isMouseDragging:a,show:b,isZoomState:c,freeView:d,isAxio:e,...f}){let{nodes:i,materials:k}=(0,r.useGLTF)("/models/gbl_update/stairs.glb"),l=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!!b&&!!b.geometry&&(b.isLineSegments||b.isLine||b.isLineLoop||b.isMesh&&(a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe")))):[],[i]),n=(0,h.useMemo)(()=>i?Object.entries(i).filter(([a,b])=>!(!b||!b.geometry||b.isLineSegments||b.isLine||b.isLineLoop||a.toLowerCase().includes("line")||a.toLowerCase().includes("edge")||a.toLowerCase().includes("wireframe"))&&b.isMesh):[],[i]);(0,h.useMemo)(()=>{let a={};return i&&Object.entries(i).forEach(([b,c])=>{c&&(c.isMesh||c.isLineSegments)&&(a[b]=c)}),a},[i]),(0,h.useRef)();let[p,q]=(0,h.useState)("cameraState"),[s,t]=(0,h.useState)(0),[u]=(0,m.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[w,x]=(0,h.useState)(!1),[y]=(0,m.useStore)("objectPositionResetTrigger",0),z=dW||{gridX:6.5,gridZ:4},A=dX(z.gridX,z.gridZ,u),[B,C]=(0,h.useState)({x:A.x,y:A.y,z:A.z}),[D,E]=(0,h.useState)({gridX:z.gridX,gridZ:z.gridZ}),F=(0,j.useThree)();(0,h.useEffect)(()=>{if(b&&u&&u.width>0&&z){let a=dX(z.gridX,z.gridZ,u);C({x:a.x,y:a.y,z:a.z}),w||(E({gridX:z.gridX,gridZ:z.gridZ}),x(!0))}},[b,u,z,w]),(0,h.useEffect)(()=>{if(y>0&&u&&u.width>0&&z){let a=dX(z.gridX,z.gridZ,u);C({x:a.x,y:a.y,z:a.z}),E({gridX:z.gridX,gridZ:z.gridZ}),t(0)}},[y,u,z]);let G=(a,b)=>{if(!u||0===u.width)return;let c=F.camera;if(!c)return;c.updateMatrixWorld();let d=new o.Vector3(1,0,0),e=new o.Vector3(0,0,-1);d.applyQuaternion(c.quaternion),e.applyQuaternion(c.quaternion);let f=new o.Vector2(d.x,d.z).normalize(),g=new o.Vector2(e.x,e.z).normalize(),h=new o.Vector2(1,0),i=new o.Vector2(0,1),j=f.dot(h),k=f.dot(i),l=g.dot(h),m=g.dot(i),n=0,p=0;0!==a&&(Math.abs(j)>Math.abs(k)?n=Math.sign(j)*Math.sign(a):p=Math.sign(k)*Math.sign(a)),0!==b&&(Math.abs(l)>Math.abs(m)?n=Math.sign(l)*Math.sign(b):p=Math.sign(m)*Math.sign(b)),E(a=>{let b=a.gridX+n,c=a.gridZ+p,d=dX(b,c,u);return C({x:d.x,y:d.y,z:d.z}),{gridX:b,gridZ:c}})},[H,I]=(0,m.useStore)("selectedObjectId",null),[J]=(0,m.useStore)("objectRotationTrigger",0),K="stairs",L=H===K,M=(0,h.useMemo)(()=>new o.LineBasicMaterial({color:0xe9ff00*!!L,linewidth:2,depthTest:!0}),[L]);(0,h.useEffect)(()=>{L&&J>0&&t(a=>a+Math.PI/2)},[J,L]);let[N,O]=(0,h.useState)(),{size:P,viewport:Q}=(0,j.useThree)();P.width,Q.width;let[R,S]=ds(()=>({position:[B.x,B.y,B.z],rotation:[0,0,0],config:{friction:40}})),[T,U]=ds(()=>({opacity:0,config:{tension:100,friction:50}}));(0,h.useEffect)(()=>{b&&U({opacity:1})},[b,U]),aB({onDrag:({offset:[b,c,d]})=>{a&&C({x:Math.min(Math.max(Math.round(B.x+b/99),-16),16),y:0,z:Math.min(Math.max(Math.round(B.z+c/99),-13),13)})}}),(0,h.useEffect)(()=>{N?C({...B,y:1}):C({...B,y:0})},[N]);let V=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{b&&!V.current&&I(K),V.current=b},[b,I]),(0,g.jsx)("group",{...f,children:b&&(0,g.jsx)(dO.group,{style:{opacity:T.opacity},children:(0,g.jsxs)(dO.group,{rotation:[0,s,0],onClick:b=>{b&&b.stopPropagation(),I(K),(!0===e||!0===a)&&O(!0)},position:[B.x,B.y,B.z],children:[n.map(([a,b])=>{if(!b||!b.geometry)return null;let c=b.material||k&&Object.values(k)[0];return c&&b.geometry.attributes?(0,g.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:b.geometry,material:c},a):null}),l.map(([a,b])=>{if(!b||!b.geometry||!b.geometry.attributes)return null;let c=b.geometry;return(b.isMesh&&(c=new o.EdgesGeometry(b.geometry)),L)?(0,g.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((b,d)=>(0,g.jsx)("lineSegments",{geometry:c,material:M,position:b},`${a}-${d}`))},a):(0,g.jsx)("lineSegments",{geometry:c,material:M},a)}),L&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(dY,{isSelected:L,title:"STAIRS",onRotate:()=>{t(a=>a+Math.PI/2)},onMoveRight:()=>G(0,-1),onMoveLeft:()=>G(0,1),onMoveTop:()=>G(1,0),onMoveBottom:()=>G(-1,0),onPlace:()=>I(null)})}),N&&(0,g.jsx)(v.Html,{center:!0,as:"div",children:(0,g.jsxs)("div",{className:"panel",children:[(0,g.jsx)("div",{className:"rotate",onClick:()=>{t(s+Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"up",onClick:()=>{"Top"===c?B.z>-13&&C({...B,z:B.z-1}):"One"===c?B.z<-13&&C({...B,z:B.z-1}):"Two"===c?B.x<16&&C({...B,x:B.x+1}):"Three"===c?B.z<13&&C({...B,z:B.z+1}):"Four"===c?B.z>-13&&C({...B,x:B.x-1}):B.z>-13&&C({...B,z:B.z-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"rotate",onClick:()=>{t(s-Math.PI/2)},children:(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,g.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,g.jsx)("div",{className:"left",onClick:()=>{"Top"===c||"One"===c?B.x>-16&&C({...B,x:B.x-1}):"Two"===c?B.z>-13&&C({...B,z:B.z-1}):"Three"===c?B.x<16&&C({...B,x:B.x+1}):"Four"===c?B.z<13&&C({...B,z:B.z+1}):B.x>-16&&C({...B,x:B.x-1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"down",onClick:()=>{"Top"===c||"One"===c?B.z<13&&C({...B,z:B.z+1}):"Two"===c?B.x>-16&&C({...B,x:B.x-1}):"Three"===c?B.z>-13&&C({...B,z:B.z-1}):"Four"===c?B.z>-13&&C({...B,x:B.x+1}):B.z<13&&C({...B,z:B.z+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"right",onClick:()=>{"Top"===c||"One"===c?B.x<16&&C({...B,x:B.x+1}):"Two"===c?B.z<13&&C({...B,z:B.z+1}):"Three"===c?B.x>-16&&C({...B,x:B.x-1}):"Four"===c?B.z>-13&&C({...B,z:B.z-1}):B.x<16&&C({...B,x:B.x+1})},children:(0,g.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,g.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,g.jsx)("div",{className:"place",onClick:()=>{O(!1)},children:(0,g.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,g.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})})}r.useGLTF.preload("/models/gbl_update/bath.glb"),r.useGLTF.preload("/models/gbl_update/boxbed.glb"),r.useGLTF.preload("/models/gbl_update/frontPorch.glb"),r.useGLTF.preload("/models/gbl_update/kitchen1.glb"),r.useGLTF.preload("/models/gbl_update/kitchen2.glb"),r.useGLTF.preload("/models/gbl_update/storage1.glb"),r.useGLTF.preload("/models/gbl_update/storage2.glb"),r.useGLTF.preload("/models/gbl_update/stairs.glb");var d5=a.i(63460);a.s(["default",0,function(){let[a,b]=(0,m.useStore)("kitOfParts_objectsState"),[c,d]=(0,m.useStore)("kitOfParts_clickbathroom2"),[e,f]=(0,m.useStore)("kitOfParts_boxbedState"),[p,r]=(0,m.useStore)("kitOfParts_frontState"),[s,v]=(0,m.useStore)("kitOfParts_kitchenState"),[w,x]=(0,m.useStore)("kitOfParts_k2State"),[y,z]=(0,m.useStore)("kitOfParts_st1State"),[A,B]=(0,m.useStore)("kitOfParts_st2State",!1),[C,D]=(0,m.useStore)("kitOfParts_stairsState",!1),E=(0,h.useRef)(null),[F,G]=(0,m.useStore)("kitOfParts_captureMode",!1),[H]=(0,m.useStore)("kitOfParts_captureModalOpen",!1),[,I]=(0,m.useStore)("kitOfParts_cachedImageDataUrl",null),[,J]=(0,m.useStore)("kitOfParts_captureModalOpen",!1),[K,L]=(0,h.useState)(!1),[,M]=(0,m.useStore)("selectedObjectId",null),[,N]=(0,m.useStore)("kitOfParts_closeAllPanels",!1);(0,h.useEffect)(()=>{F&&(M(null),b(!1),N(!0),J(!0),E.current&&setTimeout(()=>{(0,d5.toPng)(E.current,{cacheBust:!0}).then(a=>{I(a)}).catch(a=>{console.error("[ERROR] Failed to generate image:",a)})},500))},[F,I,J,M,b,N]),(0,h.useCallback)(()=>{null!==E.current&&G(!0)},[G]),(0,h.useCallback)(()=>{setIsScreenshotFormOpen(!1),setScreenshotDataUrl(null)},[]);let[O,P]=(0,m.useStore)("kitOfParts_sceneRotation",!1),[Q,R]=(0,h.useState)(""),[S,T]=(0,h.useState)(!1),[U,V]=(0,h.useState)(!1),[W,X]=(0,h.useState)(!1),[Y,Z]=(0,h.useState)(!1);(0,h.useEffect)(()=>{O&&(J(!1),setTimeout(()=>{G(!1),I(null)},300))},[O,J,G,I]);let $=(0,h.useRef)(F),_=$.current;$.current=F;let aa=_&&!F&&!H;(0,h.useEffect)(()=>{if(aa){L(!0);let a=setTimeout(()=>L(!1),800);return()=>clearTimeout(a)}},[F,H]),(0,h.useEffect)(()=>{U?T(!1):T(!0)},[U]),(0,h.useCallback)(()=>{W&&X(!W),Z(!Y),T(!1),P(!1)},[W,Y]),(0,h.useCallback)(()=>{Y&&Z(!Y),X(!W),T(!1),P(!1)},[W,Y]),(0,h.useCallback)(()=>{X(!1),Z(!1),T(!S),P(!O)},[S,O]);let ab=h.default.memo(()=>null);ab.displayName="SceneSetup";let ac=h.default.memo(()=>(0,g.jsx)(q,{}));ac.displayName="StableLighting";let ad=h.default.memo(()=>{let{camera:a,size:b}=(0,j.useThree)(),c=(0,h.useRef)({width:0,height:0}),d=(0,h.useRef)(null);return(0,h.useEffect)(()=>{if(a&&a.isOrthographicCamera)if(null===d.current&&(d.current=a.zoom),Math.abs(c.current.width-b.width)>.5||Math.abs(c.current.height-b.height)>.5){let e=d.current;a.near=.1,a.far=2e3;let f=b.width/b.height;a.left=-500*f,a.right=500*f,a.top=500,a.bottom=-500,a.zoom=e,a.updateProjectionMatrix(),d.current=a.zoom,c.current={width:b.width,height:b.height}}else null!==d.current&&Math.abs(a.zoom-d.current)>.001&&(a.zoom=d.current,a.updateProjectionMatrix())},[a,b]),(0,h.useEffect)(()=>{if(a&&a.isOrthographicCamera){null===d.current&&(d.current=a.zoom);let b=()=>{let b=d.current||a.zoom,c=window.innerWidth/window.innerHeight;a.left=-500*c,a.right=500*c,a.top=500,a.bottom=-500,a.zoom=b,a.updateProjectionMatrix(),d.current=a.zoom};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)}},[a]),null});ad.displayName="OrthographicCameraSetup";let ae=h.default.memo(()=>{let{camera:a}=(0,j.useThree)(),b=(0,h.useRef)(null),c=(0,h.useRef)(!1);(0,h.useRef)(null);let d=(0,h.useRef)(0),[e]=(0,m.useStore)("kitOfParts_objectsState"),[f]=(0,m.useStore)("kitOfParts_clickbathroom2"),[g]=(0,m.useStore)("kitOfParts_boxbedState"),[i]=(0,m.useStore)("kitOfParts_frontState"),[l]=(0,m.useStore)("kitOfParts_kitchenState"),[n]=(0,m.useStore)("kitOfParts_k2State"),[o]=(0,m.useStore)("kitOfParts_st1State"),[p]=(0,m.useStore)("kitOfParts_st2State",!1),[q]=(0,m.useStore)("kitOfParts_stairsState",!1),r=(0,h.useRef)(e),s=(0,h.useRef)({bathroom:f,boxbed:g,front:i,kitchen:l,k2:n,st1:o,st2:p,stairs:q});return(0,h.useEffect)(()=>{a&&a.isOrthographicCamera&&null===b.current&&(b.current=a.zoom)},[a]),(0,h.useEffect)(()=>{if(a&&a.isOrthographicCamera){let h=r.current!==e,j=s.current.bathroom!==f||s.current.boxbed!==g||s.current.front!==i||s.current.kitchen!==l||s.current.k2!==n||s.current.st1!==o||s.current.st2!==p||s.current.stairs!==q;(h||j)&&(null!==b.current&&(a.zoom=b.current,a.updateProjectionMatrix()),c.current=!0,d.current=0),r.current=e,s.current={bathroom:f,boxbed:g,front:i,kitchen:l,k2:n,st1:o,st2:p,stairs:q}}},[e,f,g,i,l,n,o,p,q,a]),(0,k.useFrame)(()=>{a&&a.isOrthographicCamera&&(c.current&&null!==b.current?(Math.abs(a.zoom-b.current)>.001&&(a.zoom=b.current,a.updateProjectionMatrix()),d.current++,d.current>=10&&(c.current=!1,b.current=a.zoom)):b.current=a.zoom)}),null});ae.displayName="CameraZoomLock";let af=h.default.memo(()=>{let{camera:a}=(0,j.useThree)(),[b]=(0,m.useStore)("kitOfParts_captureMode",!1);return(0,k.useFrame)(()=>{b&&a&&a.isOrthographicCamera&&(a.position.set(0,50,0),a.zoom=17,a.lookAt(0,0,0),a.updateProjectionMatrix())}),null});af.displayName="CameraLock";let ag=h.default.memo(({isZoom:a,draggingMode:b,guiMode:c,disableRotation:d,sceneRotation:e})=>{let f=(0,j.useThree)(),[g]=(0,m.useStore)("kitOfParts_captureMode",!1),i=(0,h.useRef)(!1),k=(0,h.useRef)(!0),l=(0,h.useRef)(null),n=(0,h.useRef)(null);return(0,h.useEffect)(()=>{if(f.camera&&f.camera.isOrthographicCamera){k.current&&(l.current=f.camera.position.clone(),n.current=f.camera.zoom);let a=i.current&&!g;if(k.current&&!g&&!b&&!c){i.current=g,k.current=!1;return}if(!0===g)f.camera.position.set(0,50,0),f.camera.zoom=17,f.camera.lookAt(0,0,0);else if(a){i.current=g,k.current=!1;return}else!0===b?(f.camera.position.set(-14,11,15),f.camera.zoom=17,f.camera.lookAt(0,0,0)):!0===c&&(f.camera.position.set(-5.16,19.9,8.7),f.camera.zoom=17,f.camera.lookAt(0,0,0));f.camera.updateProjectionMatrix(),i.current=g,k.current=!1}},[g,b,c,f.camera]),null});return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{ref:E,style:{overscrollBehavior:"none",touchAction:"none"},children:(0,g.jsxs)(i.Canvas,{dpr:1.5,orthographic:!0,camera:{position:[-14,11,15],zoom:17},frameloop:!0===O||F||aa||K?"always":"demand",gl:{antialias:!0,powerPreference:"high-performance",stencil:!1,depth:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!1},onCreated:({gl:a,scene:b,camera:c,size:d})=>{a.toneMapping=o.ACESFilmicToneMapping,a.toneMappingExposure=1,a.outputColorSpace=o.SRGBColorSpace,a.shadowMap.enabled=!0,a.shadowMap.type=o.PCFSoftShadowMap,c&&c.isOrthographicCamera&&(c.near=.1,c.far=2e3)},style:{background:"#1C1C1C",height:"100vh",overscrollBehavior:"none",touchAction:"none"},children:[(0,g.jsx)(ad,{}),(0,g.jsx)(ab,{}),(0,g.jsx)(ac,{}),(0,g.jsxs)(h.Suspense,{fallback:null,children:[(0,g.jsxs)("group",{rotation:[0,Math.PI/2,0],position:[0,-10,0],children:[(0,g.jsx)(dZ,{show:c,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d$,{show:e,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d_,{show:p,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d0,{show:s,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d1,{show:w,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d2,{show:y,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d3,{show:A,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(d4,{show:C,isZoomState:Q,isMouseDragging:Y,isAxio:W,freeView:O}),(0,g.jsx)(t,{}),(0,g.jsx)(u,{})]}),(0,g.jsx)(l.default,{autoRotate:!0===O&&!F,enableRotate:!F,enableZoom:!F,enablePan:!F,autoRotateSpeed:.2,enableDamping:!0,dampingFactor:.05,makeDefault:!1,minDistance:500,maxDistance:1/0,minZoom:.1,maxZoom:100},F?"capture":"default"),(0,g.jsx)(ae,{}),(0,g.jsx)(af,{}),(0,g.jsx)(n,{}),(0,g.jsx)(ag,{isZoom:Q,draggingMode:W,guiMode:Y,disableRotation:S,sceneRotation:O})]})]})})})}],11909)}];

//# sourceMappingURL=app_kit-of-parts_page_fa93927a.js.map