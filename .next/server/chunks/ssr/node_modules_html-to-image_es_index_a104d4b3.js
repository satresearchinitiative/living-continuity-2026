module.exports=[63460,a=>{"use strict";let b,c=(b=0,()=>(b+=1,`u${`0000${(1679616*Math.random()|0).toString(36)}`.slice(-4)}${b}`));function d(a){let b=[];for(let c=0,d=a.length;c<d;c++)b.push(a[c]);return b}let e=null;function f(a={}){return e||(e=a.includeStyleProperties?a.includeStyleProperties:d(window.getComputedStyle(document.documentElement)))}function g(a,b){let c=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b);return c?parseFloat(c.replace("px","")):0}function h(a,b={}){let c,d,e,f;return{width:b.width||(c=g(a,"border-left-width"),d=g(a,"border-right-width"),a.clientWidth+c+d),height:b.height||(e=g(a,"border-top-width"),f=g(a,"border-bottom-width"),a.clientHeight+e+f)}}function i(a){return new Promise((b,c)=>{let d=new Image;d.onload=()=>{d.decode().then(()=>{requestAnimationFrame(()=>b(d))})},d.onerror=c,d.crossOrigin="anonymous",d.decoding="async",d.src=a})}async function j(a){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(a)).then(encodeURIComponent).then(a=>`data:image/svg+xml;charset=utf-8,${a}`)}async function k(a,b,c){let d="http://www.w3.org/2000/svg",e=document.createElementNS(d,"svg"),f=document.createElementNS(d,"foreignObject");return e.setAttribute("width",`${b}`),e.setAttribute("height",`${c}`),e.setAttribute("viewBox",`0 0 ${b} ${c}`),f.setAttribute("width","100%"),f.setAttribute("height","100%"),f.setAttribute("x","0"),f.setAttribute("y","0"),f.setAttribute("externalResourcesRequired","true"),e.appendChild(f),f.appendChild(a),j(e)}let l=(a,b)=>{if(a instanceof b)return!0;let c=Object.getPrototypeOf(a);return null!==c&&(c.constructor.name===b.name||l(c,b))};function m(a,b,d,e){let g,h,i,j=window.getComputedStyle(a,d),k=j.getPropertyValue("content");if(""===k||"none"===k)return;let l=c();try{b.className=`${b.className} ${l}`}catch(a){return}let m=document.createElement("style");m.appendChild((g=`.${l}:${d}`,i=j.cssText?(h=j.getPropertyValue("content"),`${j.cssText} content: '${h.replace(/'|"/g,"")}';`):f(e).map(a=>{let b=j.getPropertyValue(a),c=j.getPropertyPriority(a);return`${a}: ${b}${c?" !important":""};`}).join(" "),document.createTextNode(`${g}{${i}}`))),b.appendChild(m)}let n="application/font-woff",o="image/jpeg",p={woff:n,woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:o,jpeg:o,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function q(a){let b;return p[((b=/\.([^./]*?)$/g.exec(a))?b[1]:"").toLowerCase()]||""}function r(a){return -1!==a.search(/^(data:)/)}function s(a,b){return`data:${b};base64,${a}`}async function t(a,b,c){let d=await fetch(a,b);if(404===d.status)throw Error(`Resource "${d.url}" not found`);let e=await d.blob();return new Promise((a,b)=>{let f=new FileReader;f.onerror=b,f.onloadend=()=>{try{a(c({res:d,result:f.result}))}catch(a){b(a)}},f.readAsDataURL(e)})}let u={};async function v(a,b,c){var d,e,f;let g,h,i=(d=a,e=b,f=c.includeQueryParams,h=d.replace(/\?.*/,""),f&&(h=d),/ttf|otf|eot|woff2?/i.test(h)&&(h=h.replace(/.*\//,"")),e?`[${e}]${h}`:h);if(null!=u[i])return u[i];c.cacheBust&&(a+=(/\?/.test(a)?"&":"?")+new Date().getTime());try{let d=await t(a,c.fetchRequestInit,({res:a,result:c})=>(b||(b=a.headers.get("Content-Type")||""),c.split(/,/)[1]));g=s(d,b)}catch(d){g=c.imagePlaceholder||"";let b=`Failed to fetch resource: ${a}`;d&&(b="string"==typeof d?d:d.message),b&&console.warn(b)}return u[i]=g,g}async function w(a){let b=a.toDataURL();return"data:,"===b?a.cloneNode(!1):i(b)}async function x(a,b){if(a.currentSrc){let b=document.createElement("canvas"),c=b.getContext("2d");return b.width=a.clientWidth,b.height=a.clientHeight,null==c||c.drawImage(a,0,0,b.width,b.height),i(b.toDataURL())}let c=a.poster,d=q(c);return i(await v(c,d,b))}async function y(a,b){var c;try{if(null==(c=null==a?void 0:a.contentDocument)?void 0:c.body)return await D(a.contentDocument.body,b,!0)}catch(a){}return a.cloneNode(!1)}async function z(a,b){return l(a,HTMLCanvasElement)?w(a):l(a,HTMLVideoElement)?x(a,b):l(a,HTMLIFrameElement)?y(a,b):a.cloneNode(A(a))}let A=a=>null!=a.tagName&&"SVG"===a.tagName.toUpperCase();async function B(a,b,c){var e,f;if(A(b))return b;let g=[];return 0===(g=null!=a.tagName&&"SLOT"===a.tagName.toUpperCase()&&a.assignedNodes?d(a.assignedNodes()):l(a,HTMLIFrameElement)&&(null==(e=a.contentDocument)?void 0:e.body)?d(a.contentDocument.body.childNodes):d((null!=(f=a.shadowRoot)?f:a).childNodes)).length||l(a,HTMLVideoElement)||await g.reduce((a,d)=>a.then(()=>D(d,c)).then(a=>{a&&b.appendChild(a)}),Promise.resolve()),b}async function C(a,b){let c=a.querySelectorAll?a.querySelectorAll("use"):[];if(0===c.length)return a;let d={};for(let e=0;e<c.length;e++){let f=c[e].getAttribute("xlink:href");if(f){let c=a.querySelector(f),e=document.querySelector(f);c||!e||d[f]||(d[f]=await D(e,b,!0))}}let e=Object.values(d);if(e.length){let b="http://www.w3.org/1999/xhtml",c=document.createElementNS(b,"svg");c.setAttribute("xmlns",b),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";let d=document.createElementNS(b,"defs");c.appendChild(d);for(let a=0;a<e.length;a++)d.appendChild(e[a]);a.appendChild(c)}return a}async function D(a,b,c){return c||!b.filter||b.filter(a)?Promise.resolve(a).then(a=>z(a,b)).then(c=>B(a,c,b)).then(c=>(function(a,b,c){if(l(b,Element)&&(!function(a,b,c){let d=b.style;if(!d)return;let e=window.getComputedStyle(a);e.cssText?(d.cssText=e.cssText,d.transformOrigin=e.transformOrigin):f(c).forEach(c=>{let f=e.getPropertyValue(c);if("font-size"===c&&f.endsWith("px")){let a=Math.floor(parseFloat(f.substring(0,f.length-2)))-.1;f=`${a}px`}l(a,HTMLIFrameElement)&&"display"===c&&"inline"===f&&(f="block"),"d"===c&&b.getAttribute("d")&&(f=`path(${b.getAttribute("d")})`),d.setProperty(c,f,e.getPropertyPriority(c))})}(a,b,c),m(a,b,":before",c),m(a,b,":after",c),l(a,HTMLTextAreaElement)&&(b.innerHTML=a.value),l(a,HTMLInputElement)&&b.setAttribute("value",a.value),l(a,HTMLSelectElement))){let c=Array.from(b.children).find(b=>a.value===b.getAttribute("value"));c&&c.setAttribute("selected","")}return b})(a,c,b)).then(a=>C(a,b)):null}let E=/url\((['"]?)([^'"]+?)\1\)/g,F=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,G=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function H(a,b,c,d,e){try{let f,g,h=c?function(a,b){if(a.match(/^[a-z]+:\/\//i))return a;if(a.match(/^\/\//))return window.location.protocol+a;if(a.match(/^[a-z]+:/i))return a;let c=document.implementation.createHTMLDocument(),d=c.createElement("base"),e=c.createElement("a");return c.head.appendChild(d),c.body.appendChild(e),b&&(d.href=b),e.href=a,e.href}(b,c):b,i=q(b);if(e){let a=await e(h);f=s(a,i)}else f=await v(h,i,d);return a.replace((g=b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),RegExp(`(url\\(['"]?)(${g})(['"]?\\))`,"g")),`$1${f}$3`)}catch(a){}return a}function I(a){return -1!==a.search(E)}async function J(a,b,c){let d;if(!I(a))return a;let e=function(a,{preferredFontFormat:b}){return b?a.replace(G,a=>{for(;;){let[c,,d]=F.exec(a)||[];if(!d)return"";if(d===b)return`src: ${c};`}}):a}(a,c);return(d=[],e.replace(E,(a,b,c)=>(d.push(c),a)),d.filter(a=>!r(a))).reduce((a,d)=>a.then(a=>H(a,d,b,c)),Promise.resolve(e))}async function K(a,b,c){var d;let e=null==(d=b.style)?void 0:d.getPropertyValue(a);if(e){let d=await J(e,null,c);return b.style.setProperty(a,d,b.style.getPropertyPriority(a)),!0}return!1}async function L(a,b){await K("background",a,b)||await K("background-image",a,b),await K("mask",a,b)||await K("-webkit-mask",a,b)||await K("mask-image",a,b)||await K("-webkit-mask-image",a,b)}async function M(a,b){let c=l(a,HTMLImageElement);if(!(c&&!r(a.src))&&!(l(a,SVGImageElement)&&!r(a.href.baseVal)))return;let d=c?a.src:a.href.baseVal,e=await v(d,q(d),b);await new Promise((d,f)=>{a.onload=d,a.onerror=b.onImageErrorHandler?(...a)=>{try{d(b.onImageErrorHandler(...a))}catch(a){f(a)}}:f,a.decode&&(a.decode=d),"lazy"===a.loading&&(a.loading="eager"),c?(a.srcset="",a.src=e):a.href.baseVal=e})}async function N(a,b){let c=d(a.childNodes).map(a=>O(a,b));await Promise.all(c).then(()=>a)}async function O(a,b){l(a,Element)&&(await L(a,b),await M(a,b),await N(a,b))}let P={};async function Q(a){let b=P[a];if(null!=b)return b;let c=await fetch(a);return b={url:a,cssText:await c.text()},P[a]=b,b}async function R(a,b){let c=a.cssText,d=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((c.match(/url\([^)]+\)/g)||[]).map(async e=>{let f=e.replace(d,"$1");return f.startsWith("https://")||(f=new URL(f,a.url).href),t(f,b.fetchRequestInit,({result:a})=>(c=c.replace(e,`url(${a})`),[e,a]))})).then(()=>c)}function S(a){if(null==a)return[];let b=[],c=a.replace(/(\/\*[\s\S]*?\*\/)/gi,""),d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let a=d.exec(c);if(null===a)break;b.push(a[0])}c=c.replace(d,"");let e=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,f=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let a=e.exec(c);if(null===a){if(null===(a=f.exec(c)))break;e.lastIndex=f.lastIndex}else f.lastIndex=e.lastIndex;b.push(a[0])}return b}async function T(a,b){let c=[],e=[];return a.forEach(c=>{if("cssRules"in c)try{d(c.cssRules||[]).forEach((a,d)=>{if(a.type===CSSRule.IMPORT_RULE){let f=d+1,g=a.href,h=Q(g).then(a=>R(a,b)).then(a=>S(a).forEach(a=>{try{c.insertRule(a,a.startsWith("@import")?f+=1:c.cssRules.length)}catch(b){console.error("Error inserting rule from remote css",{rule:a,error:b})}})).catch(a=>{console.error("Error loading remote css",a.toString())});e.push(h)}})}catch(f){let d=a.find(a=>null==a.href)||document.styleSheets[0];null!=c.href&&e.push(Q(c.href).then(a=>R(a,b)).then(a=>S(a).forEach(a=>{d.insertRule(a,d.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",f)}}),Promise.all(e).then(()=>(a.forEach(a=>{if("cssRules"in a)try{d(a.cssRules||[]).forEach(a=>{c.push(a)})}catch(b){console.error(`Error while reading CSS rules from ${a.href}`,b)}}),c))}async function U(a,b){if(null==a.ownerDocument)throw Error("Provided element is not within a Document");let c=d(a.ownerDocument.styleSheets);return(await T(c,b)).filter(a=>a.type===CSSRule.FONT_FACE_RULE).filter(a=>I(a.style.getPropertyValue("src")))}function V(a){return a.trim().replace(/["']/g,"")}async function W(a,b){let c,d=await U(a,b),e=(c=new Set,!function a(b){(b.style.fontFamily||getComputedStyle(b).fontFamily).split(",").forEach(a=>{c.add(V(a))}),Array.from(b.children).forEach(b=>{b instanceof HTMLElement&&a(b)})}(a),c);return(await Promise.all(d.filter(a=>e.has(V(a.style.fontFamily))).map(a=>{let c=a.parentStyleSheet?a.parentStyleSheet.href:null;return J(a.cssText,c,b)}))).join("\n")}async function X(a,b){let c=null!=b.fontEmbedCSS?b.fontEmbedCSS:b.skipFonts?null:await W(a,b);if(c){let b=document.createElement("style"),d=document.createTextNode(c);b.appendChild(d),a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)}}async function Y(a,b={}){let{width:c,height:d}=h(a,b),e=await D(a,b,!0);return await X(e,b),await O(e,b),!function(a,b){let{style:c}=a;b.backgroundColor&&(c.backgroundColor=b.backgroundColor),b.width&&(c.width=`${b.width}px`),b.height&&(c.height=`${b.height}px`);let d=b.style;null!=d&&Object.keys(d).forEach(a=>{c[a]=d[a]})}(e,b),await k(e,c,d)}async function Z(a,b={}){let{width:c,height:d}=h(a,b),e=await Y(a,b),f=await i(e),g=document.createElement("canvas"),j=g.getContext("2d"),k=b.pixelRatio||function(){let a,b;try{b=process}catch(a){}let c=b&&b.env?b.env.devicePixelRatio:null;return c&&Number.isNaN(a=parseInt(c,10))&&(a=1),a||window.devicePixelRatio||1}(),l=b.canvasWidth||c,m=b.canvasHeight||d;return g.width=l*k,g.height=m*k,!b.skipAutoScale&&(g.width>16384||g.height>16384)&&(g.width>16384&&g.height>16384?g.width>g.height?(g.height*=16384/g.width,g.width=16384):(g.width*=16384/g.height,g.height=16384):g.width>16384?(g.height*=16384/g.width,g.width=16384):(g.width*=16384/g.height,g.height=16384)),g.style.width=`${l}`,g.style.height=`${m}`,b.backgroundColor&&(j.fillStyle=b.backgroundColor,j.fillRect(0,0,g.width,g.height)),j.drawImage(f,0,0,g.width,g.height),g}async function $(a,b={}){return(await Z(a,b)).toDataURL()}a.s(["toPng",()=>$],63460)}];

//# sourceMappingURL=node_modules_html-to-image_es_index_a104d4b3.js.map