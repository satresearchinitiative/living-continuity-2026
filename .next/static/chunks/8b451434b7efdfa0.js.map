{"version":3,"sources":["turbopack:///[project]/components/glossary/contributions/contributions.module.scss [app-client] (css module)","turbopack:///[project]/components/glossary/glossary.module.scss [app-client] (css module)","turbopack:///[project]/components/glossary/GlossaryList.jsx","turbopack:///[project]/components/navigation/index.jsx","turbopack:///[project]/components/glossary/contributions/Contributions.jsx","turbopack:///[project]/app/glossary/page.js"],"sourcesContent":["__turbopack_context__.v({\n  \"cancelButton\": \"contributions-module-scss-module__Q4w9yG__cancelButton\",\n  \"contributionsContainer\": \"contributions-module-scss-module__Q4w9yG__contributionsContainer\",\n  \"emptyState\": \"contributions-module-scss-module__Q4w9yG__emptyState\",\n  \"form\": \"contributions-module-scss-module__Q4w9yG__form\",\n  \"formActions\": \"contributions-module-scss-module__Q4w9yG__formActions\",\n  \"interpretationDivider\": \"contributions-module-scss-module__Q4w9yG__interpretationDivider\",\n  \"interpretationItem\": \"contributions-module-scss-module__Q4w9yG__interpretationItem\",\n  \"interpretationText\": \"contributions-module-scss-module__Q4w9yG__interpretationText\",\n  \"interpretationsContent\": \"contributions-module-scss-module__Q4w9yG__interpretationsContent\",\n  \"interpretationsList\": \"contributions-module-scss-module__Q4w9yG__interpretationsList\",\n  \"keywordName\": \"contributions-module-scss-module__Q4w9yG__keywordName\",\n  \"submit-entry-form\": \"contributions-module-scss-module__Q4w9yG__submit-entry-form\",\n  \"submitButton\": \"contributions-module-scss-module__Q4w9yG__submitButton\",\n  \"submitForm\": \"contributions-module-scss-module__Q4w9yG__submitForm\",\n  \"subtitle\": \"contributions-module-scss-module__Q4w9yG__subtitle\",\n  \"textarea\": \"contributions-module-scss-module__Q4w9yG__textarea\",\n  \"title\": \"contributions-module-scss-module__Q4w9yG__title\",\n});\n","__turbopack_context__.v({\n  \"alphabetBar\": \"glossary-module-scss-module__TSyjpq__alphabetBar\",\n  \"alphabetLetter\": \"glossary-module-scss-module__TSyjpq__alphabetLetter\",\n  \"alphabetLetterActive\": \"glossary-module-scss-module__TSyjpq__alphabetLetterActive\",\n  \"alphabetLetterDisabled\": \"glossary-module-scss-module__TSyjpq__alphabetLetterDisabled\",\n  \"articleImage\": \"glossary-module-scss-module__TSyjpq__articleImage\",\n  \"articleImageFull\": \"glossary-module-scss-module__TSyjpq__articleImageFull\",\n  \"articleImagePlaceholder\": \"glossary-module-scss-module__TSyjpq__articleImagePlaceholder\",\n  \"articleImageWrapper\": \"glossary-module-scss-module__TSyjpq__articleImageWrapper\",\n  \"articleImagesStack\": \"glossary-module-scss-module__TSyjpq__articleImagesStack\",\n  \"glossaryContainer\": \"glossary-module-scss-module__TSyjpq__glossaryContainer\",\n  \"glossaryItem\": \"glossary-module-scss-module__TSyjpq__glossaryItem\",\n  \"glossaryItemCentered\": \"glossary-module-scss-module__TSyjpq__glossaryItemCentered\",\n  \"glossaryItemDimmed\": \"glossary-module-scss-module__TSyjpq__glossaryItemDimmed\",\n  \"glossaryItemNoGap\": \"glossary-module-scss-module__TSyjpq__glossaryItemNoGap\",\n  \"glossaryItemNumber\": \"glossary-module-scss-module__TSyjpq__glossaryItemNumber\",\n  \"glossaryList\": \"glossary-module-scss-module__TSyjpq__glossaryList\",\n  \"glossaryTranslation\": \"glossary-module-scss-module__TSyjpq__glossaryTranslation\",\n  \"goBackArrow\": \"glossary-module-scss-module__TSyjpq__goBackArrow\",\n  \"goBackButton\": \"glossary-module-scss-module__TSyjpq__goBackButton\",\n  \"imageContainer\": \"glossary-module-scss-module__TSyjpq__imageContainer\",\n  \"imageLoaded\": \"glossary-module-scss-module__TSyjpq__imageLoaded\",\n  \"imagePlaceholder\": \"glossary-module-scss-module__TSyjpq__imagePlaceholder\",\n  \"selected\": \"glossary-module-scss-module__TSyjpq__selected\",\n});\n","'use client';\n\nimport React, { useRef, useMemo, useState, useEffect, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport Modal from 'react-modal';\nimport ArchiveModal from '../treeModals/archiveModal';\nimport '../treeModals/archive.scss';\nimport { NavigationControls } from '../navigation';\nimport { COLOR_WHITE } from '../_setup/colors';\nimport Contributions from './contributions/Contributions';\nimport styles from './glossary.module.scss';\n\n// Generate alphabet array A-Z and #\nconst alphabet = [...Array(26)].map((_, i) => String.fromCharCode(65 + i));\nalphabet.push('#');\n\n// Get first letter of keyword (English translation)\nconst getFirstLetter = (keyword) => {\n  const firstChar = keyword.title.charAt(0).toUpperCase();\n  return /[A-Z]/.test(firstChar) ? firstChar : '#';\n};\n\n// Language display order for translations\nconst LANGUAGE_ORDER = [\n  'eng',\n  'arabic',\n  'hindi',\n  'urdu',\n  'tagalog',\n  'farsi',\n  'nepali',\n  'bengali',\n  'malayalam'\n];\n\n// Language labels for display (optional, if needed)\nconst LANGUAGE_LABELS = {\n  eng: 'English',\n  arabic: 'Arabic',\n  hindi: 'Hindi',\n  urdu: 'Urdu',\n  tagalog: 'Tagalog',\n  farsi: 'Farsi',\n  nepali: 'Nepali',\n  bengali: 'Bengali',\n  malayalam: 'Malayalam'\n};\n\nexport default function GlossaryList() {\n  const containerRef = useRef(null);\n  const listRef = useRef(null);\n  const itemRefs = useRef({});\n  const [centeredKeywordId, setCenteredKeywordId] = useState(null);\n  const centeredKeywordIdRef = useRef(null);\n  const [glossaryData, setGlossaryData] = useState([]);\n  const alphabetBarRef = useRef(null);\n  const [alphabetPreview, setAlphabetPreview] = useState(null);\n  const alphabetTouchActiveRef = useRef(false);\n  const articleImagesStackRef = useRef(null);\n  const isCalculatingScaleRef = useRef(false);\n  const scaleCalculationTimeoutRef = useRef(null);\n  const lastCalculatedMaxHeightRef = useRef(null);\n  const [wrapperMaxHeights, setWrapperMaxHeights] = useState({});\n  const [wrapperMaxWidths, setWrapperMaxWidths] = useState({});\n  const [wrapperMinWidths, setWrapperMinWidths] = useState({});\n  const [allArticles, setAllArticles] = useState([]);\n  const [selectedArticle, setSelectedArticle] = useState(null);\n  const [articleModalOpen, setArticleModalOpen] = useState(false);\n\n  const slugifyTitle = (title) => {\n    return title\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/[\\s_-]+/g, '-')\n      .replace(/^-+|-+$/g, '');\n  };\n\n  const getKeywordBySlug = (slug) => {\n    return glossaryData.find(k => slugifyTitle(k.title) === slug);\n  };\n\n  // Parse hash: \"keywordSlug\" or \"keywordSlug:articleId\" (colon = no ambiguity with hyphenated keywords)\n  const parseGlossaryHash = useCallback((hash) => {\n    if (!hash) return { keywordSlug: null, articleId: null };\n    if (hash.includes(':')) {\n      const idx = hash.lastIndexOf(':');\n      const keywordSlug = hash.slice(0, idx).trim() || null;\n      const articleId = hash.slice(idx + 1).trim() || null;\n      return { keywordSlug: keywordSlug || null, articleId: articleId || null };\n    }\n    const parts = hash.split('-');\n    const last = parts[parts.length - 1];\n    const isArticleId = allArticles.some(a => a.id === last);\n    if (isArticleId && parts.length >= 2) {\n      return { keywordSlug: parts.slice(0, -1).join('-'), articleId: last };\n    }\n    return { keywordSlug: hash, articleId: null };\n  }, [allArticles]);\n\n  const updateCenteredKeyword = useCallback((keywordId) => {\n    centeredKeywordIdRef.current = keywordId;\n    setCenteredKeywordId(keywordId);\n\n    if (typeof window !== 'undefined' && keywordId && glossaryData.length > 0) {\n      const keyword = glossaryData.find(k => k.id === keywordId);\n      if (keyword) {\n        const keywordSlug = slugifyTitle(keyword.title);\n        const currentHash = window.location.hash.substring(1);\n        const { articleId: hashArticleId } = parseGlossaryHash(currentHash);\n        const hasArticleInHash = !!hashArticleId;\n        const isArticleHash = allArticles.some(article => {\n          if (!article.title) return false;\n          const articleHash = slugifyTitle(article.title);\n          return articleHash === currentHash || currentHash.endsWith(`-${article.id}`) || currentHash.endsWith(`:${article.id}`);\n        });\n        if (!currentHash.endsWith('-submit') && currentHash !== keywordSlug && !isArticleHash && !hasArticleInHash && !articleModalOpen && !isOpeningModalRef.current && !isClosingModalRef.current) {\n          window.history.replaceState(null, '', `#${keywordSlug}`);\n        }\n      }\n    }\n  }, [glossaryData, allArticles, articleModalOpen, parseGlossaryHash]);\n\n  const scrollToElement = useCallback((element, keywordId, retryCount = 0) => {\n    if (!element || retryCount > 15) {\n      isProgrammaticScroll.current = false;\n      isScrollingRef.current = false;\n      return;\n    }\n\n    isProgrammaticScroll.current = true;\n    isScrollingRef.current = true;\n\n    requestAnimationFrame(() => {\n      const itemRect = element.getBoundingClientRect();\n      const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      const itemTop = itemRect.top + currentScrollTop;\n      const itemHeight = itemRect.height;\n      const viewportHeight = window.innerHeight;\n      const targetScrollTop = Math.max(0, itemTop - (viewportHeight / 2) + (itemHeight / 2));\n\n      if (Math.abs(currentScrollTop - targetScrollTop) < 3) {\n        updateCenteredKeyword(keywordId);\n        isProgrammaticScroll.current = false;\n        isScrollingRef.current = false;\n        return;\n      }\n\n      window.scrollTo({\n        top: targetScrollTop,\n        behavior: 'smooth'\n      });\n\n      updateCenteredKeyword(keywordId);\n\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n\n      scrollTimeoutRef.current = setTimeout(() => {\n        const newScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        const newItemRect = element.getBoundingClientRect();\n        const newItemTop = newItemRect.top + newScrollTop;\n        const newTargetScrollTop = Math.max(0, newItemTop - (viewportHeight / 2) + (itemHeight / 2));\n        const distance = Math.abs(newScrollTop - newTargetScrollTop);\n\n        if (distance > 5 && retryCount < 10) {\n          scrollToElement(element, keywordId, retryCount + 1);\n        } else {\n          // Final scroll to exact position\n          window.scrollTo({\n            top: newTargetScrollTop,\n            behavior: 'auto'\n          });\n          updateCenteredKeyword(keywordId);\n          // Keep flags set a bit longer to prevent snap-to-nearest interference\n          setTimeout(() => {\n            isProgrammaticScroll.current = false;\n            isScrollingRef.current = false;\n          }, 200);\n        }\n      }, 1200);\n    });\n  }, [updateCenteredKeyword]);\n\n  const contributionsRef = useRef(null);\n  const isProgrammaticScroll = useRef(false);\n  const scrollVelocityRef = useRef(0);\n  const lastScrollTimeRef = useRef(0);\n  const lastScrollTopRef = useRef(0);\n  const isScrollingRef = useRef(false);\n  const scrollTimeoutRef = useRef(null);\n  const [keywordsWithArticles, setKeywordsWithArticles] = useState(['G6', 'G8', 'G9', 'G10', 'G11', 'G22', 'G30', 'G17']);\n  const isOverContributionsRef = useRef(false);\n  const isOverGlossaryRef = useRef(false);\n  const contributionsRefElement = useRef(null);\n  const scrollPositionBeforeModalRef = useRef(null);\n  const isClosingModalRef = useRef(false);\n  const skipHashNavigationUntilRef = useRef(0);\n  const isOpeningModalRef = useRef(false);\n  const keywordHashBeforeModalRef = useRef(null);\n\n  const LANDING_PAGE_NODE_ID = 'A1';\n\n  const currentKeywordTitle = useMemo(() => {\n    if (!centeredKeywordId || !glossaryData.length) {\n      return 'self-determination';\n    }\n    const keyword = glossaryData.find(k => k.id === centeredKeywordId);\n    return keyword?.title || 'self-determination';\n  }, [centeredKeywordId, glossaryData]);\n\n  useEffect(() => {\n    centeredKeywordIdRef.current = centeredKeywordId;\n  }, [centeredKeywordId]);\n\n  useEffect(() => {\n    const body = document.body;\n    const html = document.documentElement;\n\n    body.classList.add('glossary-page');\n    html.classList.add('glossary-page');\n\n    return () => {\n      body.classList.remove('glossary-page');\n      html.classList.remove('glossary-page');\n    };\n  }, []);\n\n\n  const handleHashNavigation = useCallback((hash) => {\n    if (!hash || !glossaryData.length) return;\n    \n    // Prevent interference from other scroll handlers or when closing modal\n    if (isScrollingRef.current || isProgrammaticScroll.current || isClosingModalRef.current || isOpeningModalRef.current) {\n      return;\n    }\n\n    const { keywordSlug: parsedKeywordSlug } = parseGlossaryHash(hash);\n    const keywordSlug = parsedKeywordSlug || hash;\n\n    if (keywordSlug.endsWith('-submit')) {\n      const keywordSlugClean = keywordSlug.replace('-submit', '');\n      const keyword = getKeywordBySlug(keywordSlugClean);\n      if (keyword) {\n        const attemptScroll = (attempt = 0) => {\n          if (attempt > 30) {\n            isProgrammaticScroll.current = false;\n            isScrollingRef.current = false;\n            return;\n          }\n\n          const element = document.getElementById(keyword.id) || itemRefs.current[keyword.id];\n          if (element) {\n            const rect = element.getBoundingClientRect();\n            if (rect.height > 0 && rect.width > 0) {\n              // Ensure we're not already scrolling\n              if (!isScrollingRef.current && !isProgrammaticScroll.current) {\n                scrollToElement(element, keyword.id);\n              }\n            } else {\n              setTimeout(() => attemptScroll(attempt + 1), 100);\n            }\n          } else {\n            setTimeout(() => attemptScroll(attempt + 1), 100);\n          }\n        };\n\n        // Longer delay when coming from modal to ensure DOM is ready\n        setTimeout(() => attemptScroll(), 500);\n      }\n      return;\n    }\n\n    const keyword = getKeywordBySlug(keywordSlug);\n    if (keyword) {\n      const attemptScroll = (attempt = 0) => {\n        if (attempt > 30) {\n          isProgrammaticScroll.current = false;\n          isScrollingRef.current = false;\n          return;\n        }\n\n        const element = document.getElementById(keyword.id) || itemRefs.current[keyword.id];\n        if (element) {\n          const rect = element.getBoundingClientRect();\n          if (rect.height > 0 && rect.width > 0) {\n            // Ensure we're not already scrolling\n            if (!isScrollingRef.current && !isProgrammaticScroll.current) {\n              scrollToElement(element, keyword.id);\n            }\n          } else {\n            setTimeout(() => attemptScroll(attempt + 1), 100);\n          }\n        } else {\n          setTimeout(() => attemptScroll(attempt + 1), 100);\n        }\n      };\n\n      // Longer delay when coming from modal to ensure DOM is ready\n      setTimeout(() => attemptScroll(), 500);\n      return;\n    }\n  }, [glossaryData, scrollToElement, allArticles, parseGlossaryHash]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined' || !glossaryData.length) return;\n\n    const hash = window.location.hash.substring(1);\n    if (hash && !isOpeningModalRef.current && !isClosingModalRef.current) {\n      handleHashNavigation(hash);\n    }\n\n    const handleHashChange = () => {\n      if (isOpeningModalRef.current || isClosingModalRef.current) {\n        return;\n      }\n      if (Date.now() < skipHashNavigationUntilRef.current) {\n        return;\n      }\n      const newHash = window.location.hash.substring(1);\n      if (newHash) {\n        handleHashNavigation(newHash);\n      }\n    };\n\n    window.addEventListener('hashchange', handleHashChange);\n    return () => {\n      window.removeEventListener('hashchange', handleHashChange);\n    };\n  }, [glossaryData.length, handleHashNavigation]);\n\n  useEffect(() => {\n    if (typeof window === 'undefined' || !glossaryData.length || !allArticles.length) return;\n\n    const hash = window.location.hash.substring(1);\n    if (!hash) return;\n\n    const isKeywordId = glossaryData.some(k => k.id === hash);\n    if (isKeywordId) return;\n\n    const { keywordSlug: parsedKeywordSlug, articleId: parsedArticleId } = parseGlossaryHash(hash);\n    let articleId = parsedArticleId;\n    const keywordSlug = parsedKeywordSlug;\n\n    const findArticleByHash = () => {\n      if (articleId) {\n        return allArticles.find(article => article.id === articleId);\n      }\n      return allArticles.find(article => {\n        if (!article.title) return false;\n        const articleHash = slugifyTitle(article.title);\n        return articleHash === hash;\n      });\n    };\n\n    const article = findArticleByHash();\n    if (article) {\n      setTimeout(() => {\n        const keywords = article.keywords && article.keywords.length > 0\n          ? article.keywords\n          : article.connectionKeywords\n            ? article.connectionKeywords.map((keyword, index) => {\n              const connectionId = article.connections && article.connections[index];\n              if (connectionId) {\n                const keywordInGlossary = glossaryData.find(k => k.id === connectionId);\n                if (keywordInGlossary) {\n                  const keywordSlug = slugifyTitle(keywordInGlossary.title);\n                  return {\n                    text: keyword,\n                    link: `/glossary#${keywordSlug}`\n                  };\n                }\n              }\n              return {\n                text: keyword,\n                link: null\n              };\n            })\n            : [];\n        setSelectedArticle({\n          id: article.id,\n          title: article.title,\n          author: article.author,\n          imageUrl: article.imageUrl,\n          content: article.content,\n          authorBio: article.authorBio || '',\n          keywords: keywords,\n          connectionKeywords: article.connectionKeywords || []\n        });\n        setArticleModalOpen(true);\n        \n        if (keywordSlug) {\n          const keyword = getKeywordBySlug(keywordSlug);\n          if (keyword) {\n            keywordHashBeforeModalRef.current = keywordSlug;\n            const isMobile = window.innerWidth <= 812;\n            if (isMobile && listRef.current) {\n              scrollPositionBeforeModalRef.current = listRef.current.scrollTop;\n            } else {\n              scrollPositionBeforeModalRef.current = window.pageYOffset || document.documentElement.scrollTop;\n            }\n          }\n        }\n      }, 1000);\n    }\n  }, [glossaryData, allArticles, parseGlossaryHash]);\n\n  // Load glossary data and articles from files\n  useEffect(() => {\n    Promise.all([\n      fetch('/data/glossary.json').then(res => res.json()),\n      fetch('/data/nodes.json').then(res => res.json()),\n      fetch('/data/glossary-connections.json').then(res => res.json()).catch(() => ({ glossary: {} }))\n    ])\n      .then(([glossaryData, nodesData, connectionsData]) => {\n        // Set articles\n        if (nodesData && nodesData.articles) {\n          setAllArticles(nodesData.articles);\n        }\n\n        // Merge glossary data with connections from glossary-connections.json\n        if (glossaryData && glossaryData.glossary) {\n          const connectionsMap = connectionsData.glossary || {};\n          \n          const formattedData = glossaryData.glossary.map((item) => ({\n            id: item.id,\n            title: item.title,\n            glossaryId: item.id,\n            connections: connectionsMap[item.id] || item.connections || [],\n            translations: item.translations || {}\n          }));\n          setGlossaryData(formattedData);\n        }\n\n        // Get landing page keywords\n        if (nodesData && nodesData.articles) {\n          const landingPageArticle = nodesData.articles.find(article => article.id === LANDING_PAGE_NODE_ID);\n          if (landingPageArticle && landingPageArticle.connections) {\n            const landingPageKeywords = landingPageArticle.connections\n              .filter(conn => conn.startsWith('G'))\n              .slice(0, 5);\n\n            if (landingPageKeywords.length > 0) {\n              setKeywordsWithArticles(prev => {\n                const combined = [...prev, ...landingPageKeywords];\n                return [...new Set(combined)];\n              });\n            }\n          }\n        }\n      })\n      .catch((err) => console.error('Failed to load data:', err));\n  }, []);\n\n  useEffect(() => {\n    if (typeof window !== 'undefined' && glossaryData && glossaryData.length > 0) {\n      // This effect is handled by the hashchange listener above\n      // Only handle initial load if no hash is present\n      // Skip if we're closing a modal to prevent unwanted scrolling\n      if (!window.location.hash && !isClosingModalRef.current && !isOpeningModalRef.current && !articleModalOpen) {\n        // When entering glossary page without a hash, stay at top and set first keyword as centered\n        // Do NOT scroll - just set the centered keyword without any scrolling behavior\n        setTimeout(() => {\n          const groups = {};\n          glossaryData.forEach((keyword) => {\n            const letter = getFirstLetter(keyword);\n            if (!groups[letter]) {\n              groups[letter] = [];\n            }\n            groups[letter].push(keyword);\n          });\n\n          Object.keys(groups).forEach(letter => {\n            groups[letter].sort((a, b) => a.title.localeCompare(b.title));\n          });\n\n          const sortedLetters = Object.keys(groups).sort((a, b) => {\n            if (a === '#') return 1;\n            if (b === '#') return -1;\n            return a.localeCompare(b);\n          });\n\n          const firstLetter = sortedLetters[0];\n          const firstKeyword = groups[firstLetter] && groups[firstLetter][0];\n\n          if (firstKeyword) {\n            // Just set the centered keyword without scrolling\n            // Ensure page stays at top\n            window.scrollTo({\n              top: 0,\n              behavior: 'instant'\n            });\n            \n            // Set the first keyword as centered without triggering scroll\n            updateCenteredKeyword(firstKeyword.id);\n          }\n        }, 200);\n      }\n    }\n  }, [glossaryData.length, updateCenteredKeyword]);\n\n  // Get related articles for the centered keyword - show for all keywords with connections\n  const relatedArticles = useMemo(() => {\n    if (!centeredKeywordId) {\n      return [];\n    }\n\n    // Find the current keyword in glossary data\n    const currentKeyword = glossaryData.find(k => k.id === centeredKeywordId);\n    if (!currentKeyword) {\n      return [];\n    }\n\n    // Show articles for any keyword that has connections\n    if (!currentKeyword.connections || currentKeyword.connections.length === 0) {\n      return [];\n    }\n\n    // Get articles that match the connections\n    const articleIds = currentKeyword.connections;\n    const articles = allArticles\n      .filter(article => articleIds.includes(article.id))\n      .map(article => {\n        const keywords = article.keywords && article.keywords.length > 0\n          ? article.keywords\n          : article.connectionKeywords\n            ? article.connectionKeywords.map((keyword, index) => {\n              const connectionId = article.connections && article.connections[index];\n              if (connectionId) {\n                const keywordInGlossary = glossaryData.find(k => k.id === connectionId);\n                if (keywordInGlossary) {\n                  const keywordSlug = slugifyTitle(keywordInGlossary.title);\n                  return {\n                    text: keyword,\n                    link: `/glossary#${keywordSlug}`\n                  };\n                }\n              }\n              return {\n                text: keyword,\n                link: null\n              };\n            })\n            : [];\n        return {\n          id: article.id,\n          title: article.title,\n          author: article.author,\n          imageUrl: article.imageUrl,\n          content: article.content,\n          authorBio: article.authorBio || '',\n          keywords: keywords,\n          connectionKeywords: article.connectionKeywords || []\n        };\n      });\n\n    return articles;\n  }, [centeredKeywordId, glossaryData, allArticles]);\n\n  const calculateWrapperHeights = useCallback(() => {\n    if (typeof window === 'undefined' || relatedArticles.length === 0) {\n      setWrapperMaxHeights({});\n      setWrapperMaxWidths({});\n      setWrapperMinWidths({});\n      return;\n    }\n\n    const isMobile = window.innerWidth <= 812;\n    \n    if (isMobile) {\n      const paddingBaseValue = 18;\n      const paddingBaseWidth = 834;\n      const padding = (window.innerWidth * paddingBaseValue) / paddingBaseWidth;\n      \n      const availableWidth = window.innerWidth - (padding * 2);\n      const numberOfWrappers = relatedArticles.length;\n      \n      const naturalWidthPerWrapper = availableWidth / 6;\n      const totalNaturalWidth = naturalWidthPerWrapper * numberOfWrappers;\n      const maxAllowedWidth = window.innerWidth - (padding * 2);\n      \n      if (numberOfWrappers > 5 && totalNaturalWidth > maxAllowedWidth && maxAllowedWidth > 0) {\n        const reductionFactor = 0.7;\n        const condensedWidthPerWrapper = (maxAllowedWidth / numberOfWrappers) * reductionFactor;\n        const minWidth = 50;\n        const finalWidth = Math.max(condensedWidthPerWrapper, minWidth);\n        \n        const maxWidths = {};\n        const minWidths = {};\n        relatedArticles.forEach((article) => {\n          maxWidths[article.id] = finalWidth;\n          minWidths[article.id] = minWidth;\n        });\n        setWrapperMaxWidths(maxWidths);\n        setWrapperMinWidths(minWidths);\n        setWrapperMaxHeights({});\n      } else {\n        setWrapperMaxWidths({});\n        setWrapperMinWidths({});\n        setWrapperMaxHeights({});\n      }\n      return;\n    }\n\n    const headerHeight = Math.min(window.innerHeight * 0.075, 96);\n    const titleHeight = Math.min(window.innerHeight * 0.12, 160);\n    const footerHeight = 0;\n    const extraPadding = Math.min(window.innerHeight * 0.03, 48);\n    const maxAllowedHeight = window.innerHeight - headerHeight - titleHeight - footerHeight - extraPadding;\n\n    const minStackHeight = 80;\n    const maxStackHeight = 240;\n    const vwHeight = window.innerWidth * 0.12;\n    const vhHeight = window.innerHeight * 0.12;\n    const imageStackHeightValue = Math.max(minStackHeight, Math.min(Math.min(vwHeight, vhHeight), maxStackHeight));\n    \n    const naturalHeightPerWrapper = imageStackHeightValue;\n    const numberOfWrappers = relatedArticles.length;\n    const totalNaturalHeight = naturalHeightPerWrapper * numberOfWrappers;\n\n    if (numberOfWrappers > 4 && totalNaturalHeight > maxAllowedHeight && maxAllowedHeight > 0) {\n      const scaleFactor = maxAllowedHeight / totalNaturalHeight;\n      const reductionFactor = 0.95;\n      const condensedHeight = naturalHeightPerWrapper * scaleFactor * reductionFactor;\n      \n      const heights = {};\n      relatedArticles.forEach((article) => {\n        heights[article.id] = condensedHeight;\n      });\n      setWrapperMaxHeights(heights);\n      setWrapperMaxWidths({});\n      setWrapperMinWidths({});\n    } else {\n      setWrapperMaxHeights({});\n      setWrapperMaxWidths({});\n      setWrapperMinWidths({});\n    }\n  }, [relatedArticles]);\n\n  useEffect(() => {\n    calculateWrapperHeights();\n  }, [calculateWrapperHeights]);\n\n  useEffect(() => {\n    if (!articleImagesStackRef.current) return;\n\n    const stack = articleImagesStackRef.current;\n    const hasCondensedHeights = Object.keys(wrapperMaxHeights).length > 0;\n    const hasCondensedWidths = Object.keys(wrapperMaxWidths).length > 0;\n    const isMobile = window.innerWidth <= 812;\n    \n    if (hasCondensedHeights || (hasCondensedWidths && isMobile)) {\n      stack.style.setProperty('--stack-overflow', 'hidden');\n    } else {\n      stack.style.setProperty('--stack-overflow', 'auto');\n    }\n  }, [wrapperMaxHeights, wrapperMaxWidths]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      calculateWrapperHeights();\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [calculateWrapperHeights]);\n\n  // Group keywords by first letter\n  const groupedKeywords = useMemo(() => {\n    const groups = {};\n    glossaryData.forEach((keyword) => {\n      const letter = getFirstLetter(keyword);\n      if (!groups[letter]) {\n        groups[letter] = [];\n      }\n      groups[letter].push(keyword);\n    });\n    return groups;\n  }, [glossaryData]);\n\n  // Flatten all keywords in display order (as they appear on screen)\n  const allKeywordsInOrder = useMemo(() => {\n    const ordered = [];\n    const sortedLetters = Object.keys(groupedKeywords).sort((a, b) => {\n      if (a === '#') return 1;\n      if (b === '#') return -1;\n      return a.localeCompare(b);\n    });\n\n    sortedLetters.forEach(letter => {\n      const keywords = groupedKeywords[letter];\n      if (keywords && keywords.length > 0) {\n        const sortedKeywords = [...keywords].sort((a, b) => a.title.localeCompare(b.title));\n        ordered.push(...sortedKeywords);\n      }\n    });\n\n    return ordered;\n  }, [groupedKeywords]);\n\n  // Ensure a keyword is always selected when keywords are available\n  useEffect(() => {\n    if (allKeywordsInOrder.length === 0) return;\n\n    const checkAndSetKeyword = () => {\n      if (isProgrammaticScroll.current || isOpeningModalRef.current || isClosingModalRef.current || articleModalOpen) return;\n\n      // If there's no hash on initial load, don't override the first keyword selection\n      // This prevents unwanted scrolling when entering the glossary page\n      const hasHash = typeof window !== 'undefined' && window.location.hash;\n      if (!hasHash && !centeredKeywordIdRef.current) {\n        // On initial load without hash, just set the first keyword without scrolling\n        if (allKeywordsInOrder.length > 0) {\n          updateCenteredKeyword(allKeywordsInOrder[0].id);\n        }\n        return;\n      }\n\n      const getCurrentKeyword = () => {\n        const viewportCenter = window.innerHeight / 2;\n        let nearestKeyword = null;\n        let minDistance = Infinity;\n        let firstVisibleKeyword = null;\n\n        allKeywordsInOrder.forEach((keyword) => {\n          const itemElement = itemRefs.current[keyword.id];\n          if (itemElement) {\n            const itemRect = itemElement.getBoundingClientRect();\n            const itemCenter = itemRect.top + itemRect.height / 2;\n            const distanceFromCenter = Math.abs(itemCenter - viewportCenter);\n\n            if (distanceFromCenter < minDistance) {\n              minDistance = distanceFromCenter;\n              nearestKeyword = keyword;\n            }\n\n            if (!firstVisibleKeyword && itemRect.top < window.innerHeight && itemRect.bottom > 0) {\n              firstVisibleKeyword = keyword;\n            }\n          }\n        });\n\n        return nearestKeyword || firstVisibleKeyword || allKeywordsInOrder[0];\n      };\n\n      const currentId = centeredKeywordIdRef.current;\n      if (currentId) {\n        const keywordExists = allKeywordsInOrder.some(k => k.id === currentId);\n        if (keywordExists) return;\n      }\n\n      const keyword = getCurrentKeyword();\n      if (keyword) {\n        updateCenteredKeyword(keyword.id);\n      } else if (allKeywordsInOrder.length > 0) {\n        updateCenteredKeyword(allKeywordsInOrder[0].id);\n      }\n    };\n\n    const timeoutId = setTimeout(checkAndSetKeyword, 300);\n    return () => clearTimeout(timeoutId);\n  }, [allKeywordsInOrder.length, updateCenteredKeyword]);\n\n  useEffect(() => {\n    if (allKeywordsInOrder.length === 0) return;\n\n    const snapToNearestCard = (scrollTop) => {\n      if (allKeywordsInOrder.length === 0 || isScrollingRef.current || isProgrammaticScroll.current || isOpeningModalRef.current || isClosingModalRef.current || articleModalOpen) return;\n\n      const viewportCenter = window.innerHeight / 2;\n      let nearestKeyword = null;\n      let minDistance = Infinity;\n\n      allKeywordsInOrder.forEach((keyword) => {\n        const itemElement = itemRefs.current[keyword.id];\n        if (itemElement) {\n          const itemRect = itemElement.getBoundingClientRect();\n          const itemCenter = itemRect.top + itemRect.height / 2;\n          const distanceFromCenter = Math.abs(itemCenter - viewportCenter);\n\n          if (distanceFromCenter < minDistance) {\n            minDistance = distanceFromCenter;\n            nearestKeyword = keyword;\n          }\n        }\n      });\n\n      if (nearestKeyword) {\n        const itemElement = itemRefs.current[nearestKeyword.id];\n        if (itemElement) {\n          isScrollingRef.current = true;\n          isProgrammaticScroll.current = true;\n\n          const itemRect = itemElement.getBoundingClientRect();\n          const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n          const itemTop = itemRect.top + currentScrollTop;\n          const itemHeight = itemRect.height;\n          const viewportHeight = window.innerHeight;\n          const targetScrollTop = itemTop - (viewportHeight / 2) + (itemHeight / 2);\n\n          window.scrollTo({\n            top: targetScrollTop,\n            behavior: 'smooth'\n          });\n\n          updateCenteredKeyword(nearestKeyword.id);\n\n          if (scrollTimeoutRef.current) {\n            clearTimeout(scrollTimeoutRef.current);\n          }\n\n          scrollTimeoutRef.current = setTimeout(() => {\n            isScrollingRef.current = false;\n            isProgrammaticScroll.current = false;\n          }, 500);\n        }\n      }\n    };\n\n    let ticking = false;\n    let lastScrollTop = 0;\n    let scrollEndTimer = null;\n\n    const getCurrentKeyword = () => {\n      const isMobile = listRef.current && window.innerWidth <= 812;\n      \n      let viewportCenter;\n      let containerRect;\n      \n      if (isMobile && listRef.current) {\n        containerRect = listRef.current.getBoundingClientRect();\n        viewportCenter = containerRect.top + containerRect.height / 2;\n      } else {\n        viewportCenter = window.innerHeight / 2;\n      }\n\n      let nearestKeyword = null;\n      let minDistance = Infinity;\n      let mostVisibleKeyword = null;\n      let maxVisibleArea = 0;\n\n      allKeywordsInOrder.forEach((keyword) => {\n        const itemElement = itemRefs.current[keyword.id];\n        if (itemElement) {\n          const itemRect = itemElement.getBoundingClientRect();\n          const itemCenter = itemRect.top + itemRect.height / 2;\n          const distanceFromCenter = Math.abs(itemCenter - viewportCenter);\n\n          if (distanceFromCenter < minDistance) {\n            minDistance = distanceFromCenter;\n            nearestKeyword = keyword;\n          }\n\n          if (isMobile && containerRect) {\n            const visibleTop = Math.max(itemRect.top, containerRect.top);\n            const visibleBottom = Math.min(itemRect.bottom, containerRect.bottom);\n            const visibleHeight = Math.max(0, visibleBottom - visibleTop);\n            const visibleArea = visibleHeight / itemRect.height;\n            \n            if (visibleArea > maxVisibleArea && visibleArea > 0.3) {\n              maxVisibleArea = visibleArea;\n              mostVisibleKeyword = keyword;\n            }\n          } else {\n            const visibleTop = Math.max(itemRect.top, 0);\n            const visibleBottom = Math.min(itemRect.bottom, window.innerHeight);\n            const visibleHeight = Math.max(0, visibleBottom - visibleTop);\n            const visibleArea = visibleHeight / itemRect.height;\n            \n            if (visibleArea > maxVisibleArea && visibleArea > 0.3) {\n              maxVisibleArea = visibleArea;\n              mostVisibleKeyword = keyword;\n            }\n          }\n        }\n      });\n\n      return mostVisibleKeyword || nearestKeyword || (allKeywordsInOrder.length > 0 ? allKeywordsInOrder[0] : null);\n    };\n\n\n      const handleScroll = () => {\n      if (document.body.hasAttribute('data-restoring-scroll')) {\n        ticking = false;\n        return;\n      }\n\n      // Don't interfere with programmatic scrolling from hash navigation or when modal is opening/closing\n      if (isProgrammaticScroll.current || isScrollingRef.current || isOpeningModalRef.current || isClosingModalRef.current || articleModalOpen) {\n        ticking = false;\n        return;\n      }\n\n      const isMobile = listRef.current && window.innerWidth <= 812;\n      const currentScrollTop = isMobile && listRef.current \n        ? listRef.current.scrollTop \n        : window.pageYOffset || document.documentElement.scrollTop;\n      const scrollDelta = Math.abs(currentScrollTop - lastScrollTop);\n\n      if (allKeywordsInOrder.length === 0) {\n        ticking = false;\n        return;\n      }\n\n      // On mobile, update more frequently for better responsiveness\n      if (isMobile) {\n        const visibleKeyword = getCurrentKeyword();\n        if (visibleKeyword && visibleKeyword.id !== centeredKeywordIdRef.current) {\n          updateCenteredKeyword(visibleKeyword.id);\n        }\n      } else {\n        if (scrollDelta < 5) {\n          ticking = false;\n          return;\n        }\n\n        const visibleKeyword = getCurrentKeyword();\n        if (visibleKeyword && visibleKeyword.id !== centeredKeywordIdRef.current) {\n          updateCenteredKeyword(visibleKeyword.id);\n        }\n      }\n\n      lastScrollTop = currentScrollTop;\n      ticking = false;\n    };\n\n    const onScroll = () => {\n      if (!ticking) {\n        window.requestAnimationFrame(handleScroll);\n        ticking = true;\n      }\n    };\n\n    const handleScrollEnd = () => {\n      if (isProgrammaticScroll.current || isScrollingRef.current || isOpeningModalRef.current || isClosingModalRef.current || articleModalOpen) return;\n      \n      // Always update on scroll end to ensure correct item is highlighted\n      const visibleKeyword = getCurrentKeyword();\n      if (visibleKeyword) {\n        updateCenteredKeyword(visibleKeyword.id);\n      }\n    };\n\n\n    const handleMouseMove = (e) => {\n      const x = e.clientX || 0;\n      const y = e.clientY || 0;\n      isOverContributionsRef.current = checkIfOverContributions(x, y);\n      isOverGlossaryRef.current = checkIfOverGlossary(x, y);\n    };\n\n    const handleTouchMove = (e) => {\n      if (e.touches && e.touches.length > 0) {\n        const touch = e.touches[0];\n        const x = touch.clientX || 0;\n        const y = touch.clientY || 0;\n        isOverContributionsRef.current = checkIfOverContributions(x, y);\n        isOverGlossaryRef.current = checkIfOverGlossary(x, y);\n      }\n      if (!ticking) {\n        window.requestAnimationFrame(handleScroll);\n        ticking = true;\n      }\n    };\n\n    const isMobile = window.innerWidth <= 812;\n    let scrollEndTimeout = null;\n    \n    const onScrollWithEndDetection = () => {\n      onScroll();\n      \n      if (scrollEndTimeout) {\n        clearTimeout(scrollEndTimeout);\n      }\n      \n      scrollEndTimeout = setTimeout(() => {\n        handleScrollEnd();\n      }, 150);\n    };\n    \n    if (isMobile && listRef.current) {\n      listRef.current.addEventListener('scroll', onScrollWithEndDetection, { passive: true });\n    } else {\n      window.addEventListener('scroll', onScrollWithEndDetection, { passive: true });\n    }\n    \n    window.addEventListener('touchmove', handleTouchMove, { passive: true });\n    window.addEventListener('resize', onScroll, { passive: true });\n    window.addEventListener('mousemove', handleMouseMove, { passive: true });\n\n    const ensureKeywordSelected = () => {\n      if (allKeywordsInOrder.length === 0) return;\n\n      // If there's no hash on initial load, don't override the first keyword selection\n      // This prevents unwanted scrolling when entering the glossary page\n      const hasHash = typeof window !== 'undefined' && window.location.hash;\n      if (!hasHash && !centeredKeywordIdRef.current && allKeywordsInOrder.length > 0) {\n        // On initial load without hash, just set the first keyword without scrolling\n        updateCenteredKeyword(allKeywordsInOrder[0].id);\n        return;\n      }\n\n      const keyword = getCurrentKeyword();\n      if (keyword) {\n        updateCenteredKeyword(keyword.id);\n      } else if (allKeywordsInOrder.length > 0) {\n        updateCenteredKeyword(allKeywordsInOrder[0].id);\n      }\n    };\n\n    setTimeout(() => {\n      // Don't trigger scroll handling on initial load if there's no hash\n      const hasHash = typeof window !== 'undefined' && window.location.hash;\n      if (!hasHash && !centeredKeywordIdRef.current) {\n        // Just ensure first keyword is selected without scrolling\n        ensureKeywordSelected();\n        return;\n      }\n      \n      if (!isProgrammaticScroll.current) {\n        handleScroll();\n      }\n      ensureKeywordSelected();\n    }, 100);\n\n    return () => {\n      if (isMobile && listRef.current) {\n        listRef.current.removeEventListener('scroll', onScrollWithEndDetection);\n      } else {\n        window.removeEventListener('scroll', onScrollWithEndDetection);\n      }\n      window.removeEventListener('touchmove', handleTouchMove);\n      window.removeEventListener('resize', onScroll);\n      window.removeEventListener('mousemove', handleMouseMove);\n      if (scrollEndTimer) {\n        clearTimeout(scrollEndTimer);\n      }\n      if (scrollEndTimeout) {\n        clearTimeout(scrollEndTimeout);\n      }\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n    };\n  }, [allKeywordsInOrder, groupedKeywords]);\n\n  const scrollToSection = (letter) => {\n    const firstKeywordForLetter = allKeywordsInOrder.find((k) => getFirstLetter(k) === letter);\n    if (firstKeywordForLetter) {\n      const firstKeywordId = firstKeywordForLetter.id;\n\n      const attemptScroll = (attempt = 0) => {\n        if (attempt > 20) return;\n\n        const itemElement = itemRefs.current[firstKeywordId] || document.getElementById(firstKeywordId);\n        if (itemElement) {\n          const isMobile = window.innerWidth <= 812;\n          if (isMobile && listRef.current) {\n            isProgrammaticScroll.current = true;\n            const containerRect = listRef.current.getBoundingClientRect();\n            const itemRect = itemElement.getBoundingClientRect();\n            const scrollTop = listRef.current.scrollTop;\n            const containerHeight = containerRect.height;\n            const itemHeight = itemRect.height;\n            \n            const itemTopRelative = itemRect.top - containerRect.top + scrollTop;\n            const targetScrollTop = itemTopRelative - (containerHeight / 2) + (itemHeight / 2);\n            \n            listRef.current.scrollTo({\n              top: Math.max(0, targetScrollTop),\n              behavior: 'smooth'\n            });\n            \n            updateCenteredKeyword(firstKeywordId);\n            \n            setTimeout(() => {\n              isProgrammaticScroll.current = false;\n            }, 500);\n          } else {\n            scrollToElement(itemElement, firstKeywordId);\n          }\n        } else {\n          setTimeout(() => attemptScroll(attempt + 1), 50);\n        }\n      };\n\n      attemptScroll();\n    }\n  };\n\n  const getLetterFromTouch = (clientY) => {\n    if (!alphabetBarRef.current) return null;\n    \n    const barRect = alphabetBarRef.current.getBoundingClientRect();\n    const buttons = alphabetBarRef.current.querySelectorAll('button:not(:disabled)');\n    if (buttons.length === 0) return null;\n    \n    let closestLetter = null;\n    let minDistance = Infinity;\n    \n    buttons.forEach((button) => {\n      const buttonRect = button.getBoundingClientRect();\n      const buttonCenter = buttonRect.top + buttonRect.height / 2;\n      const distance = Math.abs(clientY - buttonCenter);\n      \n      if (distance < minDistance && clientY >= buttonRect.top && clientY <= buttonRect.bottom) {\n        minDistance = distance;\n        closestLetter = button.textContent.trim();\n      }\n    });\n    \n    return closestLetter;\n  };\n\n  const handleAlphabetTouchStart = (e) => {\n    alphabetTouchActiveRef.current = true;\n    const touch = e.touches[0];\n    const letter = getLetterFromTouch(touch.clientY);\n    if (letter && groupedKeywords[letter] && groupedKeywords[letter].length > 0) {\n      setAlphabetPreview(letter);\n      scrollToSection(letter);\n    }\n  };\n\n  const handleAlphabetTouchMove = (e) => {\n    if (!alphabetTouchActiveRef.current) return;\n    e.preventDefault();\n    const touch = e.touches[0];\n    const letter = getLetterFromTouch(touch.clientY);\n    if (letter && groupedKeywords[letter] && groupedKeywords[letter].length > 0) {\n      setAlphabetPreview(letter);\n      scrollToSection(letter);\n    }\n  };\n\n  const handleAlphabetTouchEnd = () => {\n    alphabetTouchActiveRef.current = false;\n    setTimeout(() => {\n      setAlphabetPreview(null);\n    }, 300);\n  };\n\n  const scrollToKeyword = (keywordId) => {\n    if (isProgrammaticScroll.current || isScrollingRef.current) return;\n\n    const itemElement = itemRefs.current[keywordId];\n    if (itemElement) {\n      scrollToElement(itemElement, keywordId);\n    }\n  };\n\n\n  const handleMouseEnterGlossary = useCallback(() => {\n    isOverContributionsRef.current = false;\n    isOverGlossaryRef.current = true;\n  }, []);\n\n  const checkIfOverContributions = (x, y) => {\n    if (!contributionsRefElement.current) {\n      const contributionsContainer = document.querySelector('[class*=\"contributionsContainer\"]');\n      if (contributionsContainer) {\n        contributionsRefElement.current = contributionsContainer;\n      }\n    }\n    \n    if (contributionsRefElement.current) {\n      const rect = contributionsRefElement.current.getBoundingClientRect();\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    }\n    \n    return false;\n  };\n\n  const checkIfOverGlossary = (x, y) => {\n    const elementToCheck = listRef.current || containerRef.current;\n    if (elementToCheck) {\n      const rect = elementToCheck.getBoundingClientRect();\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    }\n    \n    return false;\n  };\n\n  const handleMouseLeaveGlossary = useCallback((e) => {\n    const x = e?.clientX || e?.nativeEvent?.clientX || 0;\n    const y = e?.clientY || e?.nativeEvent?.clientY || 0;\n    isOverContributionsRef.current = checkIfOverContributions(x, y);\n    isOverGlossaryRef.current = checkIfOverGlossary(x, y);\n  }, []);\n\n  // Handle submit click - open submit form in Contributions component\n  const handleSubmitClick = () => {\n    if (contributionsRef.current) {\n      contributionsRef.current.openSubmitForm();\n    }\n  };\n\n  // Handle article image click - open modal\n  const handleArticleClick = (article) => {\n    isOpeningModalRef.current = true;\n    isProgrammaticScroll.current = true;\n    isScrollingRef.current = true;\n    \n    const isMobile = window.innerWidth <= 812;\n    let savedScrollTop;\n    if (isMobile && listRef.current) {\n      savedScrollTop = listRef.current.scrollTop;\n      scrollPositionBeforeModalRef.current = savedScrollTop;\n    } else {\n      savedScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      scrollPositionBeforeModalRef.current = savedScrollTop;\n    }\n    \n    const currentKeywordId = centeredKeywordIdRef.current || centeredKeywordId;\n    if (currentKeywordId && glossaryData.length > 0) {\n      const keyword = glossaryData.find(k => k.id === currentKeywordId);\n      if (keyword) {\n        keywordHashBeforeModalRef.current = slugifyTitle(keyword.title);\n      }\n    }\n    \n    if (!keywordHashBeforeModalRef.current) {\n      const currentHash = window.location.hash.substring(1);\n      const { keywordSlug: parsedSlug } = parseGlossaryHash(currentHash);\n      const currentKeyword = getKeywordBySlug(parsedSlug || currentHash);\n      if (currentKeyword) {\n        keywordHashBeforeModalRef.current = slugifyTitle(currentKeyword.title);\n      }\n    }\n    \n    const preventScroll = (e) => {\n      if (isMobile && listRef.current) {\n        listRef.current.scrollTop = savedScrollTop;\n      } else {\n        window.scrollTo(0, savedScrollTop);\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    };\n    \n    if (isMobile && listRef.current) {\n      listRef.current.addEventListener('scroll', preventScroll, { passive: false, capture: true });\n    } else {\n      window.addEventListener('scroll', preventScroll, { passive: false, capture: true });\n    }\n    \n    setSelectedArticle(article);\n    setArticleModalOpen(true);\n    \n    requestAnimationFrame(() => {\n      if (keywordHashBeforeModalRef.current && article.id) {\n        window.history.replaceState(null, '', `#${keywordHashBeforeModalRef.current}:${article.id}`);\n      }\n      // Never set hash to article-only (#A2) â€“ keeps feed stable and avoids jumping\n      \n      setTimeout(() => {\n        if (isMobile && listRef.current) {\n          listRef.current.removeEventListener('scroll', preventScroll, { capture: true });\n        } else {\n          window.removeEventListener('scroll', preventScroll, { capture: true });\n        }\n        isOpeningModalRef.current = false;\n        isProgrammaticScroll.current = false;\n        isScrollingRef.current = false;\n      }, 600);\n    });\n  };\n\n  // Close article modal â€“ remove :AXX from param, restore keyword hash, then instant jump to that keyword position\n  const handleCloseArticleModal = () => {\n    isClosingModalRef.current = true;\n    isProgrammaticScroll.current = true;\n    isScrollingRef.current = true;\n    \n    const keywordSlug = keywordHashBeforeModalRef.current;\n    setArticleModalOpen(false);\n    setSelectedArticle(null);\n    scrollPositionBeforeModalRef.current = null;\n\n    if (keywordSlug) {\n      skipHashNavigationUntilRef.current = Date.now() + 1200;\n      window.history.replaceState(null, '', `#${keywordSlug}`);\n      keywordHashBeforeModalRef.current = null;\n    }\n\n    const doInstantScrollToKeyword = () => {\n      if (!keywordSlug) return;\n      const keyword = getKeywordBySlug(keywordSlug);\n      if (!keyword) return;\n      const itemElement = itemRefs.current[keyword.id] || (typeof document !== 'undefined' ? document.getElementById(keyword.id) : null);\n      if (!itemElement) return;\n      const isMobile = typeof window !== 'undefined' && window.innerWidth <= 812;\n      if (isMobile && listRef.current) {\n        const containerRect = listRef.current.getBoundingClientRect();\n        const itemRect = itemElement.getBoundingClientRect();\n        const scrollTop = listRef.current.scrollTop;\n        const itemTopRelative = itemRect.top - containerRect.top + scrollTop;\n        const targetScrollTop = itemTopRelative - (containerRect.height / 2) + (itemRect.height / 2);\n        listRef.current.scrollTo({ top: Math.max(0, targetScrollTop), behavior: 'auto' });\n      } else {\n        const itemRect = itemElement.getBoundingClientRect();\n        const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        const itemTop = itemRect.top + currentScrollTop;\n        const targetScrollTop = Math.max(0, itemTop - (window.innerHeight / 2) + (itemRect.height / 2));\n        window.scrollTo({ top: targetScrollTop, left: 0, behavior: 'auto' });\n      }\n      updateCenteredKeyword(keyword.id);\n    };\n\n    requestAnimationFrame(() => {\n      doInstantScrollToKeyword();\n      requestAnimationFrame(() => {\n        doInstantScrollToKeyword();\n        setTimeout(() => {\n          isClosingModalRef.current = false;\n          isProgrammaticScroll.current = false;\n          isScrollingRef.current = false;\n        }, 200);\n      });\n    });\n  };\n\n  const articleImagesStackContent = relatedArticles.length > 0 ? (\n    <div \n      className={styles.articleImagesStack} \n      ref={articleImagesStackRef}\n    >\n      {relatedArticles.map((article) => {\n        const isSelected = selectedArticle && selectedArticle.id === article.id;\n        const isMobile = typeof window !== 'undefined' && window.innerWidth <= 812;\n        const maxHeight = !isMobile && wrapperMaxHeights[article.id] ? `${wrapperMaxHeights[article.id]}px` : undefined;\n        const maxWidth = isMobile && wrapperMaxWidths[article.id] ? `${wrapperMaxWidths[article.id]}px` : undefined;\n        const minWidth = isMobile && wrapperMinWidths[article.id] ? `${wrapperMinWidths[article.id]}px` : undefined;\n        const style = {};\n        if (maxHeight) style.maxHeight = maxHeight;\n        if (maxWidth) style.maxWidth = maxWidth;\n        if (minWidth) style.minWidth = minWidth;\n        \n        return (\n          <div\n            key={article.id}\n            className={`${styles.articleImageWrapper} ${isSelected ? styles.selected : ''} ${!article.imageUrl ? styles.imagePlaceholder : ''\n              }`}\n            onClick={() => handleArticleClick(article)}\n            style={Object.keys(style).length > 0 ? style : undefined}\n          >\n            {article.imageUrl ? (\n              <div className={styles.imageContainer}>\n                <img\n                  src={article.imageUrl}\n                  alt=\"\"\n                  className={`${styles.articleImagePlaceholder} ${styles.articleImage}`}\n                  aria-hidden=\"true\"\n                  loading=\"eager\"\n                />\n                <img\n                  src={article.imageUrl}\n                  alt={article.title || article.id}\n                  className={`${styles.articleImage} ${styles.articleImageFull}`}\n                  loading=\"lazy\"\n                  onError={(e) => {\n                    e.target.style.display = 'none';\n                    const placeholder = e.target.previousElementSibling;\n                    if (placeholder) {\n                      placeholder.style.display = 'none';\n                    }\n                    const wrapper = e.target.closest(`.${styles.articleImageWrapper}`);\n                    if (wrapper) {\n                      wrapper.classList.add(styles.imagePlaceholder);\n                    }\n                  }}\n                  onLoad={(e) => {\n                    e.target.classList.add(styles.imageLoaded);\n                    const placeholder = e.target.previousElementSibling;\n                    if (placeholder && placeholder.classList.contains(styles.articleImagePlaceholder)) {\n                      placeholder.style.opacity = '0';\n                      setTimeout(() => {\n                        placeholder.style.display = 'none';\n                      }, 200);\n                    }\n                    if (articleImagesStackRef.current) {\n                      setTimeout(() => {\n                        calculateWrapperHeights();\n                      }, 100);\n                    }\n                  }}\n                />\n              </div>\n            ) : null}\n          </div>\n        );\n      })}\n    </div>\n  ) : null;\n\n  return (\n    <div className={styles.glossaryContainer} ref={containerRef}>\n      {/* Article Images Stack - Rendered via Portal to ensure proper z-index stacking */}\n      {typeof window !== 'undefined' && articleImagesStackContent\n        ? createPortal(articleImagesStackContent, document.body)\n        : articleImagesStackContent}\n\n      {/* Article Modal */}\n      <Modal\n        isOpen={articleModalOpen}\n        onRequestClose={handleCloseArticleModal}\n        contentLabel=\"Article Modal\"\n        className=\"archive-modal-content\"\n        overlayClassName=\"archive-modal-overlay\"\n        shouldCloseOnOverlayClick={true}\n        shouldCloseOnEsc={true}\n        bodyOpenClassName=\"archive-modal-open\"\n        htmlOpenClassName=\"archive-modal-open\"\n      >\n        {selectedArticle && (\n          <ArchiveModal\n            title={selectedArticle.title}\n            author={selectedArticle.author}\n            content={selectedArticle.content}\n            img={selectedArticle.imageUrl}\n            authorBio={selectedArticle.authorBio}\n            keywords={selectedArticle.keywords}\n            closeModal={handleCloseArticleModal}\n          />\n        )}\n      </Modal>\n\n      {/* Keywords List - Scrollable */}\n      <ul\n        className={styles.glossaryList}\n        ref={listRef}\n        onMouseEnter={handleMouseEnterGlossary}\n        onMouseLeave={handleMouseLeaveGlossary}\n        onTouchStart={(e) => {\n          isOverContributionsRef.current = false;\n        }}\n        onTouchMove={(e) => {\n          isOverContributionsRef.current = false;\n        }}\n        onWheel={(e) => {\n          isOverContributionsRef.current = false;\n        }}\n      >\n        {allKeywordsInOrder.map((keyword) => {\n          const isCentered = centeredKeywordId === keyword.id;\n          return (\n            <li\n              key={keyword.id}\n              id={keyword.id}\n              ref={(el) => (itemRefs.current[keyword.id] = el)}\n              className={`${styles.glossaryItem} ${isCentered ? styles.glossaryItemCentered : styles.glossaryItemDimmed}`}\n              onClick={() => scrollToKeyword(keyword.id)}\n              data-keyword-id={keyword.id}\n              data-index={keyword.index}\n            >\n              <div className={styles.glossaryItemNumber}>{keyword.index}</div>\n              {LANGUAGE_ORDER.map((langKey, langIndex) => {\n                const translation = keyword.translations[langKey];\n                if (!translation) return null;\n                const isLast = langIndex === LANGUAGE_ORDER.length - 1 ||\n                  !LANGUAGE_ORDER.slice(langIndex + 1).some(nextLang => keyword.translations[nextLang]);\n                return (\n                  <div key={langKey} className={`${styles.glossaryTranslation} ${!isLast ? styles.glossaryTranslationWithBorder : ''}`}>\n                    {translation}\n                  </div>\n                );\n              })}\n            </li>\n          );\n        })}\n      </ul>\n\n      {/* Alphabet Navigation Bar */}\n      <div \n        className={styles.alphabetBar}\n        ref={alphabetBarRef}\n        onTouchStart={handleAlphabetTouchStart}\n        onTouchMove={handleAlphabetTouchMove}\n        onTouchEnd={handleAlphabetTouchEnd}\n      >\n        {alphabet.map((letter) => {\n          const hasKeywords = groupedKeywords[letter] && groupedKeywords[letter].length > 0;\n          const currentKeyword = centeredKeywordId ? glossaryData.find(k => k.id === centeredKeywordId) : null;\n          const currentLetter = currentKeyword ? getFirstLetter(currentKeyword) : null;\n          const isActive = currentLetter === letter;\n          return (\n            <button\n              key={letter}\n              className={`${styles.alphabetLetter} ${!hasKeywords ? styles.alphabetLetterDisabled : ''} ${isActive ? styles.alphabetLetterActive : ''}`}\n              onClick={() => hasKeywords && scrollToSection(letter)}\n              disabled={!hasKeywords}\n            >\n              {letter}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Alphabet Preview Popup */}\n      {alphabetPreview && (\n        <div className={styles.alphabetPreview}>\n          {alphabetPreview}\n        </div>\n      )}\n\n      {/* Navigation Controls - Info Button */}\n      <NavigationControls\n        onSubmitEntry={handleSubmitClick}\n        currentKeywordTitle={currentKeywordTitle}\n      />\n\n      {/* Contributions Section */}\n      <Contributions\n        ref={contributionsRef}\n        currentKeywordId={centeredKeywordId}\n        glossaryData={glossaryData}\n        onSubmitClick={handleSubmitClick}\n      />\n    </div>\n  );\n}\n\n","export { default as NavigationControls } from './NavigationControls';\n\n\n\n\n\n\n\n\n\n","'use client';\n\nimport React, { useMemo, useState, useImperativeHandle, forwardRef } from 'react';\nimport styles from './contributions.module.scss';\nimport contributionsData from './contributions.json';\n\nconst Contributions = forwardRef(function Contributions({ currentKeywordId, glossaryData, onSubmitClick }, ref) {\n  const [showSubmitForm, setShowSubmitForm] = useState(false);\n\n  useImperativeHandle(ref, () => ({\n    openSubmitForm: () => {\n      setShowSubmitForm(true);\n    }\n  }));\n\n  const currentKeyword = useMemo(() => {\n    if (!currentKeywordId || !glossaryData || glossaryData.length === 0) {\n      return null;\n    }\n    return glossaryData.find(k => k.id === currentKeywordId);\n  }, [currentKeywordId, glossaryData]);\n\n  const keywordTitle = currentKeyword?.title || 'self-determination';\n  const keywordId = currentKeyword?.id || 'G1';\n  const hasInterpretations = contributionsData[keywordId] !== undefined;\n  const interpretations = hasInterpretations ? contributionsData[keywordId].interpretations : [];\n\n  const handleSubmitClick = () => {\n    const submitButton = document.querySelector('.navigation-button.navigation-button-submit');\n    if (submitButton) {\n      submitButton.click();\n    } else {\n      setShowSubmitForm(true);\n      if (onSubmitClick) {\n        onSubmitClick();\n      }\n    }\n  };\n\n  return (\n    <div className={styles.contributionsContainer}>\n      {showSubmitForm ? (\n        <div className={styles.submitForm}>\n          <h2 className={styles.title}>Submit Your Interpretation</h2>\n          <p className={styles.subtitle} onClick={handleSubmitClick}>\n            Share your interpretation of{' '}\n            <span className={styles.keywordName}>{keywordTitle}</span>\n          </p>\n\n        </div>\n      ) : hasInterpretations ? (\n        <div className={styles.interpretationsContent}>\n          <h2 className={styles.title}>Interpretations:</h2>\n          <div className={styles.interpretationsList}>\n            {interpretations.map((interpretation, index) => (\n              <React.Fragment key={interpretation.id}>\n                <div className={styles.interpretationItem}>\n                  <p className={styles.interpretationText}>\n                    {interpretation.content} - <span>{interpretation.author}</span>\n                  </p>\n                </div>\n                {index < interpretations.length - 1 && (\n                  <div className={styles.interpretationDivider}></div>\n                )}\n              </React.Fragment>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div className={styles.emptyState}>\n          <h2 className={styles.title}>Interpretations:</h2>\n          <p className={styles.subtitle} onClick={handleSubmitClick}>\n            Submit your interpretation of{' '}\n            <span className={styles.keywordName}>{keywordTitle}</span>\n          </p>\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default Contributions;\n","/**\n * Glossary page route (/glossary) - Next.js App Router\n * \n * This page displays the glossary content with keywords in multiple languages.\n */\n'use client';\n\nimport GlossaryList from '../../components/glossary/GlossaryList';\n\nexport default function GlossaryPage() {\n  return <GlossaryList />;\n}\n\n"],"names":[],"mappings":"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"}