(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66459,e=>{"use strict";let t;var n=e.i(47167);let o=(t=0,()=>(t+=1,"u".concat("0000".concat((1679616*Math.random()|0).toString(36)).slice(-4)).concat(t)));function a(e){let t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}let r=null;function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r||(r=e.includeStyleProperties?e.includeStyleProperties:a(window.getComputedStyle(document.documentElement)))}function l(e,t){let n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function s(e){let t,n,o,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{width:r.width||(t=l(e,"border-left-width"),n=l(e,"border-right-width"),e.clientWidth+t+n),height:r.height||(o=l(e,"border-top-width"),a=l(e,"border-bottom-width"),e.clientHeight+o+a)}}function c(e){return new Promise((t,n)=>{let o=new Image;o.onload=()=>{o.decode().then(()=>{requestAnimationFrame(()=>t(o))})},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e})}async function u(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>"data:image/svg+xml;charset=utf-8,".concat(e))}async function d(e,t,n){let o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return a.setAttribute("width","".concat(t)),a.setAttribute("height","".concat(n)),a.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),a.appendChild(r),r.appendChild(e),u(a)}let h=(e,t)=>{if(e instanceof t)return!0;let n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||h(n,t))};function m(e,t,n,a){let r,l,s,c=window.getComputedStyle(e,n),u=c.getPropertyValue("content");if(""===u||"none"===u)return;let d=o();try{t.className="".concat(t.className," ").concat(d)}catch(e){return}let h=document.createElement("style");h.appendChild((r=".".concat(d,":").concat(n),s=c.cssText?(l=c.getPropertyValue("content"),"".concat(c.cssText," content: '").concat(l.replace(/'|"/g,""),"';")):i(a).map(e=>{let t=c.getPropertyValue(e),n=c.getPropertyPriority(e);return"".concat(e,": ").concat(t).concat(n?" !important":"",";")}).join(" "),document.createTextNode("".concat(r,"{").concat(s,"}")))),t.appendChild(h)}let f="application/font-woff",p="image/jpeg",g={woff:f,woff2:f,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:p,jpeg:p,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function y(e){let t;return g[((t=/\.([^./]*?)$/g.exec(e))?t[1]:"").toLowerCase()]||""}function w(e){return -1!==e.search(/^(data:)/)}function b(e,t){return"data:".concat(t,";base64,").concat(e)}async function v(e,t,n){let o=await fetch(e,t);if(404===o.status)throw Error('Resource "'.concat(o.url,'" not found'));let a=await o.blob();return new Promise((e,t)=>{let r=new FileReader;r.onerror=t,r.onloadend=()=>{try{e(n({res:o,result:r.result}))}catch(e){t(e)}},r.readAsDataURL(a)})}let x={};async function C(e,t,n){var o,a,r;let i,l,s=(o=e,a=t,r=n.includeQueryParams,l=o.replace(/\?.*/,""),r&&(l=o),/ttf|otf|eot|woff2?/i.test(l)&&(l=l.replace(/.*\//,"")),a?"[".concat(a,"]").concat(l):l);if(null!=x[s])return x[s];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());try{let o=await v(e,n.fetchRequestInit,e=>{let{res:n,result:o}=e;return t||(t=n.headers.get("Content-Type")||""),o.split(/,/)[1]});i=b(o,t)}catch(o){i=n.imagePlaceholder||"";let t="Failed to fetch resource: ".concat(e);o&&(t="string"==typeof o?o:o.message),t&&console.warn(t)}return x[s]=i,i}async function S(e){let t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):c(t)}async function k(e,t){if(e.currentSrc){let t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),c(t.toDataURL())}let n=e.poster,o=y(n);return c(await C(n,o,t))}async function j(e,t){var n;try{if(null==(n=null==e?void 0:e.contentDocument)?void 0:n.body)return await L(e.contentDocument.body,t,!0)}catch(e){}return e.cloneNode(!1)}async function E(e,t){return h(e,HTMLCanvasElement)?S(e):h(e,HTMLVideoElement)?k(e,t):h(e,HTMLIFrameElement)?j(e,t):e.cloneNode(N(e))}let N=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();async function P(e,t,n){var o,r;if(N(t))return t;let i=[];return 0===(i=null!=e.tagName&&"SLOT"===e.tagName.toUpperCase()&&e.assignedNodes?a(e.assignedNodes()):h(e,HTMLIFrameElement)&&(null==(o=e.contentDocument)?void 0:o.body)?a(e.contentDocument.body.childNodes):a((null!=(r=e.shadowRoot)?r:e).childNodes)).length||h(e,HTMLVideoElement)||await i.reduce((e,o)=>e.then(()=>L(o,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}async function T(e,t){let n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;let o={};for(let a=0;a<n.length;a++){let r=n[a].getAttribute("xlink:href");if(r){let n=e.querySelector(r),a=document.querySelector(r);n||!a||o[r]||(o[r]=await L(a,t,!0))}}let a=Object.values(o);if(a.length){let t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";let o=document.createElementNS(t,"defs");n.appendChild(o);for(let e=0;e<a.length;e++)o.appendChild(a[e]);e.appendChild(n)}return e}async function L(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>E(e,t)).then(n=>P(e,n,t)).then(n=>(function(e,t,n){if(h(t,Element)&&(!function(e,t,n){let o=t.style;if(!o)return;let a=window.getComputedStyle(e);a.cssText?(o.cssText=a.cssText,o.transformOrigin=a.transformOrigin):i(n).forEach(n=>{let r=a.getPropertyValue(n);if("font-size"===n&&r.endsWith("px")){let e=Math.floor(parseFloat(r.substring(0,r.length-2)))-.1;r="".concat(e,"px")}h(e,HTMLIFrameElement)&&"display"===n&&"inline"===r&&(r="block"),"d"===n&&t.getAttribute("d")&&(r="path(".concat(t.getAttribute("d"),")")),o.setProperty(n,r,a.getPropertyPriority(n))})}(e,t,n),m(e,t,":before",n),m(e,t,":after",n),h(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),h(e,HTMLInputElement)&&t.setAttribute("value",e.value),h(e,HTMLSelectElement))){let n=Array.from(t.children).find(t=>e.value===t.getAttribute("value"));n&&n.setAttribute("selected","")}return t})(e,n,t)).then(e=>T(e,t)):null}let R=/url\((['"]?)([^'"]+?)\1\)/g,I=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,O=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function M(e,t,n,o,a){try{let r,i,l=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let n=document.implementation.createHTMLDocument(),o=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(a),t&&(o.href=t),a.href=e,a.href}(t,n):t,s=y(t);if(a){let e=await a(l);r=b(e,s)}else r=await C(l,s,o);return e.replace((i=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),RegExp("(url\\(['\"]?)(".concat(i,")(['\"]?\\))"),"g")),"$1".concat(r,"$3"))}catch(e){}return e}function A(e){return -1!==e.search(R)}async function _(e,t,n){let o;if(!A(e))return e;let a=function(e,t){let{preferredFontFormat:n}=t;return n?e.replace(O,e=>{for(;;){let[t,,o]=I.exec(e)||[];if(!o)return"";if(o===n)return"src: ".concat(t,";")}}):e}(e,n);return(o=[],a.replace(R,(e,t,n)=>(o.push(n),e)),o.filter(e=>!w(e))).reduce((e,o)=>e.then(e=>M(e,o,t,n)),Promise.resolve(a))}async function H(e,t,n){var o;let a=null==(o=t.style)?void 0:o.getPropertyValue(e);if(a){let o=await _(a,null,n);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function F(e,t){await H("background",e,t)||await H("background-image",e,t),await H("mask",e,t)||await H("-webkit-mask",e,t)||await H("mask-image",e,t)||await H("-webkit-mask-image",e,t)}async function B(e,t){let n=h(e,HTMLImageElement);if(!(n&&!w(e.src))&&!(h(e,SVGImageElement)&&!w(e.href.baseVal)))return;let o=n?e.src:e.href.baseVal,a=await C(o,y(o),t);await new Promise((o,r)=>{e.onload=o,e.onerror=t.onImageErrorHandler?function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];try{o(t.onImageErrorHandler(...n))}catch(e){r(e)}}:r,e.decode&&(e.decode=o),"lazy"===e.loading&&(e.loading="eager"),n?(e.srcset="",e.src=a):e.href.baseVal=a})}async function D(e,t){let n=a(e.childNodes).map(e=>V(e,t));await Promise.all(n).then(()=>e)}async function V(e,t){h(e,Element)&&(await F(e,t),await B(e,t),await D(e,t))}let q={};async function U(e){let t=q[e];if(null!=t)return t;let n=await fetch(e);return t={url:e,cssText:await n.text()},q[e]=t,t}async function W(e,t){let n=e.cssText,o=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((n.match(/url\([^)]+\)/g)||[]).map(async a=>{let r=a.replace(o,"$1");return r.startsWith("https://")||(r=new URL(r,e.url).href),v(r,t.fetchRequestInit,e=>{let{result:t}=e;return n=n.replace(a,"url(".concat(t,")")),[a,t]})})).then(()=>n)}function K(e){if(null==e)return[];let t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),o=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let e=o.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(o,"");let a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,r=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=a.exec(n);if(null===e){if(null===(e=r.exec(n)))break;a.lastIndex=r.lastIndex}else r.lastIndex=a.lastIndex;t.push(e[0])}return t}async function $(e,t){let n=[],o=[];return e.forEach(n=>{if("cssRules"in n)try{a(n.cssRules||[]).forEach((e,a)=>{if(e.type===CSSRule.IMPORT_RULE){let r=a+1,i=e.href,l=U(i).then(e=>W(e,t)).then(e=>K(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?r+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});o.push(l)}})}catch(r){let a=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&o.push(U(n.href).then(e=>W(e,t)).then(e=>K(e).forEach(e=>{a.insertRule(e,a.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",r)}}),Promise.all(o).then(()=>(e.forEach(e=>{if("cssRules"in e)try{a(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error("Error while reading CSS rules from ".concat(e.href),t)}}),n))}async function z(e,t){if(null==e.ownerDocument)throw Error("Provided element is not within a Document");let n=a(e.ownerDocument.styleSheets);return(await $(n,t)).filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>A(e.style.getPropertyValue("src")))}function Y(e){return e.trim().replace(/["']/g,"")}async function G(e,t){let n,o=await z(e,t),a=(n=new Set,!function e(t){(t.style.fontFamily||getComputedStyle(t).fontFamily).split(",").forEach(e=>{n.add(Y(e))}),Array.from(t.children).forEach(t=>{t instanceof HTMLElement&&e(t)})}(e),n);return(await Promise.all(o.filter(e=>a.has(Y(e.style.fontFamily))).map(e=>{let n=e.parentStyleSheet?e.parentStyleSheet.href:null;return _(e.cssText,n,t)}))).join("\n")}async function Z(e,t){let n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await G(e,t);if(n){let t=document.createElement("style"),o=document.createTextNode(n);t.appendChild(o),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:n,height:o}=s(e,t),a=await L(e,t,!0);return await Z(a,t),await V(a,t),!function(e,t){let{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));let o=t.style;null!=o&&Object.keys(o).forEach(e=>{n[e]=o[e]})}(a,t),await d(a,n,o)}async function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:o,height:a}=s(e,t),r=await X(e,t),i=await c(r),l=document.createElement("canvas"),u=l.getContext("2d"),d=t.pixelRatio||function(){let e,t;try{t=n.default}catch(e){}let o=t&&t.env?t.env.devicePixelRatio:null;return o&&Number.isNaN(e=parseInt(o,10))&&(e=1),e||window.devicePixelRatio||1}(),h=t.canvasWidth||o,m=t.canvasHeight||a;return l.width=h*d,l.height=m*d,!t.skipAutoScale&&(l.width>16384||l.height>16384)&&(l.width>16384&&l.height>16384?l.width>l.height?(l.height*=16384/l.width,l.width=16384):(l.width*=16384/l.height,l.height=16384):l.width>16384?(l.height*=16384/l.width,l.width=16384):(l.width*=16384/l.height,l.height=16384)),l.style.width="".concat(h),l.style.height="".concat(m),t.backgroundColor&&(u.fillStyle=t.backgroundColor,u.fillRect(0,0,l.width,l.height)),u.drawImage(i,0,0,l.width,l.height),l}async function Q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await J(e,t)).toDataURL()}e.s(["toPng",()=>Q],66459)},9647,e=>{"use strict";var t=e.i(43476),n=e.i(71645),o=e.i(18566),a=e.i(77741),r=e.i(66459),i=e.i(70048),l=e.i(97647);function s(e){let{isOpen:a,onClose:r}=e,s=(0,o.usePathname)(),[c,u]=n.default.useState(null),[d,h]=n.default.useState(!0);n.default.useEffect(()=>(a?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[a]),n.default.useEffect(()=>{let e=async()=>{try{console.log("[InfoPanel] Loading info data for pathname:",s);let e=await fetch("/data/info.json?t=".concat(Date.now()));if(!e.ok)throw console.error("[InfoPanel] HTTP error:",e.status,e.statusText),Error("HTTP ".concat(e.status,": Failed to load info data"));let t=await e.json();console.log("[InfoPanel] Info data loaded successfully:",t);let n="/"===s?"/":s,o=t[n]||t["/"];console.log("[InfoPanel] Route key:",n,"Route info:",o),o?"string"==typeof o.content?(console.log("[InfoPanel] Setting info data with content string"),u({content:o.content})):(console.warn("[InfoPanel] Route info content is not a string, using whole object"),u(o)):(console.warn("[InfoPanel] No route info found for:",n,"using fallback"),u({content:"To navigate in the digital exhibition, depending on the device you are currently browsing this space on you can use both your fingers or mouse. Zoom in or out, drag or pan to interact with the scene."}))}catch(e){console.error("[InfoPanel] Error loading info data:",e),console.error("[InfoPanel] Error details:",{message:e.message,stack:e.stack,name:e.name}),u({content:"To navigate in the digital exhibition, depending on the device you are currently browsing this space on you can use both your fingers or mouse. Zoom in or out, drag or pan to interact with the scene."})}finally{h(!1),console.log("[InfoPanel] Loading complete")}};a&&(h(!0),e())},[s,a]);let m=e=>e?e.split(/(\*[^*]+\*)/g).map((e,o)=>e.startsWith("*")&&e.endsWith("*")?(0,t.jsx)("em",{children:e.slice(1,-1)},o):(0,t.jsx)(n.default.Fragment,{children:e},o)):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"info-panel-wrapper ".concat(a?"open":""),children:[(0,t.jsx)("div",{className:"info-panel-close",children:(0,t.jsx)(i.default,{color:l.COLOR_BLACK,onClick:r})}),(0,t.jsx)("div",{className:"info-panel-content",children:d?(0,t.jsx)("p",{children:"Loading..."}):c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h4",{children:"Info:"}),(0,t.jsxs)("div",{className:"info-panel-content-inner",children:[c.content&&("string"==typeof c.content?(0,t.jsx)("p",{children:m(c.content)}):Array.isArray(c.content)?c.content.map((e,n)=>(0,t.jsx)("div",{children:e.text&&(0,t.jsx)("p",{children:m(e.text)})},n)):null),"/"!==s&&(0,t.jsx)("span",{children:(0,t.jsx)("a",{href:"/content_folder/SRCE_LC_Images/Leon Duval.pdf",download:"Leon Duval.pdf",className:"menu-download-button",children:"Download PDF"})})]})]}):null})]}),(0,t.jsx)("div",{className:"info-panel-overlay ".concat(a?"open":""),onClick:r})]})}var c=e.i(19507),u=e.i(90675);function d(e){var o,a,r,s;let{isOpen:d,onClose:h,onReopen:m}=e,[f,p]=n.default.useState([]),[g,y]=n.default.useState(!0),[w,b]=n.default.useState(null),[v,x]=n.default.useState(!1),[C,S]=n.default.useState(!1),k=n.default.useRef(null),j=n.default.useRef(null);n.default.useEffect(()=>(d||v?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[d,v]),n.default.useEffect(()=>{if(!d)return;let e=()=>{document.body.classList.contains("archive-modal-open")&&!v&&h()},t=new MutationObserver(()=>{e()});return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),e(),()=>{t.disconnect()}},[d,v,h]),n.default.useEffect(()=>{if(!d&&k.current){let e=k.current;k.current=null,setTimeout(()=>{b(e),x(!0),S(!1),e.id&&window.history.pushState(null,"","#".concat(e.id))},300)}},[d]),n.default.useEffect(()=>{let e=async()=>{try{let e=await fetch("/data/nodes.json?t=".concat(Date.now()));if(!e.ok)throw Error("HTTP ".concat(e.status,": Failed to load articles"));let t=((await e.json()).articles||[]).sort((e,t)=>{let n=(e.title||"").toLowerCase(),o=(t.title||"").toLowerCase();return n.localeCompare(o)});p(t);let n=window.location.hash.substring(1);if(n&&!v&&!w){let e=t.find(e=>e.id===n);e&&setTimeout(()=>{b(e),x(!0),S(!1)},500)}}catch(e){console.error("[IndexPanel] Error loading articles:",e),p([])}finally{y(!1)}};d&&(y(!0),e())},[d]);let E=()=>{x(!1),b(null),S(!1),window.location.hash&&window.history.replaceState(null,"",window.location.pathname+window.location.search),C&&!d&&m&&setTimeout(()=>{m()},300)},N=()=>{w&&v?(k.current=w,x(!1),S(!1),window.location.hash&&window.history.replaceState(null,"",window.location.pathname+window.location.search),setTimeout(()=>{h()},150)):h()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"index-panel-wrapper ".concat(d?"open":""),children:[(0,t.jsx)("div",{className:"index-panel-close",children:(0,t.jsx)(i.default,{color:l.COLOR_BLACK,onClick:N})}),(0,t.jsx)("div",{className:"index-panel-content",children:g?(0,t.jsx)("p",{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h4",{children:"List View:"}),(0,t.jsx)("div",{ref:j,className:"index-panel-list",children:f.map(e=>(0,t.jsxs)("button",{className:"index-panel-item",onClick:()=>{b(e),S(!0),e.id&&window.history.pushState(null,"","#".concat(e.id)),h(),setTimeout(()=>{x(!0)},300)},children:[(0,t.jsx)("span",{className:"index-panel-arrow"}),e.title,e.author&&" — ".concat(e.author)]},e.id))})]})})]}),(0,t.jsx)("div",{className:"index-panel-overlay ".concat(d&&!v?"open":""),onClick:N}),w&&(0,t.jsx)(c.default,{isOpen:v,onRequestClose:E,contentLabel:"Article Modal",className:"archive-modal-content",overlayClassName:"archive-modal-overlay",bodyOpenClassName:"archive-modal-open",htmlOpenClassName:"archive-modal-open",closeTimeoutMS:150,shouldCloseOnOverlayClick:!0,children:(0,t.jsx)(u.default,{title:w.title,author:w.author,content:w.content,img:w.imageUrl,authorBio:w.authorBio,keywords:w.keywords,connect1:(null==(o=w.connectionKeywords)?void 0:o[0])||"",connect2:(null==(a=w.connectionKeywords)?void 0:a[1])||"",connect3:(null==(r=w.connectionKeywords)?void 0:r[2])||"",connect4:(null==(s=w.connectionKeywords)?void 0:s[3])||"",photoCredit:w.photoCredit,closeModal:E})})]})}var h=e.i(47167);let m=null;async function f(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"submit";return e?(await ((null==(t=window.grecaptcha)?void 0:t.ready)?Promise.resolve():m||(m=new Promise((t,n)=>{let o=document.createElement("script");o.src="".concat("https://www.google.com/recaptcha/api.js","?render=").concat(e),o.async=!0,o.onload=()=>t(),o.onerror=()=>n(Error("reCAPTCHA script failed to load")),document.head.appendChild(o)}))),new Promise(t=>{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:n}).then(t)})})):null}let p=e=>e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");function g(e){let{isOpen:a,onClose:r,currentKeywordTitle:s="self-determination",onSubmitRef:c}=e,[u,d]=(0,n.useState)(""),[m,g]=(0,n.useState)(""),[y,w]=(0,n.useState)(""),[b,v]=(0,n.useState)(!1),x=(0,n.useRef)(null),C="/glossary"===(0,o.usePathname)(),S=(0,n.useRef)(0),k=(0,n.useCallback)(()=>{var e,t;if(!C)return s;let n=window.location.hash.substring(1);if(n&&n.endsWith("-submit")){let t=n.replace("-submit","");for(let n of document.querySelectorAll("[data-keyword-id]")){let o=n.querySelectorAll('[class*="glossaryTranslation"]');if(o.length>0){let n=null==(e=o[0].textContent)?void 0:e.trim();if(n&&p(n)===t)return n}}return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}if(n&&!n.endsWith("-submit"))for(let e of document.querySelectorAll("[data-keyword-id]")){let o=e.querySelectorAll('[class*="glossaryTranslation"]');if(o.length>0){let e=null==(t=o[0].textContent)?void 0:t.trim();if(e&&p(e)===n)return e}}return s},[s,C]),[j,E]=(0,n.useState)(s);(0,n.useEffect)(()=>{a&&C?E(k()):E(s)},[a,s,C,k]),n.default.useEffect(()=>(a?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[a]),(0,n.useEffect)(()=>{if(C){if(a)S.current=window.scrollY||document.documentElement.scrollTop,document.body.style.position="fixed",document.body.style.top="-".concat(S.current,"px"),document.body.style.width="100%",document.body.style.overflow="hidden";else{let e=S.current;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",document.body.setAttribute("data-restoring-scroll","true"),requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"instant"}),setTimeout(()=>{window.scrollTo({top:e,behavior:"instant"}),setTimeout(()=>{document.body.removeAttribute("data-restoring-scroll")},100)},50)})}return()=>{if(C&&!a){let e=S.current;document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",requestAnimationFrame(()=>{window.scrollTo({top:e,behavior:"instant"})})}}}},[a,C]);let N=(0,n.useCallback)(async()=>{if(u.trim()){v(!0);try{let e=h.default.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY,t=e?await f(e,"glossary_submit"):null,n=await fetch("/api/submit-entry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({interpretation:u,name:m||null,keyword:j,recaptchaToken:t,website:y})});if(n.ok)d(""),g(""),r();else{let e=await n.json();console.error("Failed to submit entry:",e)}}catch(e){console.error("Error submitting entry:",e)}finally{v(!1)}}},[u,m,j,r]);return(0,n.useEffect)(()=>{c&&(c.current=N)},[c,N]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"submit-entry-panel-wrapper ".concat(a?"open":""),children:[(0,t.jsx)("div",{className:"submit-entry-panel-close",children:(0,t.jsx)(i.default,{color:l.COLOR_WHITE,onClick:r})}),(0,t.jsx)("div",{className:"submit-entry-panel-content",children:(0,t.jsxs)("form",{ref:x,className:"submit-entry-form",onSubmit:e=>{e.preventDefault(),N()},children:[(0,t.jsx)("textarea",{className:"submit-entry-textarea submit-entry-interpretation",placeholder:"Type to Submit your interpretation of ".concat(j||"this word"),rows:10,value:u,onChange:e=>d(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"submit-entry-input submit-entry-name",placeholder:"Name (Optional)",value:m,onChange:e=>g(e.target.value)}),(0,t.jsx)("input",{type:"text",name:"website",value:y,onChange:e=>w(e.target.value),tabIndex:-1,autoComplete:"off","aria-hidden":"true",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px",opacity:0,pointerEvents:"none"}}),(0,t.jsxs)("div",{className:"submit-entry-privacy-text",children:[(0,t.jsx)("p",{children:"Data Privacy Consent:"}),(0,t.jsx)("p",{className:"submit-entry-privacy-content",children:"By submitting an entry, you consent to its use for research, educational, and documentation purposes related to this project. Identifying information will not be shared without your consent."})]})]})})]}),(0,t.jsx)("div",{className:"submit-entry-panel-overlay ".concat(a?"open":""),onClick:r})]})}function y(e){let{isOpen:o,onClose:a,furnitureItems:r,onItemClick:s,onRemoveItem:c}=e;return n.default.useEffect(()=>(o?document.body.classList.add("inventory-open"):document.body.classList.remove("inventory-open"),()=>{document.body.classList.remove("inventory-open")}),[o]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"inventory-wrapper ".concat(o?"open":""),children:[(0,t.jsx)("div",{className:"inventory-close",children:(0,t.jsx)(i.default,{color:l.COLOR_BLACK,onClick:a})}),(0,t.jsx)("nav",{className:"inventory-nav",children:(0,t.jsx)("ul",{children:r.map((e,n)=>(0,t.jsx)("li",{children:(0,t.jsxs)("div",{className:"inventory-item ".concat(e.active?"inventory-item-active":""),onClick:()=>s(e.type),children:[(0,t.jsx)("div",{className:"inventory-item-image",children:(0,t.jsx)("img",{src:e.image,alt:e.name})}),e.active&&(0,t.jsx)("div",{className:"inventory-item-remove",onClick:t=>{t.stopPropagation(),c?c(e.type):s(e.type)},children:"remove"})]})},n))})})]})})}function w(e){let{isOpen:o,onClose:a,cachedImageDataUrl:r}=e,[s,c]=(0,n.useState)(!1),[u,d]=(0,n.useState)("");n.default.useEffect(()=>(o?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[o]);let m=async()=>{if(!r)return void console.error("No cached image available");c(!0);try{(e=>{if(!e)return;let t=document.createElement("a");t.download="floor-plan-".concat(Date.now(),".png"),t.href=e,t.click()})(r);let e=h.default.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY,t=e?await f(e,"screenshot_submit"):null,n=await fetch(r),o=await n.blob(),i=new FormData;i.append("screenshot",o,"floor-plan.png"),t&&i.append("recaptchaToken",t),i.append("website",u);let l=await fetch("/api/submit-floor-plan",{method:"POST",body:i});if(!l.ok){let e=await l.json();console.error("Error submitting floor plan:",e)}c(!1),a()}catch(e){console.error("Error processing submission:",e),c(!1)}};return(0,t.jsxs)("div",{className:"capture-modal-wrapper ".concat(o?"open":""),children:[(0,t.jsx)("div",{className:"capture-modal-close",children:(0,t.jsx)(i.default,{color:l.COLOR_WHITE,onClick:a})}),(0,t.jsxs)("div",{className:"capture-modal-content",children:[(0,t.jsx)("input",{type:"text",name:"website",value:u,onChange:e=>d(e.target.value),tabIndex:-1,autoComplete:"off","aria-hidden":"true",style:{position:"absolute",left:"-9999px",width:"1px",height:"1px",opacity:0,pointerEvents:"none"}}),(0,t.jsx)("div",{className:"capture-modal-text",children:(0,t.jsx)("p",{children:"If you want to share your floor Plan arrangement with us Click submit Below"})}),(0,t.jsx)("button",{type:"button",className:"capture-submit-button",onClick:m,disabled:s||!r,children:s?"Submitting...":r?"submit":"Loading data..."})]})]})}function b(e){let{camera:i,setCamera:l,onSubmitEntry:c=null,currentKeywordTitle:u=null}=e,h=(0,o.usePathname)(),m=(0,o.useRouter)();(0,o.useSearchParams)();let[f,p]=(0,a.useStore)("cameraOptions"),[b,v]=(0,n.useState)(!1),[x,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),j=(0,n.useRef)(null),E=(0,n.useRef)(u),N="/glossary"===h;(0,n.useEffect)(()=>{E.current=u},[u]);let P="/kit-of-parts"===h,T="/"===h,L="/"===h,[R,I]=(0,a.useStore)("kitOfParts_objectsState",!1),[O,M]=(0,a.useStore)("kitOfParts_clickbathroom2",!1),[A,_]=(0,a.useStore)("kitOfParts_boxbedState",!1),[H,F]=(0,a.useStore)("kitOfParts_frontState",!1),[B,D]=(0,a.useStore)("kitOfParts_kitchenState",!1),[V,q]=(0,a.useStore)("kitOfParts_k2State",!1),[U,W]=(0,a.useStore)("kitOfParts_st1State",!1),[K,$]=(0,a.useStore)("kitOfParts_st2State",!1),[z,Y]=(0,a.useStore)("kitOfParts_stairsState",!1),[G,Z]=(0,a.useStore)("kitOfParts_sceneRotation",!1),[X,J]=(0,a.useStore)("livingContinuity_sceneRotation",!1),[Q]=(0,a.useStore)("selectedObjectId",null),[,ee]=(0,a.useStore)("objectRotationTrigger",0),[,et]=(0,a.useStore)("objectPositionResetTrigger",0),[en,eo]=(0,a.useStore)("walkThroughActive",!1),[ea,er]=(0,a.useStore)("kitOfParts_closeAllPanels",!1),[ei,el]=(0,a.useStore)("kitOfParts_captureModalOpen",!1),[es]=(0,a.useStore)("kitOfParts_cachedImageDataUrl",null),[,ec]=(0,a.useStore)("kitOfParts_captureMode",!1),[,eu]=(0,a.useStore)("kitOfParts_cachedImageDataUrl",null);(0,n.useEffect)(()=>{ea&&P&&(v(!1),C(!1),er(!1))},[ea,P,er]);let ed=(0,n.useCallback)(()=>{el(!1),ec(!1),setTimeout(()=>eu(null),300)},[el,ec,eu]),[eh,em]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(N){let e=sessionStorage.getItem("fromLivingContinuity");if(e){let t=Date.now()-parseInt(e,10),n=!1;try{if(document.referrer){let e=new URL(document.referrer);n="/"===e.pathname&&e.origin===window.location.origin}}catch(e){n=!1}em(t<1e4&&n)}else em(!1)}else N||sessionStorage.removeItem("fromLivingContinuity")},[N]);let ef=(0,n.useCallback)(()=>{if(P)ec(!0);else{let e=document.querySelector("main.kit-parts-main");if(!e)return;(0,r.toPng)(e,{cacheBust:!0}).then(e=>{let t=document.createElement("a");t.download="kit-of-parts.png",t.href=e,t.click()}).catch(e=>{console.log(e)})}},[P,ec]);(0,n.useEffect)(()=>{!N&&S&&k(!1)},[N,S]),(0,n.useEffect)(()=>{if(N&&!S){let e=window.location.hash;if(e.endsWith("-submit")){let t=e.replace("#","").replace("-submit","");window.history.replaceState(null,"","#".concat(t))}return}},[S,u,h,m,N]);let[ep,eg]=(0,n.useState)(!1),ey=(0,n.useCallback)(()=>{if(!P||!ep)return;let e=[];O&&e.push("bathroom"),A&&e.push("boxbed"),H&&e.push("front"),B&&e.push("kitchen"),V&&e.push("k2"),U&&e.push("st1"),K&&e.push("st2"),z&&e.push("stairs");let t=e.length>0?"#".concat(e.join("-")):"";window.history.replaceState(null,"","".concat(h).concat(t))},[P,O,A,H,B,V,U,K,z,h,ep]);(0,n.useEffect)(()=>{if(!P)return;let e=window.location.hash.slice(1);e?e.split("-").forEach(e=>{switch(e.trim()){case"bathroom":M(!0);break;case"boxbed":_(!0);break;case"front":F(!0);break;case"kitchen":D(!0);break;case"k2":q(!0);break;case"st1":W(!0);break;case"st2":$(!0);break;case"stairs":Y(!0)}}):(M(!0),_(!0),F(!0),D(!0),q(!0),W(!0),$(!0),Y(!0),window.history.replaceState(null,"","".concat(h,"#bathroom-boxbed-front-kitchen-k2-st1-st2-stairs"))),eg(!0)},[P,h]),(0,n.useEffect)(()=>{P&&ep&&ey()},[P,O,A,H,B,V,U,K,z,ey,ep]);let ew=()=>{P&&(M(!0),_(!0),F(!0),D(!0),q(!0),W(!0),$(!0),Y(!0),et(e=>e+1))},eb=P?[{type:"bathroom",name:"Bathroom",image:"/images/B1.png",active:O},{type:"boxbed",name:"Boxbed",image:"/images/BB.png",active:A},{type:"front",name:"Front Porch",image:"/images/FP.png",active:H},{type:"kitchen",name:"Kitchen",image:"/images/K1.png",active:B},{type:"k2",name:"Kitchen (storage)",image:"/images/K2.png",active:V},{type:"st1",name:"Storage 1",image:"/images/S1.png",active:U},{type:"st2",name:"Storage 2",image:"/images/S1.png",active:K},{type:"stairs",name:"Stairs",image:"/images/ST1.png",active:z}]:[];return(0,t.jsxs)(t.Fragment,{children:[N&&eh&&(0,t.jsx)("div",{className:"navigation-controls-top-right",children:(0,t.jsxs)("button",{className:"navigation-button navigation-button-go-back",onClick:()=>{sessionStorage.removeItem("fromLivingContinuity"),window.location.href="/"},"aria-label":"Go back to living continuity",children:[(0,t.jsx)("small",{children:"←"}),(0,t.jsx)("span",{children:"a collective inquiry"}),(0,t.jsx)("img",{src:"/SVG/arrow.svg",alt:"",className:"navigation-button-go-back-arrow","aria-hidden":"true"})]})}),P&&(0,t.jsxs)("div",{className:"navigation-controls-left",children:[(0,t.jsx)("button",{className:"navigation-button navigation-button-inventory",onClick:()=>{P&&I(!R)},"aria-label":"Inventory",children:"ELEMENTS"}),(0,t.jsx)("button",{className:"navigation-button navigation-button-restart navigation-button-restart-mobile",onClick:ew,"aria-label":"Restart",children:"restart"})]}),(0,t.jsxs)("div",{className:"navigation-controls",children:[N?(0,t.jsx)("button",{className:"navigation-button navigation-button-submit ".concat(S?"navigation-button-open":""),onClick:()=>{if(S&&j.current)j.current();else{if(N&&1){var e,t,n;let o=window.location.hash.substring(1),a=u||"self-determination";if(o&&!o.endsWith("-submit")){let n=document.getElementById(o);if(n){let t=n.querySelectorAll('[class*="glossaryTranslation"]');if(t.length>0){let n=null==(e=t[0].textContent)?void 0:e.trim();n&&(a=n,E.current=n)}}else{let e=document.querySelectorAll("[data-keyword-id]"),n=null;for(let t of e){let e=t.getBoundingClientRect(),o=window.innerHeight/2;if(100>Math.abs(e.top+e.height/2-o)){n=t;break}}if(n){let e=n.querySelectorAll('[class*="glossaryTranslation"]');if(e.length>0){let n=null==(t=e[0].textContent)?void 0:t.trim();n&&(a=n,E.current=n)}}}}else{let e=document.querySelectorAll("[data-keyword-id]"),t=null;for(let n of e){let e=n.getBoundingClientRect(),o=window.innerHeight/2;if(100>Math.abs(e.top+e.height/2-o)){t=n;break}}if(t){let e=t.querySelectorAll('[class*="glossaryTranslation"]');if(e.length>0){let t=null==(n=e[0].textContent)?void 0:n.trim();t&&(a=t,E.current=t)}}}let r=a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");window.history.replaceState(null,"","#".concat(r,"-submit"))}k(!0),c&&c()}},"aria-label":"Submit Entry",children:"TAP TO SUBMIT YOUR ENTRY"}):P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"navigation-button navigation-button-rotation ".concat(!0===G?"navigation-button-rotation-active":""),onClick:()=>{Z(!0!==G)},"aria-label":!0===G?"Stop Rotation":"Start Rotation",children:[(0,t.jsx)("span",{className:"navigation-button-rotation-text",children:!0===G?"focus":"rotate"}),(0,t.jsx)("span",{className:"navigation-button-rotation-icon",children:!0===G?(0,t.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M13 10H10V13M17 10H20V13M13 20H10V17M17 20H20V17M26 15C26 21.0751 21.0751 26 15 26C8.92487 26 4 21.0751 4 15C4 8.92487 8.92487 4 15 4C21.0751 4 26 8.92487 26 15Z",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round"})}):(0,t.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M26 15C26 21.0751 21.0751 26 15 26C8.92487 26 4 21.0751 4 15M26 15C26 8.92487 21.0751 4 15 4C8.92487 4 4 8.92487 4 15M26 15C26 17.12 23.0974 18.9318 19 19.6591M26 15C26 12.2386 21.0751 10 15 10M4 15C4 12.88 6.90264 11.0682 11 10.3409M4 15C4 17.7615 8.92487 20 15 20M15 10L17 7M15 10L17 13M15 20L13 17M15 20L13 23",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round"})})})]}),(0,t.jsx)("button",{className:"navigation-button navigation-button-capture ".concat(S?"navigation-button-open":""),onClick:ef,"aria-label":"Capture",children:"capture"}),(0,t.jsx)("button",{className:"navigation-button navigation-button-restart navigation-button-restart-desktop",onClick:ew,"aria-label":"Restart",children:"restart"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"navigation-button navigation-button-rotation ".concat(X?"navigation-button-rotation-active":""),onClick:()=>{J(!(null!=X&&X))},"aria-label":X?"Stop Rotation":"Start Rotation",children:[(0,t.jsx)("span",{className:"navigation-button-rotation-text",children:X?"focus":"rotate"}),(0,t.jsx)("span",{className:"navigation-button-rotation-icon",children:X?(0,t.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M13 10H10V13M17 10H20V13M13 20H10V17M17 20H20V17M26 15C26 21.0751 21.0751 26 15 26C8.92487 26 4 21.0751 4 15C4 8.92487 8.92487 4 15 4C21.0751 4 26 8.92487 26 15Z",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round"})}):(0,t.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M26 15C26 21.0751 21.0751 26 15 26C8.92487 26 4 21.0751 4 15M26 15C26 8.92487 21.0751 4 15 4C8.92487 4 4 8.92487 4 15M26 15C26 17.12 23.0974 18.9318 19 19.6591M26 15C26 12.2386 21.0751 10 15 10M4 15C4 12.88 6.90264 11.0682 11 10.3409M4 15C4 17.7615 8.92487 20 15 20M15 10L17 7M15 10L17 13M15 20L13 17M15 20L13 23",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round"})})})]}),(0,t.jsx)("button",{className:"navigation-button navigation-button-walk-through ".concat(en?"navigation-button-open":""," ").concat(S?"navigation-button-open":""),onClick:()=>{eo(!en)},"aria-label":en?"Stop Walk Through":"Start Walk Through",children:en?"static view":" dynamic view"})]}),T&&(0,t.jsx)("button",{className:"navigation-button navigation-button-index",onClick:()=>{C(!x),b&&v(!1)},"aria-label":"List View",children:(0,t.jsx)("span",{className:"navigation-button-info-text",children:"List View"})}),(0,t.jsxs)("button",{className:"navigation-button navigation-button-pink",onClick:()=>{v(!b),x&&C(!1)},"aria-label":"Info",children:[(0,t.jsx)("span",{className:"navigation-button-info-text",children:"info"}),(0,t.jsx)("span",{className:"navigation-button-info-icon",children:"?"})]}),P&&(0,t.jsx)(w,{isOpen:ei,onClose:ed,cachedImageDataUrl:es})]}),L&&(0,t.jsx)(d,{isOpen:x,onClose:()=>C(!1),onReopen:()=>C(!0)}),(0,t.jsx)(s,{isOpen:b,onClose:()=>v(!1)}),(0,t.jsx)(g,{isOpen:S,onClose:()=>{k(!1)},currentKeywordTitle:u||"self-determination",onSubmitRef:j}),P&&(0,t.jsx)(y,{isOpen:R,onClose:()=>I(!1),furnitureItems:eb,onItemClick:e=>{if(P)switch(e){case"bathroom":M(!O);break;case"boxbed":_(!A);break;case"front":F(!H);break;case"kitchen":D(!B);break;case"k2":q(!V);break;case"st1":W(!U);break;case"st2":$(!K);break;case"stairs":Y(!z)}},onRemoveItem:e=>{if(P)switch(e){case"bathroom":M(!1);break;case"boxbed":_(!1);break;case"front":F(!1);break;case"kitchen":D(!1);break;case"k2":q(!1);break;case"st1":W(!1);break;case"st2":$(!1);break;case"stairs":Y(!1)}}})]})}e.s(["default",()=>b],9647)}]);

//# sourceMappingURL=17c30aba5034d27f.js.map