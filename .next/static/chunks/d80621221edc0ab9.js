(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73965,e=>{"use strict";var t,r,i,n,o,s=e.i(43476),a=e.i(71645),l=e.i(75056),c=e.i(27138),u=e.i(1899),d=e.i(7365),h=e.i(77741);function f(){let{camera:e}=(0,c.useThree)(),[t]=(0,h.useStore)("kitOfParts_captureMode",!1),r=(0,a.useRef)(0),i=(0,a.useRef)(t);return(0,u.useFrame)(()=>{if(!(null==e?void 0:e.isOrthographicCamera))return;let n=!!i.current;i.current=t,n&&!t&&(r.current=15),r.current>0&&(r.current--,e.position.set(-14,11,15),e.zoom=17,e.lookAt(0,0,0),e.updateProjectionMatrix())}),null}var g=e.i(90072);let p={ambient:{intensity:1.5,color:new g.Color(0xffffff)},directional:[{position:[20,25,15],intensity:1.5,color:new g.Color(0xffffff),castShadow:!0,shadow:{mapSize:[2048,2048],camera:{near:.5,far:100,left:-50,right:50,top:50,bottom:-50}}},{position:[-20,20,-15],intensity:.8,color:new g.Color(0xffffff),castShadow:!1},{position:[0,15,0],intensity:.5,color:new g.Color(0xffffff),castShadow:!1},{position:[10,10,-20],intensity:.4,color:new g.Color(0xffffff),castShadow:!1}],hemisphere:{skyColor:new g.Color(0xffffff),groundColor:new g.Color(8947848),intensity:.8}};function m(){let e=(0,a.useRef)();return(0,a.useEffect)(()=>{var t;if(e.current&&(null==(t=p.directional[0])?void 0:t.shadow)){let t=p.directional[0].shadow;e.current.shadow.mapSize.width=t.mapSize[0],e.current.shadow.mapSize.height=t.mapSize[1],e.current.shadow.camera.near=t.camera.near,e.current.shadow.camera.far=t.camera.far,e.current.shadow.camera.left=t.camera.left,e.current.shadow.camera.right=t.camera.right,e.current.shadow.camera.top=t.camera.top,e.current.shadow.camera.bottom=t.camera.bottom}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ambientLight",{intensity:p.ambient.intensity,color:p.ambient.color}),(0,s.jsx)("hemisphereLight",{skyColor:p.hemisphere.skyColor,groundColor:p.hemisphere.groundColor,intensity:p.hemisphere.intensity}),p.directional.map((t,r)=>(0,s.jsx)("directionalLight",{ref:0===r?e:null,position:t.position,intensity:t.intensity,color:t.color,castShadow:t.castShadow},r))]})}var x=e.i(20786),v=e.i(92808),w=e.i(78140);function y(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e&&Object.values(e).forEach(e=>{e&&e.isMaterial&&function(e){var t,r;let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e||!e.isMaterial)return;let n=i?{color:null==(t=e.color)?void 0:t.clone(),emissive:null==(r=e.emissive)?void 0:r.clone(),roughness:e.roughness,metalness:e.metalness,opacity:e.opacity,transparent:e.transparent,side:e.side}:null;["map","normalMap","roughnessMap","metalnessMap","aoMap","emissiveMap","bumpMap","displacementMap","alphaMap","clearcoatMap","clearcoatNormalMap","clearcoatRoughnessMap","iridescenceMap","iridescenceThicknessMap","sheenColorMap","sheenRoughnessMap","specularColorMap","specularIntensityMap","transmissionMap","thicknessMap"].forEach(t=>{let r=e[t];r&&r.isTexture&&(r.image&&!r.image.complete&&r.image.addEventListener("load",()=>{r.needsUpdate=!0}),(void 0===r.flipY||!0===r.flipY)&&(r.flipY=!1),r.wrapS&&r.wrapS!==g.ClampToEdgeWrapping||(r.wrapS=g.RepeatWrapping),r.wrapT&&r.wrapT!==g.ClampToEdgeWrapping||(r.wrapT=g.RepeatWrapping),!1!==r.generateMipmaps&&(r.generateMipmaps=!0,r.minFilter=g.LinearMipmapLinearFilter),r.magFilter=g.LinearFilter,"normalMap"===t||t.includes("Normal")?r.colorSpace!==g.NoColorSpace&&(r.colorSpace=g.NoColorSpace):"map"===t||"emissiveMap"===t||"aoMap"===t?r.colorSpace!==g.SRGBColorSpace&&(r.colorSpace=g.SRGBColorSpace):r.colorSpace!==g.NoColorSpace&&(r.colorSpace=g.NoColorSpace),r.needsUpdate=!0)}),i&&n&&(n.color&&!e.color.equals(n.color)&&e.color.copy(n.color),n.emissive&&e.emissive&&e.emissive.copy(n.emissive),void 0!==n.roughness&&(e.roughness=n.roughness),void 0!==n.metalness&&(e.metalness=n.metalness),void 0!==n.opacity&&(e.opacity=n.opacity),void 0!==n.transparent&&(e.transparent=n.transparent),void 0!==n.side&&(e.side=n.side)),(e.isMeshStandardMaterial||e.isMeshPhysicalMaterial)&&(e.needsUpdate=!0)}(e,t)})}function _(e){let{nodes:t,materials:r}=(0,w.useGLTF)("/models/gbl_update/floor.glb");(0,a.useEffect)(()=>{r&&(y(r,!0),Object.values(r).forEach(e=>{e&&e.isMaterial&&(e.color.setHex(0xffffff),e.emissive&&(e.emissive.setHex(0xffffff),void 0!==e.emissiveIntensity&&(e.emissiveIntensity=.2)),(e.isMeshStandardMaterial||e.isMeshPhysicalMaterial)&&(e.roughness=.5,e.metalness=0),e.needsUpdate=!0)}))},[r]);let[,i]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),n=(0,a.useMemo)(()=>t?Object.entries(t).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))}):[],[t]),o=(0,a.useMemo)(()=>{if(!t)return{width:144,height:192,cellSize:12,centerX:0,centerZ:0};let e=new g.Box3,r=!1;if(Object.values(t).forEach(t=>{if(t&&t.geometry&&t.geometry.attributes&&t.geometry.attributes.position){let i=t.geometry;if(i.computeBoundingBox(),i.boundingBox){let n=i.boundingBox.clone();t.matrix&&!t.matrix.equals(new g.Matrix4)&&n.applyMatrix4(t.matrix),r?e.union(n):(e.copy(n),r=!0)}}}),!r||e.isEmpty())return{width:144,height:192,cellSize:12,centerX:0,centerZ:0};let i=e.getSize(new g.Vector3),n=e.getCenter(new g.Vector3),o=Math.max(i.x/12,i.z/16);return{width:12*o,height:16*o,cellSize:o,centerX:n.x,centerZ:n.z}},[t]);(0,a.useEffect)(()=>{i(o)},[o,i]);let l=r&&Object.values(r)[0];return(0,s.jsxs)("group",{children:[(0,s.jsx)(e=>{let{width:t,height:r,cellSize:i,centerX:n,centerZ:o,yPosition:l}=e,c=(0,a.useMemo)(()=>{let e=new g.BufferGeometry,s=[],a=t/2,c=r/2,u=n-a,d=n+a,h=o-c,f=o+c,p=Math.floor(t/i)+1,m=Math.floor(r/i)+1;for(let e=0;e<=p;e++){let t=u+e*i;s.push(t,l,h,t,l,f)}for(let e=0;e<=m;e++){let t=h+e*i;s.push(u,l,t,d,l,t)}return e.setAttribute("position",new g.Float32BufferAttribute(s,3)),e},[t,r,i,n,o,l]),u=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:"#1C1C1C",linewidth:1,opacity:.5,transparent:!0}),[]);return(0,s.jsx)("lineSegments",{geometry:c,material:u,renderOrder:1})},{width:o.width,height:o.height,cellSize:o.cellSize,centerX:o.centerX||0,centerZ:o.centerZ||0,yPosition:1.1}),(0,s.jsx)("group",(0,v._)((0,x._)({},e),{dispose:null,children:n.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes||!r.geometry.attributes.position||r.type&&"Mesh"!==r.type)return null;let i=r.material||l;return i?(!r.geometry.attributes.normal&&r.geometry.computeVertexNormals&&r.geometry.computeVertexNormals(),(0,s.jsx)("mesh",{geometry:r.geometry,material:i,position:[0,.99,0],castShadow:!1,receiveShadow:!1},t)):null})}))]})}function M(){let[e]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),{nodes:t}=(0,w.useGLTF)("/models/gbl_update/frontPorch.glb"),{nodes:r}=(0,w.useGLTF)("/models/gbl_update/floor.glb"),i=(0,a.useMemo)(()=>{if(!t)return 10;let e=new g.Box3,r=!1;return(Object.values(t).forEach(t=>{if(t&&t.geometry&&t.geometry.attributes&&t.geometry.attributes.position){let i=t.geometry;if(i.computeBoundingBox(),i.boundingBox){let n=i.boundingBox.clone();t.matrix&&!t.matrix.equals(new g.Matrix4)&&n.applyMatrix4(t.matrix),r?e.union(n):(e.copy(n),r=!0)}}}),!r||e.isEmpty())?10:e.getSize(new g.Vector3).y},[t]),n=(0,a.useMemo)(()=>{if(!r)return{bottom:.99,height:0};let e=new g.Box3,t=!1;return(Object.values(r).forEach(i=>{if(i&&i.geometry&&i.geometry.attributes&&i.geometry.attributes.position){if(i.type&&"Mesh"!==i.type)return;let n=Object.keys(r).find(e=>r[e]===i);if(n&&(n.toLowerCase().includes("line")||n.toLowerCase().includes("edge")||n.toLowerCase().includes("wireframe")))return;let o=i.geometry;if(o.computeBoundingBox(),o.boundingBox){let r=o.boundingBox.clone();i.matrix&&!i.matrix.equals(new g.Matrix4)&&r.applyMatrix4(i.matrix),t?e.union(r):(e.copy(r),t=!0)}}}),!t||e.isEmpty())?{bottom:.99,height:0}:{bottom:e.min.y+.99,height:e.max.y-e.min.y}},[r]),{width:o,height:l,centerX:c,centerZ:u}=e,d=i+n.height,f=n.bottom,p=(0,a.useMemo)(()=>{let e=o/2,t=l/2,r=d/2;return{corners:[[-e,-r,-t],[e,-r,-t],[e,-r,t],[-e,-r,t],[-e,r,-t],[e,r,-t],[e,r,t],[-e,r,t]],edgeLines:[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]]}},[o,l,d]),m=new g.LineBasicMaterial({color:65535,linewidth:1});return(0,s.jsx)("group",{position:[c,f+d/2,u],children:p.edgeLines.map((e,t)=>{let[r,i]=e,n=p.corners[r],o=p.corners[i],a=new g.BufferGeometry().setFromPoints([new g.Vector3(...n),new g.Vector3(...o)]);return(0,s.jsx)("line",{geometry:a,material:m},t)})})}w.useGLTF.preload("/models/gbl_update/floor.glb");var L=e.i(33027),b=e.i(60099);function C(e,t){return e.map(function(e,r){return e+t[r]})}function j(e,t){return e.map(function(e,r){return e-t[r]})}function S(e){return Math.hypot.apply(Math,e)}function z(e,t){void 0===t&&(t=e);var r=S(t),i=0===r?0:1/r,n=t.map(function(e){return i*e});return{distance:S(e),direction:n}}function k(e,t,r){var i=S(t),n=0===i?0:1/i,o=0===r?0:1/r,s=t.map(function(e){return o*e}),a=t.map(function(e){return n*e});return{velocities:s,velocity:o*i,distance:S(e),direction:a}}function E(e){return Math.sign?Math.sign(e):Number(e>0)-Number(e<0)||+e}function T(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function Z(e,t,r,i){return(void 0===i&&(i=.15),0===i)?Math.max(t,Math.min(e,r)):e<t?-T(t-e,r-t,i)+t:e>r?+T(e-r,r-t,i)+r:e}e.i(47167);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function P(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function O(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function F(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return H(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function A(){}function R(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?A:1===t.length?t[0]:function(){for(var e,r,i=F(t);!(r=i()).done;)e=r.value.apply(this,arguments)||e;return e}}function I(e,t){if(void 0===e){if(void 0===t)throw Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function X(e,t){return Object.assign({},t,e||{})}function B(e){if("function"!=typeof e)return e;for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.apply(void 0,r)}function N(e,t){void 0===e&&(e={});for(var r={},i=0,n=Object.entries(t);i<n.length;i++){var o=n[i],s=o[0],a=o[1];switch(typeof a){case"function":r[s]=a.call(r,e[s],s,e);break;case"object":r[s]=N(e[s],a);break;case"boolean":a&&(r[s]=e[s])}}return r}function G(){return"undefined"!=typeof window&&"ontouchstart"in window}function D(e){return"pointerId"in e?null:"touchend"===e.type?e.changedTouches:e.targetTouches}function W(e){return Array.from(D(e)).map(function(e){return e.identifier})}function q(e){return{buttons:"buttons"in e?e.buttons:0,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey}}var K=function(e){return e};function Q(e,t){void 0===t&&(t=K);var r=D(e),i=r?r[0]:e;return t([i.clientX,i.clientY])}function U(e,t,r){void 0===r&&(r=K);var i=Array.from(e.touches).filter(function(e){return t.includes(e.identifier)}),n=i[0],o=i[1];if(!n||!o)throw Error("The event doesn't have two pointers matching the pointerIds");var s=o.clientX-n.clientX,a=o.clientY-n.clientY,l=(o.clientX+n.clientX)/2,c=(o.clientY+n.clientY)/2;return{values:r([Math.hypot(s,a),-(180*Math.atan2(s,a))/Math.PI]),origin:r([l,c])}}function Y(e,t){void 0===t&&(t=K);var r=e.deltaX,i=e.deltaY,n=e.deltaMode;return 1===n?(r*=40,i*=40):2===n&&(r*=800,i*=800),t([r,i])}function $(e,t){return void 0===t&&(t=K),t([e.scale,e.rotation])}var J={threshold:function(e){return void 0===e&&(e=0),I(e)},rubberband:function(e){switch(void 0===e&&(e=0),e){case!0:return I(.15);case!1:return I(0);default:return I(e)}},enabled:function(e){return void 0===e&&(e=!0),e},triggerAllEvents:function(e){return void 0===e&&(e=!1),e},initial:function(e){return(void 0===e&&(e=0),"function"==typeof e)?e:I(e)},transform:!0},ee=V({},J,{axis:!0,lockDirection:function(e){return void 0===e&&(e=!1),e},bounds:function(e){if(void 0===e&&(e={}),"function"==typeof e)return function(t){return ee.bounds(e(t))};var t=e,r=t.left,i=t.right,n=t.top,o=t.bottom;return[[void 0===r?-1/0:r,void 0===i?1/0:i],[void 0===n?-1/0:n,void 0===o?1/0:o]]}}),et="undefined"!=typeof window&&window.document&&window.document.createElement,er={enabled:function(e){return void 0===e&&(e=!0),e},domTarget:!0,window:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return void 0===e&&(e=et?window:void 0),e}),eventOptions:function(e){var t=void 0===e?{}:e,r=t.passive,i=t.capture;return{passive:void 0===r||r,capture:void 0!==i&&i}},transform:!0},ei=V({},J,{bounds:function(e,t,r){var i=r.distanceBounds,n=void 0===i?{}:i,o=r.angleBounds,s=void 0===o?{}:o,a=function(e){var t=X(B(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},l=function(e){var t=X(B(s,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof s?[a(),l()]:function(e){return[a(e),l(e)]}}}),en=V({},ee,{useTouch:function(e){void 0===e&&(e=!1);var t=G(),r="undefined"!=typeof window&&"onpointerdown"in window;return!!e&&!!t||!!t&&!r},experimental_preventWindowScrollY:function(e){return void 0===e&&(e=!1),e},threshold:function(e,t,r){var i=r.filterTaps,n=void 0!==i&&i,o=r.lockDirection,s=r.axis,a=I(e,n?3:void 0!==o&&o?1:+!!(void 0===s?void 0:s));return this.filterTaps=n,a},swipeVelocity:function(e){return void 0===e&&(e=.5),I(e)},swipeDistance:function(e){return void 0===e&&(e=50),I(e)},swipeDuration:function(e){return void 0===e&&(e=250),e},delay:function(e){switch(void 0===e&&(e=0),e){case!0:return 180;case!1:return 0;default:return e}}});function eo(e){return void 0===e&&(e={}),N(e,ee)}function es(e){return V({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:A,canceled:!1,memo:void 0,args:void 0},e)}function ea(){return{shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},drag:es({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),pinch:es({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),wheel:es({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),move:es({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),scroll:es({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0})}}var el=new Map,ec=function(e){return e},eu=function(){function e(e,t){var r=this;void 0===t&&(t=[]),this.controller=e,this.args=t,this.debounced=!0,this.setTimeout=function(e,t){var i;void 0===t&&(t=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];r.controller.timeouts[r.stateKey]=(i=window).setTimeout.apply(i,[e,t].concat(o))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(e){if(void 0===e&&(e=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!e&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var t=r.state.active,i=r.state._active;r.state.active=i,r.state.first=i&&!t,r.state.last=t&&!i,r.controller.state.shared[r.ingKey]=i}var n=r.controller.pointerIds.size||r.controller.touchIds.size,o=r.controller.state.shared.buttons>0||n>0,s=V({},r.controller.state.shared,r.state,r.mapStateValues(r.state),{locked:!!document.pointerLockElement,touches:n,down:o}),a=r.handler(s);return r.state.memo=void 0!==a?a:r.state.memo,s},this.controller=e,this.args=t}var t,r=e.prototype;return r.updateSharedState=function(e){Object.assign(this.controller.state.shared,e)},r.updateGestureState=function(e){Object.assign(this.state,e)},r.checkIntentionality=function(e,t){return{_intentional:e,_blocked:!1}},r.getMovement=function(e){var t=this.config.rubberband,r=this.state,i=r._bounds,n=r._initial,o=r._active,s=r._intentional,a=r.lastOffset,l=r.movement,c=r._threshold,u=this.getInternalMovement(e,this.state),d=!1===s[0]?ed(u[0],c[0]):s[0],h=!1===s[1]?ed(u[1],c[1]):s[1],f=this.checkIntentionality([d,h],u);if(f._blocked)return V({},f,{_movement:u,delta:[0,0]});var g=f._intentional,p=[!1!==g[0]?u[0]-g[0]:0,!1!==g[1]?u[1]-g[1]:0],m=C(p,a),x=o?t:[0,0];return p=eh(i,C(p,n),x),V({},f,{intentional:!1!==g[0]||!1!==g[1],_initial:n,_movement:u,movement:p,values:e,offset:eh(i,m,x),delta:j(p,l)})},r.clean=function(){this.clearTimeout()},t=[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||ec}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();function ed(e,t){return Math.abs(e)>=t&&E(e)*t}function eh(e,t,r){var i=t[0],n=t[1],o=r[0],s=r[1],a=e[0],l=a[0],c=a[1],u=e[1],d=u[0],h=u[1];return[Z(i,l,c,o),Z(n,d,h,s)]}function ef(e,t,r){var i=e.state,n=t.timeStamp,o=t.type,s=i.values,a=r?0:n-i.startTime;return{_lastEventType:o,event:t,timeStamp:n,elapsedTime:a,previous:s}}function eg(e,t,r,i){var n=e.state,o=e.config,s=e.stateKey,a=e.args,l=e.transform,c=n.offset,u=r.timeStamp,d=o.initial,h=o.bounds,f=j(l(o.threshold),l([0,0])).map(Math.abs),g=V({},ea()[s],{_active:!0,args:a,values:t,initial:null!=i?i:t,_threshold:f,offset:c,lastOffset:c,startTime:u});return V({},g,{_initial:B(d,g),_bounds:B(h,g)})}var ep=function(e){var t=this;this.classes=e,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=G(),this.supportsGestureEvents=function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),this.bind=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var n,o={},s=F(t.classes);!(n=s()).done;)new n.value(t,r).addBindings(o);var a=function(e){ey(o,e,function(i){return t.nativeRefs[e](V({},t.state.shared,{event:i,args:r}))})};for(var l in t.nativeRefs)a(l);return t.config.domTarget?function(e,t){var r=e.config,i=e.domListeners,n=ew(r);if(!n)throw Error("domTarget must be defined");var o=r.eventOptions;eM(n,ev(i),o);for(var s=0,a=Object.entries(t);s<a.length;s++){var l=a[s],c=l[0],u=l[1],d=c.slice(2).toLowerCase();i.push([d,R.apply(void 0,u)])}e_(n,i,o)}(t,o):function(e,t){for(var r=e.config,i={},n=r.eventOptions.capture?"Capture":"",o=0,s=Object.entries(t);o<s.length;o++){var a=s[o],l=a[0],c=a[1],u=Array.isArray(c)?c:[c];i[l+n]=R.apply(void 0,u)}return i}(t,o)},this.effect=function(){return t.config.domTarget&&t.bind(),t.clean},this.clean=function(){var e=ew(t.config),r=t.config.eventOptions;e&&eM(e,ev(t.domListeners),r),Object.values(t.timeouts).forEach(clearTimeout),function(e){var t=e.config,r=t.window,i=t.eventOptions,n=e.windowListeners;if(r){for(var o in n)eM(r,n[o],i);e.windowListeners={}}}(t)},this.classes=e,this.state=ea(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function em(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(W(t))}function ex(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):W(t).forEach(function(t){return e.touchIds.delete(t)})}function ev(e){return void 0===e&&(e=[]),e.splice(0,e.length)}function ew(e){var t=e.domTarget;return t&&"current"in t?t.current:t}function ey(e,t,r){e[t]||(e[t]=[]),e[t].push(r)}function e_(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={});for(var i,n=F(t);!(i=n()).done;){var o=i.value,s=o[0],a=o[1];e.addEventListener(s,a,r)}}function eM(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={});for(var i,n=F(t);!(i=n()).done;){var o=i.value,s=o[0],a=o[1];e.removeEventListener(s,a,r)}}function eL(){}var eb=function(e){function t(){return e.apply(this,arguments)||this}P(t,e);var r=t.prototype;return r.getInternalMovement=function(e,t){return j(e,t.initial)},r.checkIntentionality=function(e,t){if(!1===e[0]&&!1===e[1])return{_intentional:e,axis:this.state.axis};var r=t.map(Math.abs),i=r[0],n=r[1],o=this.state.axis||(i>n?"x":i<n?"y":void 0);return this.config.axis||this.config.lockDirection?o?this.config.axis&&o!==this.config.axis?{_intentional:e,_blocked:!0,axis:o}:(e[+("x"===o)]=!1,{_intentional:e,_blocked:!1,axis:o}):{_intentional:[!1,!1],_blocked:!1,axis:o}:{_intentional:e,_blocked:!1,axis:o}},r.getKinematics=function(e,t){var r=this.getMovement(e);if(!r._blocked){var i=t.timeStamp-this.state.timeStamp;Object.assign(r,k(r.movement,r.delta,i))}return r},r.mapStateValues=function(e){return{xy:e.values,vxvy:e.velocities}},t}(eu);function eC(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}var ej=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.ingKey="dragging",t.stateKey="drag",t.setPointerCapture=function(e){if(!t.config.useTouch&&!document.pointerLockElement){var r=e.target,i=e.pointerId;r&&"setPointerCapture"in r&&r.setPointerCapture(i),t.updateGestureState({_dragTarget:r,_dragPointerId:i})}},t.releasePointerCapture=function(){if(!t.config.useTouch&&!document.pointerLockElement){var e=t.state,r=e._dragTarget,i=e._dragPointerId;if(i&&r&&"releasePointerCapture"in r&&(!("hasPointerCapture"in r)||r.hasPointerCapture(i)))try{r.releasePointerCapture(i)}catch(e){}}},t.preventScroll=function(e){t.state._dragPreventScroll&&e.cancelable&&e.preventDefault()},t.getEventId=function(e){return t.config.useTouch?e.changedTouches[0].identifier:e.pointerId},t.isValidEvent=function(e){return t.state._pointerId===t.getEventId(e)},t.shouldPreventWindowScrollY=t.config.experimental_preventWindowScrollY&&t.controller.supportsTouchEvents,t.setUpWindowScrollDetection=function(e){var r,i,n,o,s,a;eC(e),r=t.controller,i=t.stateKey,n=[["touchmove",t.preventScroll],["touchend",t.clean.bind(O(t))],["touchcancel",t.clean.bind(O(t))]],o={passive:!1},s=r.config,a=r.windowListeners,void 0===n&&(n=[]),void 0===o&&(o=s.eventOptions),s.window&&(eM(s.window,a[i],o),e_(s.window,a[i]=n,o)),t.setTimeout(t.startDrag.bind(O(t)),250,e)},t.setUpDelayedDragTrigger=function(e){t.state._dragDelayed=!0,eC(e),t.setTimeout(t.startDrag.bind(O(t)),t.config.delay,e)},t.setStartState=function(e){var r=Q(e,t.transform);t.updateSharedState(q(e)),t.updateGestureState(V({},eg(O(t),r,e),ef(O(t),e,!0),{_pointerId:t.getEventId(e)})),t.updateGestureState(t.getMovement(r))},t.onDragStart=function(e){em(t.controller,e),t.enabled&&!t.state._active&&(t.setStartState(e),t.setPointerCapture(e),t.shouldPreventWindowScrollY?t.setUpWindowScrollDetection(e):t.config.delay>0?t.setUpDelayedDragTrigger(e):t.startDrag(e,!0))},t.onDragChange=function(e){if(!t.state.canceled&&t.state._active&&t.isValidEvent(e)&&(t.state._lastEventType!==e.type||e.timeStamp!==t.state.timeStamp)){if(document.pointerLockElement){var r,i=e.movementX,n=e.movementY;r=C(t.transform([i,n]),t.state.values)}else r=Q(e,t.transform);var o=t.getKinematics(r,e);if(!t.state._dragStarted){if(t.state._dragDelayed)return void t.startDrag(e);if(!t.shouldPreventWindowScrollY)return;if(t.state._dragPreventScroll||!o.axis)return;if("x"===o.axis)t.startDrag(e);else{t.state._active=!1;return}}var s=q(e);t.updateSharedState(s);var a=ef(O(t),e),l=S(o._movement),c=t.state._dragIsTap;c&&l>=3&&(c=!1),t.updateGestureState(V({},a,o,{_dragIsTap:c})),t.fireGestureHandler()}},t.onDragEnd=function(e){if((ex(t.controller,e),t.isValidEvent(e))&&(t.clean(),t.state._active)){t.state._active=!1;var r=t.state._dragIsTap,i=t.state.velocities,n=i[0],o=i[1],s=t.state.movement,a=s[0],l=s[1],c=t.state._intentional,u=c[0],d=c[1],h=t.config.swipeVelocity,f=h[0],g=h[1],p=t.config.swipeDistance,m=p[0],x=p[1],v=t.config.swipeDuration,w=V({},ef(O(t),e),t.getMovement(t.state.values)),y=[0,0];w.elapsedTime<v&&(!1!==u&&Math.abs(n)>f&&Math.abs(a)>m&&(y[0]=E(n)),!1!==d&&Math.abs(o)>g&&Math.abs(l)>x&&(y[1]=E(o))),t.updateSharedState({buttons:0}),t.updateGestureState(V({},w,{tap:r,swipe:y})),t.fireGestureHandler(t.config.filterTaps&&!0===r)}},t.clean=function(){var r,i,n,o,s;e.prototype.clean.call(O(t)),t.state._dragStarted=!1,t.releasePointerCapture(),r=t.controller,i=t.stateKey,o=r.config,s=r.windowListeners,void 0===n&&(n=o.eventOptions),o.window&&(eM(o.window,s[i],n),delete s[i])},t.onCancel=function(){t.state.canceled||(t.updateGestureState({canceled:!0,_active:!1}),t.updateSharedState({buttons:0}),setTimeout(function(){return t.fireGestureHandler()},0))},t.onClick=function(e){t.state._dragIsTap||e.stopPropagation()},t}P(t,e);var r=t.prototype;return r.startDrag=function(e,t){void 0===t&&(t=!1),this.state._active&&!this.state._dragStarted&&(t||this.setStartState(e),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},r.addBindings=function(e){this.config.useTouch?(ey(e,"onTouchStart",this.onDragStart),ey(e,"onTouchMove",this.onDragChange),ey(e,"onTouchEnd",this.onDragEnd),ey(e,"onTouchCancel",this.onDragEnd)):(ey(e,"onPointerDown",this.onDragStart),ey(e,"onPointerMove",this.onDragChange),ey(e,"onPointerUp",this.onDragEnd),ey(e,"onPointerCancel",this.onDragEnd)),this.config.filterTaps&&ey(e,this.controller.config.eventOptions.capture?"onClick":"onClickCapture",this.onClick)},t}(eb),eS=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.ingKey="pinching",t.stateKey="pinch",t.onPinchStart=function(e){em(t.controller,e);var r=t.controller.touchIds;if(!(!t.enabled||t.state._active&&t.state._pointerIds.every(function(e){return r.has(e)}))&&!(r.size<2)){var i=Array.from(r).slice(0,2),n=U(e,i,t.transform),o=n.values,s=n.origin;t.updateSharedState(q(e)),t.updateGestureState(V({},eg(O(t),o,e),ef(O(t),e,!0),{_pointerIds:i,cancel:t.onCancel,origin:s})),t.updateGestureState(t.getMovement(o)),t.fireGestureHandler()}},t.onPinchChange=function(e){var r=t.state,i=r.canceled,n=r._active;if(!i&&n&&e.timeStamp!==t.state.timeStamp){var o=q(e);t.updateSharedState(o);try{var s=U(e,t.state._pointerIds,t.transform),a=s.values,l=s.origin,c=t.getKinematics(a,e);t.updateGestureState(V({},ef(O(t),e),c,{origin:l})),t.fireGestureHandler()}catch(r){t.onPinchEnd(e)}}},t.onPinchEnd=function(e){ex(t.controller,e);var r=W(e);t.state._pointerIds.every(function(e){return!r.includes(e)})||(t.clean(),t.state._active&&(t.updateGestureState(V({},ef(O(t),e),t.getMovement(t.state.values),{_active:!1})),t.fireGestureHandler()))},t.onCancel=function(){t.state.canceled||(t.updateGestureState({_active:!1,canceled:!0}),setTimeout(function(){return t.fireGestureHandler()},0))},t.onGestureStart=function(e){if(t.enabled){e.preventDefault();var r=$(e,t.transform);t.updateSharedState(q(e)),t.updateGestureState(V({},eg(O(t),r,e),ef(O(t),e,!0),{origin:[e.clientX,e.clientY],cancel:t.onCancel})),t.updateGestureState(t.getMovement(r)),t.fireGestureHandler()}},t.onGestureChange=function(e){var r=t.state,i=r.canceled,n=r._active;if(!i&&n){e.preventDefault();var o=q(e);t.updateSharedState(o);var s=$(e,t.transform);s[0]=(s[0]-t.state.event.scale)*260+t.state.values[0];var a=t.getKinematics(s,e);t.updateGestureState(V({},ef(O(t),e),a,{origin:[e.clientX,e.clientY]})),t.fireGestureHandler()}},t.onGestureEnd=function(e){t.clean(),t.state._active&&(t.updateGestureState(V({},ef(O(t),e),t.getMovement(t.state.values),{_active:!1,origin:[e.clientX,e.clientY]})),t.fireGestureHandler())},t.wheelShouldRun=function(e){return t.enabled&&e.ctrlKey},t.getWheelValuesFromEvent=function(e){var r=Y(e,t.transform)[1],i=t.state.values,n=i[0],o=i[1],s=-(7*r),a=void 0!==o?o:0;return{values:[n+s,a],origin:[e.clientX,e.clientY],delta:[s,a]}},t.onWheel=function(e){t.wheelShouldRun(e)&&(t.setTimeout(t.onWheelEnd),t.state._active?t.onWheelChange(e):t.onWheelStart(e))},t.onWheelStart=function(e){var r=t.getWheelValuesFromEvent(e),i=r.values,n=r.delta,o=r.origin;e.cancelable&&e.preventDefault(),t.updateSharedState(q(e)),t.updateGestureState(V({},eg(O(t),i,e,t.state.values),ef(O(t),e,!0),{offset:i,delta:n,origin:o})),t.updateGestureState(t.getMovement(i)),t.fireGestureHandler()},t.onWheelChange=function(e){e.cancelable&&e.preventDefault(),t.updateSharedState(q(e));var r=t.getWheelValuesFromEvent(e),i=r.values,n=r.origin,o=r.delta;t.updateGestureState(V({},ef(O(t),e),t.getKinematics(i,e),{origin:n,delta:o})),t.fireGestureHandler()},t.onWheelEnd=function(){t.clean(),t.state._active&&(t.state._active=!1,t.updateGestureState(t.getMovement(t.state.values)),t.fireGestureHandler())},t}return P(t,e),t.prototype.addBindings=function(e){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(ey(e,"onGestureStart",this.onGestureStart),ey(e,"onGestureChange",this.onGestureChange),ey(e,"onGestureEnd",this.onGestureEnd)):(ey(e,"onTouchStart",this.onPinchStart),ey(e,"onTouchMove",this.onPinchChange),ey(e,"onTouchEnd",this.onPinchEnd),ey(e,"onTouchCancel",this.onPinchEnd),ey(e,"onWheel",this.onWheel))},t}(function(e){function t(){return e.apply(this,arguments)||this}P(t,e);var r=t.prototype;return r.getInternalMovement=function(e,t){var r=t.values[1],i=e[0],n=e[1],o=void 0===n?r:n,s=o-r,a=t.turns;return Math.abs(s)>270&&(a+=E(s)),j([i,o-360*a],t.initial)},r.getKinematics=function(e,t){var r=this.getMovement(e),i=(e[1]-r._movement[1]-this.state.initial[1])/360,n=t.timeStamp-this.state.timeStamp,o=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(r=o[i])>=0||(n[r]=e[r]);return n}(k(r.movement,r.delta,n),["distance","velocity"]);return V({turns:i},r,o)},r.mapStateValues=function(e){return{da:e.values,vdva:e.velocities}},t}(eu)),ez=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.ingKey="wheeling",t.stateKey="wheel",t.debounced=!0,t.handleEvent=function(e){if((!e.ctrlKey||!("pinch"in t.controller.handlers))&&t.enabled){t.setTimeout(t.onEnd),t.updateSharedState(q(e));var r=C(Y(e,t.transform),t.state.values);if(t.state._active)t.updateGestureState(V({},ef(O(t),e),t.getKinematics(r,e)));else{t.updateGestureState(V({},eg(O(t),r,e,t.state.values),ef(O(t),e,!0)));var i=t.getMovement(r),n=z(i.delta);t.updateGestureState(i),t.updateGestureState(n)}t.fireGestureHandler()}},t.onEnd=function(){if(t.clean(),t.state._active){var e=t.getMovement(t.state.values);t.updateGestureState(e),t.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),t.fireGestureHandler()}},t}return P(t,e),t.prototype.addBindings=function(e){ey(e,"onWheel",this.handleEvent)},t}(eb),ek=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.ingKey="moving",t.stateKey="move",t.debounced=!0,t.onMove=function(e){t.enabled&&(t.setTimeout(t.onMoveEnd),t.state._active?t.onMoveChange(e):t.onMoveStart(e))},t.onMoveStart=function(e){t.updateSharedState(q(e));var r=Q(e,t.transform);t.updateGestureState(V({},eg(O(t),r,e),ef(O(t),e,!0))),t.updateGestureState(t.getMovement(r)),t.fireGestureHandler()},t.onMoveChange=function(e){t.updateSharedState(q(e));var r=Q(e,t.transform);t.updateGestureState(V({},ef(O(t),e),t.getKinematics(r,e))),t.fireGestureHandler()},t.onMoveEnd=function(){if(t.clean(),t.state._active){var e=t.state.values;t.updateGestureState(t.getMovement(e)),t.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),t.fireGestureHandler()}},t.hoverTransform=function(){return t.controller.config.hover.transform||t.controller.config.transform},t.onPointerEnter=function(e){if(t.controller.state.shared.hovering=!0,t.controller.config.enabled){if(t.controller.config.hover.enabled){var r=Q(e,t.hoverTransform()),i=V({},t.controller.state.shared,t.state,ef(O(t),e,!0),{args:t.args,values:r,active:!0,hovering:!0});t.controller.handlers.hover(V({},i,t.mapStateValues(i)))}"move"in t.controller.handlers&&t.onMoveStart(e)}},t.onPointerLeave=function(e){if(t.controller.state.shared.hovering=!1,"move"in t.controller.handlers&&t.onMoveEnd(),t.controller.config.hover.enabled){var r=Q(e,t.hoverTransform()),i=V({},t.controller.state.shared,t.state,ef(O(t),e),{args:t.args,values:r,active:!1});t.controller.handlers.hover(V({},i,t.mapStateValues(i)))}},t}return P(t,e),t.prototype.addBindings=function(e){"move"in this.controller.handlers&&ey(e,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(ey(e,"onPointerEnter",this.onPointerEnter),ey(e,"onPointerLeave",this.onPointerLeave))},t}(eb),eE=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.ingKey="scrolling",t.stateKey="scroll",t.debounced=!0,t.handleEvent=function(e){if(t.enabled){t.clearTimeout(),t.setTimeout(t.onEnd);var r,i,n,o,s,a,l=(void 0===(r=t.transform)&&(r=K),n=(i=e.currentTarget).scrollX,o=i.scrollY,s=i.scrollLeft,a=i.scrollTop,r([n||s||0,o||a||0]));if(t.updateSharedState(q(e)),t.state._active)t.updateGestureState(V({},ef(O(t),e),t.getKinematics(l,e)));else{t.updateGestureState(V({},eg(O(t),l,e,t.state.values),ef(O(t),e,!0)));var c=t.getMovement(l),u=z(c.delta);t.updateGestureState(c),t.updateGestureState(u)}t.fireGestureHandler()}},t.onEnd=function(){t.clean(),t.state._active&&(t.updateGestureState(V({},t.getMovement(t.state.values),{_active:!1,velocities:[0,0],velocity:0})),t.fireGestureHandler())},t}return P(t,e),t.prototype.addBindings=function(e){ey(e,"onScroll",this.handleEvent)},t}(eb),eT=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function eZ(e,t){void 0===t&&(t={});var r,i,n,o,s,l,c,u,d,h,f,g,p,m,x,v,w,y,_,M,L=function(e){var t={},r={},i=new Set;for(var n in e)eT.test(n)?(i.add(RegExp.lastMatch),r[n]=e[n]):t[n]=e[n];return[r,t,i]}(e),b=L[0],C=L[1],j=L[2];el.set("drag",ej),el.set("hover",ek),el.set("move",ek),el.set("pinch",eS),el.set("scroll",eE),el.set("wheel",ez);var S=(void 0===(n=t)&&(n={}),void 0===(o=j)&&(o=new Set),l=(s=n).drag,c=s.wheel,u=s.move,d=s.scroll,h=s.pinch,f=s.hover,g=s.eventOptions,p=s.window,m=s.transform,x=N({domTarget:s.domTarget,eventOptions:g,transform:m,window:p,enabled:s.enabled},er),o.has("onDrag")&&(void 0===(v=l)&&(v={}),x.drag=N(v,en)),o.has("onWheel")&&(x.wheel=eo(c)),o.has("onScroll")&&(x.scroll=eo(d)),o.has("onMove")&&(x.move=eo(u)),o.has("onPinch")&&(void 0===(w=h)&&(w={}),x.pinch=N(w,ei)),o.has("onHover")&&(x.hover=V({enabled:!0},f)),x),z={};return j.has("onDrag")&&(z.drag=eV(b,"onDrag")),j.has("onWheel")&&(z.wheel=eV(b,"onWheel")),j.has("onScroll")&&(z.scroll=eV(b,"onScroll")),j.has("onMove")&&(z.move=eV(b,"onMove")),j.has("onPinch")&&(z.pinch=eV(b,"onPinch")),j.has("onHover")&&(z.hover=b.onHover),void 0===(y=C)&&(y={}),r=z,i=new Set,r.drag&&i.add(el.get("drag")),r.wheel&&i.add(el.get("wheel")),r.scroll&&i.add(el.get("scroll")),r.move&&i.add(el.get("move")),r.pinch&&i.add(el.get("pinch")),r.hover&&i.add(el.get("hover")),_=i,((M=a.default.useMemo(function(){return new ep(_)},[])).config=S,M.handlers=z,M.nativeRefs=y,a.default.useEffect(M.effect,[]),M.config.domTarget)?eL:M.bind}function eV(e,t){var r=t+"Start",i=t+"End";return function(n){var o=void 0;return n.first&&r in e&&e[r](n),t in e&&(o=e[t](n)),n.last&&i in e&&e[i](n),o}}var eP=e.i(2898),eO=e.i(94848),eO=eO;function eH(){return(eH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var eF=eJ(),eA=e=>eQ(e,eF),eR=eJ();eA.write=e=>eQ(e,eR);var eI=eJ();eA.onStart=e=>eQ(e,eI);var eX=eJ();eA.onFrame=e=>eQ(e,eX);var eB=eJ();eA.onFinish=e=>eQ(e,eB);var eN=[];eA.setTimeout=(e,t)=>{let r=eA.now()+t,i=()=>{let e=eN.findIndex(e=>e.cancel==i);~e&&eN.splice(e,1),eq-=!!~e},n={time:r,handler:e,cancel:i};return eN.splice(eG(r),0,n),eq+=1,eU(),n};var eG=e=>~(~eN.findIndex(t=>t.time>e)||~eN.length);eA.cancel=e=>{eI.delete(e),eX.delete(e),eB.delete(e),eF.delete(e),eR.delete(e)},eA.sync=e=>{eK=!0,eA.batchedUpdates(e),eK=!1},eA.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function i(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];t=i,eA.onStart(r)}return i.handler=e,i.cancel=()=>{eI.delete(r),t=null},i};var eD="undefined"!=typeof window?window.requestAnimationFrame:()=>{};eA.use=e=>eD=e,eA.now="undefined"!=typeof performance?()=>performance.now():Date.now,eA.batchedUpdates=e=>e(),eA.catch=console.error,eA.frameLoop="always",eA.advance=()=>{"demand"!==eA.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):e$()};var eW=-1,eq=0,eK=!1;function eQ(e,t){eK?(t.delete(e),e(0)):(t.add(e),eU())}function eU(){eW<0&&(eW=0,"demand"!==eA.frameLoop&&eD(eY))}function eY(){~eW&&(eD(eY),eA.batchedUpdates(e$))}function e$(){let e=eW,t=eG(eW=eA.now());(t&&(e0(eN.splice(0,t),e=>e.handler()),eq-=t),eq)?(eI.flush(),eF.flush(e?Math.min(64,eW-e):16.667),eX.flush(),eR.flush(),eB.flush()):eW=-1}function eJ(){let e=new Set,t=e;return{add(r){eq+=+!(t!=e||e.has(r)),e.add(r)},delete:r=>(eq-=t==e&&e.has(r)?1:0,e.delete(r)),flush(r){t.size&&(e=new Set,eq-=t.size,e0(t,t=>t(r)&&e.add(t)),eq+=e.size,t=e)}}}function e0(e,t){e.forEach(e=>{try{t(e)}catch(e){eA.catch(e)}})}var e1=Object.defineProperty,e2={},e8={assign:()=>ts,colors:()=>ti,createStringInterpolator:()=>t,skipAnimation:()=>tn,to:()=>r,willAdvance:()=>to};for(var e6 in e8)e1(e2,e6,{get:e8[e6],enumerable:!0});function e3(){}var e5={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function e4(e,t){if(e5.arr(e)){if(!e5.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}function e7(e,t,r){if(e5.arr(e)){for(let i=0;i<e.length;i++)t.call(r,e[i],"".concat(i));return}for(let i in e)e.hasOwnProperty(i)&&t.call(r,e[i],i)}var e9=e=>e5.und(e)?[]:e5.arr(e)?e:[e];function te(e,t){if(e.size){let r=Array.from(e);e.clear(),r.forEach(t)}}var tt=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return te(e,e=>e(...r))},tr=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ti=null,tn=!1,to=e3,ts=e=>{e.to&&(r=e.to),e.now&&(eA.now=e.now),void 0!==e.colors&&(ti=e.colors),null!=e.skipAnimation&&(tn=e.skipAnimation),e.createStringInterpolator&&(t=e.createStringInterpolator),e.requestAnimationFrame&&eA.use(e.requestAnimationFrame),e.batchedUpdates&&(eA.batchedUpdates=e.batchedUpdates),e.willAdvance&&(to=e.willAdvance),e.frameLoop&&(eA.frameLoop=e.frameLoop)},ta=new Set,tl=[],tc=[],tu=0,td={get idle(){return!ta.size&&!tl.length},start(e){tu>e.priority?(ta.add(e),eA.onStart(th)):(tf(e),eA(tp))},advance:tp,sort(e){if(tu)eA.onFrame(()=>td.sort(e));else{let t=tl.indexOf(e);~t&&(tl.splice(t,1),tg(e))}},clear(){tl=[],ta.clear()}};function th(){ta.forEach(tf),ta.clear(),eA(tp)}function tf(e){tl.includes(e)||tg(e)}function tg(e){var t,r;let i;tl.splice((t=tl,r=t=>t.priority>e.priority,(i=t.findIndex(r))<0?t.length:i),0,e)}function tp(e){let t=tc;for(let r=0;r<tl.length;r++){let i=tl[r];tu=i.priority,!i.idle&&(to(i),i.advance(e),i.idle||t.push(i))}return tu=0,(tc=tl).length=0,(tl=t).length>0}var tm="[-+]?\\d*\\.?\\d+",tx=tm+"%";function tv(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var tw=RegExp("rgb"+tv(tm,tm,tm)),ty=RegExp("rgba"+tv(tm,tm,tm,tm)),t_=RegExp("hsl"+tv(tm,tx,tx)),tM=RegExp("hsla"+tv(tm,tx,tx,tm)),tL=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tb=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tC=/^#([0-9a-fA-F]{6})$/,tj=/^#([0-9a-fA-F]{8})$/;function tS(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function tz(e,t,r){let i=r<.5?r*(1+t):r+t-r*t,n=2*r-i;return Math.round(255*tS(n,i,e+1/3))<<24|Math.round(255*tS(n,i,e))<<16|Math.round(255*tS(n,i,e-1/3))<<8}function tk(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function tE(e){return(parseFloat(e)%360+360)%360/360}function tT(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function tZ(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function tV(e){let t,r="number"==typeof e?e>>>0===e&&e>=0&&e<=0xffffffff?e:null:(t=tC.exec(e))?parseInt(t[1]+"ff",16)>>>0:ti&&void 0!==ti[e]?ti[e]:(t=tw.exec(e))?(tk(t[1])<<24|tk(t[2])<<16|tk(t[3])<<8|255)>>>0:(t=ty.exec(e))?(tk(t[1])<<24|tk(t[2])<<16|tk(t[3])<<8|tT(t[4]))>>>0:(t=tL.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=tj.exec(e))?parseInt(t[1],16)>>>0:(t=tb.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=t_.exec(e))?(255|tz(tE(t[1]),tZ(t[2]),tZ(t[3])))>>>0:(t=tM.exec(e))?(tz(tE(t[1]),tZ(t[2]),tZ(t[3]))|tT(t[4]))>>>0:null;if(null===r)return e;let i=(0xff000000&(r=r||0))>>>24,n=(0xff0000&r)>>>16,o=(65280&r)>>>8,s=(255&r)/255;return"rgba(".concat(i,", ").concat(n,", ").concat(o,", ").concat(s,")")}var tP=(e,r,i)=>{if(e5.fun(e))return e;if(e5.arr(e))return tP({range:e,output:r,extrapolate:i});if(e5.str(e.output[0]))return t(e);let n=e.output,o=e.range||[0,1],s=e.extrapolateLeft||e.extrapolate||"extend",a=e.extrapolateRight||e.extrapolate||"extend",l=e.easing||(e=>e);return t=>{let r=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(t,o);return function(e,t,r,i,n,o,s,a,l){let c=l?l(e):e;if(c<t)if("identity"===s)return c;else"clamp"===s&&(c=t);if(c>r)if("identity"===a)return c;else"clamp"===a&&(c=r);return i===n?i:t===r?e<=t?i:n:(t===-1/0?c=-c:r===1/0?c-=t:c=(c-t)/(r-t),c=o(c),i===-1/0?c=-c:n===1/0?c+=i:c=c*(n-i)+i,c)}(t,o[r],o[r+1],n[r],n[r+1],l,s,a,e.map)}},tO=Symbol.for("FluidValue.get"),tH=Symbol.for("FluidValue.observers"),tF=e=>!!(e&&e[tO]),tA=e=>e&&e[tO]?e[tO]():e,tR=e=>e[tH]||null;function tI(e,t){let r=e[tH];r&&r.forEach(e=>{e.eventObserved?e.eventObserved(t):e(t)})}var tX=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");tB(this,e)}},tB=(e,t)=>tD(e,tO,t);function tN(e,t){if(e[tO]){let r=e[tH];r||tD(e,tH,r=new Set),!r.has(t)&&(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function tG(e,t){let r=e[tH];if(r&&r.has(t)){let i=r.size-1;i?r.delete(t):e[tH]=null,e.observerRemoved&&e.observerRemoved(i,t)}}var tD=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),tW=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,tq=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,tK=RegExp("(".concat(tW.source,")(%|[a-z]+)"),"i"),tQ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,tU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,tY=e=>{let[t,r]=t$(e);if(!t||tr())return e;let i=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(i)return i.trim();if(r&&r.startsWith("--")){let e=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(e)return e}else if(r&&tU.test(r))return tY(r);else if(r)return r;return e},t$=e=>{let t=tU.exec(e);if(!t)return[,];let[,r,i]=t;return[r,i]},tJ=(e,t,r,i,n)=>"rgba(".concat(Math.round(t),", ").concat(Math.round(r),", ").concat(Math.round(i),", ").concat(n,")"),t0=e=>{i||(i=ti?RegExp("(".concat(Object.keys(ti).join("|"),")(?!\\w)"),"g"):/^\b$/);let t=e.output.map(e=>tA(e).replace(tU,tY).replace(tq,tV).replace(i,tV)),r=t.map(e=>e.match(tW).map(Number)),n=r[0].map((e,t)=>r.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>tP((0,v._)((0,x._)({},e),{output:t})));return e=>{var r;let i=!tK.test(t[0])&&(null==(r=t.find(e=>tK.test(e)))?void 0:r.replace(tW,"")),o=0;return t[0].replace(tW,()=>"".concat(n[o++](e)).concat(i||"")).replace(tQ,tJ)}},t1="react-spring: ",t2=e=>{let t=!1;if("function"!=typeof e)throw TypeError("".concat(t1,"once requires a function parameter"));return function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];t||(e(...i),t=!0)}},t8=t2(console.warn);function t6(){t8("".concat(t1,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var t3=t2(console.warn);function t5(e){return e5.str(e)&&("#"==e[0]||/\d/.test(e)||!tr()&&tU.test(e)||e in(ti||{}))}var t4=new WeakMap,t7=e=>e.forEach(e=>{var t;let{target:r,contentRect:i}=e;return null==(t=t4.get(r))?void 0:t.forEach(e=>e(i))}),t9=new Set,re=function(e){let t,{container:r=document.documentElement}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r===document.documentElement){let t;return t9.add(e),o||(t=()=>{t9.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))},window.addEventListener("resize",t),o=()=>{window.removeEventListener("resize",t)}),()=>{t9.delete(e),!t9.size&&o&&(o(),o=void 0)}}return n||"undefined"==typeof ResizeObserver||(n=new ResizeObserver(t7)),(t=t4.get(r))||(t=new Set,t4.set(r,t)),t.add(e),n&&n.observe(r),()=>{let t=t4.get(r);t&&(t.delete(e),!t.size&&n&&n.unobserve(r))}},rt={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},rr=class{constructor(e,t){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=e=>{let t,r,i=this.info[e],{length:n,position:o}=rt[e];i.current=this.container["scroll".concat(o)],i.scrollLength=this.container["scroll".concat(n)]-this.container["client".concat(n)],t=i.scrollLength,r=i.current,i.progress=t-0==0?1:(r-0)/(t-0)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=t,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},ri=new WeakMap,rn=new WeakMap,ro=new WeakMap,rs=e=>e===document.documentElement?window:e,ra=function(e){let{container:t=document.documentElement}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ro.get(t);r||(r=new Set,ro.set(t,r));let i=new rr(e,t);if(r.add(i),!ri.has(t)){let e=()=>(null==r||r.forEach(e=>e.advance()),!0);ri.set(t,e);let i=rs(t);window.addEventListener("resize",e,{passive:!0}),t!==document.documentElement&&rn.set(t,re(e,{container:t})),i.addEventListener("scroll",e,{passive:!0})}let n=ri.get(t);return eA(n),()=>{eA.cancel(n);let e=ro.get(t);if(!e||(e.delete(i),e.size))return;let r=ri.get(t);if(ri.delete(t),r){var o;rs(t).removeEventListener("scroll",r),window.removeEventListener("resize",r),null==(o=rn.get(t))||o()}}},rl=tr()?a.useEffect:a.useLayoutEffect;function rc(){let e,t=(0,a.useState)()[1],r=(e=(0,a.useRef)(!1),rl(()=>(e.current=!0,()=>{e.current=!1}),[]),e);return()=>{r.current&&t(Math.random())}}var ru=e=>(0,a.useEffect)(e,rd),rd=[];function rh(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e}),t.current}var rf=Symbol.for("Animated:node"),rg=e=>e&&e[rf],rp=(e,t)=>Object.defineProperty(e,rf,{value:t,writable:!0,configurable:!0}),rm=e=>e&&e[rf]&&e[rf].getPayload(),rx=class{getPayload(){return this.payload||[]}constructor(){rp(this,this)}},rv=class e extends rx{static create(t){return new e(t)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return e5.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,e5.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,e5.num(this._value)&&(this.lastPosition=this._value)}},rw=class e extends rv{static create(t){return new e(t)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(e5.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=tP({output:[this.getValue(),e]})),this._value=0,super.reset()}constructor(e){super(0),this._string=null,this._toString=tP({output:[e,e]})}},ry={dependencies:null},r_=class extends rx{getValue(e){let t={};return e7(this.source,(r,i)=>{r&&r[rf]===r?t[i]=r.getValue(e):tF(r)?t[i]=tA(r):e||(t[i]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){let e;this.payload&&(e=this.payload,e.forEach(e=>e.reset()))}_makePayload(e){if(e){let t=new Set;return e7(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){let t;ry.dependencies&&tF(e)&&ry.dependencies.add(e);let r=rm(e);r&&(t=e=>this.add(e),r.forEach(t))}constructor(e){super(),this.source=e,this.setValue(e)}},rM=class e extends r_{static create(t){return new e(t)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let t=this.getPayload();return e.length==t.length?t.map((t,r)=>t.setValue(e[r])).some(Boolean):(super.setValue(e.map(rL)),!0)}constructor(e){super(e)}};function rL(e){return(t5(e)?rw:rv).create(e)}function rb(e){let t=rg(e);return t?t.constructor:e5.arr(e)?rM:t5(e)?rw:rv}var rC=(e,t)=>{let r=!e5.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,a.forwardRef)((i,n)=>{var o,s;let l,c=(0,a.useRef)(null),u=r&&(0,a.useCallback)(e=>{var t,r;t=n,r=e,t&&(e5.fun(t)?t(r):t.current=r),c.current=r},[n]),[d,h]=(o=i,s=t,ry.dependencies=l=new Set,o.style&&(o=(0,v._)((0,x._)({},o),{style:s.createAnimatedStyle(o.style)})),o=new r_(o),ry.dependencies=null,[o,l]),f=rc(),g=()=>{let e=c.current;r&&!e||!1===(!!e&&t.applyAnimatedValues(e,d.getValue(!0)))&&f()},p=new rj(g,h),m=(0,a.useRef)(void 0);rl(()=>{let e;return m.current=p,e=e=>tN(e,p),h.forEach(e),()=>{if(m.current){let e;e=m.current.deps,e.forEach(e=>tG(e,m.current)),eA.cancel(m.current.update)}}}),(0,a.useEffect)(g,[]),ru(()=>()=>{let e,t=m.current;e=t.deps,e.forEach(e=>tG(e,t))});let w=t.getComponentProps(d.getValue());return a.createElement(e,(0,v._)((0,x._)({},w),{ref:u}))})},rj=class{eventObserved(e){"change"==e.type&&eA.write(this.update)}constructor(e,t){this.update=e,this.deps=t}},rS=Symbol.for("AnimatedComponent"),rz=e=>e5.str(e)?e:e&&e5.str(e.displayName)?e.displayName:e5.fun(e)&&e.name||null,rk=class{};function rE(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e5.fun(e)?e(...r):e}e.s(["Any",()=>rk],39337);var rT=(e,t)=>!0===e||!!(t&&e&&(e5.fun(e)?e(t):e9(e).includes(t))),rZ=(e,t)=>e5.obj(e)?t&&e[t]:e,rV=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,rP=e=>e,rO=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rP,r=rH;e.default&&!0!==e.default&&(r=Object.keys(e=e.default));let i={};for(let n of r){let r=t(e[n],n);e5.und(r)||(i[n]=r)}return i},rH=["config","onProps","onStart","onChange","onPause","onResume","onRest"],rF={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function rA(e){let t=function(e){let t={},r=0;if(e7(e,(e,i)=>{!rF[i]&&(t[i]=e,r++)}),r)return t}(e);if(t){let r={to:t};return e7(e,(e,i)=>i in t||(r[i]=e)),r}return(0,x._)({},e)}function rR(e){return e=tA(e),e5.arr(e)?e.map(rR):t5(e)?e2.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function rI(e){for(let t in e)return!0;return!1}function rX(e){return e5.fun(e)||e5.arr(e)&&e5.obj(e[0])}function rB(e,t){var r;null==(r=e.ref)||r.delete(e),null==t||t.delete(e)}function rN(e,t){if(t&&e.ref!==t){var r;null==(r=e.ref)||r.delete(e),t.add(e),e.ref=t}}function rG(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;rl(()=>{if(t){let i=0;e.forEach((e,n)=>{let o=e.current;if(o.length){let s=r*t[n];isNaN(s)?s=i:i=s,o.forEach(e=>{let t;t=e.queue,t.forEach(e=>{let t=e.delay;e.delay=e=>s+rE(t||0,e)})}),e.start()}})}else{let t=Promise.resolve();e.forEach(e=>{let r=e.current;if(r.length){let i=r.map(e=>{let t=e.queue;return e.queue=[],t});t=t.then(()=>{let t;return t=(e,t)=>{let r,n;return r=i[t]||[],n=t=>e.queue.push(t),r.forEach(n)},r.forEach(t),Promise.all(e.start())})}})}})}var rD={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},rW=(0,v._)((0,x._)({},rD.default),{mass:1,damping:1,easing:e=>e,clamp:!1}),rq=class{constructor(){this.velocity=0,Object.assign(this,rW)}};function rK(e,t){if(e5.und(t.decay)){let r=!e5.und(t.tension)||!e5.und(t.friction);!r&&e5.und(t.frequency)&&e5.und(t.damping)&&e5.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var rQ=[],rU=class{constructor(){this.changed=!1,this.values=rQ,this.toValues=null,this.fromValues=rQ,this.config=new rq,this.immediate=!1}};function rY(e,t){let{key:r,props:i,defaultProps:n,state:o,actions:s}=t;return new Promise((t,a)=>{var l;let c,u,d=rT(null!=(l=i.cancel)?l:null==n?void 0:n.cancel,r);if(d)g();else{e5.und(i.pause)||(o.paused=rT(i.pause,r));let e=null==n?void 0:n.pause;!0!==e&&(e=o.paused||rT(e,r)),c=rE(i.delay||0,r),e?(o.resumeQueue.add(f),s.pause()):(s.resume(),f())}function h(){o.resumeQueue.add(f),o.timeouts.delete(u),u.cancel(),c=u.time-eA.now()}function f(){c>0&&!e2.skipAnimation?(o.delayed=!0,u=eA.setTimeout(g,c),o.pauseQueue.add(h),o.timeouts.add(u)):g()}function g(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(h),o.timeouts.delete(u),e<=(o.cancelId||0)&&(d=!0);try{s.start((0,v._)((0,x._)({},i),{callId:e,cancel:d}),t)}catch(e){a(e)}}})}var r$=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?r1(e.get()):t.every(e=>e.noop)?rJ(e.get()):r0(e.get(),t.every(e=>e.finished)),rJ=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),r0=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:r}},r1=e=>({value:e,cancelled:!0,finished:!1});function r2(e,t,r,i){let{callId:n,parentId:o,onRest:s}=t,{asyncTo:a,promise:l}=r;return o||e!==a||t.reset?r.promise=(async()=>{let c,u,d;r.asyncId=n,r.asyncTo=e;let h=rO(t,(e,t)=>"onRest"===t?void 0:e),f=new Promise((e,t)=>(c=e,u=t)),g=e=>{let t=n<=(r.cancelId||0)&&r1(i)||n!==r.asyncId&&r0(i,!1);if(t)throw e.result=t,u(e),e},p=(e,t)=>{let o=new r6,s=new r3;return(async()=>{if(e2.skipAnimation)throw r8(r),s.result=r0(i,!1),u(s),s;g(o);let a=e5.obj(e)?(0,x._)({},e):(0,v._)((0,x._)({},t),{to:e});a.parentId=n,e7(h,(e,t)=>{e5.und(a[t])&&(a[t]=e)});let l=await i.start(a);return g(o),r.paused&&await new Promise(e=>{r.resumeQueue.add(e)}),l})()};if(e2.skipAnimation)return r8(r),r0(i,!1);try{let t;t=e5.arr(e)?(async e=>{for(let t of e)await p(t)})(e):Promise.resolve(e(p,i.stop.bind(i))),await Promise.all([t.then(c),f]),d=r0(i.get(),!0,!1)}catch(e){if(e instanceof r6)d=e.result;else if(e instanceof r3)d=e.result;else throw e}finally{n==r.asyncId&&(r.asyncId=o,r.asyncTo=o?a:void 0,r.promise=o?l:void 0)}return e5.fun(s)&&eA.batchedUpdates(()=>{s(d,i,i.item)}),d})():l}function r8(e,t){te(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var r6=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},r3=class extends Error{constructor(){super("SkipAnimationSignal")}},r5=1,r4=class extends tX{get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=rg(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e2.to(this,t)}interpolate(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t6(),e2.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];tI(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||td.sort(this),tI(this,{type:"priority",parent:this,priority:e})}constructor(){super(...arguments),this.id=r5++,this._priority=0}},r7=Symbol.for("SpringPhase"),r9=e=>(1&e[r7])>0,ie=e=>(2&e[r7])>0,it=e=>(4&e[r7])>0,ir=(e,t)=>t?e[r7]|=3:e[r7]&=-3,ii=(e,t)=>t?e[r7]|=4:e[r7]&=-5,io=class extends r4{get idle(){return!(ie(this)||this._state.asyncTo)||it(this)}get goal(){return tA(this.animation.to)}get velocity(){let e=rg(this);return e instanceof rv?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return r9(this)}get isAnimating(){return ie(this)}get isPaused(){return it(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1,i=this.animation,{toValues:n}=i,{config:o}=i,s=rm(i.to);!s&&tF(i.to)&&(n=e9(tA(i.to))),i.values.forEach((a,l)=>{if(a.done)return;let c=a.constructor==rw?1:s?s[l].lastPosition:n[l],u=i.immediate,d=c;if(!u){let t;if(d=a.lastPosition,o.tension<=0){a.done=!0;return}let r=a.elapsedTime+=e,n=i.fromValues[l],s=null!=a.v0?a.v0:a.v0=e5.arr(o.velocity)?o.velocity[l]:o.velocity,h=o.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(e5.und(o.duration))if(o.decay){let e=!0===o.decay?.998:o.decay,i=Math.exp(-(1-e)*r);d=n+s/(1-e)*(1-i),u=Math.abs(a.lastPosition-d)<=h,t=s*i}else{t=null==a.lastVelocity?s:a.lastVelocity;let r=o.restVelocity||h/10,i=o.clamp?0:o.bounce,l=!e5.und(i),f=n==c?a.v0>0:n<c,g=Math.ceil(e/1);for(let e=0;e<g&&!(!(Math.abs(t)>r)&&(u=Math.abs(c-d)<=h));++e){l&&(d==c||d>c==f)&&(t=-t*i,d=c);let e=(-(1e-6*o.tension)*(d-c)+-(.001*o.friction)*t)/o.mass;t+=+e,d+=+t}}else{let i=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,a.durationProgress>0&&(a.elapsedTime=o.duration*a.durationProgress,r=a.elapsedTime+=e)),a.durationProgress=i=(i=(o.progress||0)+r/this._memoizedDuration)>1?1:i<0?0:i),t=((d=n+o.easing(i)*(c-n))-a.lastPosition)/e,u=1==i}a.lastVelocity=t,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),u=!0)}s&&!s[l].done&&(u=!1),u?a.done=!0:t=!1,a.setValue(d,o.round)&&(r=!0)});let a=rg(this),l=a.getValue();if(t){let e=tA(i.to);(l!==e||r)&&!o.decay?(a.setValue(e),this._onChange(e)):r&&o.decay&&this._onChange(l),this._stop()}else r&&this._onChange(l)}set(e){return eA.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ie(this)){let{to:e,config:t}=this.animation;eA.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return e5.und(e)?(r=this.queue||[],this.queue=[]):r=[e5.obj(e)?e:(0,v._)((0,x._)({},t),{to:e})],Promise.all(r.map(e=>this._update(e))).then(e=>r$(this,e))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),r8(this._state,e&&this._lastCallId),eA.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:r,from:i}=e;(null==(r=e5.obj(r)?r[t]:r)||rX(r))&&(r=void 0),null==(i=e5.obj(i)?i[t]:i)&&(i=void 0);let n={to:r,from:i};return!r9(this)&&(e.reverse&&([r,i]=[i,r]),i=tA(i),e5.und(i)?rg(this)||this._set(r):this._set(i)),n}_update(e,t){var r=eH({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e));let{key:i,defaultProps:n}=this;r.default&&Object.assign(n,rO(r,(e,t)=>/^on/.test(t)?rZ(e,i):e)),id(this,r,"onProps"),ih(this,"onProps",r,this);let o=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let s=this._state;return rY(++this._lastCallId,{key:i,props:r,defaultProps:n,state:s,actions:{pause:()=>{it(this)||(ii(this,!0),tt(s.pauseQueue),ih(this,"onPause",r0(this,is(this,this.animation.to)),this))},resume:()=>{it(this)&&(ii(this,!1),ie(this)&&this._resume(),tt(s.resumeQueue),ih(this,"onResume",r0(this,is(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(e=>{if(r.loop&&e.finished&&!(t&&e.noop)){let e=ia(r);if(e)return this._update(e,!0)}return e})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(r1(this));let i=!e5.und(e.to),n=!e5.und(e.from);if(i||n)if(!(t.callId>this._lastToId))return r(r1(this));else this._lastToId=t.callId;let{key:o,defaultProps:s,animation:a}=this,{to:l,from:c}=a,{to:u=l,from:d=c}=e;n&&!i&&(!t.default||e5.und(u))&&(u=d),t.reverse&&([u,d]=[d,u]);let h=!e4(d,c);h&&(a.from=d),d=tA(d);let f=!e4(u,l);f&&this._focus(u);let g=rX(t.to),{config:p}=a,{decay:m,velocity:v}=p;(i||n)&&(p.velocity=0),t.config&&!g&&function(e,t,r){for(let i in r&&(rK(r=(0,x._)({},r),t),t=(0,x._)({},r,t)),rK(e,t),Object.assign(e,t),rW)null==e[i]&&(e[i]=rW[i]);let{frequency:i,damping:n}=e,{mass:o}=e;e5.und(i)||(i<.01&&(i=.01),n<0&&(n=0),e.tension=Math.pow(2*Math.PI/i,2)*o,e.friction=4*Math.PI*n*o/i)}(p,rE(t.config,o),t.config!==s.config?rE(s.config,o):void 0);let w=rg(this);if(!w||e5.und(u))return r(r0(this,!0));let y=e5.und(t.reset)?n&&!t.default:!e5.und(d)&&rT(t.reset,o),_=y?d:this.get(),M=rR(u),L=e5.num(M)||e5.arr(M)||t5(M),b=!g&&(!L||rT(s.immediate||t.immediate,o));if(f){let e=rb(u);if(e!==w.constructor)if(b)w=this._set(M);else throw Error("Cannot animate between ".concat(w.constructor.name," and ").concat(e.name,', as the "to" prop suggests'))}let C=w.constructor,j=tF(u),S=!1;if(!j){let e=y||!r9(this)&&h;(f||e)&&(j=!(S=e4(rR(_),M))),(e4(a.immediate,b)||b)&&e4(p.decay,m)&&e4(p.velocity,v)||(j=!0)}if(S&&ie(this)&&(a.changed&&!y?j=!0:j||this._stop(l)),!g&&((j||tF(l))&&(a.values=w.getPayload(),a.toValues=tF(u)?null:C==rw?[1]:e9(M)),a.immediate!=b&&(a.immediate=b,b||y||this._set(l)),j)){let e,{onRest:i}=a;e=e=>id(this,t,e),iu.forEach(e);let n=r0(this,is(this,l));tt(this._pendingCalls,n),this._pendingCalls.add(r),a.changed&&eA.batchedUpdates(()=>{if(a.changed=!y,null==i||i(n,this),y)rE(s.onRest,n);else{var e;null==(e=a.onStart)||e.call(a,n,this)}})}y&&this._set(_),g?r(r2(t.to,t,this._state,this)):j?this._start():ie(this)&&!f?this._pendingCalls.add(r):r(rJ(_))}_focus(e){let t=this.animation;e!==t.to&&(tR(this)&&this._detach(),t.to=e,tR(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;tF(t)&&(tN(t,this),t instanceof r4&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;tF(e)&&tG(e,this)}_set(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=tA(e);if(!e5.und(r)){let e=rg(this);if(!e||!e4(r,e.getValue())){let i=rb(r);e&&e.constructor==i?e.setValue(r):rp(this,i.create(r)),e&&eA.batchedUpdates(()=>{this._onChange(r,t)})}}return rg(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,ih(this,"onStart",r0(this,is(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),rE(this.animation.onChange,e,this)),rE(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;rg(this).reset(tA(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),!ie(this)&&(ir(this,!0),it(this)||this._resume())}_resume(){e2.skipAnimation?this.finish():td.start(this)}_stop(e,t){if(ie(this)){let r;ir(this,!1);let i=this.animation;r=i.values,r.forEach(e=>{e.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),tI(this,{type:"idle",parent:this});let n=t?r1(this.get()):r0(this.get(),is(this,null!=e?e:i.to));tt(this._pendingCalls,n),i.changed&&(i.changed=!1,ih(this,"onRest",n,this))}}constructor(e,t){if(super(),this.animation=new rU,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!e5.und(e)||!e5.und(t)){const r=e5.obj(e)?(0,x._)({},e):(0,v._)((0,x._)({},t),{from:e});e5.und(r.default)&&(r.default=!0),this.start(r)}}};function is(e,t){let r=rR(t);return e4(rR(e.get()),r)}function ia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,i=rE(t);if(i){let n=!0!==i&&rA(i),o=(n||e).reverse,s=!n||n.reset;return il((0,x._)((0,v._)((0,x._)({},e),{loop:t,default:!1,pause:void 0,to:!o||rX(r)?r:void 0,from:s?e.from:void 0,reset:s}),n))}}function il(e){let{to:t,from:r}=e=rA(e),i=new Set;return e5.obj(t)&&ic(t,i),e5.obj(r)&&ic(r,i),e.keys=i.size?Array.from(i):null,e}function ic(e,t){e7(e,(e,r)=>null!=e&&t.add(r))}var iu=["onStart","onRest","onChange","onPause","onResume"];function id(e,t,r){e.animation[r]=t[r]!==rV(t,r)?rZ(t[r],e.key):void 0}function ih(e,t){for(var r,i,n,o,s=arguments.length,a=Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];null==(r=(i=e.animation)[t])||r.call(i,...a),null==(n=(o=e.defaultProps)[t])||n.call(o,...a)}var ig=["onStart","onChange","onRest"],ip=1,im=class{get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(let t in e){let r=e[t];e5.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(il(e)),this}start(e){let{queue:t}=this;return(e?t=e9(e).map(il):this.queue=[],this._flush)?this._flush(this,t):(iL(this,t),ix(this,t))}stop(e,t){if(!!e!==e&&(t=e),t){let r,i=this.springs;r=e9(t),r.forEach(t=>i[t].stop(!!e))}else r8(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(e5.und(e))this.start({pause:!0});else{let t,r=this.springs;t=e9(e),t.forEach(e=>r[e].pause())}return this}resume(e){if(e5.und(e))this.start({pause:!1});else{let t,r=this.springs;t=e9(e),t.forEach(e=>r[e].resume())}return this}each(e){e7(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:r}=this._events,i=this._active.size>0,n=this._changed.size>0;(i&&!this._started||n&&!this._started)&&(this._started=!0,te(e,e=>{let[t,r]=e;r.value=this.get(),t(r,this,this._item)}));let o=!i&&this._started,s=n||o&&r.size?this.get():null;n&&t.size&&te(t,e=>{let[t,r]=e;r.value=s,t(r,this,this._item)}),o&&(this._started=!1,te(r,e=>{let[t,r]=e;r.value=s,t(r,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}eA.onFrame(this._onFrame)}constructor(e,t){this.id=ip++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start((0,x._)({default:!0},e))}};function ix(e,t){return Promise.all(t.map(t=>iv(e,t))).then(t=>r$(e,t))}async function iv(e,t,r){let{keys:i,to:n,from:o,loop:s,onRest:a,onResolve:l}=t,c=e5.obj(t.default)&&t.default;s&&(t.loop=!1),!1===n&&(t.to=null),!1===o&&(t.from=null);let u=e5.arr(n)||e5.fun(n)?n:void 0;if(u)t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0);else ig.forEach(r=>{let i=t[r];if(e5.fun(i)){let n=e._events[r];t[r]=e=>{let{finished:t,cancelled:r}=e,o=n.get(i);o?(t||(o.finished=!1),r&&(o.cancelled=!0)):n.set(i,{value:null,finished:t||!1,cancelled:r||!1})},c&&(c[r]=t[r])}});let d=e._state;!d.paused===t.pause?(d.paused=t.pause,tt(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);let h=(i||Object.keys(e.springs)).map(r=>e.springs[r].start(t)),f=!0===t.cancel||!0===rV(t,"cancel");(u||f&&d.asyncId)&&h.push(rY(++e._lastAsyncId,{props:t,state:d,actions:{pause:e3,resume:e3,start(t,r){f?(r8(d,e._lastAsyncId),r(r1(e))):(t.onRest=a,r(r2(u,t,d,e)))}}})),d.paused&&await new Promise(e=>{d.resumeQueue.add(e)});let g=r$(e,await Promise.all(h));if(s&&g.finished&&!(r&&g.noop)){let r=ia(t,s,n);if(r)return iL(e,[r]),iv(e,r,!0)}return l&&eA.batchedUpdates(()=>l(g,e,e.item)),g}function iw(e,t){let r,i,n=(0,x._)({},e.springs);return t&&(r=e9(t),i=e=>{e5.und(e.keys)&&(e=il(e)),e5.obj(e.to)||(e=(0,v._)((0,x._)({},e),{to:void 0})),iM(n,e,e=>i_(e))},r.forEach(i)),iy(e,n),n}function iy(e,t){e7(t,(t,r)=>{e.springs[r]||(e.springs[r]=t,tN(t,e))})}function i_(e,t){let r=new io;return r.key=e,t&&tN(r,t),r}function iM(e,t,r){let i;t.keys&&(i=t.keys,i.forEach(i=>{(e[i]||(e[i]=r(i)))._prepareNode(t)}))}function iL(e,t){t.forEach(t=>{iM(e.springs,t,t=>i_(t,e))})}var ib=a.createContext({pause:!1,immediate:!1}),iC=()=>{let e=[],t=function(t){let i;t3("".concat(t1,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));let n=[];return i=(e,i)=>{if(e5.und(t))n.push(e.start());else{let o=r(t,e,i);o&&n.push(e.start(o))}},e.forEach(i),n};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){let r=e.indexOf(t);~r&&e.splice(r,1)},t.pause=function(){let t;return t=e=>e.pause(...arguments),e.forEach(t),this},t.resume=function(){let t;return t=e=>e.resume(...arguments),e.forEach(t),this},t.set=function(t){e.forEach((e,r)=>{let i=e5.fun(t)?t(r,e):t;i&&e.set(i)})},t.start=function(t){let r,i=[];return r=(e,r)=>{if(e5.und(t))i.push(e.start());else{let n=this._getProps(t,e,r);n&&i.push(e.start(n))}},e.forEach(r),i},t.stop=function(){let t;return t=e=>e.stop(...arguments),e.forEach(t),this},t.update=function(t){let r;return r=(e,r)=>e.update(this._getProps(t,e,r)),e.forEach(r),this};let r=function(e,t,r){return e5.fun(e)?e(r,t):e};return t._getProps=r,t};function ij(e,t,r){let i=e5.fun(t)&&t;i&&!r&&(r=[]);let n=(0,a.useMemo)(()=>i||3==arguments.length?iC():void 0,[]),o=(0,a.useRef)(0),s=rc(),l=(0,a.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){let r=iw(e,t);return!(o.current>0)||l.queue.length||Object.keys(r).some(t=>!e.springs[t])?new Promise(i=>{iy(e,r),l.queue.push(()=>{i(ix(e,t))}),s()}):ix(e,t)}}),[]),c=(0,a.useRef)([...l.ctrls]),u=(0,a.useRef)([]),d=rh(e)||0;function h(e,r){for(let n=e;n<r;n++){let e=c.current[n]||(c.current[n]=new im(null,l.flush)),r=i?i(n,e):t[n];r&&(u.current[n]=function(e){let t=il(e);return e5.und(t.default)&&(t.default=rO(t)),t}(r))}}(0,a.useMemo)(()=>{let t;t=c.current.slice(e,d),t.forEach(e=>{rB(e,n),e.stop(!0)}),c.current.length=e,h(d,e)},[e]),(0,a.useMemo)(()=>{h(0,Math.min(d,e))},r);let f=c.current.map((e,t)=>iw(e,u.current[t])),g=(0,a.useContext)(ib),p=rh(g),m=g!==p&&rI(g);rl(()=>{let e;o.current++,l.ctrls=c.current;let{queue:t}=l;t.length&&(l.queue=[],t.forEach(e=>e()));e=c.current,e.forEach((e,t)=>{null==n||n.add(e),m&&e.start({default:g});let r=u.current[t];r&&(rN(e,r.ref),e.ref?e.queue.push(r):e.start(r))})}),ru(()=>()=>{let e;e=l.ctrls,e.forEach(e=>e.stop(!0))});let v=f.map(e=>(0,x._)({},e));return n?[v,n]:v}function iS(e,t){let r=e5.fun(e),[[i],n]=ij(1,r?e:[e],r?t||[]:t);return r||2==arguments.length?[i,n]:i}var iz=()=>iC(),ik=()=>(0,a.useState)(iz)[0],iE=(e,t)=>{var r;let i,n=(r=()=>new io(e,t),null===(i=(0,a.useRef)(null)).current&&(i.current=r()),i.current);return ru(()=>()=>{n.stop()}),n};function iT(e,t,r){let i,n=e5.fun(t)&&t;n&&!r&&(r=[]);let o=!0,s=ij(e,(e,r)=>{let s=n?n(e,r):t;return i=s.ref,o=o&&s.reverse,s},r||[{}]);if(rl(()=>{let e;e=s[1].current,e.forEach((e,t)=>{let r=s[1].current[t+(o?1:-1)];if(rN(e,i),e.ref){r&&e.update({to:r.springs});return}r?e.start({to:r.springs}):e.start()})},r),n||3==arguments.length){let e=null!=i?i:s[1];return e._getProps=(t,r,i)=>{let n=e5.fun(t)?t(i,r):t;if(n){let t=e.current[i+(n.reverse?1:-1)];return t&&(n.to=t.springs),n}},s}return s[0]}function iZ(e,t,r){let i,n=e5.fun(t)&&t,{reset:o,sort:s,trail:l=0,expires:c=!0,exitBeforeEnter:u=!1,onDestroyed:d,ref:h,config:f}=n?n():t,g=(0,a.useMemo)(()=>n||3==arguments.length?iC():void 0,[]),p=e9(e),m=[],w=(0,a.useRef)(null),y=o?null:w.current;rl(()=>{w.current=m}),ru(()=>{let e;return e=e=>{null==g||g.add(e.ctrl),e.ctrl.ref=g},m.forEach(e),()=>{let e;e=w.current,e.forEach(e=>{e.expired&&clearTimeout(e.expirationId),rB(e.ctrl,g),e.ctrl.stop(!0)})}});let _=function(e,t,r){let{key:i,keys:n=i}=t;if(null===n){let t=new Set;return e.map(e=>{let i=r&&r.find(r=>r.item===e&&"leave"!==r.phase&&!t.has(r));return i?(t.add(i),i.key):iV++})}return e5.und(n)?e:e5.fun(n)?e.map(n):e9(n)}(p,n?n():t,y),M=o&&w.current||[];rl(()=>{let e;return e=e=>{let{ctrl:t,item:r,key:i}=e;rB(t,g),rE(d,r,i)},M.forEach(e)});let L=[];if(y&&y.forEach((e,t)=>{e.expired?(clearTimeout(e.expirationId),M.push(e)):~(t=L[t]=_.indexOf(e.key))&&(m[t]=e)}),i=(e,t)=>{m[t]||(m[t]={key:_[t],item:e,phase:"mount",ctrl:new im},m[t].ctrl.item=e)},p.forEach(i),L.length){let e=-1,{leave:r}=n?n():t;L.forEach((t,i)=>{let n=y[i];~t?(e=m.indexOf(n),m[e]=(0,v._)((0,x._)({},n),{item:p[t]})):r&&m.splice(++e,0,n)})}e5.fun(s)&&m.sort((e,t)=>s(e.item,t.item));let b=-l,C=rc(),j=rO(t),S=new Map,z=(0,a.useRef)(new Map),k=(0,a.useRef)(!1);m.forEach((e,r)=>{let i,o,s=e.key,a=e.phase,d=n?n():t,g=rE(d.delay||0,s);if("mount"==a)i=d.enter,o="enter";else{let e=0>_.indexOf(s);if("leave"!=a)if(e)i=d.leave,o="leave";else{if(!(i=d.update))return;o="update"}else{if(e)return;i=d.enter,o="enter"}}if(i=rE(i,e.item,r),!(i=e5.obj(i)?rA(i):{to:i}).config){let t=f||j.config;i.config=rE(t,e.item,r,o)}b+=l;let p=(0,x._)((0,v._)((0,x._)({},j),{delay:g+b,ref:h,immediate:d.immediate,reset:!1}),i);if("enter"==o&&e5.und(p.from)){let i=n?n():t;p.from=rE(e5.und(i.initial)||y?i.from:i.initial,e.item,r)}let{onResolve:m}=p;p.onResolve=e=>{rE(m,e);let t=w.current,r=t.find(e=>e.key===s);if(r&&(!e.cancelled||"update"==r.phase)&&r.ctrl.idle){let e=t.every(e=>e.ctrl.idle);if("leave"==r.phase){let t=rE(c,r.item);if(!1!==t){let i=!0===t?0:t;if(r.expired=!0,!e&&i>0){i<=0x7fffffff&&(r.expirationId=setTimeout(C,i));return}}}e&&t.some(e=>e.expired)&&(z.current.delete(r),u&&(k.current=!0),C())}};let M=iw(e.ctrl,p);"leave"===o&&u?z.current.set(e,{phase:o,springs:M,payload:p}):S.set(e,{phase:o,springs:M,payload:p})});let E=(0,a.useContext)(ib),T=rh(E),Z=E!==T&&rI(E);rl(()=>{Z&&m.forEach(e=>{e.ctrl.start({default:E})})},[E]),S.forEach((e,t)=>{if(z.current.size){let e=m.findIndex(e=>e.key===t.key);m.splice(e,1)}}),rl(()=>{let e;e=z.current.size?z.current:S,e.forEach((e,t)=>{let{phase:r,payload:i}=e,{ctrl:n}=t;t.phase=r,null==g||g.add(n),Z&&"enter"==r&&n.start({default:E}),i&&(rN(n,i.ref),(n.ref||g)&&!k.current?n.update(i):(n.start(i),k.current&&(k.current=!1)))})},o?void 0:r);let V=e=>a.createElement(a.Fragment,null,m.map((t,r)=>{var i;let{springs:n}=S.get(t)||t.ctrl,o=e((0,x._)({},n),t.item,t,r),s=e5.str(t.key)||e5.num(t.key)?t.key:t.ctrl.id,l=a.version<"19.0.0",c=null!=(i=null==o?void 0:o.props)?i:{},u=l?null==o?void 0:o.ref:null==c?void 0:c.ref;return o&&o.type?a.createElement(o.type,(0,v._)((0,x._)({},c),{key:s,ref:u})):o}));return g?[V,g]:V}var iV=1,iP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var{container:t}=e,r=(0,L._)(e,["container"]);let[i,n]=iS(()=>(0,x._)({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0},r),[]);return rl(()=>{let e=ra(e=>{let{x:t,y:r}=e;n.start({scrollX:t.current,scrollXProgress:t.progress,scrollY:r.current,scrollYProgress:r.progress})},{container:(null==t?void 0:t.current)||void 0});return()=>{let t;t=Object.values(i),t.forEach(e=>e.stop()),e()}},[]),i},iO=e=>{var{container:t}=e,r=(0,L._)(e,["container"]);let[i,n]=iS(()=>(0,x._)({width:0,height:0},r),[]);return rl(()=>{let e=re(e=>{let{width:t,height:o}=e;n.start({width:t,height:o,immediate:0===i.width.get()||0===i.height.get()||!0===r.immediate})},{container:(null==t?void 0:t.current)||void 0});return()=>{let t;t=Object.values(i),t.forEach(e=>e.stop()),e()}},[]),i},iH={any:0,all:1};function iF(e,t){let[r,i]=(0,a.useState)(!1),n=(0,a.useRef)(void 0),o=e5.fun(e)&&e,s=o?o():{},{to:l={},from:c={}}=s,u=(0,L._)(s,["to","from"]),d=o?t:e,[h,f]=iS(()=>(0,x._)({from:c},u),[]);return(rl(()=>{let e=n.current,t=null!=d?d:{},{root:o,once:s,amount:a="any"}=t,u=(0,L._)(t,["root","once","amount"]);if(!e||s&&r||"undefined"==typeof IntersectionObserver)return;let h=new WeakMap,g=new IntersectionObserver(e=>{e.forEach(e=>{let t=h.get(e.target);if(!!t!==e.isIntersecting)if(e.isIntersecting){let t=(l&&f.start(l),i(!0),s?void 0:()=>{c&&f.start(c),i(!1)});e5.fun(t)?h.set(e.target,t):g.unobserve(e.target)}else t&&(t(),h.delete(e.target))})},(0,x._)({root:o&&o.current||void 0,threshold:"number"==typeof a||Array.isArray(a)?a:iH[a]},u));return g.observe(e),()=>g.unobserve(e)},[d]),o)?[n,h]:[n,r]}function iA(e){var{children:t}=e;return t(iS((0,L._)(e,["children"])))}function iR(e){var{items:t,children:r}=e,i=(0,L._)(e,["items","children"]);let n=iT(t.length,i);return t.map((e,t)=>{let i=r(e,t);return e5.fun(i)?i(n[t]):i})}function iI(e){var{items:t,children:r}=e;return iZ(t,(0,L._)(e,["items","children"]))(r)}var iX=class extends r4{advance(e){let t=this._get();e4(t,this.get())||(rg(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&iN(this._active)&&iG(this)}_get(){let e=e5.arr(this.source)?this.source.map(tA):e9(tA(this.source));return this.calc(...e)}_start(){if(this.idle&&!iN(this._active)){let e;this.idle=!1,e=rm(this),e.forEach(e=>{e.done=!1}),e2.skipAnimation?(eA.batchedUpdates(()=>this.advance()),iG(this)):td.start(this)}}_attach(){let e,t,r=1;e=e9(this.source),t=e=>{tF(e)&&tN(e,this),e instanceof r4&&(e.idle||this._active.add(e),r=Math.max(r,e.priority+1))},e.forEach(t),this.priority=r,this._start()}_detach(){let e,t;e=e9(this.source),t=e=>{tF(e)&&tG(e,this)},e.forEach(t),this._active.clear(),iG(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=e9(this.source).reduce((e,t)=>Math.max(e,(t instanceof r4?t.priority:0)+1),0))}constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=tP(...t);const r=this._get();rp(this,rb(r).create(r))}};function iB(e){return!1!==e.idle}function iN(e){return!e.size||Array.from(e).every(iB)}function iG(e){if(!e.idle){let t;e.idle=!0,t=rm(e),t.forEach(e=>{e.done=!0}),tI(e,{type:"idle",parent:e})}}var iD=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return new iX(e,r)},iW=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return t6(),new iX(e,r)};e2.assign({createStringInterpolator:t0,to:(e,t)=>new iX(e,t)});var iq=td.advance;e.s(["BailSignal",()=>r6,"Controller",()=>im,"FrameValue",()=>r4,"Interpolation",()=>iX,"Spring",()=>iA,"SpringContext",()=>ib,"SpringRef",()=>iC,"SpringValue",()=>io,"Trail",()=>iR,"Transition",()=>iI,"config",()=>rD,"inferTo",()=>rA,"interpolate",()=>iW,"to",()=>iD,"update",()=>iq,"useChain",()=>rG,"useInView",()=>iF,"useResize",()=>iO,"useScroll",()=>iP,"useSpring",()=>iS,"useSpringRef",()=>ik,"useSpringValue",()=>iE,"useSprings",()=>ij,"useTrail",()=>iT,"useTransition",()=>iZ],65658);var iK=["primitive"].concat(Object.keys(e.i(32009)).filter(e=>/^[A-Z]/.test(e)).map(e=>e[0].toLowerCase()+e.slice(1)));e2.assign({createStringInterpolator:t0,colors:{transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff},frameLoop:"demand"}),(0,eO.j)(()=>{eA.advance()});var iQ=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=e=>new r_(e),getComponentProps:i=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:i},o=e=>{let t=rz(e)||"Anonymous";return(e=e5.str(e)?o[e]||(o[e]=rC(e,n)):e[rS]||(e[rS]=rC(e,n))).displayName="Animated(".concat(t,")"),e};return e7(e,(t,r)=>{e5.arr(e)&&(r=rz(t)),o[r]=o(t)}),{animated:o}}(iK,{applyAnimatedValues:eP.applyProps}).animated;e.i(65658),e.i(39337);let iU={gridX:4,gridZ:14},iY={gridX:10,gridZ:15.5},i$={gridX:10,gridZ:10.5},iJ={gridX:10,gridZ:9},i0={gridX:2,gridZ:5},i1={gridX:7.5,gridZ:2},i2={gridX:6.5,gridZ:2},i8={gridX:7,gridZ:5};function i6(e,t,r){let{cellSize:i,centerX:n,centerZ:o,width:s,height:a}=r;return{x:n-s/2+e*i,y:1.01,z:o-a/2+t*i}}function i3(e){let{isSelected:t,onRotate:r,onMoveRight:i,onMoveLeft:n,onMoveTop:o,onMoveBottom:a,onPlace:l=()=>{},title:c}=e;return t?(0,s.jsxs)(b.Html,{position:[0,5.5,0],center:!0,children:[c&&(0,s.jsx)("div",{className:"object-controls__title",children:c}),(0,s.jsxs)("div",{className:"object-controls",children:[(0,s.jsxs)("div",{className:"object-controls__row object-controls__row--first",children:[(0,s.jsx)("button",{className:"object-controls__action object-controls__action--rotate",onClick:r,title:"Rotate",children:(0,s.jsx)("svg",{width:"22",height:"19",viewBox:"0 0 22 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7.29373 16.8632L6.9055 18.3121L7.29373 16.8632ZM15.4147 10.9498C15.2003 11.75 15.6752 12.5725 16.4754 12.787C17.2756 13.0014 18.0981 12.5265 18.3125 11.7263L16.8636 11.3381L15.4147 10.9498ZM12.6883 17.9981C13.4604 17.6977 13.8426 16.8282 13.5422 16.0562C13.2417 15.2842 12.3723 14.9019 11.6003 15.2024L12.1443 16.6002L12.6883 17.9981ZM19.5808 9.6161L20.6414 10.6768C21.0704 10.2478 21.1988 9.60259 20.9666 9.04208C20.7344 8.48156 20.1875 8.1161 19.5808 8.1161L19.5808 9.6161ZM16.9762 12.2207L15.9155 13.2814C16.5013 13.8671 17.4511 13.8671 18.0369 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 8.1161C13.7649 8.1161 13.2179 8.48157 12.9858 9.04208C12.7536 9.60259 12.8819 10.2478 13.3109 10.6768L14.3716 9.6161ZM7.29373 16.8632L7.68196 15.4143C4.31377 14.5118 2.31494 11.0498 3.21744 7.68159L1.76855 7.29336L0.319665 6.90513C-1.01166 11.8737 1.93692 16.9808 6.9055 18.3121L7.29373 16.8632ZM1.76855 7.29336L3.21744 7.68159C4.11994 4.3134 7.58202 2.31457 10.9502 3.21708L11.3384 1.76819L11.7267 0.319298C6.75808 -1.01203 1.65099 1.93655 0.319665 6.90513L1.76855 7.29336ZM11.3384 1.76819L10.9502 3.21708C14.3184 4.11958 16.3172 7.58165 15.4147 10.9498L16.8636 11.3381L18.3125 11.7263C19.6438 6.75771 16.6953 1.65063 11.7267 0.319298L11.3384 1.76819ZM12.1443 16.6002L11.6003 15.2024C10.3925 15.6724 9.03186 15.776 7.68196 15.4143L7.29373 16.8632L6.9055 18.3121C8.89247 18.8445 10.9059 18.6918 12.6883 17.9981L12.1443 16.6002ZM19.5808 9.6161L18.5201 8.55544L15.9155 11.16L16.9762 12.2207L18.0369 13.2814L20.6414 10.6768L19.5808 9.6161ZM16.9762 12.2207L18.0368 11.16L15.4323 8.55544L14.3716 9.6161L13.3109 10.6768L15.9155 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 11.1161L19.5808 11.1161L19.5808 9.6161L19.5808 8.1161L14.3716 8.1161L14.3716 9.6161Z",fill:"currentColor"})})}),(0,s.jsx)("button",{className:"object-controls__action object-controls__action--save",onClick:l,title:"Place",children:(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M1.5 1.5L11.9184 11.9184M12.3368 1.50001L1.91841 11.9184",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})})})]}),(0,s.jsx)("div",{className:"object-controls__row",children:(0,s.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--up",onClick:o,title:"Move Top",children:(0,s.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})})}),(0,s.jsxs)("div",{className:"object-controls__row",children:[(0,s.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--left",onClick:n,title:"Move Left",children:(0,s.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})}),(0,s.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--right",onClick:i,title:"Move Right",children:(0,s.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})})]}),(0,s.jsx)("div",{className:"object-controls__row",children:(0,s.jsx)("button",{className:"object-controls__dpad-button object-controls__dpad-button--down",onClick:a,title:"Move Bottom",children:(0,s.jsx)("svg",{width:"25",height:"15",viewBox:"0 0 25 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})})})})]})]}):null}function i5(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/bath.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]);let m=(0,a.useRef)(),[_,M]=(0,a.useState)("cameraState"),[C,j]=(0,a.useState)(0),[S]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[z,k]=(0,a.useState)(!1),[E]=(0,h.useStore)("objectPositionResetTrigger",0),T=i6(iJ.gridX,iJ.gridZ,S),[Z,V]=(0,a.useState)({x:T.x,y:T.y,z:T.z}),[P,O]=(0,a.useState)({gridX:iJ.gridX,gridZ:iJ.gridZ}),H=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&S&&S.width>0){let e=i6(iJ.gridX,iJ.gridZ,S);V({x:e.x,y:e.y,z:e.z}),z||(O({gridX:iJ.gridX,gridZ:iJ.gridZ}),k(!0))}},[r,S,iJ,z]),(0,a.useEffect)(()=>{if(E>0&&S&&S.width>0){let e=i6(iJ.gridX,iJ.gridZ,S);V({x:e.x,y:e.y,z:e.z}),O({gridX:iJ.gridX,gridZ:iJ.gridZ}),j(0)}},[E,S,iJ]);let F=(e,t)=>{if(!S||0===S.width)return;let r=H.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),O(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,S);return V({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[A,R]=(0,a.useState)(),[I,X]=(0,h.useStore)("selectedObjectId",null),[B,N]=(0,h.useStore)("kitOfParts_sceneRotation",!1),[G]=(0,h.useStore)("objectRotationTrigger",0),D="b1"===I,W=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!D,linewidth:D?4:2,depthTest:!0}),[D]);(0,a.useEffect)(()=>{D&&G>0&&j(e=>e+Math.PI/2)},[G,D]);let{size:q,viewport:K}=(0,c.useThree)();q.width,K.width;let[Q,U]=iS(()=>({position:[Z.x,Z.y,Z.z],rotation:[0,0,0],config:{friction:40}})),[Y,$]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&$({opacity:1})},[r,$]),eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&V({x:Math.min(Math.max(Math.round(Z.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(Z.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{},[H]),(0,a.useEffect)(()=>{A?V((0,v._)((0,x._)({},Z),{y:1})):V((0,v._)((0,x._)({},Z),{y:0}))},[A]);let J=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!J.current&&(X("b1"),o&&N(!1)),J.current=r},[r,o,X,N]),(0,a.useEffect)(()=>{d&&Object.keys(d).length>0&&r&&Object.values(d).forEach(e=>{e&&e.isMaterial&&(!D&&I&&null!==I&&o?(void 0===e.userData.originalOpacity&&(e.userData.originalOpacity=void 0!==e.opacity?e.opacity:1),e.opacity=.4,e.transparent=!0):(void 0!==e.userData.originalOpacity?e.opacity=e.userData.originalOpacity:e.opacity=1,e.transparent=!1))})},[D,I,d,r,o]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:Y.opacity},children:(0,s.jsxs)(iQ.group,{rotation:[0,C,0],onClick:e=>{e.stopPropagation(),X("b1"),!0===o&&N(!1),!0===t&&R(!0)},position:[Z.x,Z.y,Z.z],children:[p.map((e,t)=>{let[r,i]=e;if(!i||!i.geometry)return null;let n=i.material||d&&Object.values(d)[0];return n&&i.geometry.attributes?(0,s.jsx)("mesh",{ref:0===t?m:null,castShadow:!1,receiveShadow:!1,geometry:i.geometry,material:n},r):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),D)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:W,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:W},t)}),D&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:D,title:"BATHROOM",onRotate:()=>{j(e=>e+Math.PI/2)},onMoveRight:()=>F(0,-1),onMoveLeft:()=>F(0,1),onMoveTop:()=>F(1,0),onMoveBottom:()=>F(-1,0),onPlace:()=>X(null)})}),A&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{j(C+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{console.log(i),"Top"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"One"===i?Z.z<-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"Two"===i?Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):"Three"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):"Four"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{j(C-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):"Two"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"Three"===i?Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):"Four"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):"Two"===i?Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):"Three"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"Four"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):"Two"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):"Three"===i?Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):"Four"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{R(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}function i4(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/boxbed.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,_]=(0,a.useState)("cameraState"),[M,C]=(0,a.useState)(0),[j]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[S,z]=(0,a.useState)(!1),[k]=(0,h.useStore)("objectPositionResetTrigger",0),E=i6(i0.gridX,i0.gridZ,j),[T,Z]=(0,a.useState)({x:E.x,y:E.y,z:E.z}),[V,P]=(0,a.useState)({gridX:i0.gridX,gridZ:i0.gridZ}),O=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&j&&j.width>0){let e=i6(i0.gridX,i0.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),S||(P({gridX:i0.gridX,gridZ:i0.gridZ}),z(!0))}},[r,j,i0,S]),(0,a.useEffect)(()=>{if(k>0&&j&&j.width>0){let e=i6(i0.gridX,i0.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),P({gridX:i0.gridX,gridZ:i0.gridZ}),C(0)}},[k,j,i0]);let H=(e,t)=>{if(!j||0===j.width)return;let r=O.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),P(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,j);return Z({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[F,A]=(0,h.useStore)("selectedObjectId",null),[R]=(0,h.useStore)("objectRotationTrigger",0),I="bb"===F,X=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!I,linewidth:I?4:2,depthTest:!0}),[I]);(0,a.useEffect)(()=>{I&&R>0&&C(e=>e+Math.PI/2)},[R,I]);let[B,N]=(0,a.useState)(),{size:G,viewport:D}=(0,c.useThree)();G.width,D.width;let[W,q]=iS(()=>({position:[T.x,T.y,T.z],rotation:[0,0,0],config:{friction:40}})),[K,Q]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&Q({opacity:1})},[r,Q]);let U=eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&Z({x:Math.min(Math.max(Math.round(T.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(T.z+i/99),-13),13)})}});(0,a.useEffect)(()=>{},[O]),(0,a.useEffect)(()=>{B?Z((0,v._)((0,x._)({},T),{y:1})):Z((0,v._)((0,x._)({},T),{y:0}))},[B]);let Y=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!Y.current&&A("bb"),Y.current=r},[r,A]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:K.opacity},children:(0,s.jsxs)(iQ.group,(0,v._)((0,x._)({rotation:[0,M,0],onClick:e=>{e&&e.stopPropagation(),A("bb"),(!0===o||!0===t)&&N(!0)}},U()),{position:[T.x,T.y,T.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),I)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:X,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:X},t)}),I&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:I,title:"BOXBED",onRotate:()=>{C(e=>e+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>A(null)})}),B&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{console.log(i),"Top"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"One"===i?T.z<-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Two"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Three"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Two"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Three"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Four"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Two"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Three"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Two"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Three"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]}))})}))}function i7(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/frontPorch.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,_]=(0,a.useState)("cameraState"),[M,C]=(0,a.useState)(0),[j]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[S,z]=(0,a.useState)(!1),[k]=(0,h.useStore)("objectPositionResetTrigger",0),E=i6(iU.gridX,iU.gridZ,j),[T,Z]=(0,a.useState)({x:E.x,y:E.y,z:E.z}),[V,P]=(0,a.useState)({gridX:iU.gridX,gridZ:iU.gridZ}),O=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&j&&j.width>0){let e=i6(iU.gridX,iU.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),S||(P({gridX:iU.gridX,gridZ:iU.gridZ}),z(!0))}},[r,j,iU,S]),(0,a.useEffect)(()=>{if(k>0&&j&&j.width>0){let e=i6(iU.gridX,iU.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),P({gridX:iU.gridX,gridZ:iU.gridZ}),C(0)}},[k,j,iU]);let H=(e,t)=>{if(!j||0===j.width)return;let r=O.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),P(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,j);return Z({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[F,A]=(0,h.useStore)("selectedObjectId",null),[R]=(0,h.useStore)("objectRotationTrigger",0),I="fp"===F,X=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!I,linewidth:I?4:2,depthTest:!0}),[I]);(0,a.useEffect)(()=>{I&&R>0&&C(e=>e+Math.PI/2)},[R,I]);let[B,N]=(0,a.useState)(),{size:G,viewport:D}=(0,c.useThree)();G.width,D.width;let[W,q]=iS(()=>({position:[T.x,T.y,T.z],rotation:[0,0,0],config:{friction:40}}));eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&Z({x:Math.min(Math.max(Math.round(T.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(T.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{},[O]),(0,a.useEffect)(()=>{B?Z((0,v._)((0,x._)({},T),{y:1})):Z((0,v._)((0,x._)({},T),{y:0}))},[B]);let K=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!K.current&&A("fp"),K.current=r},[r,A]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)("group",{children:(0,s.jsxs)(iQ.group,{rotation:[0,M,0],onClick:e=>{e&&e.stopPropagation(),A("fp"),(!0===o||!0===t)&&N(!0)},position:[T.x,T.y,T.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),I)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:X,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:X},t)}),I&&(0,s.jsx)(i3,{isSelected:I,title:"FRONT PORCH",onRotate:()=>{C(e=>e+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>A(null)}),B&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{console.log(i),"Top"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"One"===i?T.z<-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Two"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Three"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Two"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Three"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Four"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Two"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Three"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Two"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Three"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}function i9(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/kitchen1.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,_]=(0,a.useState)("cameraState"),[M,C]=(0,a.useState)(0),[j]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[S,z]=(0,a.useState)(!1),[k]=(0,h.useStore)("objectPositionResetTrigger",0),E=i6(iY.gridX,iY.gridZ,j),[T,Z]=(0,a.useState)({x:E.x,y:E.y,z:E.z}),[V,P]=(0,a.useState)({gridX:iY.gridX,gridZ:iY.gridZ}),O=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&j&&j.width>0){let e=i6(iY.gridX,iY.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),S||(P({gridX:iY.gridX,gridZ:iY.gridZ}),z(!0))}},[r,j,iY,S]),(0,a.useEffect)(()=>{if(k>0&&j&&j.width>0){let e=i6(iY.gridX,iY.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),P({gridX:iY.gridX,gridZ:iY.gridZ}),C(0)}},[k,j,iY]);let H=(e,t)=>{if(!j||0===j.width)return;let r=O.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),P(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,j);return Z({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[F,A]=(0,h.useStore)("selectedObjectId",null),[R]=(0,h.useStore)("objectRotationTrigger",0),I="k1"===F,X=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!I,linewidth:I?4:2,depthTest:!0}),[I]);(0,a.useEffect)(()=>{I&&R>0&&C(e=>e+Math.PI/2)},[R,I]);let[B,N]=(0,a.useState)(),{size:G,viewport:D}=(0,c.useThree)();G.width,D.width;let[W,q]=iS(()=>({position:[T.x,T.y,T.z],rotation:[0,0,0],config:{friction:40}})),[K,Q]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&Q({opacity:1})},[r,Q]),eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&Z({x:Math.min(Math.max(Math.round(T.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(T.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{},[O]),(0,a.useEffect)(()=>{B?Z((0,v._)((0,x._)({},T),{y:1})):Z((0,v._)((0,x._)({},T),{y:0}))},[B]);let U=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!U.current&&A("k1"),U.current=r},[r,A]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:K.opacity},children:(0,s.jsxs)(iQ.group,{rotation:[0,M,0],onClick:e=>{e&&e.stopPropagation(),A("k1"),(!0===o||!0===t)&&N(!0)},position:[T.x,T.y,T.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!1,receiveShadow:!1,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),I)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:X,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:X},t)}),I&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:I,title:"KITCHEN",onRotate:()=>{C(e=>e+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>A(null)})}),B&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M+Math.PI/2)},children:(0,s.jsx)("svg",{width:"22",height:"19",viewBox:"0 0 22 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7.29373 16.8632L6.9055 18.3121L7.29373 16.8632ZM15.4147 10.9498C15.2003 11.75 15.6752 12.5725 16.4754 12.787C17.2756 13.0014 18.0981 12.5265 18.3125 11.7263L16.8636 11.3381L15.4147 10.9498ZM12.6883 17.9981C13.4604 17.6977 13.8426 16.8282 13.5422 16.0562C13.2417 15.2842 12.3723 14.9019 11.6003 15.2024L12.1443 16.6002L12.6883 17.9981ZM19.5808 9.6161L20.6414 10.6768C21.0704 10.2478 21.1988 9.60259 20.9666 9.04208C20.7344 8.48156 20.1875 8.1161 19.5808 8.1161L19.5808 9.6161ZM16.9762 12.2207L15.9155 13.2814C16.5013 13.8671 17.4511 13.8671 18.0369 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 8.1161C13.7649 8.1161 13.2179 8.48157 12.9858 9.04208C12.7536 9.60259 12.8819 10.2478 13.3109 10.6768L14.3716 9.6161ZM7.29373 16.8632L7.68196 15.4143C4.31377 14.5118 2.31494 11.0498 3.21744 7.68159L1.76855 7.29336L0.319665 6.90513C-1.01166 11.8737 1.93692 16.9808 6.9055 18.3121L7.29373 16.8632ZM1.76855 7.29336L3.21744 7.68159C4.11994 4.3134 7.58202 2.31457 10.9502 3.21708L11.3384 1.76819L11.7267 0.319298C6.75808 -1.01203 1.65099 1.93655 0.319665 6.90513L1.76855 7.29336ZM11.3384 1.76819L10.9502 3.21708C14.3184 4.11958 16.3172 7.58165 15.4147 10.9498L16.8636 11.3381L18.3125 11.7263C19.6438 6.75771 16.6953 1.65063 11.7267 0.319298L11.3384 1.76819ZM12.1443 16.6002L11.6003 15.2024C10.3925 15.6724 9.03186 15.776 7.68196 15.4143L7.29373 16.8632L6.9055 18.3121C8.89247 18.8445 10.9059 18.6918 12.6883 17.9981L12.1443 16.6002ZM19.5808 9.6161L18.5201 8.55544L15.9155 11.16L16.9762 12.2207L18.0369 13.2814L20.6414 10.6768L19.5808 9.6161ZM16.9762 12.2207L18.0368 11.16L15.4323 8.55544L14.3716 9.6161L13.3109 10.6768L15.9155 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 11.1161L19.5808 11.1161L19.5808 9.6161L19.5808 8.1161L14.3716 8.1161L14.3716 9.6161Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{console.log(i),"Top"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"One"===i?T.z<-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Two"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Three"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M-Math.PI/2)},children:(0,s.jsx)("svg",{width:"22",height:"19",viewBox:"0 0 22 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scaleX(-1)"},children:(0,s.jsx)("path",{d:"M7.29373 16.8632L6.9055 18.3121L7.29373 16.8632ZM15.4147 10.9498C15.2003 11.75 15.6752 12.5725 16.4754 12.787C17.2756 13.0014 18.0981 12.5265 18.3125 11.7263L16.8636 11.3381L15.4147 10.9498ZM12.6883 17.9981C13.4604 17.6977 13.8426 16.8282 13.5422 16.0562C13.2417 15.2842 12.3723 14.9019 11.6003 15.2024L12.1443 16.6002L12.6883 17.9981ZM19.5808 9.6161L20.6414 10.6768C21.0704 10.2478 21.1988 9.60259 20.9666 9.04208C20.7344 8.48156 20.1875 8.1161 19.5808 8.1161L19.5808 9.6161ZM16.9762 12.2207L15.9155 13.2814C16.5013 13.8671 17.4511 13.8671 18.0369 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 8.1161C13.7649 8.1161 13.2179 8.48157 12.9858 9.04208C12.7536 9.60259 12.8819 10.2478 13.3109 10.6768L14.3716 9.6161ZM7.29373 16.8632L7.68196 15.4143C4.31377 14.5118 2.31494 11.0498 3.21744 7.68159L1.76855 7.29336L0.319665 6.90513C-1.01166 11.8737 1.93692 16.9808 6.9055 18.3121L7.29373 16.8632ZM1.76855 7.29336L3.21744 7.68159C4.11994 4.3134 7.58202 2.31457 10.9502 3.21708L11.3384 1.76819L11.7267 0.319298C6.75808 -1.01203 1.65099 1.93655 0.319665 6.90513L1.76855 7.29336ZM11.3384 1.76819L10.9502 3.21708C14.3184 4.11958 16.3172 7.58165 15.4147 10.9498L16.8636 11.3381L18.3125 11.7263C19.6438 6.75771 16.6953 1.65063 11.7267 0.319298L11.3384 1.76819ZM12.1443 16.6002L11.6003 15.2024C10.3925 15.6724 9.03186 15.776 7.68196 15.4143L7.29373 16.8632L6.9055 18.3121C8.89247 18.8445 10.9059 18.6918 12.6883 17.9981L12.1443 16.6002ZM19.5808 9.6161L18.5201 8.55544L15.9155 11.16L16.9762 12.2207L18.0369 13.2814L20.6414 10.6768L19.5808 9.6161ZM16.9762 12.2207L18.0368 11.16L15.4323 8.55544L14.3716 9.6161L13.3109 10.6768L15.9155 13.2814L16.9762 12.2207ZM14.3716 9.6161L14.3716 11.1161L19.5808 11.1161L19.5808 9.6161L19.5808 8.1161L14.3716 8.1161L14.3716 9.6161Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Two"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Three"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Four"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Two"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Three"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Two"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Three"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}function ne(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/kitchen2.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,_]=(0,a.useState)("cameraState"),[M,C]=(0,a.useState)(0),[j]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[S,z]=(0,a.useState)(!1),[k]=(0,h.useStore)("objectPositionResetTrigger",0),E=i6(i$.gridX,i$.gridZ,j),[T,Z]=(0,a.useState)({x:E.x,y:E.y,z:E.z}),[V,P]=(0,a.useState)({gridX:i$.gridX,gridZ:i$.gridZ}),O=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&j&&j.width>0){let e=i6(i$.gridX,i$.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),S||(P({gridX:i$.gridX,gridZ:i$.gridZ}),z(!0))}},[r,j,i$,S]),(0,a.useEffect)(()=>{if(k>0&&j&&j.width>0){let e=i6(i$.gridX,i$.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),P({gridX:i$.gridX,gridZ:i$.gridZ}),C(0)}},[k,j,i$]);let H=(e,t)=>{if(!j||0===j.width)return;let r=O.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),P(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,j);return Z({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[F,A]=(0,h.useStore)("selectedObjectId",null),[R]=(0,h.useStore)("objectRotationTrigger",0),I="k2"===F,X=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!I,linewidth:I?4:2,depthTest:!0}),[I]);(0,a.useEffect)(()=>{I&&R>0&&C(e=>e+Math.PI/2)},[R,I]);let[B,N]=(0,a.useState)(),{size:G,viewport:D}=(0,c.useThree)();G.width,D.width;let[W,q]=iS(()=>({position:[T.x,T.y,T.z],rotation:[0,0,0],config:{friction:40}})),[K,Q]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&Q({opacity:1})},[r,Q]),eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&Z({x:Math.min(Math.max(Math.round(T.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(T.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{},[O]),(0,a.useEffect)(()=>{B?Z((0,v._)((0,x._)({},T),{y:1})):Z((0,v._)((0,x._)({},T),{y:0}))},[B]);let U=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!U.current&&A("k2"),U.current=r},[r,A]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:K.opacity},children:(0,s.jsxs)(iQ.group,{rotation:[0,M,0],onClick:e=>{e&&e.stopPropagation(),A("k2"),(!0===o||!0===t)&&N(!0)},position:[T.x,T.y,T.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!1,receiveShadow:!1,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),I)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:X,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:X},t)}),I&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:I,title:"KITCHEN (STORAGE)",onRotate:()=>{C(e=>e+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>A(null)})}),B&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{console.log(i),"Top"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"One"===i?T.z<-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Two"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Three"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Two"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Three"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Four"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Two"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Three"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Two"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Three"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}function nt(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/storage1.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,_]=(0,a.useState)("cameraState"),[M,C]=(0,a.useState)(0),[j]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[S,z]=(0,a.useState)(!1),[k]=(0,h.useStore)("objectPositionResetTrigger",0),E=i6(i1.gridX,i1.gridZ,j),[T,Z]=(0,a.useState)({x:E.x,y:E.y,z:E.z}),[V,P]=(0,a.useState)({gridX:i1.gridX,gridZ:i1.gridZ}),O=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&j&&j.width>0){let e=i6(i1.gridX,i1.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),S||(P({gridX:i1.gridX,gridZ:i1.gridZ}),z(!0))}},[r,j,i1,S]),(0,a.useEffect)(()=>{if(k>0&&j&&j.width>0){let e=i6(i1.gridX,i1.gridZ,j);Z({x:e.x,y:e.y,z:e.z}),P({gridX:i1.gridX,gridZ:i1.gridZ}),C(0)}},[k,j,i1]);let H=(e,t)=>{if(!j||0===j.width)return;let r=O.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(e):p=Math.sign(h)*Math.sign(e)),0!==t&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(t):p=Math.sign(u)*Math.sign(t)),P(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,j);return Z({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[F,A]=(0,h.useStore)("selectedObjectId",null),[R]=(0,h.useStore)("objectRotationTrigger",0),I="st1"===F,X=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!I,linewidth:I?4:2,depthTest:!0}),[I]);(0,a.useEffect)(()=>{I&&R>0&&C(e=>e+Math.PI/2)},[R,I]);let[B,N]=(0,a.useState)(),{size:G,viewport:D}=(0,c.useThree)();G.width,D.width;let[W,q]=iS(()=>({position:[T.x,T.y,T.z],rotation:[0,0,0],config:{friction:40}})),[K,Q]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&Q({opacity:1})},[r,Q]),eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&Z({x:Math.min(Math.max(Math.round(T.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(T.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{},[O]),(0,a.useEffect)(()=>{B?Z((0,v._)((0,x._)({},T),{y:1})):Z((0,v._)((0,x._)({},T),{y:0}))},[B]);let U=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!U.current&&A("st1"),U.current=r},[r,A]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:K.opacity},children:(0,s.jsxs)(iQ.group,{rotation:[0,M,0],onClick:e=>{e&&e.stopPropagation(),A("st1"),(!0===o||!0===t)&&N(!0)},position:[T.x,T.y,T.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),I)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:X,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:X},t)}),I&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:I,title:"STORAGE 1",onRotate:()=>{C(e=>e+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>A(null)})}),B&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{console.log(i),"Top"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"One"===i?T.z<-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Two"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Three"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Two"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Three"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Four"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Two"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Three"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Two"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Three"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{N(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}function nr(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/storage2.glb");(0,a.useEffect)(()=>{d&&y(d,!0)},[d]);let f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,_]=(0,a.useState)("cameraState"),[M,C]=(0,a.useState)(0),[j]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[S,z]=(0,a.useState)(!1),[k]=(0,h.useStore)("objectPositionResetTrigger",0),E=i2||{gridX:7.5,gridZ:2},T=i6(E.gridX,E.gridZ,j),[Z,V]=(0,a.useState)({x:T.x,y:T.y,z:T.z}),[P,O]=(0,a.useState)({gridX:E.gridX,gridZ:E.gridZ}),H=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&j&&j.width>0&&E){let e=i6(E.gridX,E.gridZ,j);V({x:e.x,y:e.y,z:e.z}),S||(O({gridX:E.gridX,gridZ:E.gridZ}),z(!0))}},[r,j,E,S]),(0,a.useEffect)(()=>{if(k>0&&j&&j.width>0&&E){let e=i6(E.gridX,E.gridZ,j);V({x:e.x,y:e.y,z:e.z}),O({gridX:E.gridX,gridZ:E.gridZ}),C(0)}},[k,j,E]);let F=(e,t)=>{if(!j||0===j.width)return;let r=H.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),O(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,j);return V({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[A,R]=(0,h.useStore)("selectedObjectId",null),[I]=(0,h.useStore)("objectRotationTrigger",0),X="st2"===A,B=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!X,linewidth:X?4:2,depthTest:!0}),[X]);(0,a.useEffect)(()=>{X&&I>0&&C(e=>e+Math.PI/2)},[I,X]);let[N,G]=(0,a.useState)(),{size:D,viewport:W}=(0,c.useThree)();D.width,W.width;let[q,K]=iS(()=>({position:[Z.x,Z.y,Z.z],rotation:[0,0,0],config:{friction:40}})),[Q,U]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&U({opacity:1})},[r,U]),eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&V({x:Math.min(Math.max(Math.round(Z.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(Z.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{N?V((0,v._)((0,x._)({},Z),{y:1})):V((0,v._)((0,x._)({},Z),{y:0}))},[N]),(0,a.useEffect)(()=>{d&&Object.keys(d).length>0&&r&&Object.values(d).forEach(e=>{e&&e.isMaterial&&(!X&&A&&null!==A&&o?(void 0===e.userData.originalOpacity&&(e.userData.originalOpacity=void 0!==e.opacity?e.opacity:1),e.opacity=.4,e.transparent=!0):(void 0!==e.userData.originalOpacity?e.opacity=e.userData.originalOpacity:e.opacity=1,e.transparent=!1))})},[X,A,d,r,o]);let Y=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!Y.current&&R("st2"),Y.current=r},[r,R]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:Q.opacity},children:(0,s.jsxs)(iQ.group,{rotation:[0,M,0],onClick:e=>{e&&e.stopPropagation(),R("st2"),(!0===o||!0===t)&&G(!0)},position:[Z.x,Z.y,Z.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),X)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:B,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:B},t)}),X&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:X,title:"STORAGE 2",onRotate:()=>{C(e=>e+Math.PI/2)},onMoveRight:()=>F(0,-1),onMoveLeft:()=>F(0,1),onMoveTop:()=>F(1,0),onMoveBottom:()=>F(-1,0),onPlace:()=>R(null)})}),N&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{"Top"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"One"===i?Z.z<-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"Two"===i?Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):"Three"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):"Four"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{C(M-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):"Two"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"Three"===i?Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):"Four"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):"Two"===i?Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):"Three"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):"Four"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1})):"Two"===i?Z.z<13&&V((0,v._)((0,x._)({},Z),{z:Z.z+1})):"Three"===i?Z.x>-16&&V((0,v._)((0,x._)({},Z),{x:Z.x-1})):"Four"===i?Z.z>-13&&V((0,v._)((0,x._)({},Z),{z:Z.z-1})):Z.x<16&&V((0,v._)((0,x._)({},Z),{x:Z.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{G(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}function ni(e){var{isMouseDragging:t,show:r,isZoomState:i,freeView:n,isAxio:o}=e,l=(0,L._)(e,["isMouseDragging","show","isZoomState","freeView","isAxio"]);let{nodes:u,materials:d}=(0,w.useGLTF)("/models/gbl_update/stairs.glb"),f=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!!r&&!!r.geometry&&(r.isLineSegments||r.isLine||r.isLineLoop||r.isMesh&&(t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe")))}):[],[u]),p=(0,a.useMemo)(()=>u?Object.entries(u).filter(e=>{let[t,r]=e;return!(!r||!r.geometry||r.isLineSegments||r.isLine||r.isLineLoop||t.toLowerCase().includes("line")||t.toLowerCase().includes("edge")||t.toLowerCase().includes("wireframe"))&&r.isMesh}):[],[u]);(0,a.useMemo)(()=>{let e={};return u&&Object.entries(u).forEach(t=>{let[r,i]=t;i&&(i.isMesh||i.isLineSegments)&&(e[r]=i)}),e},[u]),(0,a.useRef)();let[m,y]=(0,a.useState)("cameraState"),[_,M]=(0,a.useState)(0),[C]=(0,h.useStore)("gridDimensions",{width:144,height:192,cellSize:12,centerX:0,centerZ:0}),[j,S]=(0,a.useState)(!1),[z]=(0,h.useStore)("objectPositionResetTrigger",0),k=i8||{gridX:6.5,gridZ:4},E=i6(k.gridX,k.gridZ,C),[T,Z]=(0,a.useState)({x:E.x,y:E.y,z:E.z}),[V,P]=(0,a.useState)({gridX:k.gridX,gridZ:k.gridZ}),O=(0,c.useThree)();(0,a.useEffect)(()=>{if(r&&C&&C.width>0&&k){let e=i6(k.gridX,k.gridZ,C);Z({x:e.x,y:e.y,z:e.z}),j||(P({gridX:k.gridX,gridZ:k.gridZ}),S(!0))}},[r,C,k,j]),(0,a.useEffect)(()=>{if(z>0&&C&&C.width>0&&k){let e=i6(k.gridX,k.gridZ,C);Z({x:e.x,y:e.y,z:e.z}),P({gridX:k.gridX,gridZ:k.gridZ}),M(0)}},[z,C,k]);let H=(e,t)=>{if(!C||0===C.width)return;let r=O.camera;if(!r)return;r.updateMatrixWorld();let i=new g.Vector3(1,0,0),n=new g.Vector3(0,0,-1);i.applyQuaternion(r.quaternion),n.applyQuaternion(r.quaternion);let o=new g.Vector2(i.x,i.z).normalize(),s=new g.Vector2(n.x,n.z).normalize(),a=new g.Vector2(1,0),l=new g.Vector2(0,1),c=o.dot(a),u=o.dot(l),d=s.dot(a),h=s.dot(l),f=0,p=0;0!==e&&(Math.abs(c)>Math.abs(u)?f=Math.sign(c)*Math.sign(e):p=Math.sign(u)*Math.sign(e)),0!==t&&(Math.abs(d)>Math.abs(h)?f=Math.sign(d)*Math.sign(t):p=Math.sign(h)*Math.sign(t)),P(e=>{let t=e.gridX+f,r=e.gridZ+p,i=i6(t,r,C);return Z({x:i.x,y:i.y,z:i.z}),{gridX:t,gridZ:r}})},[F,A]=(0,h.useStore)("selectedObjectId",null),[R]=(0,h.useStore)("objectRotationTrigger",0),I="stairs",X=F===I,B=(0,a.useMemo)(()=>new g.LineBasicMaterial({color:0xe9ff00*!!X,linewidth:2,depthTest:!0}),[X]);(0,a.useEffect)(()=>{X&&R>0&&M(e=>e+Math.PI/2)},[R,X]);let[N,G]=(0,a.useState)(),{size:D,viewport:W}=(0,c.useThree)();D.width,W.width;let[q,K]=iS(()=>({position:[T.x,T.y,T.z],rotation:[0,0,0],config:{friction:40}})),[Q,U]=iS(()=>({opacity:0,config:{tension:100,friction:50}}));(0,a.useEffect)(()=>{r&&U({opacity:1})},[r,U]),eZ({onDrag:e=>{let{offset:[r,i,n]}=e;t&&Z({x:Math.min(Math.max(Math.round(T.x+r/99),-16),16),y:0,z:Math.min(Math.max(Math.round(T.z+i/99),-13),13)})}}),(0,a.useEffect)(()=>{N?Z((0,v._)((0,x._)({},T),{y:1})):Z((0,v._)((0,x._)({},T),{y:0}))},[N]);let Y=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{r&&!Y.current&&A(I),Y.current=r},[r,A]),(0,s.jsx)("group",(0,v._)((0,x._)({},l),{children:r&&(0,s.jsx)(iQ.group,{style:{opacity:Q.opacity},children:(0,s.jsxs)(iQ.group,{rotation:[0,_,0],onClick:e=>{e&&e.stopPropagation(),A(I),(!0===o||!0===t)&&G(!0)},position:[T.x,T.y,T.z],children:[p.map(e=>{let[t,r]=e;if(!r||!r.geometry)return null;let i=r.material||d&&Object.values(d)[0];return i&&r.geometry.attributes?(0,s.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.geometry,material:i},t):null}),f.map(e=>{let[t,r]=e;if(!r||!r.geometry||!r.geometry.attributes)return null;let i=r.geometry;return(r.isMesh&&(i=new g.EdgesGeometry(r.geometry)),X)?(0,s.jsx)("group",{children:[[0,0,0],[.01,0,0],[-.01,0,0],[0,.01,0],[0,-.01,0],[.007,.007,0],[-.007,-.007,0],[.007,-.007,0],[-.007,.007,0],[.005,0,0],[-.005,0,0],[0,.005,0],[0,-.005,0]].map((e,r)=>(0,s.jsx)("lineSegments",{geometry:i,material:B,position:e},"".concat(t,"-").concat(r)))},t):(0,s.jsx)("lineSegments",{geometry:i,material:B},t)}),X&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i3,{isSelected:X,title:"STAIRS",onRotate:()=>{M(e=>e+Math.PI/2)},onMoveRight:()=>H(0,-1),onMoveLeft:()=>H(0,1),onMoveTop:()=>H(1,0),onMoveBottom:()=>H(-1,0),onPlace:()=>A(null)})}),N&&(0,s.jsx)(b.Html,{center:!0,as:"div",children:(0,s.jsxs)("div",{className:"panel",children:[(0,s.jsx)("div",{className:"rotate",onClick:()=>{M(_+Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M5 0L0.396453 10.5897L11.8691 9.28161L5 0ZM19.4977 18.5C16.5803 18.5 13.9644 17.8729 11.8418 16.3774C9.72995 14.8894 8.00237 12.4685 6.98516 8.68156L5.05362 9.20039C6.16691 13.345 8.12291 16.2037 10.6898 18.0123C13.246 19.8134 16.304 20.5 19.4977 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"up",onClick:()=>{"Top"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"One"===i?T.z<-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Two"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Three"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"rotate",onClick:()=>{M(_-Math.PI/2)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,s.jsx)("path",{d:"M14.5 0L19.1035 10.5897L7.63087 9.28161L14.5 0ZM0.00231838 18.5C2.91973 18.5 5.53563 17.8729 7.65822 16.3774C9.77005 14.8894 11.4976 12.4685 12.5148 8.68156L14.4464 9.20039C13.3331 13.345 11.3771 16.2037 8.81018 18.0123C6.25402 19.8134 3.19603 20.5 0.00231838 20.5V18.5Z",fill:"black"})})}),(0,s.jsx)("div",{className:"left",onClick:()=>{"Top"===i||"One"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Two"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Three"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Four"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(180deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"down",onClick:()=>{"Top"===i||"One"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Two"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Three"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(90deg)"},children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"right",onClick:()=>{"Top"===i||"One"===i?T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1})):"Two"===i?T.z<13&&Z((0,v._)((0,x._)({},T),{z:T.z+1})):"Three"===i?T.x>-16&&Z((0,v._)((0,x._)({},T),{x:T.x-1})):"Four"===i?T.z>-13&&Z((0,v._)((0,x._)({},T),{z:T.z-1})):T.x<16&&Z((0,v._)((0,x._)({},T),{x:T.x+1}))},children:(0,s.jsxs)("svg",{width:"46",height:"35",viewBox:"0 0 46 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"45",height:"34",rx:"17",fill:"black",stroke:"white"}),(0,s.jsx)("path",{d:"M2 7.20918L21.1003 7.20918M16.3253 2L21.5344 7.20918L16.3253 12.4184",stroke:"#EAFF00",strokeWidth:"4",strokeLinecap:"round",transform:"translate(11.5, 10.5)"})]})}),(0,s.jsx)("div",{className:"place",onClick:()=>{G(!1)},children:(0,s.jsxs)("svg",{width:"154",height:"26",viewBox:"0 0 154 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"153",height:"25",rx:"12.5",fill:"white",stroke:"black"}),(0,s.jsx)("path",{d:"M62.6738 10.0786C62.6738 10.689 62.5273 11.2334 62.2344 11.7119C61.9463 12.1904 61.5312 12.564 60.9893 12.8325C60.4521 13.1011 59.8296 13.2354 59.1216 13.2354H57.0635V17H55.6646V7.11963H59.0337C60.1958 7.11963 61.0918 7.38086 61.7217 7.90332C62.3564 8.4209 62.6738 9.146 62.6738 10.0786ZM61.2676 10.1006C61.2676 8.86035 60.4668 8.24023 58.8652 8.24023H57.0635V12.1294H58.9238C59.6514 12.1294 60.2227 11.9512 60.6377 11.5947C61.0576 11.2383 61.2676 10.7402 61.2676 10.1006ZM65.2227 17V7.11963H66.6216V15.8574H71.5435V17H65.2227ZM80.0688 17L79.0581 14.2021H74.9346L73.9312 17H72.4956L76.231 7.11963H77.8203L81.4897 17H80.0688ZM77.0073 8.17432L76.9194 8.45996L76.4141 10.0127L75.3081 13.1108H78.6992L77.4321 9.44873L77.0073 8.17432ZM83.8042 12.0122C83.8042 13.3452 84.0117 14.3462 84.4268 15.0151C84.8467 15.6792 85.4863 16.0112 86.3457 16.0112C86.8389 16.0112 87.2856 15.8452 87.686 15.5132C88.0864 15.1763 88.4258 14.6538 88.7041 13.9458L89.8687 14.4219C89.1411 16.2383 87.9619 17.1465 86.3311 17.1465C85.0469 17.1465 84.0581 16.7046 83.3647 15.8208C82.6763 14.937 82.332 13.6675 82.332 12.0122C82.332 8.64795 83.6406 6.96582 86.2578 6.96582C87.9131 6.96582 89.0508 7.78369 89.6709 9.41943L88.4404 9.89551C88.2598 9.34375 87.9766 8.90918 87.5908 8.5918C87.21 8.26953 86.7681 8.1084 86.2651 8.1084C85.4302 8.1084 84.8101 8.42334 84.4048 9.05322C84.0044 9.68311 83.8042 10.6694 83.8042 12.0122ZM91.6997 17V7.11963H98.4307V8.26221H93.0986V11.353H97.9912V12.481H93.0986V15.8574H98.731V17H91.6997Z",fill:"black"})]})})]})})]})})}))}w.useGLTF.preload("/models/gbl_update/bath.glb"),w.useGLTF.preload("/models/gbl_update/boxbed.glb"),w.useGLTF.preload("/models/gbl_update/frontPorch.glb"),w.useGLTF.preload("/models/gbl_update/kitchen1.glb"),w.useGLTF.preload("/models/gbl_update/kitchen2.glb"),w.useGLTF.preload("/models/gbl_update/storage1.glb"),w.useGLTF.preload("/models/gbl_update/storage2.glb"),w.useGLTF.preload("/models/gbl_update/stairs.glb");var nn=e.i(66459);e.s(["default",0,function(){let[e,t]=(0,h.useStore)("kitOfParts_objectsState"),[r,i]=(0,h.useStore)("kitOfParts_clickbathroom2"),[n,o]=(0,h.useStore)("kitOfParts_boxbedState"),[p,x]=(0,h.useStore)("kitOfParts_frontState"),[v,w]=(0,h.useStore)("kitOfParts_kitchenState"),[y,L]=(0,h.useStore)("kitOfParts_k2State"),[b,C]=(0,h.useStore)("kitOfParts_st1State"),[j,S]=(0,h.useStore)("kitOfParts_st2State",!1),[z,k]=(0,h.useStore)("kitOfParts_stairsState",!1),E=(0,a.useRef)(null),[T,Z]=(0,h.useStore)("kitOfParts_captureMode",!1),[V]=(0,h.useStore)("kitOfParts_captureModalOpen",!1),[,P]=(0,h.useStore)("kitOfParts_cachedImageDataUrl",null),[,O]=(0,h.useStore)("kitOfParts_captureModalOpen",!1),[H,F]=(0,a.useState)(!1),[,A]=(0,h.useStore)("selectedObjectId",null),[,R]=(0,h.useStore)("kitOfParts_closeAllPanels",!1);(0,a.useEffect)(()=>{T&&(A(null),t(!1),R(!0),O(!0),E.current&&setTimeout(()=>{(0,nn.toPng)(E.current,{cacheBust:!0}).then(e=>{P(e)}).catch(e=>{console.error("[ERROR] Failed to generate image:",e)})},500))},[T,P,O,A,t,R]),(0,a.useCallback)(()=>{null!==E.current&&Z(!0)},[Z]),(0,a.useCallback)(()=>{setIsScreenshotFormOpen(!1),setScreenshotDataUrl(null)},[]);let[I,X]=(0,h.useStore)("kitOfParts_sceneRotation",!1),[B,N]=(0,a.useState)(""),[G,D]=(0,a.useState)(!1),[W,q]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(!1),[U,Y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{I&&(O(!1),setTimeout(()=>{Z(!1),P(null)},300))},[I,O,Z,P]);let $=(0,a.useRef)(T),J=$.current;$.current=T;let ee=J&&!T&&!V;(0,a.useEffect)(()=>{if(ee){F(!0);let e=setTimeout(()=>F(!1),800);return()=>clearTimeout(e)}},[T,V]),(0,a.useEffect)(()=>{W?D(!1):D(!0)},[W]),(0,a.useCallback)(()=>{K&&Q(!K),Y(!U),D(!1),X(!1)},[K,U]),(0,a.useCallback)(()=>{U&&Y(!U),Q(!K),D(!1),X(!1)},[K,U]),(0,a.useCallback)(()=>{Q(!1),Y(!1),D(!G),X(!I)},[G,I]);let et=a.default.memo(()=>null);et.displayName="SceneSetup";let er=a.default.memo(()=>(0,s.jsx)(m,{}));er.displayName="StableLighting";let ei=a.default.memo(()=>{let{camera:e,size:t}=(0,c.useThree)(),r=(0,a.useRef)({width:0,height:0}),i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(e&&e.isOrthographicCamera)if(null===i.current&&(i.current=e.zoom),Math.abs(r.current.width-t.width)>.5||Math.abs(r.current.height-t.height)>.5){let n=i.current;e.near=.1,e.far=2e3;let o=t.width/t.height;e.left=-500*o,e.right=500*o,e.top=500,e.bottom=-500,e.zoom=n,e.updateProjectionMatrix(),i.current=e.zoom,r.current={width:t.width,height:t.height}}else null!==i.current&&Math.abs(e.zoom-i.current)>.001&&(e.zoom=i.current,e.updateProjectionMatrix())},[e,t]),(0,a.useEffect)(()=>{if(e&&e.isOrthographicCamera){null===i.current&&(i.current=e.zoom);let t=()=>{let t=i.current||e.zoom,r=window.innerWidth/window.innerHeight;e.left=-500*r,e.right=500*r,e.top=500,e.bottom=-500,e.zoom=t,e.updateProjectionMatrix(),i.current=e.zoom};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}},[e]),null});ei.displayName="OrthographicCameraSetup";let en=a.default.memo(()=>{let{camera:e}=(0,c.useThree)(),t=(0,a.useRef)(null),r=(0,a.useRef)(!1);(0,a.useRef)(null);let i=(0,a.useRef)(0),[n]=(0,h.useStore)("kitOfParts_objectsState"),[o]=(0,h.useStore)("kitOfParts_clickbathroom2"),[s]=(0,h.useStore)("kitOfParts_boxbedState"),[l]=(0,h.useStore)("kitOfParts_frontState"),[d]=(0,h.useStore)("kitOfParts_kitchenState"),[f]=(0,h.useStore)("kitOfParts_k2State"),[g]=(0,h.useStore)("kitOfParts_st1State"),[p]=(0,h.useStore)("kitOfParts_st2State",!1),[m]=(0,h.useStore)("kitOfParts_stairsState",!1),x=(0,a.useRef)(n),v=(0,a.useRef)({bathroom:o,boxbed:s,front:l,kitchen:d,k2:f,st1:g,st2:p,stairs:m});return(0,a.useEffect)(()=>{e&&e.isOrthographicCamera&&null===t.current&&(t.current=e.zoom)},[e]),(0,a.useEffect)(()=>{if(e&&e.isOrthographicCamera){let a=x.current!==n,c=v.current.bathroom!==o||v.current.boxbed!==s||v.current.front!==l||v.current.kitchen!==d||v.current.k2!==f||v.current.st1!==g||v.current.st2!==p||v.current.stairs!==m;(a||c)&&(null!==t.current&&(e.zoom=t.current,e.updateProjectionMatrix()),r.current=!0,i.current=0),x.current=n,v.current={bathroom:o,boxbed:s,front:l,kitchen:d,k2:f,st1:g,st2:p,stairs:m}}},[n,o,s,l,d,f,g,p,m,e]),(0,u.useFrame)(()=>{e&&e.isOrthographicCamera&&(r.current&&null!==t.current?(Math.abs(e.zoom-t.current)>.001&&(e.zoom=t.current,e.updateProjectionMatrix()),i.current++,i.current>=10&&(r.current=!1,t.current=e.zoom)):t.current=e.zoom)}),null});en.displayName="CameraZoomLock";let eo=a.default.memo(()=>{let{camera:e}=(0,c.useThree)(),[t]=(0,h.useStore)("kitOfParts_captureMode",!1);return(0,u.useFrame)(()=>{t&&e&&e.isOrthographicCamera&&(e.position.set(0,50,0),e.zoom=17,e.lookAt(0,0,0),e.updateProjectionMatrix())}),null});eo.displayName="CameraLock";let es=a.default.memo(e=>{let{isZoom:t,draggingMode:r,guiMode:i,disableRotation:n,sceneRotation:o}=e,s=(0,c.useThree)(),[l]=(0,h.useStore)("kitOfParts_captureMode",!1),u=(0,a.useRef)(!1),d=(0,a.useRef)(!0),f=(0,a.useRef)(null),g=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(s.camera&&s.camera.isOrthographicCamera){d.current&&(f.current=s.camera.position.clone(),g.current=s.camera.zoom);let e=u.current&&!l;if(d.current&&!l&&!r&&!i){u.current=l,d.current=!1;return}if(!0===l)s.camera.position.set(0,50,0),s.camera.zoom=17,s.camera.lookAt(0,0,0);else if(e){u.current=l,d.current=!1;return}else!0===r?(s.camera.position.set(-14,11,15),s.camera.zoom=17,s.camera.lookAt(0,0,0)):!0===i&&(s.camera.position.set(-5.16,19.9,8.7),s.camera.zoom=17,s.camera.lookAt(0,0,0));s.camera.updateProjectionMatrix(),u.current=l,d.current=!1}},[l,r,i,s.camera]),null});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{ref:E,style:{overscrollBehavior:"none",touchAction:"none"},children:(0,s.jsxs)(l.Canvas,{dpr:1.5,orthographic:!0,camera:{position:[-14,11,15],zoom:17},frameloop:!0===I||T||ee||H?"always":"demand",gl:{antialias:!0,powerPreference:"high-performance",stencil:!1,depth:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!1},onCreated:e=>{let{gl:t,scene:r,camera:i,size:n}=e;t.toneMapping=g.ACESFilmicToneMapping,t.toneMappingExposure=1,t.outputColorSpace=g.SRGBColorSpace,t.shadowMap.enabled=!0,t.shadowMap.type=g.PCFSoftShadowMap,i&&i.isOrthographicCamera&&(i.near=.1,i.far=2e3)},style:{background:"#1C1C1C",height:"100vh",overscrollBehavior:"none",touchAction:"none"},children:[(0,s.jsx)(ei,{}),(0,s.jsx)(et,{}),(0,s.jsx)(er,{}),(0,s.jsxs)(a.Suspense,{fallback:null,children:[(0,s.jsxs)("group",{rotation:[0,Math.PI/2,0],position:[0,-10,0],children:[(0,s.jsx)(i5,{show:r,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(i4,{show:n,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(i7,{show:p,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(i9,{show:v,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(ne,{show:y,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(nt,{show:b,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(nr,{show:j,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(ni,{show:z,isZoomState:B,isMouseDragging:U,isAxio:K,freeView:I}),(0,s.jsx)(_,{}),(0,s.jsx)(M,{})]}),(0,s.jsx)(d.default,{autoRotate:!0===I&&!T,enableRotate:!T,enableZoom:!T,enablePan:!T,autoRotateSpeed:.2,enableDamping:!0,dampingFactor:.05,makeDefault:!1,minDistance:500,maxDistance:1/0,minZoom:.1,maxZoom:100},T?"capture":"default"),(0,s.jsx)(en,{}),(0,s.jsx)(eo,{}),(0,s.jsx)(f,{}),(0,s.jsx)(es,{isZoom:B,draggingMode:K,guiMode:U,disableRotation:G,sceneRotation:I})]})]})})})}],73965)}]);

//# sourceMappingURL=d416c52c1d93322e.js.map